"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:function(Rt,d,e){e.d(d,{r:function(){return zt}});var n=e(53907),l=e(30705),u=e(56563),m=e(2784),a=e(77277),c=e(80236),_=e(73557),b=e(39857),t=e(43642),E=e(80079),h=e(90941),$=e(32915),L=e(40562),k=e(21853),z=e(60744),y=e(66569),S=e(30254),x=e(13384),f=e(15933),T=e(58838),C=e(86737),P=e(4989),p=e(44407),Z=e(18628),F=e(84219),Me=e(98685),Ee=e(39781),Xe=e(39412),Bt=e(73689),st=e(48032),jt=e(34505);const Zt={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},J={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function an(Be){var Pt;const{colors:dt,shape:hn,options:dn}=Be,it=`linear-gradient(90deg, ${(dt.length===1?[dt[0],dt[0]]:dt).join(", ")})`,St=`${hn},  ${it}`,En=(Pt=dn==null?void 0:dn.fontColor)!=null?Pt:"#FFFFFF";return{colors:dt,shape:hn,backgroundImage:St,fontColor:En}}const Re={home:an({colors:J.teal,shape:Zt.wave}),documentation:an({colors:J.pinkSea,shape:Zt.wave2}),tool:an({colors:J.purpleSky,shape:Zt.round}),service:an({colors:J.marineBlue,shape:Zt.wave}),website:an({colors:J.veryBlue,shape:Zt.wave}),library:an({colors:J.rubyRed,shape:Zt.wave}),other:an({colors:J.darkGrey,shape:Zt.wave}),app:an({colors:J.toastyOrange,shape:Zt.wave}),apis:an({colors:J.teal,shape:Zt.wave2}),card:an({colors:J.greens,shape:Zt.wave})},xe=16,O='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif';function Ze(Be){const{palette:Pt,htmlFontSize:dt=xe,fontFamily:hn=O,defaultPageTheme:dn,pageTheme:bn=Re}=Be;if(!bn[dn])throw new Error(`${dn} is not defined in pageTheme.`);return{palette:Pt,props:{MuiGrid:{spacing:2},MuiSwitch:{color:"primary"}},typography:{htmlFontSize:dt,fontFamily:hn,h6:{fontWeight:700,fontSize:20,marginBottom:2},h5:{fontWeight:700,fontSize:24,marginBottom:4},h4:{fontWeight:700,fontSize:28,marginBottom:6},h3:{fontSize:32,fontWeight:700,marginBottom:6},h2:{fontSize:40,fontWeight:700,marginBottom:8},h1:{fontSize:54,fontWeight:700,marginBottom:10}},page:bn[dn],getPageTheme:({themeId:it})=>{var St;return(St=bn[it])!=null?St:bn[dn]}}}function ce(Be){return{MuiCssBaseline:{"@global":{html:{height:"100%",fontFamily:Be.typography.fontFamily},body:{height:"100%",fontFamily:Be.typography.fontFamily,"overscroll-behavior-y":"none"},a:{color:"inherit",textDecoration:"none"}}},MuiTableRow:{root:{"&:nth-of-type(odd)":{backgroundColor:Be.palette.background.default}},hover:{"&:hover":{cursor:"pointer"}},head:{"&:nth-of-type(odd)":{backgroundColor:Be.palette.background.paper}}},MuiTableCell:{root:{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:Be.spacing(3,2,3,2.5),borderBottom:0},sizeSmall:{padding:Be.spacing(1.5,2,1.5,2.5)},head:{wordBreak:"break-word",overflow:"hidden",fontWeight:"normal",lineHeight:"1"}},MuiTabs:{root:{minHeight:24}},MuiTab:{root:{color:Be.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,st.darken)(Be.palette.link,.3),background:(0,st.lighten)(Be.palette.link,.95)},[Be.breakpoints.up("md")]:{minWidth:120,fontSize:Be.typography.pxToRem(14),fontWeight:500}},textColorPrimary:{color:Be.palette.link}},MuiTableSortLabel:{root:{color:"inherit","&:hover":{color:"inherit"}},active:{fontWeight:"bold"}},MuiListItemText:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},MuiButton:{text:{padding:void 0}},MuiChip:{root:{backgroundColor:"#D9D9D9",marginRight:Be.spacing(1),marginBottom:Be.spacing(1),color:Be.palette.grey[900]},outlined:{color:Be.palette.text.primary},label:{lineHeight:`${Be.spacing(2.5)}px`,fontWeight:Be.typography.fontWeightMedium,fontSize:`${Be.spacing(1.75)}px`},labelSmall:{fontSize:`${Be.spacing(1.5)}px`},deleteIcon:{color:Be.palette.grey[500],width:`${Be.spacing(3)}px`,height:`${Be.spacing(3)}px`,margin:`0 ${Be.spacing(.75)}px 0 -${Be.spacing(.75)}px`},deleteIconSmall:{width:`${Be.spacing(2)}px`,height:`${Be.spacing(2)}px`,margin:`0 ${Be.spacing(.5)}px 0 -${Be.spacing(.5)}px`}},MuiCard:{root:{display:"flex",flexDirection:"column"}},MuiCardHeader:{root:{paddingBottom:0}},MuiCardContent:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}},MuiCardActions:{root:{justifyContent:"flex-end"}}}}function R(Be){const Pt=Ze(Be),dt=(0,Bt.Z)(Pt),hn=ce(dt);return{...dt,overrides:hn}}const N=R({palette:{type:"light",background:{default:"#F8F8F8"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:jt.Z.A700,navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:Re}),ee=R({palette:{type:"dark",background:{default:"#333333"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:jt.Z.A700,navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:Re});var Pe=e(98192),Ge=e(15222),Ct=e(41547),ht=e(87561);const It=[(0,l.ni)({api:l.NW,deps:{configApi:l.Ds},factory:({configApi:Be})=>n.pM.compile(`${Be.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,l.ni)({api:l.$v,deps:{},factory:()=>new n.CX}),(0,l.ni)({api:l.v_,deps:{},factory:()=>new n.gN}),(0,l.ni)({api:l.VE,deps:{alertApi:l.$v},factory:({alertApi:Be})=>{const Pt=new n.KN(Be,new n.gr);return n.Jv.forward(Pt,{hidden:!1}),Pt}}),(0,l.ni)({api:l.E6,deps:{errorApi:l.VE},factory:({errorApi:Be})=>n.CJ.create({errorApi:Be})}),(0,l.ni)({api:l.gP,deps:{configApi:l.Ds,identityApi:l.$4,discoveryApi:l.NW},factory:({configApi:Be,identityApi:Pt,discoveryApi:dt})=>(0,n.jJ)({middleware:[n.II.resolvePluginProtocol({discoveryApi:dt}),n.II.injectIdentityAuth({identityApi:Pt,config:Be})]})}),(0,l.ni)({api:l.ZM,deps:{},factory:()=>new n.YM}),(0,l.ni)({api:l.Kp,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:Be,oauthRequestApi:Pt,configApi:dt})=>n.eE.create({configApi:dt,discoveryApi:Be,oauthRequestApi:Pt,environment:dt.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.p_,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:Be,oauthRequestApi:Pt,configApi:dt})=>n._i.create({configApi:dt,discoveryApi:Be,oauthRequestApi:Pt,environment:dt.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.F4,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:Be,oauthRequestApi:Pt,configApi:dt})=>n.Td.create({configApi:dt,discoveryApi:Be,oauthRequestApi:Pt,defaultScopes:["read:user"],environment:dt.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.D,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:Be,oauthRequestApi:Pt,configApi:dt})=>n.sn.create({configApi:dt,discoveryApi:Be,oauthRequestApi:Pt,environment:dt.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.ux,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:Be,oauthRequestApi:Pt,configApi:dt})=>n.aq.create({configApi:dt,discoveryApi:Be,oauthRequestApi:Pt,environment:dt.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.gW,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:Be,oauthRequestApi:Pt,configApi:dt})=>n.$_.create({configApi:dt,discoveryApi:Be,oauthRequestApi:Pt,environment:dt.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.bq,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:Be,oauthRequestApi:Pt,configApi:dt})=>n.xP.create({configApi:dt,discoveryApi:Be,oauthRequestApi:Pt,defaultScopes:["team"],environment:dt.getOptionalString("auth.environment")})}),(0,l.ni)({api:l.Km,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:Be,oauthRequestApi:Pt,configApi:dt})=>n.C4.create({configApi:dt,discoveryApi:Be,oauthRequestApi:Pt,defaultScopes:["REPO_READ"]})}),(0,l.ni)({api:l.uB,deps:{discoveryApi:l.NW,oauthRequestApi:l.ZM,configApi:l.Ds},factory:({discoveryApi:Be,oauthRequestApi:Pt,configApi:dt})=>n.uC.create({configApi:dt,discoveryApi:Be,oauthRequestApi:Pt,environment:dt.getOptionalString("auth.environment")})}),(0,l.ni)({api:u.RV,deps:{discovery:l.NW,identity:l.$4,config:l.Ds},factory:({config:Be,discovery:Pt,identity:dt})=>u.iM.create({config:Be,discovery:Pt,identity:dt})})];function q({children:Be}){return(0,_.GV)()?m.createElement(m.Fragment,null,Be):m.createElement(_.VA,null,Be)}const oe=()=>m.createElement(c.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),Ae=({step:Be,error:Pt})=>{let dt="";return Be==="load-config"?dt=`The configuration failed to load, someone should have a look at this error: ${Pt.message}`:Be==="load-chunk"&&(dt=`Lazy loaded chunk failed to load, try to reload the page: ${Pt.message}`),m.createElement(q,null,m.createElement(c.mf,{status:"501",statusMessage:dt}))},Je=({error:Be,resetError:Pt,plugin:dt})=>m.createElement(c.yu,{title:`Error in ${dt==null?void 0:dt.getId()}`,defaultExpanded:!0,error:Be},m.createElement(a.Z,{variant:"outlined",onClick:Pt},"Retry")),ct={Progress:c.Ex,Router:b.VK,NotFoundErrorPage:oe,BootErrorPage:Ae,ErrorBoundaryFallback:Je},At={brokenImage:E.Z,catalog:Z.Z,scaffolder:$.Z,techdocs:L.Z,search:k.Z,chat:z.Z,dashboard:y.Z,docs:S.Z,email:x.Z,github:T.Z,group:F.Z,help:C.Z,"kind:api":f.Z,"kind:component":p.Z,"kind:domain":t.Z,"kind:group":F.Z,"kind:location":P.Z,"kind:system":h.Z,"kind:user":Me.Z,"kind:resource":Xe.Z,user:Me.Z,warning:Ee.Z},qt=[{id:"light",title:"Light Theme",variant:"light",icon:m.createElement(Ge.Z,null),Provider:({children:Be})=>m.createElement(Ct.Z,{theme:N},m.createElement(ht.ZP,null,Be))},{id:"dark",title:"Dark Theme",variant:"dark",icon:m.createElement(Pe.Z,null),Provider:({children:Be})=>m.createElement(Ct.Z,{theme:ee},m.createElement(ht.ZP,null,Be))}];function zt(Be){var Pt,dt,hn,dn;return(0,n.bg)({...Be,apis:(Pt=Be==null?void 0:Be.apis)!=null?Pt:[],bindRoutes:Be==null?void 0:Be.bindRoutes,components:{...ct,...Be==null?void 0:Be.components},configLoader:Be==null?void 0:Be.configLoader,defaultApis:It,icons:{...At,...Be==null?void 0:Be.icons},plugins:(dt=Be==null?void 0:Be.plugins)!=null?dt:[],featureFlags:(hn=Be==null?void 0:Be.featureFlags)!=null?hn:[],themes:(dn=Be==null?void 0:Be.themes)!=null?dn:qt})}},88285:function(Rt,d,e){e.d(d,{MS:function(){return _},mk:function(){return b},n3:function(){return a}});var n=e(34520),l=e(32272),u=e(96279),m=e.n(u);const a=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function c(t){return!t.cursor}class _{constructor(E){this.discoveryApi=E.discoveryApi,this.fetchApi=E.fetchApi||{fetch:m()}}async getEntityAncestors(E,h){const{kind:$,namespace:L,name:k}=(0,n.of)(E.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent($)}/${encodeURIComponent(L)}/${encodeURIComponent(k)}/ancestry`,h)}async getLocationById(E,h){return await this.requestOptional("GET",`/locations/${encodeURIComponent(E)}`,h)}async getEntities(E,h){const{filter:$=[],fields:L=[],order:k,offset:z,limit:y,after:S}=E!=null?E:{},x=this.getParams($);if(L.length&&x.push(`fields=${L.map(encodeURIComponent).join(",")}`),k)for(const P of[k].flat())P&&x.push(`order=${encodeURIComponent(P.order)}:${encodeURIComponent(P.field)}`);z!==void 0&&x.push(`offset=${z}`),y!==void 0&&x.push(`limit=${y}`),S!==void 0&&x.push(`after=${encodeURIComponent(S)}`);const f=x.length?`?${x.join("&")}`:"",T=await this.requestRequired("GET",`/entities${f}`,h),C=(P,p)=>{var Z,F;if(((Z=P.metadata)==null?void 0:Z.name)===void 0||P.kind===void 0||((F=p.metadata)==null?void 0:F.name)===void 0||p.kind===void 0)return 0;const Me=(0,n.eE)(P),Ee=(0,n.eE)(p);return Me<Ee?-1:Me>Ee?1:0};return{items:T.sort(C)}}async getEntitiesByRefs(E,h){var $;const L={entityRefs:E.entityRefs};($=E.fields)!=null&&$.length&&(L.fields=E.fields);const z=`${await this.discoveryApi.getBaseUrl("catalog")}/entities/by-refs`,y=await this.fetchApi.fetch(z,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify(L)});if(!y.ok)throw await l.VL.fromResponse(y);const{items:S}=await y.json();return{items:S.map(x=>x!=null?x:void 0)}}async queryEntities(E={},h){var $,L;const k=[];if(c(E)){const{fields:y=[],filter:S,limit:x,orderFields:f,fullTextFilter:T}=E;k.push(...this.getParams(S)),x!==void 0&&k.push(`limit=${x}`),f!==void 0&&(Array.isArray(f)?f:[f]).forEach(({field:P,order:p})=>k.push(`orderField=${P},${p}`)),y.length&&k.push(`fields=${y.map(encodeURIComponent).join(",")}`);const C=($=T==null?void 0:T.term)==null?void 0:$.trim();C&&k.push(`fullTextFilterTerm=${C}`),(L=T==null?void 0:T.fields)!=null&&L.length&&k.push(`fullTextFilterFields=${T.fields.join(",")}`)}else{const{fields:y=[],limit:S,cursor:x}=E;k.push(`cursor=${x}`),S!==void 0&&k.push(`limit=${S}`),y.length&&k.push(`fields=${y.map(encodeURIComponent).join(",")}`)}const z=k.length?`?${k.join("&")}`:"";return this.requestRequired("GET",`/entities/by-query${z}`,h)}async getEntityByRef(E,h){const{kind:$,namespace:L,name:k}=(0,n.of)(E);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent($)}/${encodeURIComponent(L)}/${encodeURIComponent(k)}`,h)}async getEntityByName(E,h){const{kind:$,namespace:L="default",name:k}=E;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent($)}/${encodeURIComponent(L)}/${encodeURIComponent(k)}`,h)}async refreshEntity(E,h){const $=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify({entityRef:E})});if($.status!==200)throw new Error(await $.text())}async getEntityFacets(E,h){const{filter:$=[],facets:L}=E,k=this.getParams($);for(const y of L)k.push(`facet=${encodeURIComponent(y)}`);const z=k.length?`?${k.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${z}`,h)}async addLocation(E,h){const{type:$="url",target:L,dryRun:k}=E,z=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${k?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(h==null?void 0:h.token)&&{Authorization:`Bearer ${h==null?void 0:h.token}`}},method:"POST",body:JSON.stringify({type:$,target:L})});if(z.status!==201)throw new Error(await z.text());const{location:y,entities:S,exists:x}=await z.json();if(!y)throw new Error(`Location wasn't added: ${L}`);return{location:y,entities:S,exists:x}}async getLocationByRef(E,h){return(await this.requestRequired("GET","/locations",h)).map(L=>L.data).find(L=>E===(0,n.NZ)(L))}async removeLocationById(E,h){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(E)}`,h)}async removeEntityByUid(E,h){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(E)}`,h)}async validateEntity(E,h,$){const L=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/validate-entity`,{headers:{"Content-Type":"application/json",...($==null?void 0:$.token)&&{Authorization:`Bearer ${$==null?void 0:$.token}`}},method:"POST",body:JSON.stringify({entity:E,location:h})});if(L.ok)return{valid:!0};if(L.status!==400)throw await l.VL.fromResponse(L);const{errors:k=[]}=await L.json();return{valid:!1,errors:k}}async requestIgnored(E,h,$){const L=`${await this.discoveryApi.getBaseUrl("catalog")}${h}`,k=$!=null&&$.token?{Authorization:`Bearer ${$.token}`}:{},z=await this.fetchApi.fetch(L,{method:E,headers:k});if(!z.ok)throw await l.VL.fromResponse(z)}async requestRequired(E,h,$){const L=`${await this.discoveryApi.getBaseUrl("catalog")}${h}`,k=$!=null&&$.token?{Authorization:`Bearer ${$.token}`}:{},z=await this.fetchApi.fetch(L,{method:E,headers:k});if(!z.ok)throw await l.VL.fromResponse(z);return z.json()}async requestOptional(E,h,$){const L=`${await this.discoveryApi.getBaseUrl("catalog")}${h}`,k=$!=null&&$.token?{Authorization:`Bearer ${$.token}`}:{},z=await this.fetchApi.fetch(L,{method:E,headers:k});if(!z.ok){if(z.status===404)return;throw await l.VL.fromResponse(z)}return await z.json()}getParams(E=[]){const h=[];for(const $ of[E].flat()){const L=[];for(const[k,z]of Object.entries($))for(const y of[z].flat())y===a?L.push(encodeURIComponent(k)):typeof y=="string"&&L.push(`${encodeURIComponent(k)}=${encodeURIComponent(y)}`);L.length&&h.push(`filter=${L.join(",")}`)}return h}}const b="backstage.io/catalog-processing"},34520:function(Rt,d,e){e.d(d,{$1:function(){return ut},CV:function(){return W},Dg:function(){return gt},In:function(){return ge},KS:function(){return Zn},M6:function(){return gr},M_:function(){return at},NZ:function(){return nr},Ou:function(){return ir},P1:function(){return Jn},S4:function(){return Te},Tf:function(){return z},X9:function(){return Et},Zj:function(){return Dt},_b:function(){return Cn},aS:function(){return tr},cz:function(){return jn},eE:function(){return p},hr:function(){return er},iB:function(){return C},l2:function(){return k},nP:function(){return en},of:function(){return P},q1:function(){return ur},w$:function(){return fn},wI:function(){return fe},wP:function(){return Qn},y$:function(){return X},zG:function(){return L}});var n=e(76635),l=e.n(n),u=e(53911),m=e.n(u);function a(o){return o.kind.toLocaleUpperCase("en-US")==="API"}function c(o){return o.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function _(o){return o.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function b(o){return o.kind.toLocaleUpperCase("en-US")==="GROUP"}function t(o){return o.kind.toLocaleUpperCase("en-US")==="LOCATION"}function E(o){return o.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function h(o){return o.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function $(o){return o.kind.toLocaleUpperCase("en-US")==="USER"}const L="default",k="backstage.io/view-url",z="backstage.io/edit-url",y="kubernetes.io/api-server",S="kubernetes.io/api-server-certificate-authority",x="kubernetes.io/auth-provider";class f{constructor(i=L){this.namespace=i}async enforce(i){return i.metadata.namespace?i:lodash.merge({metadata:{namespace:this.namespace}},i)}}function T(o){let i=o.indexOf(":");const g=o.indexOf("/");g!==-1&&g<i&&(i=-1);const M=i===-1?void 0:o.slice(0,i),ve=g===-1?void 0:o.slice(i+1,g),Fe=o.slice(Math.max(i+1,g+1));if(M===""||ve===""||Fe==="")throw new TypeError(`Entity reference "${o}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:M,namespace:ve,name:Fe}}function C(o){return{kind:o.kind,namespace:o.metadata.namespace||L,name:o.metadata.name}}function P(o,i){var g,M,ve,Fe;if(!o)throw new Error("Entity reference must not be empty");const rt=i==null?void 0:i.defaultKind,xt=(i==null?void 0:i.defaultNamespace)||L;let Wt,cn,mn;if(typeof o=="string"){const Tn=T(o);Wt=(g=Tn.kind)!=null?g:rt,cn=(M=Tn.namespace)!=null?M:xt,mn=Tn.name}else Wt=(ve=o.kind)!=null?ve:rt,cn=(Fe=o.namespace)!=null?Fe:xt,mn=o.name;if(Wt)if(cn){if(!mn){const Tn=JSON.stringify(o);throw new Error(`Entity reference ${Tn} had missing or empty name`)}}else{const Tn=JSON.stringify(o);throw new Error(`Entity reference ${Tn} had missing or empty namespace`)}else{const Tn=JSON.stringify(o);throw new Error(`Entity reference ${Tn} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Wt,namespace:cn,name:mn}}function p(o){var i,g;let M,ve,Fe;return"metadata"in o?(M=o.kind,ve=(i=o.metadata.namespace)!=null?i:L,Fe=o.metadata.name):(M=o.kind,ve=(g=o.namespace)!=null?g:L,Fe=o.name),`${M.toLocaleLowerCase("en-US")}:${ve.toLocaleLowerCase("en-US")}/${Fe.toLocaleLowerCase("en-US")}`}class Z{constructor(i){const{kind:g,namespace:M,name:ve}=P(i,{defaultKind:"Group",defaultNamespace:L});if(g.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=p({kind:g,namespace:M,name:ve})}async enforce(i){if(i.kind!=="Group")return i;const g=i;return g.spec.parent||p(g)!==this.parentRef&&(g.spec.parent=this.parentRef),g}}class F{static isValidPrefixAndOrSuffix(i,g,M,ve){if(typeof i!="string")return!1;const Fe=i.split(g);return Fe.length===1?ve(Fe[0]):Fe.length===2?M(Fe[0])&&ve(Fe[1]):!1}static isJsonSafe(i){try{return l().isEqual(i,JSON.parse(JSON.stringify(i)))}catch{return!1}}static isValidDnsSubdomain(i){return typeof i=="string"&&i.length>=1&&i.length<=253&&i.split(".").every(F.isValidDnsLabel)}static isValidDnsLabel(i){return typeof i=="string"&&i.length>=1&&i.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(i)}static isValidTag(i){return typeof i=="string"&&i.length>=1&&i.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(i)}static isValidUrl(i){if(typeof i!="string")return!1;try{return new URL(i),!0}catch{return!1}}static isValidString(i){var g;return typeof i=="string"&&((g=i==null?void 0:i.trim())==null?void 0:g.length)>=1}static isNonEmptyString(i){var g;return typeof i=="string"&&((g=i==null?void 0:i.trim())==null?void 0:g.length)>=1}}var Me="http://json-schema.org/draft-07/schema",Ee="EntityEnvelope",Xe="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",Bt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],st="object",jt=["apiVersion","kind","metadata"],Zt=!0,J={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},an={$schema:Me,$id:Ee,description:Xe,examples:Bt,type:st,required:jt,additionalProperties:Zt,properties:J},Re="http://json-schema.org/draft-07/schema",xe="Entity",O="The parts of the format that's common to all versions/kinds of entity.",Ze=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],ce="object",R=["apiVersion","kind","metadata"],N=!1,ee={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},Pe={$schema:Re,$id:xe,description:O,examples:Ze,type:ce,required:R,additionalProperties:N,properties:ee},Ge="http://json-schema.org/draft-07/schema",Ct="EntityMeta",ht="Metadata fields common to all versions/kinds of entity.",It=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],q="object",oe=["name"],Ae=!0,Je={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},ct={$schema:Ge,$id:Ct,description:ht,examples:It,type:q,required:oe,additionalProperties:Ae,properties:Je},At="http://json-schema.org/draft-07/schema",qt="common",zt="object",Be="Common definitions to import from other schemas",Pt={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","target"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference"},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},dt={$schema:At,$id:qt,type:zt,description:Be,definitions:Pt};const hn=new Map,dn=[an,Pe,ct,dt];function bn(o){if(!(o!=null&&o.length))throw new TypeError("Unknown error");const i=o[0];throw new TypeError(`${i.instancePath||"<root>"} ${i.message}${i.params?` - ${Object.entries(i.params).map(([g,M])=>`${g}: ${M}`).join(", ")}`:""}`)}function it(o,i={}){var g;const M=(g=i==null?void 0:i.disableCache)!=null?g:!1,ve=M?"":JSON.stringify(o);if(!M){const Wt=hn.get(ve);if(Wt)return Wt}const Fe=St(o),rt=new(m())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Fe.length&&rt.addSchema(Fe,void 0,void 0,!0);const xt=rt.compile(o);return M||hn.set(ve,xt),xt}function St(o){if(typeof o!="object")return[];const i=new Set;o.$id&&i.add(o.$id);const g=new Array,M=[o];for(;M.length;){const ve=M.pop();for(const Fe of En(ve))if(!i.has(Fe)){i.add(Fe);const rt=dn.find(xt=>xt.$id===Fe);rt&&(g.push(rt),M.push(rt))}}return g}function*En(o){const i=[o];for(;i.length;){const g=i.pop();if(typeof g=="object"&&g)for(const[M,ve]of Object.entries(g))M==="$ref"&&typeof ve=="string"?yield ve.split("#")[0]:i.push(ve)}}function ln(o){const i=it(o||an);return g=>{if(i(g)===!0)return g;throw bn(i.errors)}}function fe(o){const i=it(o);return g=>{var M;if(i(g)===!0)return g;const Fe=(M=i.errors)==null?void 0:M.filter(rt=>["/kind","/apiVersion"].includes(rt.instancePath));if(Fe!=null&&Fe.length&&Fe.every(rt=>rt.keyword==="enum"))return!1;throw bn(i.errors)}}function V(o){const i=it(o||Pe);return g=>{if(i(g)===!0)return g;throw bn(i.errors)}}class X{static isValidApiVersion(i){return F.isValidPrefixAndOrSuffix(i,"/",F.isValidDnsSubdomain,g=>g.length>=1&&g.length<=63&&/^[a-z0-9A-Z]+$/.test(g))}static isValidKind(i){return typeof i=="string"&&i.length>=1&&i.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(i)}static isValidObjectName(i){return typeof i=="string"&&i.length>=1&&i.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(i)}static isValidNamespace(i){return F.isValidDnsLabel(i)}static isValidLabelKey(i){return F.isValidPrefixAndOrSuffix(i,"/",F.isValidDnsSubdomain,X.isValidObjectName)}static isValidLabelValue(i){return i===""||X.isValidObjectName(i)}static isValidAnnotationKey(i){return F.isValidPrefixAndOrSuffix(i,"/",F.isValidDnsSubdomain,X.isValidObjectName)}static isValidAnnotationValue(i){return typeof i=="string"}}const ue={isValidApiVersion:X.isValidApiVersion,isValidKind:X.isValidKind,isValidEntityName:X.isValidObjectName,isValidNamespace:X.isValidNamespace,isValidLabelKey:X.isValidLabelKey,isValidLabelValue:X.isValidLabelValue,isValidAnnotationKey:X.isValidAnnotationKey,isValidAnnotationValue:X.isValidAnnotationValue,isValidTag:o=>typeof o=="string"&&o.length>=1&&o.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(o)};function ge(o={}){return{...ue,...o}}class Se{constructor(i=ge()){this.validators=i}async enforce(i){var g,M,ve,Fe,rt,xt,Wt;function cn(Sn,Gn,K){if(Gn==null)throw new Error(`${Sn} must have a value`);let ne;try{ne=K(Gn)}catch(he){throw new Error(`${Sn} could not be validated, ${he}`)}if(!ne){let he;switch(K.name){case"isValidLabelValue":case"isValidObjectName":he="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":he="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":he="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":he="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":he="a string";break;case"isValidKind":he="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":he="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":he="a non empty string";break;default:he=void 0;break}const Ye=he?` expected ${he} but found "${Gn}".`:"";throw new Error(`"${Sn}" is not valid;${Ye} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function mn(Sn,Gn,K){return Gn===void 0||cn(Sn,Gn,K)}cn("apiVersion",i.apiVersion,this.validators.isValidApiVersion),cn("kind",i.kind,this.validators.isValidKind),cn("metadata.name",i.metadata.name,this.validators.isValidEntityName),mn("metadata.namespace",i.metadata.namespace,this.validators.isValidNamespace);for(const[Sn,Gn]of Object.entries((g=i.metadata.labels)!=null?g:[]))cn(`labels.${Sn}`,Sn,this.validators.isValidLabelKey),cn(`labels.${Sn}`,Gn,this.validators.isValidLabelValue);for(const[Sn,Gn]of Object.entries((M=i.metadata.annotations)!=null?M:[]))cn(`annotations.${Sn}`,Sn,this.validators.isValidAnnotationKey),cn(`annotations.${Sn}`,Gn,this.validators.isValidAnnotationValue);const Tn=(ve=i.metadata.tags)!=null?ve:[];for(let Sn=0;Sn<Tn.length;++Sn)cn(`tags.${Sn}`,Tn[Sn],this.validators.isValidTag);const kn=(Fe=i.metadata.links)!=null?Fe:[];for(let Sn=0;Sn<kn.length;++Sn)cn(`links.${Sn}.url`,(rt=kn[Sn])==null?void 0:rt.url,F.isValidUrl),mn(`links.${Sn}.title`,(xt=kn[Sn])==null?void 0:xt.title,F.isNonEmptyString),mn(`links.${Sn}.icon`,(Wt=kn[Sn])==null?void 0:Wt.icon,X.isValidObjectName);return i}}const ot=null;class tt{constructor(i=ot){this.knownFields=i}async enforce(i){for(const g of Object.keys(i))if(!this.knownFields.includes(g))throw new Error(`Unknown field ${g}`);return i}}class pt{async enforce(i){if(!this.validate){const ve=new Ajv({allowUnionTypes:!0});this.validate=ve.addSchema([dt,ct],void 0,void 0,!0).compile(Pe)}if(this.validate(i)===!0)return i;const[M]=this.validate.errors||[];throw M?new Error(`Malformed envelope, ${M.instancePath||"<root>"} ${M.message}`):new Error("Malformed envelope, Unknown error")}}class Lt{constructor(i){this.policies=i}async enforce(i){let g=i;for(const M of this.policies){const ve=await M.enforce(g);if(!ve)throw new Error(`Policy ${M.constructor.name} did not return a result`);g=ve}return g}}class de{constructor(i){this.policies=i}async enforce(i){for(const g of this.policies){const M=await g.enforce(i);if(M)return M}throw new Error("The entity did not match any known policy")}}const re={allOf(o){return new Lt(o)},oneOf(o){return new de(o)}};var A="http://json-schema.org/draft-07/schema",j="ApiV1alpha1",Q="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",me=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],We=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],Ke={$schema:A,$id:j,description:Q,examples:me,allOf:We};function He(o){let i;return{async check(g){return i||(i=fe(o)),i(g)===g}}}const mt=He(Ke);var se="http://json-schema.org/draft-07/schema",pe="ComponentV1alpha1",ye='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',we=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],nt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],$t={$schema:se,$id:pe,description:ye,examples:we,allOf:nt};const Ut=He($t);var wt="http://json-schema.org/draft-07/schema",sn="DomainV1alpha1",vn="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Le=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],$e=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],be={$schema:wt,$id:sn,description:vn,examples:Le,allOf:$e};const Qe=He(be);var lt="http://json-schema.org/draft-07/schema",kt="GroupV1alpha1",Mt="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",nn=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],gn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],An={$schema:lt,$id:kt,description:Mt,examples:nn,allOf:gn};const Pn=He(An);var Bn="http://json-schema.org/draft-07/schema",Un="LocationV1alpha1",zn="A location is a marker that references other places to look for catalog data.",Nn=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Ve=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],_e={$schema:Bn,$id:Un,description:zn,examples:Nn,allOf:Ve};const Ne=He(_e),Te="ownedBy",ut="ownerOf",gt="consumesApi",Et="apiConsumedBy",at="providesApi",Dt="apiProvidedBy",en="dependsOn",fn="dependencyOf",Cn="parentOf",Qn="childOf",er="memberOf",Zn="hasMember",jn="partOf",tr="hasPart";var D="http://json-schema.org/draft-07/schema",I="ResourceV1alpha1",G="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",ie=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Ie=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],qe={$schema:D,$id:I,description:G,examples:ie,allOf:Ie};const B=He(qe);var H="http://json-schema.org/draft-07/schema",Ce="SystemV1alpha1",je="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",Tt=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Kt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Vt={$schema:H,$id:Ce,description:je,examples:Tt,allOf:Kt};const yn=He(Vt);var Rn="http://json-schema.org/draft-07/schema",un="UserV1alpha1",Vn="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",xn=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Yn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],Fn={$schema:Rn,$id:un,description:Vn,examples:xn,allOf:Yn};const Xn=He(Fn),Jn="backstage.io/managed-by-location",ur="backstage.io/managed-by-origin-location",gr="backstage.io/source-location",dr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function ir(o){if(typeof o!="string")throw new TypeError(`Unable to parse location ref '${o}', unexpected argument ${typeof o}`);const i=o.indexOf(":");if(i<0)throw new TypeError(`Unable to parse location ref '${o}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const g=o.substring(0,i).trim(),M=o.substring(i+1).trim();if(!g||!M)throw new TypeError(`Unable to parse location ref '${o}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(g==="http"||g==="https")throw new TypeError(`Invalid location ref '${o}', please prefix it with 'url:', e.g. 'url:${o}'`);if(dr.test(M))throw new TypeError(`Invalid location ref '${o}', target is a javascript: URL`);return{type:g,target:M}}function nr(o){const{type:i,target:g}=o;if(i){if(!g)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(dr.test(g))throw new TypeError(`Invalid location ref '${i}:${g}', target is a javascript: URL`);return`${i}:${g}`}function W(o){var i,g,M,ve,Fe;const rt=(Fe=(g=(i=o.metadata)==null?void 0:i.annotations)==null?void 0:g[gr])!=null?Fe:(ve=(M=o.metadata)==null?void 0:M.annotations)==null?void 0:ve[Jn];if(!rt)throw new Error(`Entity '${p(o)}' is missing location`);return ir(rt)}},53911:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.MissingRefError=d.ValidationError=d.CodeGen=d.Name=d.nil=d.stringify=d.str=d._=d.KeywordCxt=void 0;const n=e(61889),l=e(57993),u=e(99908),m=e(51020),a=["/properties"],c="http://json-schema.org/draft-07/schema";class _ extends n.default{_addVocabularies(){super._addVocabularies(),l.default.forEach(L=>this.addVocabulary(L)),this.opts.discriminator&&this.addKeyword(u.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const L=this.opts.$data?this.$dataMetaSchema(m,a):m;this.addMetaSchema(L,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}Rt.exports=d=_,Object.defineProperty(d,"__esModule",{value:!0}),d.default=_;var b=e(4371);Object.defineProperty(d,"KeywordCxt",{enumerable:!0,get:function(){return b.KeywordCxt}});var t=e(82481);Object.defineProperty(d,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(d,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(d,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(d,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(d,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});var E=e(14319);Object.defineProperty(d,"ValidationError",{enumerable:!0,get:function(){return E.default}});var h=e(30283);Object.defineProperty(d,"MissingRefError",{enumerable:!0,get:function(){return h.default}})},91475:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.regexpCode=d.getEsmExportName=d.getProperty=d.safeStringify=d.stringify=d.strConcat=d.addCodeArg=d.str=d._=d.nil=d._Code=d.Name=d.IDENTIFIER=d._CodeOrName=void 0;class e{}d._CodeOrName=e,d.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(S){if(super(),!d.IDENTIFIER.test(S))throw new Error("CodeGen: name must be a valid identifier");this.str=S}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}d.Name=n;class l extends e{constructor(S){super(),this._items=typeof S=="string"?[S]:S}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const S=this._items[0];return S===""||S==='""'}get str(){var S;return(S=this._str)!==null&&S!==void 0?S:this._str=this._items.reduce((x,f)=>`${x}${f}`,"")}get names(){var S;return(S=this._names)!==null&&S!==void 0?S:this._names=this._items.reduce((x,f)=>(f instanceof n&&(x[f.str]=(x[f.str]||0)+1),x),{})}}d._Code=l,d.nil=new l("");function u(y,...S){const x=[y[0]];let f=0;for(;f<S.length;)c(x,S[f]),x.push(y[++f]);return new l(x)}d._=u;const m=new l("+");function a(y,...S){const x=[$(y[0])];let f=0;for(;f<S.length;)x.push(m),c(x,S[f]),x.push(m,$(y[++f]));return _(x),new l(x)}d.str=a;function c(y,S){S instanceof l?y.push(...S._items):S instanceof n?y.push(S):y.push(E(S))}d.addCodeArg=c;function _(y){let S=1;for(;S<y.length-1;){if(y[S]===m){const x=b(y[S-1],y[S+1]);if(x!==void 0){y.splice(S-1,3,x);continue}y[S++]="+"}S++}}function b(y,S){if(S==='""')return y;if(y==='""')return S;if(typeof y=="string")return S instanceof n||y[y.length-1]!=='"'?void 0:typeof S!="string"?`${y.slice(0,-1)}${S}"`:S[0]==='"'?y.slice(0,-1)+S.slice(1):void 0;if(typeof S=="string"&&S[0]==='"'&&!(y instanceof n))return`"${y}${S.slice(1)}`}function t(y,S){return S.emptyStr()?y:y.emptyStr()?S:a`${y}${S}`}d.strConcat=t;function E(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:$(Array.isArray(y)?y.join(","):y)}function h(y){return new l($(y))}d.stringify=h;function $(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}d.safeStringify=$;function L(y){return typeof y=="string"&&d.IDENTIFIER.test(y)?new l(`.${y}`):u`[${y}]`}d.getProperty=L;function k(y){if(typeof y=="string"&&d.IDENTIFIER.test(y))return new l(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}d.getEsmExportName=k;function z(y){return new l(y.toString())}d.regexpCode=z},82481:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.or=d.and=d.not=d.CodeGen=d.operators=d.varKinds=d.ValueScopeName=d.ValueScope=d.Scope=d.Name=d.regexpCode=d.stringify=d.getProperty=d.nil=d.strConcat=d.str=d._=void 0;const n=e(91475),l=e(66162);var u=e(91475);Object.defineProperty(d,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(d,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(d,"strConcat",{enumerable:!0,get:function(){return u.strConcat}}),Object.defineProperty(d,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(d,"getProperty",{enumerable:!0,get:function(){return u.getProperty}}),Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(d,"regexpCode",{enumerable:!0,get:function(){return u.regexpCode}}),Object.defineProperty(d,"Name",{enumerable:!0,get:function(){return u.Name}});var m=e(66162);Object.defineProperty(d,"Scope",{enumerable:!0,get:function(){return m.Scope}}),Object.defineProperty(d,"ValueScope",{enumerable:!0,get:function(){return m.ValueScope}}),Object.defineProperty(d,"ValueScopeName",{enumerable:!0,get:function(){return m.ValueScopeName}}),Object.defineProperty(d,"varKinds",{enumerable:!0,get:function(){return m.varKinds}}),d.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class a{optimizeNodes(){return this}optimizeNames(R,N){return this}}class c extends a{constructor(R,N,ee){super(),this.varKind=R,this.name=N,this.rhs=ee}render({es5:R,_n:N}){const ee=R?l.varKinds.var:this.varKind,Pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${ee} ${this.name}${Pe};`+N}optimizeNames(R,N){if(R[this.name.str])return this.rhs&&(this.rhs=st(this.rhs,R,N)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class _ extends a{constructor(R,N,ee){super(),this.lhs=R,this.rhs=N,this.sideEffects=ee}render({_n:R}){return`${this.lhs} = ${this.rhs};`+R}optimizeNames(R,N){if(!(this.lhs instanceof n.Name&&!R[this.lhs.str]&&!this.sideEffects))return this.rhs=st(this.rhs,R,N),this}get names(){const R=this.lhs instanceof n.Name?{}:{...this.lhs.names};return Bt(R,this.rhs)}}class b extends _{constructor(R,N,ee,Pe){super(R,ee,Pe),this.op=N}render({_n:R}){return`${this.lhs} ${this.op}= ${this.rhs};`+R}}class t extends a{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){return`${this.label}:`+R}}class E extends a{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){return`break${this.label?` ${this.label}`:""};`+R}}class h extends a{constructor(R){super(),this.error=R}render({_n:R}){return`throw ${this.error};`+R}get names(){return this.error.names}}class $ extends a{constructor(R){super(),this.code=R}render({_n:R}){return`${this.code};`+R}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(R,N){return this.code=st(this.code,R,N),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class L extends a{constructor(R=[]){super(),this.nodes=R}render(R){return this.nodes.reduce((N,ee)=>N+ee.render(R),"")}optimizeNodes(){const{nodes:R}=this;let N=R.length;for(;N--;){const ee=R[N].optimizeNodes();Array.isArray(ee)?R.splice(N,1,...ee):ee?R[N]=ee:R.splice(N,1)}return R.length>0?this:void 0}optimizeNames(R,N){const{nodes:ee}=this;let Pe=ee.length;for(;Pe--;){const Ge=ee[Pe];Ge.optimizeNames(R,N)||(jt(R,Ge.names),ee.splice(Pe,1))}return ee.length>0?this:void 0}get names(){return this.nodes.reduce((R,N)=>Xe(R,N.names),{})}}class k extends L{render(R){return"{"+R._n+super.render(R)+"}"+R._n}}class z extends L{}class y extends k{}y.kind="else";class S extends k{constructor(R,N){super(N),this.condition=R}render(R){let N=`if(${this.condition})`+super.render(R);return this.else&&(N+="else "+this.else.render(R)),N}optimizeNodes(){super.optimizeNodes();const R=this.condition;if(R===!0)return this.nodes;let N=this.else;if(N){const ee=N.optimizeNodes();N=this.else=Array.isArray(ee)?new y(ee):ee}if(N)return R===!1?N instanceof S?N:N.nodes:this.nodes.length?this:new S(Zt(R),N instanceof S?[N]:N.nodes);if(!(R===!1||!this.nodes.length))return this}optimizeNames(R,N){var ee;if(this.else=(ee=this.else)===null||ee===void 0?void 0:ee.optimizeNames(R,N),!!(super.optimizeNames(R,N)||this.else))return this.condition=st(this.condition,R,N),this}get names(){const R=super.names;return Bt(R,this.condition),this.else&&Xe(R,this.else.names),R}}S.kind="if";class x extends k{}x.kind="for";class f extends x{constructor(R){super(),this.iteration=R}render(R){return`for(${this.iteration})`+super.render(R)}optimizeNames(R,N){if(super.optimizeNames(R,N))return this.iteration=st(this.iteration,R,N),this}get names(){return Xe(super.names,this.iteration.names)}}class T extends x{constructor(R,N,ee,Pe){super(),this.varKind=R,this.name=N,this.from=ee,this.to=Pe}render(R){const N=R.es5?l.varKinds.var:this.varKind,{name:ee,from:Pe,to:Ge}=this;return`for(${N} ${ee}=${Pe}; ${ee}<${Ge}; ${ee}++)`+super.render(R)}get names(){const R=Bt(super.names,this.from);return Bt(R,this.to)}}class C extends x{constructor(R,N,ee,Pe){super(),this.loop=R,this.varKind=N,this.name=ee,this.iterable=Pe}render(R){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(R)}optimizeNames(R,N){if(super.optimizeNames(R,N))return this.iterable=st(this.iterable,R,N),this}get names(){return Xe(super.names,this.iterable.names)}}class P extends k{constructor(R,N,ee){super(),this.name=R,this.args=N,this.async=ee}render(R){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(R)}}P.kind="func";class p extends L{render(R){return"return "+super.render(R)}}p.kind="return";class Z extends k{render(R){let N="try"+super.render(R);return this.catch&&(N+=this.catch.render(R)),this.finally&&(N+=this.finally.render(R)),N}optimizeNodes(){var R,N;return super.optimizeNodes(),(R=this.catch)===null||R===void 0||R.optimizeNodes(),(N=this.finally)===null||N===void 0||N.optimizeNodes(),this}optimizeNames(R,N){var ee,Pe;return super.optimizeNames(R,N),(ee=this.catch)===null||ee===void 0||ee.optimizeNames(R,N),(Pe=this.finally)===null||Pe===void 0||Pe.optimizeNames(R,N),this}get names(){const R=super.names;return this.catch&&Xe(R,this.catch.names),this.finally&&Xe(R,this.finally.names),R}}class F extends k{constructor(R){super(),this.error=R}render(R){return`catch(${this.error})`+super.render(R)}}F.kind="catch";class Me extends k{render(R){return"finally"+super.render(R)}}Me.kind="finally";class Ee{constructor(R,N={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...N,_n:N.lines?`
`:""},this._extScope=R,this._scope=new l.Scope({parent:R}),this._nodes=[new z]}toString(){return this._root.render(this.opts)}name(R){return this._scope.name(R)}scopeName(R){return this._extScope.name(R)}scopeValue(R,N){const ee=this._extScope.value(R,N);return(this._values[ee.prefix]||(this._values[ee.prefix]=new Set)).add(ee),ee}getScopeValue(R,N){return this._extScope.getValue(R,N)}scopeRefs(R){return this._extScope.scopeRefs(R,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(R,N,ee,Pe){const Ge=this._scope.toName(N);return ee!==void 0&&Pe&&(this._constants[Ge.str]=ee),this._leafNode(new c(R,Ge,ee)),Ge}const(R,N,ee){return this._def(l.varKinds.const,R,N,ee)}let(R,N,ee){return this._def(l.varKinds.let,R,N,ee)}var(R,N,ee){return this._def(l.varKinds.var,R,N,ee)}assign(R,N,ee){return this._leafNode(new _(R,N,ee))}add(R,N){return this._leafNode(new b(R,d.operators.ADD,N))}code(R){return typeof R=="function"?R():R!==n.nil&&this._leafNode(new $(R)),this}object(...R){const N=["{"];for(const[ee,Pe]of R)N.length>1&&N.push(","),N.push(ee),(ee!==Pe||this.opts.es5)&&(N.push(":"),(0,n.addCodeArg)(N,Pe));return N.push("}"),new n._Code(N)}if(R,N,ee){if(this._blockNode(new S(R)),N&&ee)this.code(N).else().code(ee).endIf();else if(N)this.code(N).endIf();else if(ee)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(R){return this._elseNode(new S(R))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(S,y)}_for(R,N){return this._blockNode(R),N&&this.code(N).endFor(),this}for(R,N){return this._for(new f(R),N)}forRange(R,N,ee,Pe,Ge=this.opts.es5?l.varKinds.var:l.varKinds.let){const Ct=this._scope.toName(R);return this._for(new T(Ge,Ct,N,ee),()=>Pe(Ct))}forOf(R,N,ee,Pe=l.varKinds.const){const Ge=this._scope.toName(R);if(this.opts.es5){const Ct=N instanceof n.Name?N:this.var("_arr",N);return this.forRange("_i",0,(0,n._)`${Ct}.length`,ht=>{this.var(Ge,(0,n._)`${Ct}[${ht}]`),ee(Ge)})}return this._for(new C("of",Pe,Ge,N),()=>ee(Ge))}forIn(R,N,ee,Pe=this.opts.es5?l.varKinds.var:l.varKinds.const){if(this.opts.ownProperties)return this.forOf(R,(0,n._)`Object.keys(${N})`,ee);const Ge=this._scope.toName(R);return this._for(new C("in",Pe,Ge,N),()=>ee(Ge))}endFor(){return this._endBlockNode(x)}label(R){return this._leafNode(new t(R))}break(R){return this._leafNode(new E(R))}return(R){const N=new p;if(this._blockNode(N),this.code(R),N.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(p)}try(R,N,ee){if(!N&&!ee)throw new Error('CodeGen: "try" without "catch" and "finally"');const Pe=new Z;if(this._blockNode(Pe),this.code(R),N){const Ge=this.name("e");this._currNode=Pe.catch=new F(Ge),N(Ge)}return ee&&(this._currNode=Pe.finally=new Me,this.code(ee)),this._endBlockNode(F,Me)}throw(R){return this._leafNode(new h(R))}block(R,N){return this._blockStarts.push(this._nodes.length),R&&this.code(R).endBlock(N),this}endBlock(R){const N=this._blockStarts.pop();if(N===void 0)throw new Error("CodeGen: not in self-balancing block");const ee=this._nodes.length-N;if(ee<0||R!==void 0&&ee!==R)throw new Error(`CodeGen: wrong number of nodes: ${ee} vs ${R} expected`);return this._nodes.length=N,this}func(R,N=n.nil,ee,Pe){return this._blockNode(new P(R,N,ee)),Pe&&this.code(Pe).endFunc(),this}endFunc(){return this._endBlockNode(P)}optimize(R=1){for(;R-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(R){return this._currNode.nodes.push(R),this}_blockNode(R){this._currNode.nodes.push(R),this._nodes.push(R)}_endBlockNode(R,N){const ee=this._currNode;if(ee instanceof R||N&&ee instanceof N)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${N?`${R.kind}/${N.kind}`:R.kind}"`)}_elseNode(R){const N=this._currNode;if(!(N instanceof S))throw new Error('CodeGen: "else" without "if"');return this._currNode=N.else=R,this}get _root(){return this._nodes[0]}get _currNode(){const R=this._nodes;return R[R.length-1]}set _currNode(R){const N=this._nodes;N[N.length-1]=R}}d.CodeGen=Ee;function Xe(ce,R){for(const N in R)ce[N]=(ce[N]||0)+(R[N]||0);return ce}function Bt(ce,R){return R instanceof n._CodeOrName?Xe(ce,R.names):ce}function st(ce,R,N){if(ce instanceof n.Name)return ee(ce);if(!Pe(ce))return ce;return new n._Code(ce._items.reduce((Ge,Ct)=>(Ct instanceof n.Name&&(Ct=ee(Ct)),Ct instanceof n._Code?Ge.push(...Ct._items):Ge.push(Ct),Ge),[]));function ee(Ge){const Ct=N[Ge.str];return Ct===void 0||R[Ge.str]!==1?Ge:(delete R[Ge.str],Ct)}function Pe(Ge){return Ge instanceof n._Code&&Ge._items.some(Ct=>Ct instanceof n.Name&&R[Ct.str]===1&&N[Ct.str]!==void 0)}}function jt(ce,R){for(const N in R)ce[N]=(ce[N]||0)-(R[N]||0)}function Zt(ce){return typeof ce=="boolean"||typeof ce=="number"||ce===null?!ce:(0,n._)`!${Ze(ce)}`}d.not=Zt;const J=O(d.operators.AND);function an(...ce){return ce.reduce(J)}d.and=an;const Re=O(d.operators.OR);function xe(...ce){return ce.reduce(Re)}d.or=xe;function O(ce){return(R,N)=>R===n.nil?N:N===n.nil?R:(0,n._)`${Ze(R)} ${ce} ${Ze(N)}`}function Ze(ce){return ce instanceof n.Name?ce:(0,n._)`(${ce})`}},66162:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.ValueScope=d.ValueScopeName=d.Scope=d.varKinds=d.UsedValueState=void 0;const n=e(91475);class l extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}}var u;(function(b){b[b.Started=0]="Started",b[b.Completed=1]="Completed"})(u=d.UsedValueState||(d.UsedValueState={})),d.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class m{constructor({prefixes:t,parent:E}={}){this._names={},this._prefixes=t,this._parent=E}toName(t){return t instanceof n.Name?t:this.name(t)}name(t){return new n.Name(this._newName(t))}_newName(t){const E=this._names[t]||this._nameGroup(t);return`${t}${E.index++}`}_nameGroup(t){var E,h;if(!((h=(E=this._parent)===null||E===void 0?void 0:E._prefixes)===null||h===void 0)&&h.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}}d.Scope=m;class a extends n.Name{constructor(t,E){super(E),this.prefix=t}setValue(t,{property:E,itemIndex:h}){this.value=t,this.scopePath=(0,n._)`.${new n.Name(E)}[${h}]`}}d.ValueScopeName=a;const c=(0,n._)`\n`;class _ extends m{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?c:n.nil}}get(){return this._scope}name(t){return new a(t,this._newName(t))}value(t,E){var h;if(E.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const $=this.toName(t),{prefix:L}=$,k=(h=E.key)!==null&&h!==void 0?h:E.ref;let z=this._values[L];if(z){const x=z.get(k);if(x)return x}else z=this._values[L]=new Map;z.set(k,$);const y=this._scope[L]||(this._scope[L]=[]),S=y.length;return y[S]=E.ref,$.setValue(E,{property:L,itemIndex:S}),$}getValue(t,E){const h=this._values[t];if(h)return h.get(E)}scopeRefs(t,E=this._values){return this._reduceValues(E,h=>{if(h.scopePath===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return(0,n._)`${t}${h.scopePath}`})}scopeCode(t=this._values,E,h){return this._reduceValues(t,$=>{if($.value===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return $.value.code},E,h)}_reduceValues(t,E,h={},$){let L=n.nil;for(const k in t){const z=t[k];if(!z)continue;const y=h[k]=h[k]||new Map;z.forEach(S=>{if(y.has(S))return;y.set(S,u.Started);let x=E(S);if(x){const f=this.opts.es5?d.varKinds.var:d.varKinds.const;L=(0,n._)`${L}${f} ${S} = ${x};${this.opts._n}`}else if(x=$==null?void 0:$(S))L=(0,n._)`${L}${x}${this.opts._n}`;else throw new l(S);y.set(S,u.Completed)})}return L}}d.ValueScope=_},59428:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.extendErrors=d.resetErrorsCount=d.reportExtraError=d.reportError=d.keyword$DataError=d.keywordError=void 0;const n=e(82481),l=e(1849),u=e(99583);d.keywordError={message:({keyword:y})=>(0,n.str)`must pass "${y}" keyword validation`},d.keyword$DataError={message:({keyword:y,schemaType:S})=>S?(0,n.str)`"${y}" keyword must be ${S} ($data)`:(0,n.str)`"${y}" keyword is invalid ($data)`};function m(y,S=d.keywordError,x,f){const{it:T}=y,{gen:C,compositeRule:P,allErrors:p}=T,Z=h(y,S,x);(f!=null?f:P||p)?b(C,Z):t(T,(0,n._)`[${Z}]`)}d.reportError=m;function a(y,S=d.keywordError,x){const{it:f}=y,{gen:T,compositeRule:C,allErrors:P}=f,p=h(y,S,x);b(T,p),C||P||t(f,u.default.vErrors)}d.reportExtraError=a;function c(y,S){y.assign(u.default.errors,S),y.if((0,n._)`${u.default.vErrors} !== null`,()=>y.if(S,()=>y.assign((0,n._)`${u.default.vErrors}.length`,S),()=>y.assign(u.default.vErrors,null)))}d.resetErrorsCount=c;function _({gen:y,keyword:S,schemaValue:x,data:f,errsCount:T,it:C}){if(T===void 0)throw new Error("ajv implementation error");const P=y.name("err");y.forRange("i",T,u.default.errors,p=>{y.const(P,(0,n._)`${u.default.vErrors}[${p}]`),y.if((0,n._)`${P}.instancePath === undefined`,()=>y.assign((0,n._)`${P}.instancePath`,(0,n.strConcat)(u.default.instancePath,C.errorPath))),y.assign((0,n._)`${P}.schemaPath`,(0,n.str)`${C.errSchemaPath}/${S}`),C.opts.verbose&&(y.assign((0,n._)`${P}.schema`,x),y.assign((0,n._)`${P}.data`,f))})}d.extendErrors=_;function b(y,S){const x=y.const("err",S);y.if((0,n._)`${u.default.vErrors} === null`,()=>y.assign(u.default.vErrors,(0,n._)`[${x}]`),(0,n._)`${u.default.vErrors}.push(${x})`),y.code((0,n._)`${u.default.errors}++`)}function t(y,S){const{gen:x,validateName:f,schemaEnv:T}=y;T.$async?x.throw((0,n._)`new ${y.ValidationError}(${S})`):(x.assign((0,n._)`${f}.errors`,S),x.return(!1))}const E={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function h(y,S,x){const{createErrors:f}=y.it;return f===!1?(0,n._)`{}`:$(y,S,x)}function $(y,S,x={}){const{gen:f,it:T}=y,C=[L(T,x),k(y,x)];return z(y,S,C),f.object(...C)}function L({errorPath:y},{instancePath:S}){const x=S?(0,n.str)`${y}${(0,l.getErrorPath)(S,l.Type.Str)}`:y;return[u.default.instancePath,(0,n.strConcat)(u.default.instancePath,x)]}function k({keyword:y,it:{errSchemaPath:S}},{schemaPath:x,parentSchema:f}){let T=f?S:(0,n.str)`${S}/${y}`;return x&&(T=(0,n.str)`${T}${(0,l.getErrorPath)(x,l.Type.Str)}`),[E.schemaPath,T]}function z(y,{params:S,message:x},f){const{keyword:T,data:C,schemaValue:P,it:p}=y,{opts:Z,propertyName:F,topSchemaRef:Me,schemaPath:Ee}=p;f.push([E.keyword,T],[E.params,typeof S=="function"?S(y):S||(0,n._)`{}`]),Z.messages&&f.push([E.message,typeof x=="function"?x(y):x]),Z.verbose&&f.push([E.schema,P],[E.parentSchema,(0,n._)`${Me}${Ee}`],[u.default.data,C]),F&&f.push([E.propertyName,F])}},62902:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.resolveSchema=d.getCompilingSchema=d.resolveRef=d.compileSchema=d.SchemaEnv=void 0;const n=e(82481),l=e(14319),u=e(99583),m=e(2710),a=e(1849),c=e(4371);class _{constructor(x){var f;this.refs={},this.dynamicAnchors={};let T;typeof x.schema=="object"&&(T=x.schema),this.schema=x.schema,this.schemaId=x.schemaId,this.root=x.root||this,this.baseId=(f=x.baseId)!==null&&f!==void 0?f:(0,m.normalizeId)(T==null?void 0:T[x.schemaId||"$id"]),this.schemaPath=x.schemaPath,this.localRefs=x.localRefs,this.meta=x.meta,this.$async=T==null?void 0:T.$async,this.refs={}}}d.SchemaEnv=_;function b(S){const x=h.call(this,S);if(x)return x;const f=(0,m.getFullPath)(this.opts.uriResolver,S.root.baseId),{es5:T,lines:C}=this.opts.code,{ownProperties:P}=this.opts,p=new n.CodeGen(this.scope,{es5:T,lines:C,ownProperties:P});let Z;S.$async&&(Z=p.scopeValue("Error",{ref:l.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));const F=p.scopeName("validate");S.validateName=F;const Me={gen:p,allErrors:this.opts.allErrors,data:u.default.data,parentData:u.default.parentData,parentDataProperty:u.default.parentDataProperty,dataNames:[u.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:p.scopeValue("schema",this.opts.code.source===!0?{ref:S.schema,code:(0,n.stringify)(S.schema)}:{ref:S.schema}),validateName:F,ValidationError:Z,schema:S.schema,schemaEnv:S,rootId:f,baseId:S.baseId||f,schemaPath:n.nil,errSchemaPath:S.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};let Ee;try{this._compilations.add(S),(0,c.validateFunctionCode)(Me),p.optimize(this.opts.code.optimize);const Xe=p.toString();Ee=`${p.scopeRefs(u.default.scope)}return ${Xe}`,this.opts.code.process&&(Ee=this.opts.code.process(Ee,S));const st=new Function(`${u.default.self}`,`${u.default.scope}`,Ee)(this,this.scope.get());if(this.scope.value(F,{ref:st}),st.errors=null,st.schema=S.schema,st.schemaEnv=S,S.$async&&(st.$async=!0),this.opts.code.source===!0&&(st.source={validateName:F,validateCode:Xe,scopeValues:p._values}),this.opts.unevaluated){const{props:jt,items:Zt}=Me;st.evaluated={props:jt instanceof n.Name?void 0:jt,items:Zt instanceof n.Name?void 0:Zt,dynamicProps:jt instanceof n.Name,dynamicItems:Zt instanceof n.Name},st.source&&(st.source.evaluated=(0,n.stringify)(st.evaluated))}return S.validate=st,S}catch(Xe){throw delete S.validate,delete S.validateName,Ee&&this.logger.error("Error compiling schema, function code:",Ee),Xe}finally{this._compilations.delete(S)}}d.compileSchema=b;function t(S,x,f){var T;f=(0,m.resolveUrl)(this.opts.uriResolver,x,f);const C=S.refs[f];if(C)return C;let P=L.call(this,S,f);if(P===void 0){const p=(T=S.localRefs)===null||T===void 0?void 0:T[f],{schemaId:Z}=this.opts;p&&(P=new _({schema:p,schemaId:Z,root:S,baseId:x}))}if(P!==void 0)return S.refs[f]=E.call(this,P)}d.resolveRef=t;function E(S){return(0,m.inlineRef)(S.schema,this.opts.inlineRefs)?S.schema:S.validate?S:b.call(this,S)}function h(S){for(const x of this._compilations)if($(x,S))return x}d.getCompilingSchema=h;function $(S,x){return S.schema===x.schema&&S.root===x.root&&S.baseId===x.baseId}function L(S,x){let f;for(;typeof(f=this.refs[x])=="string";)x=f;return f||this.schemas[x]||k.call(this,S,x)}function k(S,x){const f=this.opts.uriResolver.parse(x),T=(0,m._getFullPath)(this.opts.uriResolver,f);let C=(0,m.getFullPath)(this.opts.uriResolver,S.baseId,void 0);if(Object.keys(S.schema).length>0&&T===C)return y.call(this,f,S);const P=(0,m.normalizeId)(T),p=this.refs[P]||this.schemas[P];if(typeof p=="string"){const Z=k.call(this,S,p);return typeof(Z==null?void 0:Z.schema)!="object"?void 0:y.call(this,f,Z)}if(typeof(p==null?void 0:p.schema)=="object"){if(p.validate||b.call(this,p),P===(0,m.normalizeId)(x)){const{schema:Z}=p,{schemaId:F}=this.opts,Me=Z[F];return Me&&(C=(0,m.resolveUrl)(this.opts.uriResolver,C,Me)),new _({schema:Z,schemaId:F,root:S,baseId:C})}return y.call(this,f,p)}}d.resolveSchema=k;const z=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(S,{baseId:x,schema:f,root:T}){var C;if(((C=S.fragment)===null||C===void 0?void 0:C[0])!=="/")return;for(const Z of S.fragment.slice(1).split("/")){if(typeof f=="boolean")return;const F=f[(0,a.unescapeFragment)(Z)];if(F===void 0)return;f=F;const Me=typeof f=="object"&&f[this.opts.schemaId];!z.has(Z)&&Me&&(x=(0,m.resolveUrl)(this.opts.uriResolver,x,Me))}let P;if(typeof f!="boolean"&&f.$ref&&!(0,a.schemaHasRulesButRef)(f,this.RULES)){const Z=(0,m.resolveUrl)(this.opts.uriResolver,x,f.$ref);P=k.call(this,T,Z)}const{schemaId:p}=this.opts;if(P=P||new _({schema:f,schemaId:p,root:T,baseId:x}),P.schema!==P.root.schema)return P}},99583:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};d.default=l},30283:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(2710);class l extends Error{constructor(m,a,c,_){super(_||`can't resolve reference ${c} from id ${a}`),this.missingRef=(0,n.resolveUrl)(m,a,c),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(m,this.missingRef))}}d.default=l},2710:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.getSchemaRefs=d.resolveUrl=d.normalizeId=d._getFullPath=d.getFullPath=d.inlineRef=void 0;const n=e(1849),l=e(69378),u=e(19522),m=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function a(y,S=!0){return typeof y=="boolean"?!0:S===!0?!_(y):S?b(y)<=S:!1}d.inlineRef=a;const c=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function _(y){for(const S in y){if(c.has(S))return!0;const x=y[S];if(Array.isArray(x)&&x.some(_)||typeof x=="object"&&_(x))return!0}return!1}function b(y){let S=0;for(const x in y){if(x==="$ref")return 1/0;if(S++,!m.has(x)&&(typeof y[x]=="object"&&(0,n.eachItem)(y[x],f=>S+=b(f)),S===1/0))return 1/0}return S}function t(y,S="",x){x!==!1&&(S=$(S));const f=y.parse(S);return E(y,f)}d.getFullPath=t;function E(y,S){return y.serialize(S).split("#")[0]+"#"}d._getFullPath=E;const h=/#\/?$/;function $(y){return y?y.replace(h,""):""}d.normalizeId=$;function L(y,S,x){return x=$(x),y.resolve(S,x)}d.resolveUrl=L;const k=/^[a-z_][-a-z0-9._]*$/i;function z(y,S){if(typeof y=="boolean")return{};const{schemaId:x,uriResolver:f}=this.opts,T=$(y[x]||S),C={"":T},P=t(f,T,!1),p={},Z=new Set;return u(y,{allKeys:!0},(Ee,Xe,Bt,st)=>{if(st===void 0)return;const jt=P+Xe;let Zt=C[st];typeof Ee[x]=="string"&&(Zt=J.call(this,Ee[x])),an.call(this,Ee.$anchor),an.call(this,Ee.$dynamicAnchor),C[Xe]=Zt;function J(Re){const xe=this.opts.uriResolver.resolve;if(Re=$(Zt?xe(Zt,Re):Re),Z.has(Re))throw Me(Re);Z.add(Re);let O=this.refs[Re];return typeof O=="string"&&(O=this.refs[O]),typeof O=="object"?F(Ee,O.schema,Re):Re!==$(jt)&&(Re[0]==="#"?(F(Ee,p[Re],Re),p[Re]=Ee):this.refs[Re]=jt),Re}function an(Re){if(typeof Re=="string"){if(!k.test(Re))throw new Error(`invalid anchor "${Re}"`);J.call(this,`#${Re}`)}}}),p;function F(Ee,Xe,Bt){if(Xe!==void 0&&!l(Ee,Xe))throw Me(Bt)}function Me(Ee){return new Error(`reference "${Ee}" resolves to more than one schema`)}}d.getSchemaRefs=z},18288:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.getRules=d.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],n=new Set(e);function l(m){return typeof m=="string"&&n.has(m)}d.isJSONType=l;function u(){const m={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...m,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},m.number,m.string,m.array,m.object],post:{rules:[]},all:{},keywords:{}}}d.getRules=u},1849:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.checkStrictMode=d.getErrorPath=d.Type=d.useFunc=d.setEvaluated=d.evaluatedPropsToName=d.mergeEvaluated=d.eachItem=d.unescapeJsonPointer=d.escapeJsonPointer=d.escapeFragment=d.unescapeFragment=d.schemaRefOrVal=d.schemaHasRulesButRef=d.schemaHasRules=d.checkUnknownRules=d.alwaysValidSchema=d.toHash=void 0;const n=e(82481),l=e(91475);function u(P){const p={};for(const Z of P)p[Z]=!0;return p}d.toHash=u;function m(P,p){return typeof p=="boolean"?p:Object.keys(p).length===0?!0:(a(P,p),!c(p,P.self.RULES.all))}d.alwaysValidSchema=m;function a(P,p=P.schema){const{opts:Z,self:F}=P;if(!Z.strictSchema||typeof p=="boolean")return;const Me=F.RULES.keywords;for(const Ee in p)Me[Ee]||C(P,`unknown keyword: "${Ee}"`)}d.checkUnknownRules=a;function c(P,p){if(typeof P=="boolean")return!P;for(const Z in P)if(p[Z])return!0;return!1}d.schemaHasRules=c;function _(P,p){if(typeof P=="boolean")return!P;for(const Z in P)if(Z!=="$ref"&&p.all[Z])return!0;return!1}d.schemaHasRulesButRef=_;function b({topSchemaRef:P,schemaPath:p},Z,F,Me){if(!Me){if(typeof Z=="number"||typeof Z=="boolean")return Z;if(typeof Z=="string")return(0,n._)`${Z}`}return(0,n._)`${P}${p}${(0,n.getProperty)(F)}`}d.schemaRefOrVal=b;function t(P){return $(decodeURIComponent(P))}d.unescapeFragment=t;function E(P){return encodeURIComponent(h(P))}d.escapeFragment=E;function h(P){return typeof P=="number"?`${P}`:P.replace(/~/g,"~0").replace(/\//g,"~1")}d.escapeJsonPointer=h;function $(P){return P.replace(/~1/g,"/").replace(/~0/g,"~")}d.unescapeJsonPointer=$;function L(P,p){if(Array.isArray(P))for(const Z of P)p(Z);else p(P)}d.eachItem=L;function k({mergeNames:P,mergeToName:p,mergeValues:Z,resultToName:F}){return(Me,Ee,Xe,Bt)=>{const st=Xe===void 0?Ee:Xe instanceof n.Name?(Ee instanceof n.Name?P(Me,Ee,Xe):p(Me,Ee,Xe),Xe):Ee instanceof n.Name?(p(Me,Xe,Ee),Ee):Z(Ee,Xe);return Bt===n.Name&&!(st instanceof n.Name)?F(Me,st):st}}d.mergeEvaluated={props:k({mergeNames:(P,p,Z)=>P.if((0,n._)`${Z} !== true && ${p} !== undefined`,()=>{P.if((0,n._)`${p} === true`,()=>P.assign(Z,!0),()=>P.assign(Z,(0,n._)`${Z} || {}`).code((0,n._)`Object.assign(${Z}, ${p})`))}),mergeToName:(P,p,Z)=>P.if((0,n._)`${Z} !== true`,()=>{p===!0?P.assign(Z,!0):(P.assign(Z,(0,n._)`${Z} || {}`),y(P,Z,p))}),mergeValues:(P,p)=>P===!0?!0:{...P,...p},resultToName:z}),items:k({mergeNames:(P,p,Z)=>P.if((0,n._)`${Z} !== true && ${p} !== undefined`,()=>P.assign(Z,(0,n._)`${p} === true ? true : ${Z} > ${p} ? ${Z} : ${p}`)),mergeToName:(P,p,Z)=>P.if((0,n._)`${Z} !== true`,()=>P.assign(Z,p===!0?!0:(0,n._)`${Z} > ${p} ? ${Z} : ${p}`)),mergeValues:(P,p)=>P===!0?!0:Math.max(P,p),resultToName:(P,p)=>P.var("items",p)})};function z(P,p){if(p===!0)return P.var("props",!0);const Z=P.var("props",(0,n._)`{}`);return p!==void 0&&y(P,Z,p),Z}d.evaluatedPropsToName=z;function y(P,p,Z){Object.keys(Z).forEach(F=>P.assign((0,n._)`${p}${(0,n.getProperty)(F)}`,!0))}d.setEvaluated=y;const S={};function x(P,p){return P.scopeValue("func",{ref:p,code:S[p.code]||(S[p.code]=new l._Code(p.code))})}d.useFunc=x;var f;(function(P){P[P.Num=0]="Num",P[P.Str=1]="Str"})(f=d.Type||(d.Type={}));function T(P,p,Z){if(P instanceof n.Name){const F=p===f.Num;return Z?F?(0,n._)`"[" + ${P} + "]"`:(0,n._)`"['" + ${P} + "']"`:F?(0,n._)`"/" + ${P}`:(0,n._)`"/" + ${P}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return Z?(0,n.getProperty)(P).toString():"/"+h(P)}d.getErrorPath=T;function C(P,p,Z=P.opts.strictSchema){if(Z){if(p=`strict mode: ${p}`,Z===!0)throw new Error(p);P.self.logger.warn(p)}}d.checkStrictMode=C},66557:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.shouldUseRule=d.shouldUseGroup=d.schemaHasRulesForType=void 0;function e({schema:u,self:m},a){const c=m.RULES.types[a];return c&&c!==!0&&n(u,c)}d.schemaHasRulesForType=e;function n(u,m){return m.rules.some(a=>l(u,a))}d.shouldUseGroup=n;function l(u,m){var a;return u[m.keyword]!==void 0||((a=m.definition.implements)===null||a===void 0?void 0:a.some(c=>u[c]!==void 0))}d.shouldUseRule=l},74616:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.boolOrEmptySchema=d.topBoolOrEmptySchema=void 0;const n=e(59428),l=e(82481),u=e(99583),m={message:"boolean schema is false"};function a(b){const{gen:t,schema:E,validateName:h}=b;E===!1?_(b,!1):typeof E=="object"&&E.$async===!0?t.return(u.default.data):(t.assign((0,l._)`${h}.errors`,null),t.return(!0))}d.topBoolOrEmptySchema=a;function c(b,t){const{gen:E,schema:h}=b;h===!1?(E.var(t,!1),_(b)):E.var(t,!0)}d.boolOrEmptySchema=c;function _(b,t){const{gen:E,data:h}=b,$={gen:E,keyword:"false schema",data:h,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:b};(0,n.reportError)($,m,void 0,t)}},93277:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.reportTypeError=d.checkDataTypes=d.checkDataType=d.coerceAndCheckDataType=d.getJSONTypes=d.getSchemaTypes=d.DataType=void 0;const n=e(18288),l=e(66557),u=e(59428),m=e(82481),a=e(1849);var c;(function(f){f[f.Correct=0]="Correct",f[f.Wrong=1]="Wrong"})(c=d.DataType||(d.DataType={}));function _(f){const T=b(f.type);if(T.includes("null")){if(f.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!T.length&&f.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');f.nullable===!0&&T.push("null")}return T}d.getSchemaTypes=_;function b(f){const T=Array.isArray(f)?f:f?[f]:[];if(T.every(n.isJSONType))return T;throw new Error("type must be JSONType or JSONType[]: "+T.join(","))}d.getJSONTypes=b;function t(f,T){const{gen:C,data:P,opts:p}=f,Z=h(T,p.coerceTypes),F=T.length>0&&!(Z.length===0&&T.length===1&&(0,l.schemaHasRulesForType)(f,T[0]));if(F){const Me=z(T,P,p.strictNumbers,c.Wrong);C.if(Me,()=>{Z.length?$(f,T,Z):S(f)})}return F}d.coerceAndCheckDataType=t;const E=new Set(["string","number","integer","boolean","null"]);function h(f,T){return T?f.filter(C=>E.has(C)||T==="array"&&C==="array"):[]}function $(f,T,C){const{gen:P,data:p,opts:Z}=f,F=P.let("dataType",(0,m._)`typeof ${p}`),Me=P.let("coerced",(0,m._)`undefined`);Z.coerceTypes==="array"&&P.if((0,m._)`${F} == 'object' && Array.isArray(${p}) && ${p}.length == 1`,()=>P.assign(p,(0,m._)`${p}[0]`).assign(F,(0,m._)`typeof ${p}`).if(z(T,p,Z.strictNumbers),()=>P.assign(Me,p))),P.if((0,m._)`${Me} !== undefined`);for(const Xe of C)(E.has(Xe)||Xe==="array"&&Z.coerceTypes==="array")&&Ee(Xe);P.else(),S(f),P.endIf(),P.if((0,m._)`${Me} !== undefined`,()=>{P.assign(p,Me),L(f,Me)});function Ee(Xe){switch(Xe){case"string":P.elseIf((0,m._)`${F} == "number" || ${F} == "boolean"`).assign(Me,(0,m._)`"" + ${p}`).elseIf((0,m._)`${p} === null`).assign(Me,(0,m._)`""`);return;case"number":P.elseIf((0,m._)`${F} == "boolean" || ${p} === null
              || (${F} == "string" && ${p} && ${p} == +${p})`).assign(Me,(0,m._)`+${p}`);return;case"integer":P.elseIf((0,m._)`${F} === "boolean" || ${p} === null
              || (${F} === "string" && ${p} && ${p} == +${p} && !(${p} % 1))`).assign(Me,(0,m._)`+${p}`);return;case"boolean":P.elseIf((0,m._)`${p} === "false" || ${p} === 0 || ${p} === null`).assign(Me,!1).elseIf((0,m._)`${p} === "true" || ${p} === 1`).assign(Me,!0);return;case"null":P.elseIf((0,m._)`${p} === "" || ${p} === 0 || ${p} === false`),P.assign(Me,null);return;case"array":P.elseIf((0,m._)`${F} === "string" || ${F} === "number"
              || ${F} === "boolean" || ${p} === null`).assign(Me,(0,m._)`[${p}]`)}}}function L({gen:f,parentData:T,parentDataProperty:C},P){f.if((0,m._)`${T} !== undefined`,()=>f.assign((0,m._)`${T}[${C}]`,P))}function k(f,T,C,P=c.Correct){const p=P===c.Correct?m.operators.EQ:m.operators.NEQ;let Z;switch(f){case"null":return(0,m._)`${T} ${p} null`;case"array":Z=(0,m._)`Array.isArray(${T})`;break;case"object":Z=(0,m._)`${T} && typeof ${T} == "object" && !Array.isArray(${T})`;break;case"integer":Z=F((0,m._)`!(${T} % 1) && !isNaN(${T})`);break;case"number":Z=F();break;default:return(0,m._)`typeof ${T} ${p} ${f}`}return P===c.Correct?Z:(0,m.not)(Z);function F(Me=m.nil){return(0,m.and)((0,m._)`typeof ${T} == "number"`,Me,C?(0,m._)`isFinite(${T})`:m.nil)}}d.checkDataType=k;function z(f,T,C,P){if(f.length===1)return k(f[0],T,C,P);let p;const Z=(0,a.toHash)(f);if(Z.array&&Z.object){const F=(0,m._)`typeof ${T} != "object"`;p=Z.null?F:(0,m._)`!${T} || ${F}`,delete Z.null,delete Z.array,delete Z.object}else p=m.nil;Z.number&&delete Z.integer;for(const F in Z)p=(0,m.and)(p,k(F,T,C,P));return p}d.checkDataTypes=z;const y={message:({schema:f})=>`must be ${f}`,params:({schema:f,schemaValue:T})=>typeof f=="string"?(0,m._)`{type: ${f}}`:(0,m._)`{type: ${T}}`};function S(f){const T=x(f);(0,u.reportError)(T,y)}d.reportTypeError=S;function x(f){const{gen:T,data:C,schema:P}=f,p=(0,a.schemaRefOrVal)(f,P,"type");return{gen:T,keyword:"type",data:C,schema:P.type,schemaCode:p,schemaValue:p,parentSchema:P,params:{},it:f}}},35192:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.assignDefaults=void 0;const n=e(82481),l=e(1849);function u(a,c){const{properties:_,items:b}=a.schema;if(c==="object"&&_)for(const t in _)m(a,t,_[t].default);else c==="array"&&Array.isArray(b)&&b.forEach((t,E)=>m(a,E,t.default))}d.assignDefaults=u;function m(a,c,_){const{gen:b,compositeRule:t,data:E,opts:h}=a;if(_===void 0)return;const $=(0,n._)`${E}${(0,n.getProperty)(c)}`;if(t){(0,l.checkStrictMode)(a,`default is ignored for: ${$}`);return}let L=(0,n._)`${$} === undefined`;h.useDefaults==="empty"&&(L=(0,n._)`${L} || ${$} === null || ${$} === ""`),b.if(L,(0,n._)`${$} = ${(0,n.stringify)(_)}`)}},4371:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.getData=d.KeywordCxt=d.validateFunctionCode=void 0;const n=e(74616),l=e(93277),u=e(66557),m=e(93277),a=e(35192),c=e(83558),_=e(20521),b=e(82481),t=e(99583),E=e(2710),h=e(1849),$=e(59428);function L(q){if(P(q)&&(Z(q),C(q))){S(q);return}k(q,()=>(0,n.topBoolOrEmptySchema)(q))}d.validateFunctionCode=L;function k({gen:q,validateName:oe,schema:Ae,schemaEnv:Je,opts:ct},At){ct.code.es5?q.func(oe,(0,b._)`${t.default.data}, ${t.default.valCxt}`,Je.$async,()=>{q.code((0,b._)`"use strict"; ${f(Ae,ct)}`),y(q,ct),q.code(At)}):q.func(oe,(0,b._)`${t.default.data}, ${z(ct)}`,Je.$async,()=>q.code(f(Ae,ct)).code(At))}function z(q){return(0,b._)`{${t.default.instancePath}="", ${t.default.parentData}, ${t.default.parentDataProperty}, ${t.default.rootData}=${t.default.data}${q.dynamicRef?(0,b._)`, ${t.default.dynamicAnchors}={}`:b.nil}}={}`}function y(q,oe){q.if(t.default.valCxt,()=>{q.var(t.default.instancePath,(0,b._)`${t.default.valCxt}.${t.default.instancePath}`),q.var(t.default.parentData,(0,b._)`${t.default.valCxt}.${t.default.parentData}`),q.var(t.default.parentDataProperty,(0,b._)`${t.default.valCxt}.${t.default.parentDataProperty}`),q.var(t.default.rootData,(0,b._)`${t.default.valCxt}.${t.default.rootData}`),oe.dynamicRef&&q.var(t.default.dynamicAnchors,(0,b._)`${t.default.valCxt}.${t.default.dynamicAnchors}`)},()=>{q.var(t.default.instancePath,(0,b._)`""`),q.var(t.default.parentData,(0,b._)`undefined`),q.var(t.default.parentDataProperty,(0,b._)`undefined`),q.var(t.default.rootData,t.default.data),oe.dynamicRef&&q.var(t.default.dynamicAnchors,(0,b._)`{}`)})}function S(q){const{schema:oe,opts:Ae,gen:Je}=q;k(q,()=>{Ae.$comment&&oe.$comment&&st(q),Ee(q),Je.let(t.default.vErrors,null),Je.let(t.default.errors,0),Ae.unevaluated&&x(q),F(q),jt(q)})}function x(q){const{gen:oe,validateName:Ae}=q;q.evaluated=oe.const("evaluated",(0,b._)`${Ae}.evaluated`),oe.if((0,b._)`${q.evaluated}.dynamicProps`,()=>oe.assign((0,b._)`${q.evaluated}.props`,(0,b._)`undefined`)),oe.if((0,b._)`${q.evaluated}.dynamicItems`,()=>oe.assign((0,b._)`${q.evaluated}.items`,(0,b._)`undefined`))}function f(q,oe){const Ae=typeof q=="object"&&q[oe.schemaId];return Ae&&(oe.code.source||oe.code.process)?(0,b._)`/*# sourceURL=${Ae} */`:b.nil}function T(q,oe){if(P(q)&&(Z(q),C(q))){p(q,oe);return}(0,n.boolOrEmptySchema)(q,oe)}function C({schema:q,self:oe}){if(typeof q=="boolean")return!q;for(const Ae in q)if(oe.RULES.all[Ae])return!0;return!1}function P(q){return typeof q.schema!="boolean"}function p(q,oe){const{schema:Ae,gen:Je,opts:ct}=q;ct.$comment&&Ae.$comment&&st(q),Xe(q),Bt(q);const At=Je.const("_errs",t.default.errors);F(q,At),Je.var(oe,(0,b._)`${At} === ${t.default.errors}`)}function Z(q){(0,h.checkUnknownRules)(q),Me(q)}function F(q,oe){if(q.opts.jtd)return J(q,[],!1,oe);const Ae=(0,l.getSchemaTypes)(q.schema),Je=(0,l.coerceAndCheckDataType)(q,Ae);J(q,Ae,!Je,oe)}function Me(q){const{schema:oe,errSchemaPath:Ae,opts:Je,self:ct}=q;oe.$ref&&Je.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(oe,ct.RULES)&&ct.logger.warn(`$ref: keywords ignored in schema at path "${Ae}"`)}function Ee(q){const{schema:oe,opts:Ae}=q;oe.default!==void 0&&Ae.useDefaults&&Ae.strictSchema&&(0,h.checkStrictMode)(q,"default is ignored in the schema root")}function Xe(q){const oe=q.schema[q.opts.schemaId];oe&&(q.baseId=(0,E.resolveUrl)(q.opts.uriResolver,q.baseId,oe))}function Bt(q){if(q.schema.$async&&!q.schemaEnv.$async)throw new Error("async schema in sync schema")}function st({gen:q,schemaEnv:oe,schema:Ae,errSchemaPath:Je,opts:ct}){const At=Ae.$comment;if(ct.$comment===!0)q.code((0,b._)`${t.default.self}.logger.log(${At})`);else if(typeof ct.$comment=="function"){const qt=(0,b.str)`${Je}/$comment`,zt=q.scopeValue("root",{ref:oe.root});q.code((0,b._)`${t.default.self}.opts.$comment(${At}, ${qt}, ${zt}.schema)`)}}function jt(q){const{gen:oe,schemaEnv:Ae,validateName:Je,ValidationError:ct,opts:At}=q;Ae.$async?oe.if((0,b._)`${t.default.errors} === 0`,()=>oe.return(t.default.data),()=>oe.throw((0,b._)`new ${ct}(${t.default.vErrors})`)):(oe.assign((0,b._)`${Je}.errors`,t.default.vErrors),At.unevaluated&&Zt(q),oe.return((0,b._)`${t.default.errors} === 0`))}function Zt({gen:q,evaluated:oe,props:Ae,items:Je}){Ae instanceof b.Name&&q.assign((0,b._)`${oe}.props`,Ae),Je instanceof b.Name&&q.assign((0,b._)`${oe}.items`,Je)}function J(q,oe,Ae,Je){const{gen:ct,schema:At,data:qt,allErrors:zt,opts:Be,self:Pt}=q,{RULES:dt}=Pt;if(At.$ref&&(Be.ignoreKeywordsWithRef||!(0,h.schemaHasRulesButRef)(At,dt))){ct.block(()=>Ge(q,"$ref",dt.all.$ref.definition));return}Be.jtd||Re(q,oe),ct.block(()=>{for(const dn of dt.rules)hn(dn);hn(dt.post)});function hn(dn){(0,u.shouldUseGroup)(At,dn)&&(dn.type?(ct.if((0,m.checkDataType)(dn.type,qt,Be.strictNumbers)),an(q,dn),oe.length===1&&oe[0]===dn.type&&Ae&&(ct.else(),(0,m.reportTypeError)(q)),ct.endIf()):an(q,dn),zt||ct.if((0,b._)`${t.default.errors} === ${Je||0}`))}}function an(q,oe){const{gen:Ae,schema:Je,opts:{useDefaults:ct}}=q;ct&&(0,a.assignDefaults)(q,oe.type),Ae.block(()=>{for(const At of oe.rules)(0,u.shouldUseRule)(Je,At)&&Ge(q,At.keyword,At.definition,oe.type)})}function Re(q,oe){q.schemaEnv.meta||!q.opts.strictTypes||(xe(q,oe),q.opts.allowUnionTypes||O(q,oe),Ze(q,q.dataTypes))}function xe(q,oe){if(oe.length){if(!q.dataTypes.length){q.dataTypes=oe;return}oe.forEach(Ae=>{R(q.dataTypes,Ae)||ee(q,`type "${Ae}" not allowed by context "${q.dataTypes.join(",")}"`)}),N(q,oe)}}function O(q,oe){oe.length>1&&!(oe.length===2&&oe.includes("null"))&&ee(q,"use allowUnionTypes to allow union type keyword")}function Ze(q,oe){const Ae=q.self.RULES.all;for(const Je in Ae){const ct=Ae[Je];if(typeof ct=="object"&&(0,u.shouldUseRule)(q.schema,ct)){const{type:At}=ct.definition;At.length&&!At.some(qt=>ce(oe,qt))&&ee(q,`missing type "${At.join(",")}" for keyword "${Je}"`)}}}function ce(q,oe){return q.includes(oe)||oe==="number"&&q.includes("integer")}function R(q,oe){return q.includes(oe)||oe==="integer"&&q.includes("number")}function N(q,oe){const Ae=[];for(const Je of q.dataTypes)R(oe,Je)?Ae.push(Je):oe.includes("integer")&&Je==="number"&&Ae.push("integer");q.dataTypes=Ae}function ee(q,oe){const Ae=q.schemaEnv.baseId+q.errSchemaPath;oe+=` at "${Ae}" (strictTypes)`,(0,h.checkStrictMode)(q,oe,q.opts.strictTypes)}class Pe{constructor(oe,Ae,Je){if((0,c.validateKeywordUsage)(oe,Ae,Je),this.gen=oe.gen,this.allErrors=oe.allErrors,this.keyword=Je,this.data=oe.data,this.schema=oe.schema[Je],this.$data=Ae.$data&&oe.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,h.schemaRefOrVal)(oe,this.schema,Je,this.$data),this.schemaType=Ae.schemaType,this.parentSchema=oe.schema,this.params={},this.it=oe,this.def=Ae,this.$data)this.schemaCode=oe.gen.const("vSchema",It(this.$data,oe));else if(this.schemaCode=this.schemaValue,!(0,c.validSchemaType)(this.schema,Ae.schemaType,Ae.allowUndefined))throw new Error(`${Je} value must be ${JSON.stringify(Ae.schemaType)}`);("code"in Ae?Ae.trackErrors:Ae.errors!==!1)&&(this.errsCount=oe.gen.const("_errs",t.default.errors))}result(oe,Ae,Je){this.failResult((0,b.not)(oe),Ae,Je)}failResult(oe,Ae,Je){this.gen.if(oe),Je?Je():this.error(),Ae?(this.gen.else(),Ae(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(oe,Ae){this.failResult((0,b.not)(oe),void 0,Ae)}fail(oe){if(oe===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(oe),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(oe){if(!this.$data)return this.fail(oe);const{schemaCode:Ae}=this;this.fail((0,b._)`${Ae} !== undefined && (${(0,b.or)(this.invalid$data(),oe)})`)}error(oe,Ae,Je){if(Ae){this.setParams(Ae),this._error(oe,Je),this.setParams({});return}this._error(oe,Je)}_error(oe,Ae){(oe?$.reportExtraError:$.reportError)(this,this.def.error,Ae)}$dataError(){(0,$.reportError)(this,this.def.$dataError||$.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,$.resetErrorsCount)(this.gen,this.errsCount)}ok(oe){this.allErrors||this.gen.if(oe)}setParams(oe,Ae){Ae?Object.assign(this.params,oe):this.params=oe}block$data(oe,Ae,Je=b.nil){this.gen.block(()=>{this.check$data(oe,Je),Ae()})}check$data(oe=b.nil,Ae=b.nil){if(!this.$data)return;const{gen:Je,schemaCode:ct,schemaType:At,def:qt}=this;Je.if((0,b.or)((0,b._)`${ct} === undefined`,Ae)),oe!==b.nil&&Je.assign(oe,!0),(At.length||qt.validateSchema)&&(Je.elseIf(this.invalid$data()),this.$dataError(),oe!==b.nil&&Je.assign(oe,!1)),Je.else()}invalid$data(){const{gen:oe,schemaCode:Ae,schemaType:Je,def:ct,it:At}=this;return(0,b.or)(qt(),zt());function qt(){if(Je.length){if(!(Ae instanceof b.Name))throw new Error("ajv implementation error");const Be=Array.isArray(Je)?Je:[Je];return(0,b._)`${(0,m.checkDataTypes)(Be,Ae,At.opts.strictNumbers,m.DataType.Wrong)}`}return b.nil}function zt(){if(ct.validateSchema){const Be=oe.scopeValue("validate$data",{ref:ct.validateSchema});return(0,b._)`!${Be}(${Ae})`}return b.nil}}subschema(oe,Ae){const Je=(0,_.getSubschema)(this.it,oe);(0,_.extendSubschemaData)(Je,this.it,oe),(0,_.extendSubschemaMode)(Je,oe);const ct={...this.it,...Je,items:void 0,props:void 0};return T(ct,Ae),ct}mergeEvaluated(oe,Ae){const{it:Je,gen:ct}=this;Je.opts.unevaluated&&(Je.props!==!0&&oe.props!==void 0&&(Je.props=h.mergeEvaluated.props(ct,oe.props,Je.props,Ae)),Je.items!==!0&&oe.items!==void 0&&(Je.items=h.mergeEvaluated.items(ct,oe.items,Je.items,Ae)))}mergeValidEvaluated(oe,Ae){const{it:Je,gen:ct}=this;if(Je.opts.unevaluated&&(Je.props!==!0||Je.items!==!0))return ct.if(Ae,()=>this.mergeEvaluated(oe,b.Name)),!0}}d.KeywordCxt=Pe;function Ge(q,oe,Ae,Je){const ct=new Pe(q,Ae,oe);"code"in Ae?Ae.code(ct,Je):ct.$data&&Ae.validate?(0,c.funcKeywordCode)(ct,Ae):"macro"in Ae?(0,c.macroKeywordCode)(ct,Ae):(Ae.compile||Ae.validate)&&(0,c.funcKeywordCode)(ct,Ae)}const Ct=/^\/(?:[^~]|~0|~1)*$/,ht=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function It(q,{dataLevel:oe,dataNames:Ae,dataPathArr:Je}){let ct,At;if(q==="")return t.default.rootData;if(q[0]==="/"){if(!Ct.test(q))throw new Error(`Invalid JSON-pointer: ${q}`);ct=q,At=t.default.rootData}else{const Pt=ht.exec(q);if(!Pt)throw new Error(`Invalid JSON-pointer: ${q}`);const dt=+Pt[1];if(ct=Pt[2],ct==="#"){if(dt>=oe)throw new Error(Be("property/index",dt));return Je[oe-dt]}if(dt>oe)throw new Error(Be("data",dt));if(At=Ae[oe-dt],!ct)return At}let qt=At;const zt=ct.split("/");for(const Pt of zt)Pt&&(At=(0,b._)`${At}${(0,b.getProperty)((0,h.unescapeJsonPointer)(Pt))}`,qt=(0,b._)`${qt} && ${At}`);return qt;function Be(Pt,dt){return`Cannot access ${Pt} ${dt} levels up, current level is ${oe}`}}d.getData=It},83558:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateKeywordUsage=d.validSchemaType=d.funcKeywordCode=d.macroKeywordCode=void 0;const n=e(82481),l=e(99583),u=e(9280),m=e(59428);function a(L,k){const{gen:z,keyword:y,schema:S,parentSchema:x,it:f}=L,T=k.macro.call(f.self,S,x,f),C=E(z,y,T);f.opts.validateSchema!==!1&&f.self.validateSchema(T,!0);const P=z.name("valid");L.subschema({schema:T,schemaPath:n.nil,errSchemaPath:`${f.errSchemaPath}/${y}`,topSchemaRef:C,compositeRule:!0},P),L.pass(P,()=>L.error(!0))}d.macroKeywordCode=a;function c(L,k){var z;const{gen:y,keyword:S,schema:x,parentSchema:f,$data:T,it:C}=L;t(C,k);const P=!T&&k.compile?k.compile.call(C.self,x,f,C):k.validate,p=E(y,S,P),Z=y.let("valid");L.block$data(Z,F),L.ok((z=k.valid)!==null&&z!==void 0?z:Z);function F(){if(k.errors===!1)Xe(),k.modifying&&_(L),Bt(()=>L.error());else{const st=k.async?Me():Ee();k.modifying&&_(L),Bt(()=>b(L,st))}}function Me(){const st=y.let("ruleErrs",null);return y.try(()=>Xe((0,n._)`await `),jt=>y.assign(Z,!1).if((0,n._)`${jt} instanceof ${C.ValidationError}`,()=>y.assign(st,(0,n._)`${jt}.errors`),()=>y.throw(jt))),st}function Ee(){const st=(0,n._)`${p}.errors`;return y.assign(st,null),Xe(n.nil),st}function Xe(st=k.async?(0,n._)`await `:n.nil){const jt=C.opts.passContext?l.default.this:l.default.self,Zt=!("compile"in k&&!T||k.schema===!1);y.assign(Z,(0,n._)`${st}${(0,u.callValidateCode)(L,p,jt,Zt)}`,k.modifying)}function Bt(st){var jt;y.if((0,n.not)((jt=k.valid)!==null&&jt!==void 0?jt:Z),st)}}d.funcKeywordCode=c;function _(L){const{gen:k,data:z,it:y}=L;k.if(y.parentData,()=>k.assign(z,(0,n._)`${y.parentData}[${y.parentDataProperty}]`))}function b(L,k){const{gen:z}=L;z.if((0,n._)`Array.isArray(${k})`,()=>{z.assign(l.default.vErrors,(0,n._)`${l.default.vErrors} === null ? ${k} : ${l.default.vErrors}.concat(${k})`).assign(l.default.errors,(0,n._)`${l.default.vErrors}.length`),(0,m.extendErrors)(L)},()=>L.error())}function t({schemaEnv:L},k){if(k.async&&!L.$async)throw new Error("async keyword in sync schema")}function E(L,k,z){if(z===void 0)throw new Error(`keyword "${k}" failed to compile`);return L.scopeValue("keyword",typeof z=="function"?{ref:z}:{ref:z,code:(0,n.stringify)(z)})}function h(L,k,z=!1){return!k.length||k.some(y=>y==="array"?Array.isArray(L):y==="object"?L&&typeof L=="object"&&!Array.isArray(L):typeof L==y||z&&typeof L=="undefined")}d.validSchemaType=h;function $({schema:L,opts:k,self:z,errSchemaPath:y},S,x){if(Array.isArray(S.keyword)?!S.keyword.includes(x):S.keyword!==x)throw new Error("ajv implementation error");const f=S.dependencies;if(f!=null&&f.some(T=>!Object.prototype.hasOwnProperty.call(L,T)))throw new Error(`parent schema must have dependencies of ${x}: ${f.join(",")}`);if(S.validateSchema&&!S.validateSchema(L[x])){const C=`keyword "${x}" value is invalid at path "${y}": `+z.errorsText(S.validateSchema.errors);if(k.validateSchema==="log")z.logger.error(C);else throw new Error(C)}}d.validateKeywordUsage=$},20521:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.extendSubschemaMode=d.extendSubschemaData=d.getSubschema=void 0;const n=e(82481),l=e(1849);function u(c,{keyword:_,schemaProp:b,schema:t,schemaPath:E,errSchemaPath:h,topSchemaRef:$}){if(_!==void 0&&t!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(_!==void 0){const L=c.schema[_];return b===void 0?{schema:L,schemaPath:(0,n._)`${c.schemaPath}${(0,n.getProperty)(_)}`,errSchemaPath:`${c.errSchemaPath}/${_}`}:{schema:L[b],schemaPath:(0,n._)`${c.schemaPath}${(0,n.getProperty)(_)}${(0,n.getProperty)(b)}`,errSchemaPath:`${c.errSchemaPath}/${_}/${(0,l.escapeFragment)(b)}`}}if(t!==void 0){if(E===void 0||h===void 0||$===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:t,schemaPath:E,topSchemaRef:$,errSchemaPath:h}}throw new Error('either "keyword" or "schema" must be passed')}d.getSubschema=u;function m(c,_,{dataProp:b,dataPropType:t,data:E,dataTypes:h,propertyName:$}){if(E!==void 0&&b!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:L}=_;if(b!==void 0){const{errorPath:z,dataPathArr:y,opts:S}=_,x=L.let("data",(0,n._)`${_.data}${(0,n.getProperty)(b)}`,!0);k(x),c.errorPath=(0,n.str)`${z}${(0,l.getErrorPath)(b,t,S.jsPropertySyntax)}`,c.parentDataProperty=(0,n._)`${b}`,c.dataPathArr=[...y,c.parentDataProperty]}if(E!==void 0){const z=E instanceof n.Name?E:L.let("data",E,!0);k(z),$!==void 0&&(c.propertyName=$)}h&&(c.dataTypes=h);function k(z){c.data=z,c.dataLevel=_.dataLevel+1,c.dataTypes=[],_.definedProperties=new Set,c.parentData=_.data,c.dataNames=[..._.dataNames,z]}}d.extendSubschemaData=m;function a(c,{jtdDiscriminator:_,jtdMetadata:b,compositeRule:t,createErrors:E,allErrors:h}){t!==void 0&&(c.compositeRule=t),E!==void 0&&(c.createErrors=E),h!==void 0&&(c.allErrors=h),c.jtdDiscriminator=_,c.jtdMetadata=b}d.extendSubschemaMode=a},61889:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.CodeGen=d.Name=d.nil=d.stringify=d.str=d._=d.KeywordCxt=void 0;var n=e(4371);Object.defineProperty(d,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var l=e(82481);Object.defineProperty(d,"_",{enumerable:!0,get:function(){return l._}}),Object.defineProperty(d,"str",{enumerable:!0,get:function(){return l.str}}),Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return l.stringify}}),Object.defineProperty(d,"nil",{enumerable:!0,get:function(){return l.nil}}),Object.defineProperty(d,"Name",{enumerable:!0,get:function(){return l.Name}}),Object.defineProperty(d,"CodeGen",{enumerable:!0,get:function(){return l.CodeGen}});const u=e(14319),m=e(30283),a=e(18288),c=e(62902),_=e(82481),b=e(2710),t=e(93277),E=e(1849),h=e(85310),$=e(3075),L=(xe,O)=>new RegExp(xe,O);L.code="new RegExp";const k=["removeAdditional","useDefaults","coerceTypes"],z=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},S={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},x=200;function f(xe){var O,Ze,ce,R,N,ee,Pe,Ge,Ct,ht,It,q,oe,Ae,Je,ct,At,qt,zt,Be,Pt,dt,hn,dn,bn;const it=xe.strict,St=(O=xe.code)===null||O===void 0?void 0:O.optimize,En=St===!0||St===void 0?1:St||0,ln=(ce=(Ze=xe.code)===null||Ze===void 0?void 0:Ze.regExp)!==null&&ce!==void 0?ce:L,fe=(R=xe.uriResolver)!==null&&R!==void 0?R:$.default;return{strictSchema:(ee=(N=xe.strictSchema)!==null&&N!==void 0?N:it)!==null&&ee!==void 0?ee:!0,strictNumbers:(Ge=(Pe=xe.strictNumbers)!==null&&Pe!==void 0?Pe:it)!==null&&Ge!==void 0?Ge:!0,strictTypes:(ht=(Ct=xe.strictTypes)!==null&&Ct!==void 0?Ct:it)!==null&&ht!==void 0?ht:"log",strictTuples:(q=(It=xe.strictTuples)!==null&&It!==void 0?It:it)!==null&&q!==void 0?q:"log",strictRequired:(Ae=(oe=xe.strictRequired)!==null&&oe!==void 0?oe:it)!==null&&Ae!==void 0?Ae:!1,code:xe.code?{...xe.code,optimize:En,regExp:ln}:{optimize:En,regExp:ln},loopRequired:(Je=xe.loopRequired)!==null&&Je!==void 0?Je:x,loopEnum:(ct=xe.loopEnum)!==null&&ct!==void 0?ct:x,meta:(At=xe.meta)!==null&&At!==void 0?At:!0,messages:(qt=xe.messages)!==null&&qt!==void 0?qt:!0,inlineRefs:(zt=xe.inlineRefs)!==null&&zt!==void 0?zt:!0,schemaId:(Be=xe.schemaId)!==null&&Be!==void 0?Be:"$id",addUsedSchema:(Pt=xe.addUsedSchema)!==null&&Pt!==void 0?Pt:!0,validateSchema:(dt=xe.validateSchema)!==null&&dt!==void 0?dt:!0,validateFormats:(hn=xe.validateFormats)!==null&&hn!==void 0?hn:!0,unicodeRegExp:(dn=xe.unicodeRegExp)!==null&&dn!==void 0?dn:!0,int32range:(bn=xe.int32range)!==null&&bn!==void 0?bn:!0,uriResolver:fe}}class T{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...f(O)};const{es5:Ze,lines:ce}=this.opts.code;this.scope=new _.ValueScope({scope:{},prefixes:z,es5:Ze,lines:ce}),this.logger=Xe(O.logger);const R=O.validateFormats;O.validateFormats=!1,this.RULES=(0,a.getRules)(),C.call(this,y,O,"NOT SUPPORTED"),C.call(this,S,O,"DEPRECATED","warn"),this._metaOpts=Me.call(this),O.formats&&Z.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&F.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),p.call(this),O.validateFormats=R}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:Ze,schemaId:ce}=this.opts;let R=h;ce==="id"&&(R={...h},R.id=R.$id,delete R.$id),Ze&&O&&this.addMetaSchema(R,R[ce],!1)}defaultMeta(){const{meta:O,schemaId:Ze}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[Ze]||O:void 0}validate(O,Ze){let ce;if(typeof O=="string"){if(ce=this.getSchema(O),!ce)throw new Error(`no schema with key or ref "${O}"`)}else ce=this.compile(O);const R=ce(Ze);return"$async"in ce||(this.errors=ce.errors),R}compile(O,Ze){const ce=this._addSchema(O,Ze);return ce.validate||this._compileSchemaEnv(ce)}compileAsync(O,Ze){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ce}=this.opts;return R.call(this,O,Ze);async function R(ht,It){await N.call(this,ht.$schema);const q=this._addSchema(ht,It);return q.validate||ee.call(this,q)}async function N(ht){ht&&!this.getSchema(ht)&&await R.call(this,{$ref:ht},!0)}async function ee(ht){try{return this._compileSchemaEnv(ht)}catch(It){if(!(It instanceof m.default))throw It;return Pe.call(this,It),await Ge.call(this,It.missingSchema),ee.call(this,ht)}}function Pe({missingSchema:ht,missingRef:It}){if(this.refs[ht])throw new Error(`AnySchema ${ht} is loaded but ${It} cannot be resolved`)}async function Ge(ht){const It=await Ct.call(this,ht);this.refs[ht]||await N.call(this,It.$schema),this.refs[ht]||this.addSchema(It,ht,Ze)}async function Ct(ht){const It=this._loading[ht];if(It)return It;try{return await(this._loading[ht]=ce(ht))}finally{delete this._loading[ht]}}}addSchema(O,Ze,ce,R=this.opts.validateSchema){if(Array.isArray(O)){for(const ee of O)this.addSchema(ee,void 0,ce,R);return this}let N;if(typeof O=="object"){const{schemaId:ee}=this.opts;if(N=O[ee],N!==void 0&&typeof N!="string")throw new Error(`schema ${ee} must be string`)}return Ze=(0,b.normalizeId)(Ze||N),this._checkUnique(Ze),this.schemas[Ze]=this._addSchema(O,ce,Ze,R,!0),this}addMetaSchema(O,Ze,ce=this.opts.validateSchema){return this.addSchema(O,Ze,!0,ce),this}validateSchema(O,Ze){if(typeof O=="boolean")return!0;let ce;if(ce=O.$schema,ce!==void 0&&typeof ce!="string")throw new Error("$schema must be a string");if(ce=ce||this.opts.defaultMeta||this.defaultMeta(),!ce)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const R=this.validate(ce,O);if(!R&&Ze){const N="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(N);else throw new Error(N)}return R}getSchema(O){let Ze;for(;typeof(Ze=P.call(this,O))=="string";)O=Ze;if(Ze===void 0){const{schemaId:ce}=this.opts,R=new c.SchemaEnv({schema:{},schemaId:ce});if(Ze=c.resolveSchema.call(this,R,O),!Ze)return;this.refs[O]=Ze}return Ze.validate||this._compileSchemaEnv(Ze)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Ze=P.call(this,O);return typeof Ze=="object"&&this._cache.delete(Ze.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const Ze=O;this._cache.delete(Ze);let ce=O[this.opts.schemaId];return ce&&(ce=(0,b.normalizeId)(ce),delete this.schemas[ce],delete this.refs[ce]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const Ze of O)this.addKeyword(Ze);return this}addKeyword(O,Ze){let ce;if(typeof O=="string")ce=O,typeof Ze=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Ze.keyword=ce);else if(typeof O=="object"&&Ze===void 0){if(Ze=O,ce=Ze.keyword,Array.isArray(ce)&&!ce.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(st.call(this,ce,Ze),!Ze)return(0,E.eachItem)(ce,N=>jt.call(this,N)),this;J.call(this,Ze);const R={...Ze,type:(0,t.getJSONTypes)(Ze.type),schemaType:(0,t.getJSONTypes)(Ze.schemaType)};return(0,E.eachItem)(ce,R.type.length===0?N=>jt.call(this,N,R):N=>R.type.forEach(ee=>jt.call(this,N,R,ee))),this}getKeyword(O){const Ze=this.RULES.all[O];return typeof Ze=="object"?Ze.definition:!!Ze}removeKeyword(O){const{RULES:Ze}=this;delete Ze.keywords[O],delete Ze.all[O];for(const ce of Ze.rules){const R=ce.rules.findIndex(N=>N.keyword===O);R>=0&&ce.rules.splice(R,1)}return this}addFormat(O,Ze){return typeof Ze=="string"&&(Ze=new RegExp(Ze)),this.formats[O]=Ze,this}errorsText(O=this.errors,{separator:Ze=", ",dataVar:ce="data"}={}){return!O||O.length===0?"No errors":O.map(R=>`${ce}${R.instancePath} ${R.message}`).reduce((R,N)=>R+Ze+N)}$dataMetaSchema(O,Ze){const ce=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const R of Ze){const N=R.split("/").slice(1);let ee=O;for(const Pe of N)ee=ee[Pe];for(const Pe in ce){const Ge=ce[Pe];if(typeof Ge!="object")continue;const{$data:Ct}=Ge.definition,ht=ee[Pe];Ct&&ht&&(ee[Pe]=Re(ht))}}return O}_removeAllSchemas(O,Ze){for(const ce in O){const R=O[ce];(!Ze||Ze.test(ce))&&(typeof R=="string"?delete O[ce]:R&&!R.meta&&(this._cache.delete(R.schema),delete O[ce]))}}_addSchema(O,Ze,ce,R=this.opts.validateSchema,N=this.opts.addUsedSchema){let ee;const{schemaId:Pe}=this.opts;if(typeof O=="object")ee=O[Pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let Ge=this._cache.get(O);if(Ge!==void 0)return Ge;ce=(0,b.normalizeId)(ee||ce);const Ct=b.getSchemaRefs.call(this,O,ce);return Ge=new c.SchemaEnv({schema:O,schemaId:Pe,meta:Ze,baseId:ce,localRefs:Ct}),this._cache.set(Ge.schema,Ge),N&&!ce.startsWith("#")&&(ce&&this._checkUnique(ce),this.refs[ce]=Ge),R&&this.validateSchema(O,!0),Ge}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):c.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const Ze=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,O)}finally{this.opts=Ze}}}d.default=T,T.ValidationError=u.default,T.MissingRefError=m.default;function C(xe,O,Ze,ce="error"){for(const R in xe){const N=R;N in O&&this.logger[ce](`${Ze}: option ${R}. ${xe[N]}`)}}function P(xe){return xe=(0,b.normalizeId)(xe),this.schemas[xe]||this.refs[xe]}function p(){const xe=this.opts.schemas;if(xe)if(Array.isArray(xe))this.addSchema(xe);else for(const O in xe)this.addSchema(xe[O],O)}function Z(){for(const xe in this.opts.formats){const O=this.opts.formats[xe];O&&this.addFormat(xe,O)}}function F(xe){if(Array.isArray(xe)){this.addVocabulary(xe);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in xe){const Ze=xe[O];Ze.keyword||(Ze.keyword=O),this.addKeyword(Ze)}}function Me(){const xe={...this.opts};for(const O of k)delete xe[O];return xe}const Ee={log(){},warn(){},error(){}};function Xe(xe){if(xe===!1)return Ee;if(xe===void 0)return console;if(xe.log&&xe.warn&&xe.error)return xe;throw new Error("logger must implement log, warn and error methods")}const Bt=/^[a-z_$][a-z0-9_$:-]*$/i;function st(xe,O){const{RULES:Ze}=this;if((0,E.eachItem)(xe,ce=>{if(Ze.keywords[ce])throw new Error(`Keyword ${ce} is already defined`);if(!Bt.test(ce))throw new Error(`Keyword ${ce} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function jt(xe,O,Ze){var ce;const R=O==null?void 0:O.post;if(Ze&&R)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:N}=this;let ee=R?N.post:N.rules.find(({type:Ge})=>Ge===Ze);if(ee||(ee={type:Ze,rules:[]},N.rules.push(ee)),N.keywords[xe]=!0,!O)return;const Pe={keyword:xe,definition:{...O,type:(0,t.getJSONTypes)(O.type),schemaType:(0,t.getJSONTypes)(O.schemaType)}};O.before?Zt.call(this,ee,Pe,O.before):ee.rules.push(Pe),N.all[xe]=Pe,(ce=O.implements)===null||ce===void 0||ce.forEach(Ge=>this.addKeyword(Ge))}function Zt(xe,O,Ze){const ce=xe.rules.findIndex(R=>R.keyword===Ze);ce>=0?xe.rules.splice(ce,0,O):(xe.rules.push(O),this.logger.warn(`rule ${Ze} is not defined`))}function J(xe){let{metaSchema:O}=xe;O!==void 0&&(xe.$data&&this.opts.$data&&(O=Re(O)),xe.validateSchema=this.compile(O,!0))}const an={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Re(xe){return{anyOf:[xe,an]}}},55947:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(69378);n.code='require("ajv/dist/runtime/equal").default',d.default=n},7836:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0});function e(n){const l=n.length;let u=0,m=0,a;for(;m<l;)u++,a=n.charCodeAt(m++),a>=55296&&a<=56319&&m<l&&(a=n.charCodeAt(m),(a&64512)===56320&&m++);return u}d.default=e,e.code='require("ajv/dist/runtime/ucs2length").default'},3075:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(12854);n.code='require("ajv/dist/runtime/uri").default',d.default=n},14319:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0});class e extends Error{constructor(l){super("validation failed"),this.errors=l,this.ajv=this.validation=!0}}d.default=e},52251:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateAdditionalItems=void 0;const n=e(82481),l=e(1849),m={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:c}})=>(0,n.str)`must NOT have more than ${c} items`,params:({params:{len:c}})=>(0,n._)`{limit: ${c}}`},code(c){const{parentSchema:_,it:b}=c,{items:t}=_;if(!Array.isArray(t)){(0,l.checkStrictMode)(b,'"additionalItems" is ignored when "items" is not an array of schemas');return}a(c,t)}};function a(c,_){const{gen:b,schema:t,data:E,keyword:h,it:$}=c;$.items=!0;const L=b.const("len",(0,n._)`${E}.length`);if(t===!1)c.setParams({len:_.length}),c.pass((0,n._)`${L} <= ${_.length}`);else if(typeof t=="object"&&!(0,l.alwaysValidSchema)($,t)){const z=b.var("valid",(0,n._)`${L} <= ${_.length}`);b.if((0,n.not)(z),()=>k(z)),c.ok(z)}function k(z){b.forRange("i",_.length,L,y=>{c.subschema({keyword:h,dataProp:y,dataPropType:l.Type.Num},z),$.allErrors||b.if((0,n.not)(z),()=>b.break())})}}d.validateAdditionalItems=a,d.default=m},17831:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),l=e(82481),u=e(99583),m=e(1849),c={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:_})=>(0,l._)`{additionalProperty: ${_.additionalProperty}}`},code(_){const{gen:b,schema:t,parentSchema:E,data:h,errsCount:$,it:L}=_;if(!$)throw new Error("ajv implementation error");const{allErrors:k,opts:z}=L;if(L.props=!0,z.removeAdditional!=="all"&&(0,m.alwaysValidSchema)(L,t))return;const y=(0,n.allSchemaProperties)(E.properties),S=(0,n.allSchemaProperties)(E.patternProperties);x(),_.ok((0,l._)`${$} === ${u.default.errors}`);function x(){b.forIn("key",h,p=>{!y.length&&!S.length?C(p):b.if(f(p),()=>C(p))})}function f(p){let Z;if(y.length>8){const F=(0,m.schemaRefOrVal)(L,E.properties,"properties");Z=(0,n.isOwnProperty)(b,F,p)}else y.length?Z=(0,l.or)(...y.map(F=>(0,l._)`${p} === ${F}`)):Z=l.nil;return S.length&&(Z=(0,l.or)(Z,...S.map(F=>(0,l._)`${(0,n.usePattern)(_,F)}.test(${p})`))),(0,l.not)(Z)}function T(p){b.code((0,l._)`delete ${h}[${p}]`)}function C(p){if(z.removeAdditional==="all"||z.removeAdditional&&t===!1){T(p);return}if(t===!1){_.setParams({additionalProperty:p}),_.error(),k||b.break();return}if(typeof t=="object"&&!(0,m.alwaysValidSchema)(L,t)){const Z=b.name("valid");z.removeAdditional==="failing"?(P(p,Z,!1),b.if((0,l.not)(Z),()=>{_.reset(),T(p)})):(P(p,Z),k||b.if((0,l.not)(Z),()=>b.break()))}}function P(p,Z,F){const Me={keyword:"additionalProperties",dataProp:p,dataPropType:m.Type.Str};F===!1&&Object.assign(Me,{compositeRule:!0,createErrors:!1,allErrors:!1}),_.subschema(Me,Z)}}};d.default=c},15319:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(1849),l={keyword:"allOf",schemaType:"array",code(u){const{gen:m,schema:a,it:c}=u;if(!Array.isArray(a))throw new Error("ajv implementation error");const _=m.name("valid");a.forEach((b,t)=>{if((0,n.alwaysValidSchema)(c,b))return;const E=u.subschema({keyword:"allOf",schemaProp:t},_);u.ok(_),u.mergeEvaluated(E)})}};d.default=l},60513:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const l={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e(9280).validateUnion,error:{message:"must match a schema in anyOf"}};d.default=l},51622:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),m={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:a,max:c}})=>c===void 0?(0,n.str)`must contain at least ${a} valid item(s)`:(0,n.str)`must contain at least ${a} and no more than ${c} valid item(s)`,params:({params:{min:a,max:c}})=>c===void 0?(0,n._)`{minContains: ${a}}`:(0,n._)`{minContains: ${a}, maxContains: ${c}}`},code(a){const{gen:c,schema:_,parentSchema:b,data:t,it:E}=a;let h,$;const{minContains:L,maxContains:k}=b;E.opts.next?(h=L===void 0?1:L,$=k):h=1;const z=c.const("len",(0,n._)`${t}.length`);if(a.setParams({min:h,max:$}),$===void 0&&h===0){(0,l.checkStrictMode)(E,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if($!==void 0&&h>$){(0,l.checkStrictMode)(E,'"minContains" > "maxContains" is always invalid'),a.fail();return}if((0,l.alwaysValidSchema)(E,_)){let T=(0,n._)`${z} >= ${h}`;$!==void 0&&(T=(0,n._)`${T} && ${z} <= ${$}`),a.pass(T);return}E.items=!0;const y=c.name("valid");$===void 0&&h===1?x(y,()=>c.if(y,()=>c.break())):h===0?(c.let(y,!0),$!==void 0&&c.if((0,n._)`${t}.length > 0`,S)):(c.let(y,!1),S()),a.result(y,()=>a.reset());function S(){const T=c.name("_valid"),C=c.let("count",0);x(T,()=>c.if(T,()=>f(C)))}function x(T,C){c.forRange("i",0,z,P=>{a.subschema({keyword:"contains",dataProp:P,dataPropType:l.Type.Num,compositeRule:!0},T),C()})}function f(T){c.code((0,n._)`${T}++`),$===void 0?c.if((0,n._)`${T} >= ${h}`,()=>c.assign(y,!0).break()):(c.if((0,n._)`${T} > ${$}`,()=>c.assign(y,!1).break()),h===1?c.assign(y,!0):c.if((0,n._)`${T} >= ${h}`,()=>c.assign(y,!0)))}}};d.default=m},8524:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateSchemaDeps=d.validatePropertyDeps=d.error=void 0;const n=e(82481),l=e(1849),u=e(9280);d.error={message:({params:{property:b,depsCount:t,deps:E}})=>{const h=t===1?"property":"properties";return(0,n.str)`must have ${h} ${E} when property ${b} is present`},params:({params:{property:b,depsCount:t,deps:E,missingProperty:h}})=>(0,n._)`{property: ${b},
    missingProperty: ${h},
    depsCount: ${t},
    deps: ${E}}`};const m={keyword:"dependencies",type:"object",schemaType:"object",error:d.error,code(b){const[t,E]=a(b);c(b,t),_(b,E)}};function a({schema:b}){const t={},E={};for(const h in b){if(h==="__proto__")continue;const $=Array.isArray(b[h])?t:E;$[h]=b[h]}return[t,E]}function c(b,t=b.schema){const{gen:E,data:h,it:$}=b;if(Object.keys(t).length===0)return;const L=E.let("missing");for(const k in t){const z=t[k];if(z.length===0)continue;const y=(0,u.propertyInData)(E,h,k,$.opts.ownProperties);b.setParams({property:k,depsCount:z.length,deps:z.join(", ")}),$.allErrors?E.if(y,()=>{for(const S of z)(0,u.checkReportMissingProp)(b,S)}):(E.if((0,n._)`${y} && (${(0,u.checkMissingProp)(b,z,L)})`),(0,u.reportMissingProp)(b,L),E.else())}}d.validatePropertyDeps=c;function _(b,t=b.schema){const{gen:E,data:h,keyword:$,it:L}=b,k=E.name("valid");for(const z in t)(0,l.alwaysValidSchema)(L,t[z])||(E.if((0,u.propertyInData)(E,h,z,L.opts.ownProperties),()=>{const y=b.subschema({keyword:$,schemaProp:z},k);b.mergeValidEvaluated(y,k)},()=>E.var(k,!0)),b.ok(k))}d.validateSchemaDeps=_,d.default=m},74413:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),m={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:c})=>(0,n.str)`must match "${c.ifClause}" schema`,params:({params:c})=>(0,n._)`{failingKeyword: ${c.ifClause}}`},code(c){const{gen:_,parentSchema:b,it:t}=c;b.then===void 0&&b.else===void 0&&(0,l.checkStrictMode)(t,'"if" without "then" and "else" is ignored');const E=a(t,"then"),h=a(t,"else");if(!E&&!h)return;const $=_.let("valid",!0),L=_.name("_valid");if(k(),c.reset(),E&&h){const y=_.let("ifClause");c.setParams({ifClause:y}),_.if(L,z("then",y),z("else",y))}else E?_.if(L,z("then")):_.if((0,n.not)(L),z("else"));c.pass($,()=>c.error(!0));function k(){const y=c.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},L);c.mergeEvaluated(y)}function z(y,S){return()=>{const x=c.subschema({keyword:y},L);_.assign($,L),c.mergeValidEvaluated(x,$),S?_.assign(S,(0,n._)`${y}`):c.setParams({ifClause:y})}}}};function a(c,_){const b=c.schema[_];return b!==void 0&&!(0,l.alwaysValidSchema)(c,b)}d.default=m},14226:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(52251),l=e(38968),u=e(3042),m=e(69719),a=e(51622),c=e(8524),_=e(53261),b=e(17831),t=e(81734),E=e(47673),h=e(73270),$=e(60513),L=e(84959),k=e(15319),z=e(74413),y=e(5095);function S(x=!1){const f=[h.default,$.default,L.default,k.default,z.default,y.default,_.default,b.default,c.default,t.default,E.default];return x?f.push(l.default,m.default):f.push(n.default,u.default),f.push(a.default),f}d.default=S},3042:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateTuple=void 0;const n=e(82481),l=e(1849),u=e(9280),m={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(c){const{schema:_,it:b}=c;if(Array.isArray(_))return a(c,"additionalItems",_);b.items=!0,!(0,l.alwaysValidSchema)(b,_)&&c.ok((0,u.validateArray)(c))}};function a(c,_,b=c.schema){const{gen:t,parentSchema:E,data:h,keyword:$,it:L}=c;y(E),L.opts.unevaluated&&b.length&&L.items!==!0&&(L.items=l.mergeEvaluated.items(t,b.length,L.items));const k=t.name("valid"),z=t.const("len",(0,n._)`${h}.length`);b.forEach((S,x)=>{(0,l.alwaysValidSchema)(L,S)||(t.if((0,n._)`${z} > ${x}`,()=>c.subschema({keyword:$,schemaProp:x,dataProp:x},k)),c.ok(k))});function y(S){const{opts:x,errSchemaPath:f}=L,T=b.length,C=T===S.minItems&&(T===S.maxItems||S[_]===!1);if(x.strictTuples&&!C){const P=`"${$}" is ${T}-tuple, but minItems or maxItems/${_} are not specified or different at path "${f}"`;(0,l.checkStrictMode)(L,P,x.strictTuples)}}}d.validateTuple=a,d.default=m},69719:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),u=e(9280),m=e(52251),c={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:_}})=>(0,n.str)`must NOT have more than ${_} items`,params:({params:{len:_}})=>(0,n._)`{limit: ${_}}`},code(_){const{schema:b,parentSchema:t,it:E}=_,{prefixItems:h}=t;E.items=!0,!(0,l.alwaysValidSchema)(E,b)&&(h?(0,m.validateAdditionalItems)(_,h):_.ok((0,u.validateArray)(_)))}};d.default=c},73270:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(1849),l={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(u){const{gen:m,schema:a,it:c}=u;if((0,n.alwaysValidSchema)(c,a)){u.fail();return}const _=m.name("valid");u.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},_),u.failResult(_,()=>u.reset(),()=>u.error())},error:{message:"must NOT be valid"}};d.default=l},84959:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),m={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:a})=>(0,n._)`{passingSchemas: ${a.passing}}`},code(a){const{gen:c,schema:_,parentSchema:b,it:t}=a;if(!Array.isArray(_))throw new Error("ajv implementation error");if(t.opts.discriminator&&b.discriminator)return;const E=_,h=c.let("valid",!1),$=c.let("passing",null),L=c.name("_valid");a.setParams({passing:$}),c.block(k),a.result(h,()=>a.reset(),()=>a.error(!0));function k(){E.forEach((z,y)=>{let S;(0,l.alwaysValidSchema)(t,z)?c.var(L,!0):S=a.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},L),y>0&&c.if((0,n._)`${L} && ${h}`).assign(h,!1).assign($,(0,n._)`[${$}, ${y}]`).else(),c.if(L,()=>{c.assign(h,!0),c.assign($,y),S&&a.mergeEvaluated(S,n.Name)})})}}};d.default=m},47673:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),l=e(82481),u=e(1849),m=e(1849),a={keyword:"patternProperties",type:"object",schemaType:"object",code(c){const{gen:_,schema:b,data:t,parentSchema:E,it:h}=c,{opts:$}=h,L=(0,n.allSchemaProperties)(b),k=L.filter(C=>(0,u.alwaysValidSchema)(h,b[C]));if(L.length===0||k.length===L.length&&(!h.opts.unevaluated||h.props===!0))return;const z=$.strictSchema&&!$.allowMatchingProperties&&E.properties,y=_.name("valid");h.props!==!0&&!(h.props instanceof l.Name)&&(h.props=(0,m.evaluatedPropsToName)(_,h.props));const{props:S}=h;x();function x(){for(const C of L)z&&f(C),h.allErrors?T(C):(_.var(y,!0),T(C),_.if(y))}function f(C){for(const P in z)new RegExp(C).test(P)&&(0,u.checkStrictMode)(h,`property ${P} matches pattern ${C} (use allowMatchingProperties)`)}function T(C){_.forIn("key",t,P=>{_.if((0,l._)`${(0,n.usePattern)(c,C)}.test(${P})`,()=>{const p=k.includes(C);p||c.subschema({keyword:"patternProperties",schemaProp:C,dataProp:P,dataPropType:m.Type.Str},y),h.opts.unevaluated&&S!==!0?_.assign((0,l._)`${S}[${P}]`,!0):!p&&!h.allErrors&&_.if((0,l.not)(y),()=>_.break())})})}}};d.default=a},38968:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(3042),l={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:u=>(0,n.validateTuple)(u,"items")};d.default=l},81734:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(4371),l=e(9280),u=e(1849),m=e(17831),a={keyword:"properties",type:"object",schemaType:"object",code(c){const{gen:_,schema:b,parentSchema:t,data:E,it:h}=c;h.opts.removeAdditional==="all"&&t.additionalProperties===void 0&&m.default.code(new n.KeywordCxt(h,m.default,"additionalProperties"));const $=(0,l.allSchemaProperties)(b);for(const S of $)h.definedProperties.add(S);h.opts.unevaluated&&$.length&&h.props!==!0&&(h.props=u.mergeEvaluated.props(_,(0,u.toHash)($),h.props));const L=$.filter(S=>!(0,u.alwaysValidSchema)(h,b[S]));if(L.length===0)return;const k=_.name("valid");for(const S of L)z(S)?y(S):(_.if((0,l.propertyInData)(_,E,S,h.opts.ownProperties)),y(S),h.allErrors||_.else().var(k,!0),_.endIf()),c.it.definedProperties.add(S),c.ok(k);function z(S){return h.opts.useDefaults&&!h.compositeRule&&b[S].default!==void 0}function y(S){c.subschema({keyword:"properties",schemaProp:S,dataProp:S},k)}}};d.default=a},53261:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),m={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:a})=>(0,n._)`{propertyName: ${a.propertyName}}`},code(a){const{gen:c,schema:_,data:b,it:t}=a;if((0,l.alwaysValidSchema)(t,_))return;const E=c.name("valid");c.forIn("key",b,h=>{a.setParams({propertyName:h}),a.subschema({keyword:"propertyNames",data:h,dataTypes:["string"],propertyName:h,compositeRule:!0},E),c.if((0,n.not)(E),()=>{a.error(!0),t.allErrors||c.break()})}),a.ok(E)}};d.default=m},5095:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(1849),l={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:u,parentSchema:m,it:a}){m.if===void 0&&(0,n.checkStrictMode)(a,`"${u}" without "if" is ignored`)}};d.default=l},9280:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateUnion=d.validateArray=d.usePattern=d.callValidateCode=d.schemaProperties=d.allSchemaProperties=d.noPropertyInData=d.propertyInData=d.isOwnProperty=d.hasPropFunc=d.reportMissingProp=d.checkMissingProp=d.checkReportMissingProp=void 0;const n=e(82481),l=e(1849),u=e(99583),m=e(1849);function a(f,T){const{gen:C,data:P,it:p}=f;C.if(h(C,P,T,p.opts.ownProperties),()=>{f.setParams({missingProperty:(0,n._)`${T}`},!0),f.error()})}d.checkReportMissingProp=a;function c({gen:f,data:T,it:{opts:C}},P,p){return(0,n.or)(...P.map(Z=>(0,n.and)(h(f,T,Z,C.ownProperties),(0,n._)`${p} = ${Z}`)))}d.checkMissingProp=c;function _(f,T){f.setParams({missingProperty:T},!0),f.error()}d.reportMissingProp=_;function b(f){return f.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}d.hasPropFunc=b;function t(f,T,C){return(0,n._)`${b(f)}.call(${T}, ${C})`}d.isOwnProperty=t;function E(f,T,C,P){const p=(0,n._)`${T}${(0,n.getProperty)(C)} !== undefined`;return P?(0,n._)`${p} && ${t(f,T,C)}`:p}d.propertyInData=E;function h(f,T,C,P){const p=(0,n._)`${T}${(0,n.getProperty)(C)} === undefined`;return P?(0,n.or)(p,(0,n.not)(t(f,T,C))):p}d.noPropertyInData=h;function $(f){return f?Object.keys(f).filter(T=>T!=="__proto__"):[]}d.allSchemaProperties=$;function L(f,T){return $(T).filter(C=>!(0,l.alwaysValidSchema)(f,T[C]))}d.schemaProperties=L;function k({schemaCode:f,data:T,it:{gen:C,topSchemaRef:P,schemaPath:p,errorPath:Z},it:F},Me,Ee,Xe){const Bt=Xe?(0,n._)`${f}, ${T}, ${P}${p}`:T,st=[[u.default.instancePath,(0,n.strConcat)(u.default.instancePath,Z)],[u.default.parentData,F.parentData],[u.default.parentDataProperty,F.parentDataProperty],[u.default.rootData,u.default.rootData]];F.opts.dynamicRef&&st.push([u.default.dynamicAnchors,u.default.dynamicAnchors]);const jt=(0,n._)`${Bt}, ${C.object(...st)}`;return Ee!==n.nil?(0,n._)`${Me}.call(${Ee}, ${jt})`:(0,n._)`${Me}(${jt})`}d.callValidateCode=k;const z=(0,n._)`new RegExp`;function y({gen:f,it:{opts:T}},C){const P=T.unicodeRegExp?"u":"",{regExp:p}=T.code,Z=p(C,P);return f.scopeValue("pattern",{key:Z.toString(),ref:Z,code:(0,n._)`${p.code==="new RegExp"?z:(0,m.useFunc)(f,p)}(${C}, ${P})`})}d.usePattern=y;function S(f){const{gen:T,data:C,keyword:P,it:p}=f,Z=T.name("valid");if(p.allErrors){const Me=T.let("valid",!0);return F(()=>T.assign(Me,!1)),Me}return T.var(Z,!0),F(()=>T.break()),Z;function F(Me){const Ee=T.const("len",(0,n._)`${C}.length`);T.forRange("i",0,Ee,Xe=>{f.subschema({keyword:P,dataProp:Xe,dataPropType:l.Type.Num},Z),T.if((0,n.not)(Z),Me)})}}d.validateArray=S;function x(f){const{gen:T,schema:C,keyword:P,it:p}=f;if(!Array.isArray(C))throw new Error("ajv implementation error");if(C.some(Ee=>(0,l.alwaysValidSchema)(p,Ee))&&!p.opts.unevaluated)return;const F=T.let("valid",!1),Me=T.name("_valid");T.block(()=>C.forEach((Ee,Xe)=>{const Bt=f.subschema({keyword:P,schemaProp:Xe,compositeRule:!0},Me);T.assign(F,(0,n._)`${F} || ${Me}`),f.mergeValidEvaluated(Bt,Me)||T.if((0,n.not)(F))})),f.result(F,()=>f.reset(),()=>f.error(!0))}d.validateUnion=x},5671:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};d.default=e},10356:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(5671),l=e(24302),u=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,l.default];d.default=u},24302:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.callRef=d.getValidate=void 0;const n=e(30283),l=e(9280),u=e(82481),m=e(99583),a=e(62902),c=e(1849),_={keyword:"$ref",schemaType:"string",code(E){const{gen:h,schema:$,it:L}=E,{baseId:k,schemaEnv:z,validateName:y,opts:S,self:x}=L,{root:f}=z;if(($==="#"||$==="#/")&&k===f.baseId)return C();const T=a.resolveRef.call(x,f,k,$);if(T===void 0)throw new n.default(L.opts.uriResolver,k,$);if(T instanceof a.SchemaEnv)return P(T);return p(T);function C(){if(z===f)return t(E,y,z,z.$async);const Z=h.scopeValue("root",{ref:f});return t(E,(0,u._)`${Z}.validate`,f,f.$async)}function P(Z){const F=b(E,Z);t(E,F,Z,Z.$async)}function p(Z){const F=h.scopeValue("schema",S.code.source===!0?{ref:Z,code:(0,u.stringify)(Z)}:{ref:Z}),Me=h.name("valid"),Ee=E.subschema({schema:Z,dataTypes:[],schemaPath:u.nil,topSchemaRef:F,errSchemaPath:$},Me);E.mergeEvaluated(Ee),E.ok(Me)}}};function b(E,h){const{gen:$}=E;return h.validate?$.scopeValue("validate",{ref:h.validate}):(0,u._)`${$.scopeValue("wrapper",{ref:h})}.validate`}d.getValidate=b;function t(E,h,$,L){const{gen:k,it:z}=E,{allErrors:y,schemaEnv:S,opts:x}=z,f=x.passContext?m.default.this:u.nil;L?T():C();function T(){if(!S.$async)throw new Error("async schema referenced by sync schema");const Z=k.let("valid");k.try(()=>{k.code((0,u._)`await ${(0,l.callValidateCode)(E,h,f)}`),p(h),y||k.assign(Z,!0)},F=>{k.if((0,u._)`!(${F} instanceof ${z.ValidationError})`,()=>k.throw(F)),P(F),y||k.assign(Z,!1)}),E.ok(Z)}function C(){E.result((0,l.callValidateCode)(E,h,f),()=>p(h),()=>P(h))}function P(Z){const F=(0,u._)`${Z}.errors`;k.assign(m.default.vErrors,(0,u._)`${m.default.vErrors} === null ? ${F} : ${m.default.vErrors}.concat(${F})`),k.assign(m.default.errors,(0,u._)`${m.default.vErrors}.length`)}function p(Z){var F;if(!z.opts.unevaluated)return;const Me=(F=$==null?void 0:$.validate)===null||F===void 0?void 0:F.evaluated;if(z.props!==!0)if(Me&&!Me.dynamicProps)Me.props!==void 0&&(z.props=c.mergeEvaluated.props(k,Me.props,z.props));else{const Ee=k.var("props",(0,u._)`${Z}.evaluated.props`);z.props=c.mergeEvaluated.props(k,Ee,z.props,u.Name)}if(z.items!==!0)if(Me&&!Me.dynamicItems)Me.items!==void 0&&(z.items=c.mergeEvaluated.items(k,Me.items,z.items));else{const Ee=k.var("items",(0,u._)`${Z}.evaluated.items`);z.items=c.mergeEvaluated.items(k,Ee,z.items,u.Name)}}}d.callRef=t,d.default=_},99908:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(521),u=e(62902),m=e(1849),c={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:_,tagName:b}})=>_===l.DiscrError.Tag?`tag "${b}" must be string`:`value of tag "${b}" must be in oneOf`,params:({params:{discrError:_,tag:b,tagName:t}})=>(0,n._)`{error: ${_}, tag: ${t}, tagValue: ${b}}`},code(_){const{gen:b,data:t,schema:E,parentSchema:h,it:$}=_,{oneOf:L}=h;if(!$.opts.discriminator)throw new Error("discriminator: requires discriminator option");const k=E.propertyName;if(typeof k!="string")throw new Error("discriminator: requires propertyName");if(E.mapping)throw new Error("discriminator: mapping is not supported");if(!L)throw new Error("discriminator: requires oneOf keyword");const z=b.let("valid",!1),y=b.const("tag",(0,n._)`${t}${(0,n.getProperty)(k)}`);b.if((0,n._)`typeof ${y} == "string"`,()=>S(),()=>_.error(!1,{discrError:l.DiscrError.Tag,tag:y,tagName:k})),_.ok(z);function S(){const T=f();b.if(!1);for(const C in T)b.elseIf((0,n._)`${y} === ${C}`),b.assign(z,x(T[C]));b.else(),_.error(!1,{discrError:l.DiscrError.Mapping,tag:y,tagName:k}),b.endIf()}function x(T){const C=b.name("valid"),P=_.subschema({keyword:"oneOf",schemaProp:T},C);return _.mergeEvaluated(P,n.Name),C}function f(){var T;const C={},P=Z(h);let p=!0;for(let Ee=0;Ee<L.length;Ee++){let Xe=L[Ee];Xe!=null&&Xe.$ref&&!(0,m.schemaHasRulesButRef)(Xe,$.self.RULES)&&(Xe=u.resolveRef.call($.self,$.schemaEnv.root,$.baseId,Xe==null?void 0:Xe.$ref),Xe instanceof u.SchemaEnv&&(Xe=Xe.schema));const Bt=(T=Xe==null?void 0:Xe.properties)===null||T===void 0?void 0:T[k];if(typeof Bt!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${k}"`);p=p&&(P||Z(Xe)),F(Bt,Ee)}if(!p)throw new Error(`discriminator: "${k}" must be required`);return C;function Z({required:Ee}){return Array.isArray(Ee)&&Ee.includes(k)}function F(Ee,Xe){if(Ee.const)Me(Ee.const,Xe);else if(Ee.enum)for(const Bt of Ee.enum)Me(Bt,Xe);else throw new Error(`discriminator: "properties/${k}" must have "const" or "enum"`)}function Me(Ee,Xe){if(typeof Ee!="string"||Ee in C)throw new Error(`discriminator: "${k}" values must be unique strings`);C[Ee]=Xe}}}};d.default=c},521:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.DiscrError=void 0;var e;(function(n){n.Tag="tag",n.Mapping="mapping"})(e=d.DiscrError||(d.DiscrError={}))},57993:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(10356),l=e(16282),u=e(14226),m=e(6989),a=e(68373),c=[n.default,l.default,(0,u.default)(),m.default,a.metadataVocabulary,a.contentVocabulary];d.default=c},43202:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),u={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:m})=>(0,n.str)`must match format "${m}"`,params:({schemaCode:m})=>(0,n._)`{format: ${m}}`},code(m,a){const{gen:c,data:_,$data:b,schema:t,schemaCode:E,it:h}=m,{opts:$,errSchemaPath:L,schemaEnv:k,self:z}=h;if(!$.validateFormats)return;b?y():S();function y(){const x=c.scopeValue("formats",{ref:z.formats,code:$.code.formats}),f=c.const("fDef",(0,n._)`${x}[${E}]`),T=c.let("fType"),C=c.let("format");c.if((0,n._)`typeof ${f} == "object" && !(${f} instanceof RegExp)`,()=>c.assign(T,(0,n._)`${f}.type || "string"`).assign(C,(0,n._)`${f}.validate`),()=>c.assign(T,(0,n._)`"string"`).assign(C,f)),m.fail$data((0,n.or)(P(),p()));function P(){return $.strictSchema===!1?n.nil:(0,n._)`${E} && !${C}`}function p(){const Z=k.$async?(0,n._)`(${f}.async ? await ${C}(${_}) : ${C}(${_}))`:(0,n._)`${C}(${_})`,F=(0,n._)`(typeof ${C} == "function" ? ${Z} : ${C}.test(${_}))`;return(0,n._)`${C} && ${C} !== true && ${T} === ${a} && !${F}`}}function S(){const x=z.formats[t];if(!x){P();return}if(x===!0)return;const[f,T,C]=p(x);f===a&&m.pass(Z());function P(){if($.strictSchema===!1){z.logger.warn(F());return}throw new Error(F());function F(){return`unknown format "${t}" ignored in schema at path "${L}"`}}function p(F){const Me=F instanceof RegExp?(0,n.regexpCode)(F):$.code.formats?(0,n._)`${$.code.formats}${(0,n.getProperty)(t)}`:void 0,Ee=c.scopeValue("formats",{key:t,ref:F,code:Me});return typeof F=="object"&&!(F instanceof RegExp)?[F.type||"string",F.validate,(0,n._)`${Ee}.validate`]:["string",F,Ee]}function Z(){if(typeof x=="object"&&!(x instanceof RegExp)&&x.async){if(!k.$async)throw new Error("async format in sync schema");return(0,n._)`await ${C}(${_})`}return typeof T=="function"?(0,n._)`${C}(${_})`:(0,n._)`${C}.test(${_})`}}}};d.default=u},6989:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const l=[e(43202).default];d.default=l},68373:function(Rt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.contentVocabulary=d.metadataVocabulary=void 0,d.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],d.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},80750:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),u=e(55947),a={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:c})=>(0,n._)`{allowedValue: ${c}}`},code(c){const{gen:_,data:b,$data:t,schemaCode:E,schema:h}=c;t||h&&typeof h=="object"?c.fail$data((0,n._)`!${(0,l.useFunc)(_,u.default)}(${b}, ${E})`):c.fail((0,n._)`${h} !== ${b}`)}};d.default=a},28109:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),u=e(55947),a={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:c})=>(0,n._)`{allowedValues: ${c}}`},code(c){const{gen:_,data:b,$data:t,schema:E,schemaCode:h,it:$}=c;if(!t&&E.length===0)throw new Error("enum must have non-empty array");const L=E.length>=$.opts.loopEnum;let k;const z=()=>k!=null?k:k=(0,l.useFunc)(_,u.default);let y;if(L||t)y=_.let("valid"),c.block$data(y,S);else{if(!Array.isArray(E))throw new Error("ajv implementation error");const f=_.const("vSchema",h);y=(0,n.or)(...E.map((T,C)=>x(f,C)))}c.pass(y);function S(){_.assign(y,!1),_.forOf("v",h,f=>_.if((0,n._)`${z()}(${b}, ${f})`,()=>_.assign(y,!0).break()))}function x(f,T){const C=E[T];return typeof C=="object"&&C!==null?(0,n._)`${z()}(${b}, ${f}[${T}])`:(0,n._)`${b} === ${C}`}}};d.default=a},16282:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(41619),l=e(36701),u=e(34660),m=e(72326),a=e(69354),c=e(60881),_=e(42632),b=e(41985),t=e(80750),E=e(28109),h=[n.default,l.default,u.default,m.default,a.default,c.default,_.default,b.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},t.default,E.default];d.default=h},42632:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),u={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:m,schemaCode:a}){const c=m==="maxItems"?"more":"fewer";return(0,n.str)`must NOT have ${c} than ${a} items`},params:({schemaCode:m})=>(0,n._)`{limit: ${m}}`},code(m){const{keyword:a,data:c,schemaCode:_}=m,b=a==="maxItems"?n.operators.GT:n.operators.LT;m.fail$data((0,n._)`${c}.length ${b} ${_}`)}};d.default=u},34660:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=e(1849),u=e(7836),a={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:c,schemaCode:_}){const b=c==="maxLength"?"more":"fewer";return(0,n.str)`must NOT have ${b} than ${_} characters`},params:({schemaCode:c})=>(0,n._)`{limit: ${c}}`},code(c){const{keyword:_,data:b,schemaCode:t,it:E}=c,h=_==="maxLength"?n.operators.GT:n.operators.LT,$=E.opts.unicode===!1?(0,n._)`${b}.length`:(0,n._)`${(0,l.useFunc)(c.gen,u.default)}(${b})`;c.fail$data((0,n._)`${$} ${h} ${t}`)}};d.default=a},41619:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),l=n.operators,u={maximum:{okStr:"<=",ok:l.LTE,fail:l.GT},minimum:{okStr:">=",ok:l.GTE,fail:l.LT},exclusiveMaximum:{okStr:"<",ok:l.LT,fail:l.GTE},exclusiveMinimum:{okStr:">",ok:l.GT,fail:l.LTE}},m={message:({keyword:c,schemaCode:_})=>(0,n.str)`must be ${u[c].okStr} ${_}`,params:({keyword:c,schemaCode:_})=>(0,n._)`{comparison: ${u[c].okStr}, limit: ${_}}`},a={keyword:Object.keys(u),type:"number",schemaType:"number",$data:!0,error:m,code(c){const{keyword:_,data:b,schemaCode:t}=c;c.fail$data((0,n._)`${b} ${u[_].fail} ${t} || isNaN(${b})`)}};d.default=a},69354:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),u={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:m,schemaCode:a}){const c=m==="maxProperties"?"more":"fewer";return(0,n.str)`must NOT have ${c} than ${a} properties`},params:({schemaCode:m})=>(0,n._)`{limit: ${m}}`},code(m){const{keyword:a,data:c,schemaCode:_}=m,b=a==="maxProperties"?n.operators.GT:n.operators.LT;m.fail$data((0,n._)`Object.keys(${c}).length ${b} ${_}`)}};d.default=u},36701:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),u={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:m})=>(0,n.str)`must be multiple of ${m}`,params:({schemaCode:m})=>(0,n._)`{multipleOf: ${m}}`},code(m){const{gen:a,data:c,schemaCode:_,it:b}=m,t=b.opts.multipleOfPrecision,E=a.let("res"),h=t?(0,n._)`Math.abs(Math.round(${E}) - ${E}) > 1e-${t}`:(0,n._)`${E} !== parseInt(${E})`;m.fail$data((0,n._)`(${_} === 0 || (${E} = ${c}/${_}, ${h}))`)}};d.default=u},72326:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),l=e(82481),m={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:a})=>(0,l.str)`must match pattern "${a}"`,params:({schemaCode:a})=>(0,l._)`{pattern: ${a}}`},code(a){const{data:c,$data:_,schema:b,schemaCode:t,it:E}=a,h=E.opts.unicodeRegExp?"u":"",$=_?(0,l._)`(new RegExp(${t}, ${h}))`:(0,n.usePattern)(a,b);a.fail$data((0,l._)`!${$}.test(${c})`)}};d.default=m},60881:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),l=e(82481),u=e(1849),a={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:c}})=>(0,l.str)`must have required property '${c}'`,params:({params:{missingProperty:c}})=>(0,l._)`{missingProperty: ${c}}`},code(c){const{gen:_,schema:b,schemaCode:t,data:E,$data:h,it:$}=c,{opts:L}=$;if(!h&&b.length===0)return;const k=b.length>=L.loopRequired;if($.allErrors?z():y(),L.strictRequired){const f=c.parentSchema.properties,{definedProperties:T}=c.it;for(const C of b)if((f==null?void 0:f[C])===void 0&&!T.has(C)){const P=$.schemaEnv.baseId+$.errSchemaPath,p=`required property "${C}" is not defined at "${P}" (strictRequired)`;(0,u.checkStrictMode)($,p,$.opts.strictRequired)}}function z(){if(k||h)c.block$data(l.nil,S);else for(const f of b)(0,n.checkReportMissingProp)(c,f)}function y(){const f=_.let("missing");if(k||h){const T=_.let("valid",!0);c.block$data(T,()=>x(f,T)),c.ok(T)}else _.if((0,n.checkMissingProp)(c,b,f)),(0,n.reportMissingProp)(c,f),_.else()}function S(){_.forOf("prop",t,f=>{c.setParams({missingProperty:f}),_.if((0,n.noPropertyInData)(_,E,f,L.ownProperties),()=>c.error())})}function x(f,T){c.setParams({missingProperty:f}),_.forOf(f,t,()=>{_.assign(T,(0,n.propertyInData)(_,E,f,L.ownProperties)),_.if((0,l.not)(T),()=>{c.error(),_.break()})},l.nil)}}};d.default=a},41985:function(Rt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(93277),l=e(82481),u=e(1849),m=e(55947),c={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:_,j:b}})=>(0,l.str)`must NOT have duplicate items (items ## ${b} and ${_} are identical)`,params:({params:{i:_,j:b}})=>(0,l._)`{i: ${_}, j: ${b}}`},code(_){const{gen:b,data:t,$data:E,schema:h,parentSchema:$,schemaCode:L,it:k}=_;if(!E&&!h)return;const z=b.let("valid"),y=$.items?(0,n.getSchemaTypes)($.items):[];_.block$data(z,S,(0,l._)`${L} === false`),_.ok(z);function S(){const C=b.let("i",(0,l._)`${t}.length`),P=b.let("j");_.setParams({i:C,j:P}),b.assign(z,!0),b.if((0,l._)`${C} > 1`,()=>(x()?f:T)(C,P))}function x(){return y.length>0&&!y.some(C=>C==="object"||C==="array")}function f(C,P){const p=b.name("item"),Z=(0,n.checkDataTypes)(y,p,k.opts.strictNumbers,n.DataType.Wrong),F=b.const("indices",(0,l._)`{}`);b.for((0,l._)`;${C}--;`,()=>{b.let(p,(0,l._)`${t}[${C}]`),b.if(Z,(0,l._)`continue`),y.length>1&&b.if((0,l._)`typeof ${p} == "string"`,(0,l._)`${p} += "_"`),b.if((0,l._)`typeof ${F}[${p}] == "number"`,()=>{b.assign(P,(0,l._)`${F}[${p}]`),_.error(),b.assign(z,!1).break()}).code((0,l._)`${F}[${p}] = ${C}`)})}function T(C,P){const p=(0,u.useFunc)(b,m.default),Z=b.name("outer");b.label(Z).for((0,l._)`;${C}--;`,()=>b.for((0,l._)`${P} = ${C}; ${P}--;`,()=>b.if((0,l._)`${p}(${t}[${C}], ${t}[${P}])`,()=>{_.error(),b.assign(z,!1).break(Z)})))}}};d.default=c},53907:function(Rt,d,e){e.d(d,{CX:function(){return ge},WY:function(){return Pn},uC:function(){return ue},xP:function(){return ln},C4:function(){return V},KN:function(){return A},gr:function(){return j},II:function(){return nt},wQ:function(){return nr},Td:function(){return Ge},aq:function(){return ht},eE:function(){return oe},_i:function(){return hn},gN:function(){return ot},YM:function(){return sn},sn:function(){return At},$_:function(){return St},Jv:function(){return Q},pM:function(){return de},CJ:function(){return $e},jJ:function(){return Ke},bg:function(){return dr}});var n=e(2784),l=e(13980),u=e.n(l),m=e(18473),a=e(82394),c=e.n(a),_=e(30705),b=e(30195),t=e(9850),E=e.n(t),h=e(12782),$=e.n(h);const L=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function k(W){return typeof W=="object"&&W!==null&&!Array.isArray(W)}function z(W){if(W===null)return"null";if(Array.isArray(W))return"array";const o=typeof W;return o==="number"&&isNaN(W)?"nan":o==="string"&&W===""?"empty-string":o}const y={type(W,o,i,g){return`Invalid type in config for key '${W}' in '${o}', got ${i}, wanted ${g}`},missing(W){return`Missing required config value at '${W}'`},convert(W,o,i){return`Unable to convert config value for key '${W}' in '${o}' to a ${i}`}};class S{constructor(o,i="mock-config",g,M=""){this.data=o,this.context=i,this.fallback=g,this.prefix=M,this.notifiedFilteredKeys=new Set}static fromConfigs(o){return o.length===0?new S(void 0):o.reduce((i,{data:g,context:M,filteredKeys:ve,deprecatedKeys:Fe})=>{const rt=new S(g,M,i);if(rt.filteredKeys=ve,Fe)for(const{key:xt,description:Wt}of Fe)console.warn(`The configuration key '${xt}' of ${M} is deprecated and may be removed soon. ${Wt||""}`);return rt},void 0)}has(o){var i,g;return this.readValue(o)!==void 0?!0:(g=(i=this.fallback)==null?void 0:i.has(o))!=null?g:!1}keys(){var o,i;const g=this.data?Object.keys(this.data):[],M=(i=(o=this.fallback)==null?void 0:o.keys())!=null?i:[];return[...new Set([...g,...M])]}get(o){const i=this.getOptional(o);if(i===void 0)throw new Error(y.missing(this.fullKey(o!=null?o:"")));return i}getOptional(o){var i,g;const M=E()(this.readValue(o)),ve=(i=this.fallback)==null?void 0:i.getOptional(o);return M===void 0?ve:ve===void 0?M:$()({},{value:ve},{value:M},(Fe,rt)=>!k(rt)||!k(Fe)?rt:void 0).value}getConfig(o){const i=this.getOptionalConfig(o);if(i===void 0)throw new Error(y.missing(this.fullKey(o)));return i}getOptionalConfig(o){var i;const g=this.readValue(o),M=(i=this.fallback)==null?void 0:i.getOptionalConfig(o);if(k(g))return this.copy(g,o,M);if(g!==void 0)throw new TypeError(y.type(this.fullKey(o),this.context,z(g),"object"));return M}getConfigArray(o){const i=this.getOptionalConfigArray(o);if(i===void 0)throw new Error(y.missing(this.fullKey(o)));return i}getOptionalConfigArray(o){var i;const g=this.readConfigValue(o,M=>{if(!Array.isArray(M))return{expected:"object-array"};for(const[ve,Fe]of M.entries())if(!k(Fe))return{expected:"object-array",value:Fe,key:`${o}[${ve}]`};return!0});if(g)return g.map((M,ve)=>this.copy(M,`${o}[${ve}]`))}getNumber(o){const i=this.getOptionalNumber(o);if(i===void 0)throw new Error(y.missing(this.fullKey(o)));return i}getOptionalNumber(o){const i=this.readConfigValue(o,M=>typeof M=="number"||typeof M=="string"||{expected:"number"});if(typeof i=="number"||i===void 0)return i;const g=Number(i);if(!Number.isFinite(g))throw new Error(y.convert(this.fullKey(o),this.context,"number"));return g}getBoolean(o){const i=this.getOptionalBoolean(o);if(i===void 0)throw new Error(y.missing(this.fullKey(o)));return i}getOptionalBoolean(o){const i=this.readConfigValue(o,M=>typeof M=="boolean"||typeof M=="number"||typeof M=="string"||{expected:"boolean"});if(typeof i=="boolean"||i===void 0)return i;const g=String(i).trim();if(/^(?:y|yes|true|1|on)$/i.test(g))return!0;if(/^(?:n|no|false|0|off)$/i.test(g))return!1;throw new Error(y.convert(this.fullKey(o),this.context,"boolean"))}getString(o){const i=this.getOptionalString(o);if(i===void 0)throw new Error(y.missing(this.fullKey(o)));return i}getOptionalString(o){return this.readConfigValue(o,i=>typeof i=="string"&&i!==""||{expected:"string"})}getStringArray(o){const i=this.getOptionalStringArray(o);if(i===void 0)throw new Error(y.missing(this.fullKey(o)));return i}getOptionalStringArray(o){return this.readConfigValue(o,i=>{if(!Array.isArray(i))return{expected:"string-array"};for(const[g,M]of i.entries())if(typeof M!="string"||M==="")return{expected:"string-array",value:M,key:`${o}[${g}]`};return!0})}fullKey(o){return`${this.prefix}${this.prefix?".":""}${o}`}copy(o,i,g){const M=new S(o,this.context,g,this.fullKey(i));return M.filteredKeys=this.filteredKeys,M}readConfigValue(o,i){var g,M;const ve=this.readValue(o);if(ve===void 0)return(M=this.fallback)==null?void 0:M.readConfigValue(o,i);const Fe=i(ve);if(Fe!==!0){const{key:rt=o,value:xt=ve,expected:Wt}=Fe;throw new TypeError(y.type(this.fullKey(rt),this.context,z(xt),Wt))}return ve}readValue(o){const i=o?o.split("."):[];for(const M of i)if(!L.test(M))throw new TypeError(`Invalid config key '${o}'`);if(this.data===void 0)return;let g=this.data;for(const[M,ve]of i.entries())if(k(g))g=g[ve];else if(g!==void 0){const Fe=this.fullKey(i.slice(0,M).join("."));throw new TypeError(y.type(Fe,this.context,z(g),"object"))}return g}}var x=e(73557),f=e(16060),T=e(64279),C=e(72164);class P{constructor(...o){this.holders=o}get(o){for(const i of this.holders){const g=i.get(o);if(g)return g}}}const p=(0,m.CT)("api-context"),Z=W=>{var o;const{apis:i,children:g}=W,M=(o=(0,n.useContext)(p))==null?void 0:o.atVersion(1),ve=M?new P(i,M):i;return n.createElement(p.Provider,{value:(0,m.EI)({1:ve}),children:g})};Z.propTypes={apis:u().shape({get:u().func.isRequired}).isRequired,children:u().node};class F{constructor(o){this.factories=o,this.apis=new Map}static validateFactories(o,i){for(const g of i){const M=[g],ve=new Set;for(;M.length;){const Fe=M.shift(),rt=o.get(Fe);if(rt)for(const xt of Object.values(rt.deps)){if(xt.id===g.id)throw new Error(`Circular dependency of api factory for ${g}`);ve.has(xt)||(ve.add(xt),M.push(xt))}}}}get(o){return this.load(o)}load(o,i=[]){const g=this.apis.get(o.id);if(g)return g;const M=this.factories.get(o);if(!M)return;if(i.includes(M.api))throw new Error(`Circular dependency of api factory for ${M.api}`);const ve=this.loadDeps(o,M.deps,[...i,M.api]),Fe=M.factory(ve);return this.apis.set(o.id,Fe),Fe}loadDeps(o,i,g){const M={};for(const ve in i)if(i.hasOwnProperty(ve)){const Fe=i[ve],rt=this.load(Fe,g);if(!rt)throw new Error(`No API factory available for dependency ${Fe} of dependent ${o}`);M[ve]=rt}return M}}var Me=(W=>(W[W.default=10]="default",W[W.app=50]="app",W[W.static=100]="static",W))(Me||{});class Ee{constructor(){this.factories=new Map}register(o,i){const g=Me[o],M=this.factories.get(i.api.id);return M&&M.priority>=g?!1:(this.factories.set(i.api.id,{priority:g,factory:i}),!0)}get(o){const i=this.factories.get(o.id);if(i)return i.factory}getAllApis(){const o=new Set;for(const{factory:i}of this.factories.values())o.add(i.api);return o}}function Xe(W){return new Promise((o,i)=>{const g=W.width||500,M=W.height||700,ve=window.screen.width/2-g/2,Fe=window.screen.height/2-M/2,rt=window.open(W.url,W.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${g},height=${M},top=${Fe},left=${ve}`);let xt="";if(!rt||typeof rt.closed=="undefined"||rt.closed){const Tn=new Error("Failed to open auth popup.");Tn.name="PopupRejectedError",i(Tn);return}const Wt=Tn=>{if(Tn.source!==rt||Tn.origin!==W.origin)return;const{data:kn}=Tn;if(kn.type==="config_info"){xt=kn.targetOrigin;return}if(kn.type!=="authorization_response")return;const Sn=kn;if("error"in Sn){const Gn=new Error(Sn.error.message);Gn.name=Sn.error.name,i(Gn)}else o(Sn.response);mn()},cn=setInterval(()=>{if(rt.closed){const Tn=`Login failed, ${xt&&xt!==window.location.origin?`Incorrect app origin, expected ${xt}`:"popup was closed"}`,kn=new Error(Tn);kn.name="PopupClosedError",i(kn),mn()}},100);function mn(){window.removeEventListener("message",Wt),clearInterval(cn)}window.addEventListener("message",Wt)})}let Bt=!1;function st(W){return[...W].join(" ")}class jt{constructor(o){var i;const{configApi:g,discoveryApi:M,environment:ve,provider:Fe,joinScopes:rt=st,oauthRequestApi:xt,sessionTransform:Wt=cn=>cn}=o;!Bt&&!g&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),Bt=!0),this.enableExperimentalRedirectFlow=g&&(i=g.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?i:!1,this.authRequester=xt.createAuthRequester({provider:Fe,onAuthRequest:async cn=>this.enableExperimentalRedirectFlow?this.executeRedirect(cn):this.showPopup(cn)}),this.discoveryApi=M,this.environment=ve,this.provider=Fe,this.joinScopesFunc=rt,this.sessionTransform=Wt}async createSession(o){return o.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(o.scopes):this.showPopup(o.scopes):this.authRequester(o.scopes)}async refreshSession(o){const i=await fetch(await this.buildUrl("/refresh",{optional:!0,...o&&{scope:this.joinScopesFunc(o)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(M=>{throw new Error(`Auth refresh request failed, ${M}`)});if(!i.ok){const M=new Error(`Auth refresh request failed, ${i.statusText}`);throw M.status=i.status,M}const g=await i.json();if(g.error){const M=new Error(g.error.message);throw g.error.name&&(M.name=g.error.name),M}return await this.sessionTransform(g)}async removeSession(){const o=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!o.ok){const i=new Error(`Logout request failed, ${o.statusText}`);throw i.status=o.status,i}}async showPopup(o){const i=this.joinScopesFunc(o),g=await this.buildUrl("/start",{scope:i,origin:window.location.origin,flow:"popup"}),M=await Xe({url:g,name:`${this.provider.title} Login`,origin:new URL(g).origin,width:450,height:730});return await this.sessionTransform(M)}async executeRedirect(o){const i=this.joinScopesFunc(o);return window.location.href=await this.buildUrl("/start",{scope:i,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(o,i){const g=await this.discoveryApi.getBaseUrl("auth"),M=this.buildQueryString({...i,env:this.environment});return`${g}/${this.provider.id}${o}${M}`}buildQueryString(o){if(!o)return"";const i=Object.entries(o).map(([g,M])=>{if(typeof M=="string")return`${encodeURIComponent(g)}=${encodeURIComponent(M)}`;if(M)return encodeURIComponent(g)}).filter(Boolean).join("&");return i?`?${i}`:""}}class Zt{constructor(o){const{discoveryApi:i,environment:g,provider:M}=o;this.discoveryApi=i,this.environment=g,this.provider=M}async createSession(){const o=await this.buildUrl("/start"),i=await Xe({url:o,name:`${this.provider.title} Login`,origin:new URL(o).origin,width:450,height:730});return{...i,id:i.profile.email}}async refreshSession(){}async removeSession(){const o=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(i=>{throw new Error(`Logout request failed, ${i}`)});if(!o.ok){const i=new Error(`Logout request failed, ${o.statusText}`);throw i.status=o.status,i}}async buildUrl(o){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${o}?env=${this.environment}`}}function J(W,o){for(const i of o)if(!W.has(i))return!1;return!0}class an{constructor(o){this.options=o}sessionExistsAndHasScope(o,i){if(!o)return!1;if(!i||this.options.sessionScopes===void 0)return!0;const g=this.options.sessionScopes(o);return J(g,i)}getExtendedScope(o,i){const g=new Set(this.options.defaultScopes);if(o&&this.options.sessionScopes!==void 0){const M=this.options.sessionScopes(o);for(const ve of M)g.add(ve)}if(i)for(const M of i)g.add(M);return g}}class Re{constructor(){this.isClosed=!1,this.observable=new(c())(o=>this.isClosed?(this.terminatingError?o.error(this.terminatingError):o.complete(),()=>{}):(this.subscribers.add(o),()=>{this.subscribers.delete(o)})),this.subscribers=new Set}[Symbol.observable](){return this}get closed(){return this.isClosed}next(o){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(i=>i.next(o))}error(o){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=o,this.subscribers.forEach(i=>i.error(o))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(o=>o.complete())}subscribe(o,i,g){const M=typeof o=="function"?{next:o,error:i,complete:g}:o;return this.observable.subscribe(M)}}class xe{constructor(o){this.subscribers=new Set,this.isClosed=!1,this.currentValue=o,this.terminatingError=void 0,this.observable=new(c())(i=>this.isClosed?(this.terminatingError?i.error(this.terminatingError):i.complete(),()=>{}):(i.next(this.currentValue),this.subscribers.add(i),()=>{this.subscribers.delete(i)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(o){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=o,this.subscribers.forEach(i=>i.next(o))}error(o){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=o,this.subscribers.forEach(i=>i.error(o))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(o=>o.complete())}subscribe(o,i,g){const M=typeof o=="function"?{next:o,error:i,complete:g}:o;return this.observable.subscribe(M)}}class O{constructor(){this.subject=new xe(_.sM.SignedOut),this.signedIn=!1}setIsSignedIn(o){this.signedIn!==o&&(this.signedIn=o,this.subject.next(this.signedIn?_.sM.SignedIn:_.sM.SignedOut))}sessionState$(){return this.subject}}class Ze{constructor(o){this.stateTracker=new O;const{connector:i,defaultScopes:g=new Set,sessionScopes:M,sessionShouldRefresh:ve}=o;this.connector=i,this.sessionScopesFunc=M,this.sessionShouldRefreshFunc=ve,this.helper=new an({sessionScopes:M,defaultScopes:g})}async getSession(o){if(this.helper.sessionExistsAndHasScope(this.currentSession,o.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const g=await this.collapsedSessionRefresh(o.scopes),M=this.sessionScopesFunc(this.currentSession),ve=this.sessionScopesFunc(g);return J(ve,M)&&(this.currentSession=g),g}catch(g){if(o.optional)return;throw g}}if(!this.currentSession&&!o.instantPopup)try{const i=await this.collapsedSessionRefresh(o.scopes);return this.currentSession=i,this.getSession(o)}catch{}if(!o.optional)return this.currentSession=await this.connector.createSession({...o,scopes:this.helper.getExtendedScope(this.currentSession,o.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(o){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(o);try{const i=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),i}finally{delete this.refreshPromise}}}class ce{constructor(o){this.stateTracker=new O;const{connector:i,defaultScopes:g=new Set,sessionScopes:M}=o;this.connector=i,this.helper=new an({sessionScopes:M,defaultScopes:g})}setSession(o){this.currentSession=o,this.stateTracker.setIsSignedIn(Boolean(o))}async getSession(o){if(this.helper.sessionExistsAndHasScope(this.currentSession,o.scopes))return this.currentSession;if(!o.optional)return this.currentSession=await this.connector.createSession({...o,scopes:this.helper.getExtendedScope(this.currentSession,o.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}class R{constructor(o){const{manager:i,storageKey:g,schema:M,sessionScopes:ve,sessionShouldRefresh:Fe=()=>!1}=o;this.manager=i,this.storageKey=g,this.schema=M,this.sessionShouldRefreshFunc=Fe,this.helper=new an({sessionScopes:ve,defaultScopes:new Set})}setSession(o){this.manager.setSession(o),this.saveSession(o)}async getSession(o){const{scopes:i}=o,g=this.loadSession();if(this.helper.sessionExistsAndHasScope(g,i)&&!this.sessionShouldRefreshFunc(g))return this.manager.setSession(g),g;const M=await this.manager.getSession(o);return this.saveSession(M),M}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const o=localStorage.getItem(this.storageKey);if(o){const i=JSON.parse(o,(g,M)=>(M==null?void 0:M.__type)==="Set"?new Set(M.__value):M);try{return this.schema.parse(i)}catch(g){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${g}`),g}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(o){if(o===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(o)}catch(i){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${i}`);return}localStorage.setItem(this.storageKey,JSON.stringify(o,(i,g)=>g instanceof Set?{__type:"Set",__value:Array.from(g)}:g))}}const N={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class ee{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:ve=N,oauthRequestApi:Fe,defaultScopes:rt=[],scopeTransform:xt=mn=>mn}=o,Wt=new jt({configApi:i,discoveryApi:g,environment:M,provider:ve,oauthRequestApi:Fe,sessionTransform(mn){return{...mn,providerInfo:{idToken:mn.providerInfo.idToken,accessToken:mn.providerInfo.accessToken,scopes:ee.normalizeScopes(xt,mn.providerInfo.scope),expiresAt:new Date(Date.now()+mn.providerInfo.expiresInSeconds*1e3)}}}}),cn=new Ze({connector:Wt,defaultScopes:new Set(rt),sessionScopes:mn=>mn.providerInfo.scopes,sessionShouldRefresh:mn=>(mn.providerInfo.expiresAt.getTime()-Date.now())/1e3<60*5});return new ee({sessionManager:cn,scopeTransform:xt})}constructor(o){this.sessionManager=o.sessionManager,this.scopeTransform=o.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(o,i){var g;const M=ee.normalizeScopes(this.scopeTransform,o),ve=await this.sessionManager.getSession({...i,scopes:M});return(g=ve==null?void 0:ve.providerInfo.accessToken)!=null?g:""}async getIdToken(o={}){var i;const g=await this.sessionManager.getSession({...o,scopes:new Set(["openid"])});return(i=g==null?void 0:g.providerInfo.idToken)!=null?i:""}async getBackstageIdentity(o={}){const i=await this.sessionManager.getSession(o);return i==null?void 0:i.backstageIdentity}async getProfile(o={}){const i=await this.sessionManager.getSession(o);return i==null?void 0:i.profile}static normalizeScopes(o,i){if(!i)return new Set;const g=Array.isArray(i)?i:i.split(/[\s|,]/).filter(Boolean);return new Set(o(g))}}const Pe={id:"github",title:"GitHub",icon:()=>null};class Ge{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:ve=Pe,oauthRequestApi:Fe,defaultScopes:rt=["read:user"]}=o;return ee.create({configApi:i,discoveryApi:g,oauthRequestApi:Fe,provider:ve,environment:M,defaultScopes:rt})}}const Ct={id:"gitlab",title:"GitLab",icon:()=>null};class ht{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:ve=Ct,oauthRequestApi:Fe,defaultScopes:rt=["read_user"]}=o;return ee.create({configApi:i,discoveryApi:g,oauthRequestApi:Fe,provider:ve,environment:M,defaultScopes:rt})}}const It={id:"google",title:"Google",icon:()=>null},q="https://www.googleapis.com/auth/";class oe{static create(o){const{configApi:i,discoveryApi:g,oauthRequestApi:M,environment:ve="development",provider:Fe=It,defaultScopes:rt=["openid",`${q}userinfo.email`,`${q}userinfo.profile`]}=o;return ee.create({configApi:i,discoveryApi:g,oauthRequestApi:M,provider:Fe,environment:ve,defaultScopes:rt,scopeTransform(xt){return xt.map(Wt=>Wt==="openid"?Wt:Wt==="profile"||Wt==="email"?`${q}userinfo.${Wt}`:Wt.startsWith(q)?Wt:`${q}${Wt}`)}})}}const Ae={id:"okta",title:"Okta",icon:()=>null},Je=new Set(["openid","profile","email","phone","address","groups","offline_access"]),ct="okta.";class At{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:ve=Ae,oauthRequestApi:Fe,defaultScopes:rt=["openid","email","profile","offline_access"]}=o;return ee.create({configApi:i,discoveryApi:g,oauthRequestApi:Fe,provider:ve,environment:M,defaultScopes:rt,scopeTransform(xt){return xt.map(Wt=>Je.has(Wt)||Wt.startsWith(ct)?Wt:`${ct}${Wt}`)}})}}const qt=b.z.object({profile:b.z.object({email:b.z.string().optional(),displayName:b.z.string().optional(),picture:b.z.string().optional()}),backstageIdentity:b.z.object({token:b.z.string(),identity:b.z.object({type:b.z.literal("user"),userEntityRef:b.z.string(),ownershipEntityRefs:b.z.array(b.z.string())})})}),zt={id:"saml",title:"SAML",icon:()=>null};class Be{constructor(o){this.sessionManager=o}static create(o){const{discoveryApi:i,environment:g="development",provider:M=zt}=o,ve=new Zt({discoveryApi:i,environment:g,provider:M}),Fe=new ce({connector:ve}),rt=new R({manager:Fe,storageKey:`${M.id}Session`,schema:qt});return new Be(rt)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(o={}){const i=await this.sessionManager.getSession(o);return i==null?void 0:i.backstageIdentity}async getProfile(o={}){const i=await this.sessionManager.getSession(o);return i==null?void 0:i.profile}}const Pt={id:"microsoft",title:"Microsoft",icon:()=>null},dt=class{static create(W){return new dt(W)}constructor(W){const{configApi:o,environment:i="development",provider:g=Pt,oauthRequestApi:M,discoveryApi:ve,defaultScopes:Fe=["openid","offline_access","profile","email","User.Read"],scopeTransform:rt=xt=>xt.concat("offline_access")}=W;this.configApi=o,this.environment=i,this.provider=g,this.oauthRequestApi=M,this.discoveryApi=ve,this.scopeTransform=rt,this.oauth2={[dt.MicrosoftGraphID]:ee.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:Fe})}}microsoftGraph(){return this.oauth2[dt.MicrosoftGraphID]}static resourceForScopes(W){var o;const i=[...new Set(W.split(" ").map(dt.resourceForScope).filter(M=>M!=="openid"))];if(i.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${i.join(", ")}. Access tokens can only have a single audience.`));const g=(o=i[0])!=null?o:dt.MicrosoftGraphID;return Promise.resolve(g)}static resourceForScope(W){var o;const i=(o=W.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:o.groups;if(i){const{resourceURI:g}=i;return g.replace(/^api:\/\//,"")}switch(W){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return dt.MicrosoftGraphID}}async getAccessToken(W,o){const i=W===void 0?dt.MicrosoftGraphID:await dt.resourceForScopes(Array.isArray(W)?W.join(" "):W);return i in this.oauth2||(this.oauth2[i]=ee.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[i].getAccessToken(W,o)}getIdToken(W){return this.microsoftGraph().getIdToken(W)}getProfile(W){return this.microsoftGraph().getProfile(W)}getBackstageIdentity(W){return this.microsoftGraph().getBackstageIdentity(W)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};let hn=dt;hn.MicrosoftGraphID="00000003-0000-0000-c000-000000000000";const dn={id:"onelogin",title:"onelogin",icon:()=>null},bn=new Set(["openid","profile","email","phone","address","groups","offline_access"]),it="onelogin.";class St{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:ve=dn,oauthRequestApi:Fe}=o;return ee.create({configApi:i,discoveryApi:g,oauthRequestApi:Fe,provider:ve,environment:M,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(rt){return rt.map(xt=>bn.has(xt)||xt.startsWith(it)?xt:`${it}${xt}`)}})}}const En={id:"bitbucket",title:"Bitbucket",icon:()=>null};class ln{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:ve=En,oauthRequestApi:Fe,defaultScopes:rt=["team"]}=o;return ee.create({configApi:i,discoveryApi:g,oauthRequestApi:Fe,provider:ve,environment:M,defaultScopes:rt})}}const fe={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class V{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:ve=fe,oauthRequestApi:Fe,defaultScopes:rt=["PROJECT_ADMIN"]}=o;return ee.create({configApi:i,discoveryApi:g,oauthRequestApi:Fe,provider:ve,environment:M,defaultScopes:rt})}}const X={id:"atlassian",title:"Atlassian",icon:()=>null};class ue{static create(o){const{configApi:i,discoveryApi:g,environment:M="development",provider:ve=X,oauthRequestApi:Fe}=o;return ee.create({configApi:i,discoveryApi:g,oauthRequestApi:Fe,provider:ve,environment:M})}}class ge{constructor(){this.subject=new Re}post(o){this.subject.next(o)}alert$(){return this.subject}}class Se{constructor(o){this.actualApis=o}static fromApis(o){return new Se(o)}captureEvent(o){this.actualApis.forEach(i=>{try{i.captureEvent(o)}catch{}})}}class ot{captureEvent(o){}}const tt="theme";class pt{constructor(o){this.themes=o,this.subject=new xe(void 0)}static createWithStorage(o){var i;const g=new pt(o);if(!window.localStorage)return g;const M=(i=window.localStorage.getItem(tt))!=null?i:void 0;return g.setActiveThemeId(M),g.activeThemeId$().subscribe(ve=>{ve?window.localStorage.setItem(tt,ve):window.localStorage.removeItem(tt)}),window.addEventListener("storage",ve=>{var Fe;if(ve.key===tt){const rt=(Fe=localStorage.getItem(tt))!=null?Fe:void 0;g.setActiveThemeId(rt)}}),g}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(o){this.activeThemeId=o,this.subject.next(o)}}const Lt="Invalid discovery URL pattern,";class de{constructor(o){this.parts=o}static compile(o){const i=o.split(/\{\{\s*pluginId\s*\}\}/),g=i.join("pluginId");let M;try{M=new URL(g)}catch{throw new Error(`${Lt} URL '${g}' is invalid`)}if(M.hash)throw new Error(`${Lt} URL must not have a hash`);if(M.search)throw new Error(`${Lt} URL must not have a query`);if(g.endsWith("/"))throw new Error(`${Lt} URL must not end with a slash`);return new de(i)}async getBaseUrl(o){return this.parts.join(encodeURIComponent(o))}}class re{constructor(o,i){this.endpoints=o,this.defaultEndpoint=i}static fromConfig(o,i){var g,M;const ve=(g=i==null?void 0:i.pathPattern)!=null?g:"/api/{{ pluginId }}",Fe=o.getString("backend.baseUrl"),rt=(M=o.getOptionalConfigArray("discovery.endpoints"))==null?void 0:M.flatMap(xt=>{const Wt=typeof xt.get("target")=="object"?xt.getString("target.external"):xt.getString("target"),cn=de.compile(Wt);return xt.getStringArray("plugins").map(mn=>[mn,cn])});return new re(new Map(rt),de.compile(`${Fe}${ve}`))}async getBaseUrl(o){const i=this.endpoints.get(o);return i?i.getBaseUrl(o):this.defaultEndpoint.getBaseUrl(o)}}class A{constructor(o,i){this.alertApi=o,this.errorApi=i}post(o,i){return i!=null&&i.hidden||this.alertApi.post({message:o.message,severity:"error"}),this.errorApi.post(o,i)}error$(){return this.errorApi.error$()}}class j{constructor(){this.subject=new Re}post(o,i){this.subject.next({error:o,context:i})}error$(){return this.subject}}class Q{static forward(o,i){window.addEventListener("unhandledrejection",g=>{o.post(g.reason,i)})}}function me(W){if(W.length<3)throw new Error(`The '${W}' feature flag must have a minimum length of three characters.`);if(W.length>150)throw new Error(`The '${W}' feature flag must not exceed 150 characters.`);if(!W.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${W}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class We{constructor(){this.registeredFeatureFlags=[]}registerFlag(o){me(o.name),this.registeredFeatureFlags.push(o)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(o){return this.flags||(this.flags=this.load()),this.flags.get(o)===_.CL.Active}save(o){this.flags||(this.flags=this.load()),o.merge||this.flags.clear();for(const[g,M]of Object.entries(o.states))this.flags.set(g,M);const i=Array.from(this.flags.entries()).filter(([,g])=>g===_.CL.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(i)))}load(){try{const o=window.localStorage.getItem("featureFlags");if(!o)return new Map;const i=JSON.parse(o);if(typeof i!="object"||i===null||Array.isArray(i))return new Map;const g=Object.entries(i).filter(([M,ve])=>(me(M),ve===_.CL.Active));return new Map(g)}catch{return new Map}}}function Ke(W){var o;let i=W.baseImplementation||e.g.fetch;const g=[(o=W.middleware)!=null?o:[]].flat().reverse();for(const M of g)i=M.apply(i);return{fetch:i}}class He{constructor(o,i,g,M){this.identityApi=o,this.allowUrl=i,this.headerName=g,this.headerValue=M}static create(o){var i,g;const M=mt(o),ve=((i=o.header)==null?void 0:i.name)||"authorization",Fe=((g=o.header)==null?void 0:g.value)||(rt=>`Bearer ${rt}`);return new He(o.identityApi,M,ve,Fe)}apply(o){return async(i,g)=>{const M=new Request(i,g),{token:ve}=await this.identityApi.getCredentials();return M.headers.get(this.headerName)||typeof ve!="string"||!ve||!this.allowUrl(M.url)?o(i,g):(M.headers.set(this.headerName,this.headerValue(ve)),o(M))}}}function mt(W){return W.allowUrl?W.allowUrl:W.urlPrefixAllowlist?se(W.urlPrefixAllowlist):W.config?se([W.config.getString("backend.baseUrl")]):()=>!1}function se(W){const o=W.map(i=>i.replace(/\/$/,""));return i=>o.some(g=>i===g||i.startsWith(`${g}/`))}function pe(W,o){return!o||o==="/"?W:`${W.replace(/\/$/,"")}/${o.replace(/^\//,"")}`}class ye{constructor(o){this.discoveryApi=o}apply(o){return async(i,g)=>{const M=new Request(i,g),ve="plugin://";if(!M.url.startsWith(ve))return o(i,g);const{hostname:Fe,pathname:rt,search:xt,hash:Wt,username:cn,password:mn}=new URL(`http://${M.url.substring(ve.length)}`);let Tn=await this.discoveryApi.getBaseUrl(Fe);if(cn||mn){const Sn=new URL(Tn),Gn=`${cn}${mn?`:${mn}`:""}@`;Tn=`${Sn.protocol}//${Gn}${Sn.host}${Sn.pathname}`}const kn=`${pe(Tn,rt)}${xt}${Wt}`;return o(kn,typeof i=="string"||we(i)?g:i)}}}function we(W){return typeof W=="object"&&(W==null?void 0:W.constructor)===URL}class nt{static resolvePluginProtocol(o){return new ye(o.discoveryApi)}static injectIdentityAuth(o){return He.create(o)}constructor(){}}function $t(W,o){for(const i of o)if(!W.has(i))return!1;return!0}function Ut(W,...o){const i=new Set(W);for(const g of o)for(const M of g)i.add(M);return i}class wt{constructor(){this.requests=[],this.subject=new xe(this.getCurrentPending())}request(o){return new Promise((i,g)=>{this.requests.push({scopes:o,resolve:i,reject:g}),this.subject.next(this.getCurrentPending())})}resolve(o,i){this.requests=this.requests.filter(g=>$t(o,g.scopes)?(g.resolve(i),!1):!0),this.subject.next(this.getCurrentPending())}reject(o){this.requests.forEach(i=>i.reject(o)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const o=this.requests.length===0?void 0:this.requests.slice(1).reduce((i,g)=>Ut(i,g.scopes),this.requests[0].scopes);return{scopes:o,resolve:i=>{o&&this.resolve(o,i)},reject:i=>{o&&this.reject(i)}}}}class sn{constructor(){this.subject=new xe([]),this.currentRequests=[],this.handlerCount=0}createAuthRequester(o){const i=new wt,g=this.handlerCount;return this.handlerCount++,i.pending().subscribe({next:M=>{const ve=this.currentRequests.slice(),Fe=this.makeAuthRequest(M,o);Fe?ve[g]=Fe:delete ve[g],this.currentRequests=ve,this.subject.next(ve.filter(Boolean))}}),M=>i.request(M)}makeAuthRequest(o,i){const{scopes:g}=o;if(g)return{provider:i.provider,trigger:async()=>{const M=await i.onAuthRequest(g);o.resolve(M)},reject:()=>{const M=new Error("Login failed, rejected by user");M.name="RejectedError",o.reject(M)}}}authRequest$(){return this.subject}}const vn=new Map,Le=class{constructor(W,o){this.namespace=W,this.errorApi=o,this.subscribers=new Set,this.observable=new(c())(i=>(this.subscribers.add(i),()=>{this.subscribers.delete(i)}))}static create(W){var o;return new Le((o=W.namespace)!=null?o:"",W.errorApi)}static addStorageEventListener(){window.addEventListener("storage",W=>{var o;for(const[i,g]of vn.entries())(o=W.key)!=null&&o.startsWith(i)&&g.handleStorageChange(W.key)})}get(W){return this.snapshot(W).value}snapshot(W){let o,i="absent";try{const g=localStorage.getItem(this.getKeyName(W));g&&(o=JSON.parse(g,(M,ve)=>(typeof ve=="object"&&ve!==null&&Object.freeze(ve),ve)),i="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${W}`))}return{key:W,value:o,presence:i}}forBucket(W){const o=`${this.namespace}/${W}`;return vn.has(o)||vn.set(o,new Le(o,this.errorApi)),vn.get(o)}async set(W,o){localStorage.setItem(this.getKeyName(W),JSON.stringify(o)),this.notifyChanges(W)}async remove(W){localStorage.removeItem(this.getKeyName(W)),this.notifyChanges(W)}observe$(W){return Le.hasSubscribed||(Le.addStorageEventListener(),Le.hasSubscribed=!0),this.observable.filter(({key:o})=>o===W)}handleStorageChange(W){if(!(W!=null&&W.startsWith(this.namespace)))return;const o=W==null?void 0:W.slice(`${this.namespace}/`.length);o.includes("/")||this.notifyChanges(decodeURIComponent(o))}getKeyName(W){return`${this.namespace}/${encodeURIComponent(W)}`}notifyChanges(W){const o=this.snapshot(W);for(const i of this.subscribers)i.next(o)}};let $e=Le;$e.hasSubscribed=!1;const be=(0,n.createContext)(void 0);function Qe(){const[W]=(0,x.is)(n.createElement(x.AW,{index:!0,element:n.createElement("div",null)}));return!W.index}const lt=(W,o)=>{var i;try{const g=(0,f.fp)(o,{pathname:W}),M=g==null?void 0:g.filter(xt=>{var Wt;return((Wt=xt==null?void 0:xt.route.routeRefs)==null?void 0:Wt.size)>0}).pop(),ve=M==null?void 0:M.route;if(!ve)return;let Fe;ve.routeRefs.size===1&&(Fe=ve.routeRefs.values().next().value);const rt=Object.entries((M==null?void 0:M.params)||{}).reduce((xt,[Wt,cn])=>(cn!==void 0&&(xt[Wt]=cn),xt),{});return{extension:"App",pluginId:((i=ve.plugin)==null?void 0:i.getId())||"root",...Fe?{routeRef:Fe.id}:{},params:rt}}catch{return}},kt=({pathname:W,search:o,hash:i,attributes:g})=>{const M=(0,_.z$)();return(0,n.useEffect)(()=>{M.captureEvent("navigate",`${W}${o}${i}`,{attributes:g})},[M,W,o,i,g]),null},Mt=({routeObjects:W})=>{const{pathname:o,search:i,hash:g}=(0,x.TH)(),{params:M,...ve}=lt(o,W)||{params:{}};return n.createElement(_.fC,{attributes:ve},n.createElement(kt,{pathname:o,search:i,hash:g,attributes:M}))};function nn(W){return Qe()?gn(W):""}function gn(W){var o;let{pathname:i}=new URL((o=W.getOptionalString("app.baseUrl"))!=null?o:"/","http://sample.dev");return i=i.replace(/\/*$/,""),i}function An({component:W,appIdentityProxy:o,children:i}){const[g,M]=(0,n.useState)(),ve=(0,_.h_)(_.Ds),Fe=nn(ve);return g?(o.setTarget(g,{signOutTargetUrl:Fe||"/"}),n.createElement(n.Fragment,null,i)):n.createElement(W,{onSignInSuccess:M})}function Pn(W){const{Router:o,SignInPage:i}=(0,_.qD)().getComponents(),g=(0,_.h_)(_.Ds),M=gn(g),ve=`${M}/*`,Fe=(0,n.useContext)(be);if(!Fe)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:rt,appIdentityProxy:xt}=Fe;return i?Qe()?n.createElement(o,null,n.createElement(Mt,{routeObjects:rt}),n.createElement(An,{component:i,appIdentityProxy:xt},n.createElement(x.Z5,null,n.createElement(x.AW,{path:ve,element:n.createElement(n.Fragment,null,W.children)})))):n.createElement(o,{basename:M},n.createElement(Mt,{routeObjects:rt}),n.createElement(An,{component:i,appIdentityProxy:xt},W.children)):(xt.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:M||"/"}),Qe()?n.createElement(o,null,n.createElement(Mt,{routeObjects:rt}),n.createElement(x.Z5,null,n.createElement(x.AW,{path:ve,element:n.createElement(n.Fragment,null,W.children)}))):n.createElement(o,{basename:M},n.createElement(Mt,{routeObjects:rt}),W.children))}function Bn(W){const o={};for(const g in W.collectors)W.collectors.hasOwnProperty(g)&&(o[g]=W.collectors[g]());const i=[{node:n.Children.toArray(W.root),parent:void 0,contexts:{}}];for(;i.length!==0;){const{node:g,parent:M,contexts:ve}=i.shift();n.Children.forEach(g,Fe=>{if(!(0,n.isValidElement)(Fe))return;const rt={};for(const xt in o)if(o.hasOwnProperty(xt)){const Wt=o[xt];rt[xt]=Wt.visit(Wt.accumulator,Fe,M,ve[xt])}for(const xt of W.discoverers){const Wt=xt(Fe);Wt&&i.push({node:Wt,parent:Fe,contexts:rt})}})}return Object.fromEntries(Object.entries(o).map(([g,M])=>[g,M.accumulator]))}function Un(W,o){return()=>({accumulator:W(),visit:o})}function zn(W){var o;return(o=W.props)==null?void 0:o.children}function Nn(W){var o,i,g;if((o=W.props)!=null&&o.path&&((i=W.props)!=null&&i.element))return(g=W.props)==null?void 0:g.element}const Ve=Un(()=>new Set,(W,o)=>{const i=(0,_.IY)(o,"core.plugin");i&&W.add(i)}),_e=W=>{const{children:o}=W,i=(0,_.h_)(_.W0),g="with"in W?i.isActive(W.with):!i.isActive(W.without);return n.createElement(n.Fragment,null,g?o:null)};(0,_.R5)(_e,"core.featureFlagged",!0);const Ne={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set};function Te(W){var o,i;const g=W;return g!=null&&g.type?(i=(o=g.type.displayName)!=null?o:g.type.name)!=null?i:String(g.type):String(g)}function ut(W,o=new Array){return n.Children.forEach(W,i=>{if(!(0,n.isValidElement)(i))return;const g=(0,_.IY)(i,"core.mountPoint");if(g){const M=(0,_.IY)(i,"core.plugin");o.push({routeRef:g,plugin:M})}ut(i.props.children,o)}),o}const gt=Un(()=>({paths:new Map,parents:new Map,objects:new Array}),(W,o,i,g)=>{var M,ve,Fe,rt,xt,Wt;if(g!=null&&g.isElementAncestor)return g;if((i==null?void 0:i.props.element)===o)return{...g,isElementAncestor:!0};const cn=(M=o.props)==null?void 0:M.path,mn=(0,_.IY)(o,"core.mountPoint");if(mn&&cn)throw new Error(`Path property may not be set directly on a routable extension "${Te(o)}"`);const Tn=(Fe=(ve=g==null?void 0:g.obj)==null?void 0:ve.children)!=null?Fe:W.objects;if(cn!==void 0){if(typeof cn!="string")throw new Error(`Element path must be a string at "${Te(o)}"`);const kn=cn.startsWith("/")?cn.slice(1):cn,Sn=o.props.element;if((0,_.IY)(o,"core.gatherMountPoints")){if(Sn)throw new Error(`Mount point gatherers may not have an element prop "${Te(o)}"`);const Gn={path:kn,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((rt=o.props)==null?void 0:rt.caseSensitive),children:[Ne],plugin:void 0};return Tn.push(Gn),{obj:Gn,gatherPath:kn,routeRef:g==null?void 0:g.routeRef,gatherRouteRef:g==null?void 0:g.routeRef}}if(Sn){const[Gn,...K]=ut(Sn);if(K.length>0)throw new Error(`Route element with path "${cn}" may not contain multiple routable extensions`);if(!Gn)return g;const{routeRef:ne,plugin:he}=Gn,Ye={path:kn,element:"mounted",routeRefs:new Set([ne]),caseSensitive:Boolean((xt=o.props)==null?void 0:xt.caseSensitive),children:[Ne],plugin:he};return Tn.push(Ye),W.paths.set(ne,kn),W.parents.set(ne,g==null?void 0:g.routeRef),{obj:Ye,routeRef:ne!=null?ne:g==null?void 0:g.routeRef,gatherPath:kn,gatherRouteRef:g==null?void 0:g.gatherRouteRef}}}if(mn){if((g==null?void 0:g.gatherPath)===void 0)throw new Error(`Routable extension "${Te(o)}" with mount point "${mn}" must be assigned a path`);return(Wt=g==null?void 0:g.obj)==null||Wt.routeRefs.add(mn),W.paths.set(mn,g.gatherPath),W.parents.set(mn,g==null?void 0:g.gatherRouteRef),{...g,routeRef:mn}}return g}),Et=Un(()=>({paths:new Map,parents:new Map,objects:new Array}),(W,o,i,g)=>{var M,ve,Fe,rt,xt;if((i==null?void 0:i.props.element)===o)return g;let Wt=g==null?void 0:g.obj,cn=g==null?void 0:g.routeRef,mn=g==null?void 0:g.sticky;const Tn=(M=o.props)==null?void 0:M.path,kn=(ve=Wt==null?void 0:Wt.children)!=null?ve:W.objects,Sn=Boolean((Fe=o.props)==null?void 0:Fe.caseSensitive);let Gn=g==null?void 0:g.path;if((0,_.IY)(o,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");Gn=Tn}const K=(rt=o.props)==null?void 0:rt.element;let ne=(0,_.IY)(o,"core.mountPoint");if(!ne&&(0,n.isValidElement)(K)&&(ne=(0,_.IY)(K,"core.mountPoint")),ne){let Ye=Tn;if(Gn&&(Ye?Gn=void 0:Ye=Gn),!Ye)throw new Error("Mounted routable extension must have a path");W.paths.set(ne,Ye),cn&&mn?(W.parents.set(ne,cn),Tn&&(cn=ne,mn=!1)):(W.parents.set(ne,cn),cn=ne),Tn?(Wt={caseSensitive:Sn,path:Tn,element:"mounted",routeRefs:new Set([ne]),children:[Ne],plugin:(0,_.IY)(o.props.element,"core.plugin")},kn.push(Wt)):Wt==null||Wt.routeRefs.add(ne)}if((0,_.IY)(o,"core.gatherMountPoints")&&(mn=!0),(0,_.IY)(o,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");ne||(Wt={caseSensitive:Sn,path:Tn,element:"gathered",routeRefs:new Set,children:[Ne],plugin:(xt=g==null?void 0:g.obj)==null?void 0:xt.plugin},kn.push(Wt))}return{obj:Wt,path:Gn,routeRef:cn,sticky:mn}}),at=Un(()=>new Set,(W,o)=>{if(o.type===_e){const i=o.props;W.add("with"in i?i.with:i.without)}}),Dt=(0,m.uW)("route-ref-type",()=>Symbol("route-ref-type"));function en(W){return W[Dt]==="absolute"}function fn(W){return W[Dt]==="sub"}function Cn(W){return W[Dt]==="external"}function Qn(...W){const o=W.join("/").replace(/\/\/+/g,"/");return o!=="/"&&o.endsWith("/")?o.slice(0,-1):o}function er(W,o,i){let g,M="";if(en(W))g=W;else if(fn(W))g=W.parent,M=W.path;else if(Cn(W)){const rt=i.get(W);if(!rt)return[void 0,""];if(en(rt))g=rt;else if(fn(rt))g=rt.parent,M=rt.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${rt}`)}else throw W[Dt]?new Error(`Unknown or invalid route ref type, ${W[Dt]}`):new Error(`Unknown object passed to useRouteRef, got ${W}`);if(!g)return[void 0,""];const ve=o.get(g);if(ve===void 0)return[void 0,""];const Fe=Qn(ve,M);return[g,Fe]}function Zn(W,o,i,g,M){var ve;const Fe=(ve=(0,f.fp)(M,o))!=null?ve:[],rt=Array();let xt=-1;for(let mn=W;mn&&(xt=Fe.findIndex(Tn=>Tn.route.routeRefs.has(mn)),xt===-1);mn=g.get(mn))rt.unshift(mn);rt.length===0&&(xt-=1);const Wt=xt===-1?"":Fe[xt].pathname,cn=rt.slice(0,-1).map(mn=>{const Tn=i.get(mn);if(Tn===void 0)throw new Error(`No path for ${mn}`);if(Tn.includes(":"))throw new Error(`Cannot route to ${W} with parent ${mn} as it has parameters`);return Tn});return`${Qn(Wt,...cn)}/`}class jn{constructor(o,i,g,M,ve){this.routePaths=o,this.routeParents=i,this.routeObjects=g,this.routeBindings=M,this.appBasePath=ve}resolve(o,i){const[g,M]=er(o,this.routePaths,this.routeBindings);if(!g)return;let ve;typeof i=="string"?ve=this.trimPath(i):i.pathname?ve={...i,pathname:this.trimPath(i.pathname)}:ve=i;const Fe=this.appBasePath+Zn(g,ve,this.routePaths,this.routeParents,this.routeObjects);return(...[xt])=>Qn(Fe,(0,f.Gn)(M,xt))}trimPath(o){return o&&(o.startsWith(this.appBasePath)?o.slice(this.appBasePath.length):o)}}const tr=(0,m.CT)("routing-context"),D=({routePaths:W,routeParents:o,routeObjects:i,routeBindings:g,basePath:M="",children:ve})=>{const Fe=new jn(W,o,i,g,M),rt=(0,m.EI)({1:Fe});return n.createElement(tr.Provider,{value:rt},ve)};function I(W,o){const i=new Set(o.values());i.delete(void 0);for(const g of o.keys()){if(i.has(g))continue;let M=g,ve="";for(;M;){const rt=W.get(M);if(rt===void 0)throw new Error(`No path for ${M}`);ve=Qn(rt,ve),M=o.get(M)}const Fe=ve.match(/:(\w+)/g);if(Fe){for(let rt=0;rt<Fe.length;rt++)for(let xt=rt+1;xt<Fe.length;xt++)if(Fe[xt]===Fe[rt])throw new Error(`Parameter ${Fe[xt]} is duplicated in path ${ve}`)}}}function G(W,o){for(const i of o)if(i.externalRoutes){for(const[g,M]of Object.entries(i.externalRoutes))if(!M.optional&&!W.has(M))throw new Error(`External route '${g}' of the '${i.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const ie=(0,m.CT)("app-context"),Ie=({appContext:W,children:o})=>{const i=(0,m.EI)({1:W});return n.createElement(ie.Provider,{value:i,children:o})};function qe(W){return new Error(`Tried to access IdentityApi ${W} before app was loaded`)}function B(W){console.warn(`WARNING: Call to ${W} is deprecated and will break in the future`)}class H{constructor(){this.resolveTarget=()=>{},this.signOutTargetUrl="/",this.waitForTarget=new Promise(o=>{this.resolveTarget=o})}setTarget(o,i){this.target=o,this.signOutTargetUrl=i.signOutTargetUrl,this.resolveTarget(o)}getUserId(){if(!this.target)throw qe("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return B("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw qe("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return B("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(o=>o.getProfileInfo())}async getBackstageIdentity(){const o=await this.waitForTarget.then(i=>i.getBackstageIdentity());return o.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${o.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),o}async getCredentials(){return this.waitForTarget.then(o=>o.getCredentials())}async getIdToken(){return this.waitForTarget.then(o=>{if(!o.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return B("getIdToken"),o.getIdToken()})}async signOut(){await this.waitForTarget.then(o=>o.signOut()),window.location.href=this.signOutTargetUrl}}function Ce(W,o,i){if(W!==void 0){const M=i.find(ve=>ve.id===W);if(M)return M}if(o){const M=i.find(ve=>ve.variant==="dark");if(M)return M}const g=i.find(M=>M.variant==="light");return g||i[0]}const je=()=>{const W=(0,n.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[o,i]=(0,n.useState)(W.matches);return(0,n.useEffect)(()=>{const g=M=>{i(M.matches)};return W.addListener(g),()=>{W.removeListener(g)}},[W]),o};function Tt({children:W}){const o=(0,_.h_)(_.hg),i=(0,C.Z)(o.activeThemeId$(),o.getActiveThemeId()),g=Boolean(window.matchMedia)?je():!1,M=Ce(i,g,o.getInstalledThemes());if(!M)throw new Error("App has no themes");return n.createElement(M.Provider,{children:W})}const Kt=async(W="__APP_INJECTED_RUNTIME_CONFIG__")=>{const o=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!o)throw new Error("No static configuration provided");if(!Array.isArray(o))throw new Error("Static configuration has invalid format");const i=o.slice();if(W!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const M=JSON.parse(W);Array.isArray(M)?i.push(...M):i.push({data:M,context:"env"})}catch(M){throw new Error(`Failed to load runtime configuration, ${M}`)}const g=window.__APP_CONFIG__;return g&&i.push({context:"window",data:g}),i};class Vt{constructor(){this.apis=[]}add(o,i){return this.apis.push([o.id,i]),i}build(){return new yn(new Map(this.apis))}}class yn{constructor(o){this.apis=o}static builder(){return new Vt}static from(o){return new yn(new Map(o.map(([i,g])=>[i.id,g])))}static with(o,i){return new yn(new Map([[o.id,i]]))}with(o,i){return new yn(new Map([...this.apis,[o.id,i]]))}get(o){return this.apis.get(o.id)}}function Rn(W){const o=new Map;return W&&W({bind:(g,M)=>{for(const[ve,Fe]of Object.entries(M)){const rt=g[ve];if(!rt)throw new Error(`Key ${ve} is not an existing external route`);if(!Fe&&!rt.optional)throw new Error(`External route ${ve} is required but was undefined`);Fe&&o.set(rt,Fe)}}}),o}var un=(W,o,i)=>{if(!o.has(W))throw TypeError("Cannot "+i)},Vn=(W,o,i)=>(un(W,o,"read from private field"),i?i.call(W):o.get(W)),xn=(W,o,i)=>{if(o.has(W))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(W):o.set(W,i)},Yn=(W,o,i,g)=>(un(W,o,"write to private field"),g?g.call(W,i):o.set(W,i),i),Fn;function Xn(W){const o=new URL(W);return o.protocol=document.location.protocol,o.hostname=document.location.hostname,o.port=document.location.port,o.toString().replace(/\/$/,"")}function Jn(W,o,i){var g;const M=Boolean(W),ve=(0,T.default)(W||(()=>Promise.resolve([])));let Fe;if(M&&ve.loading){const{Progress:Wt}=o;Fe=n.createElement(Wt,null)}else if(ve.error){const{BootErrorPage:Wt}=o;Fe=n.createElement(Wt,{step:"load-config",error:ve.error})}const{ThemeProvider:rt=Tt}=o;if(Fe)return{node:n.createElement(Z,{apis:yn.with(_.hg,i)},n.createElement(rt,null,Fe))};let xt;if((g=ve.value)!=null&&g.length){const Wt=S.fromConfigs(ve.value),cn=Wt.getOptionalString("app.baseUrl"),mn=Wt.getOptionalString("backend.baseUrl");let Tn=ve.value;const kn={data:{},context:"relative-resolver"};if(cn&&mn){const Sn=new URL(cn).origin,Gn=new URL(mn).origin;if(Sn===Gn){const K=Xn(mn);mn!==K&&(kn.data.backend={baseUrl:K})}}if(cn){const Sn=Xn(cn);cn!==Sn&&(kn.data.app={baseUrl:Sn})}Object.keys(kn.data).length&&(Tn=Tn.concat([kn])),xt=S.fromConfigs(Tn)}else xt=S.fromConfigs([]);return{api:xt}}class ur{constructor(o){this.app=o}getPlugins(){return this.app.getPlugins()}getSystemIcon(o){return this.app.getSystemIcon(o)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class gr{constructor(o){this.appIdentityProxy=new H,xn(this,Fn,!1);var i,g,M,ve,Fe;this.apis=(i=o.apis)!=null?i:[],this.icons=o.icons,this.plugins=new Set((g=o.plugins)!=null?g:[]),this.featureFlags=(M=o.featureFlags)!=null?M:[],this.components=o.components,this.themes=o.themes,this.configLoader=(ve=o.configLoader)!=null?ve:Kt,this.defaultApis=(Fe=o.defaultApis)!=null?Fe:[],this.bindRoutes=o.bindRoutes,this.apiFactoryRegistry=new Ee}getPlugins(){return Array.from(this.plugins)}getSystemIcon(o){return this.icons[o]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(o){const i=this.getProvider();return()=>n.createElement(i,null,o)}getProvider(){if(Vn(this,Fn))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");Yn(this,Fn,!0);const o=new ur(this);let i=!1;return({children:M})=>{const ve=(0,n.useRef)(!0),Fe=(0,n.useMemo)(()=>pt.createWithStorage(this.themes),[]),{routing:rt,featureFlags:xt,routeBindings:Wt}=(0,n.useMemo)(()=>{const kn=Bn({root:M,discoverers:[zn,Nn],collectors:{routing:Qe()?Et:gt,collectedPlugins:Ve,featureFlags:at}});return kn.collectedPlugins.forEach(Sn=>this.plugins.add(Sn)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...kn,routeBindings:Rn(this.bindRoutes)}},[M]);i||(i=!0,I(rt.paths,rt.parents),G(Wt,this.plugins));const cn=Jn(this.configLoader,this.components,Fe),mn="api"in cn;if(mn){const{api:kn}=cn;this.configApi=kn}if("node"in cn)return cn.node;if(mn&&ve.current){ve.current=!1;const kn=this.getApiHolder().get(_.W0);if(kn){for(const K of this.featureFlags)kn.registerFlag({...K,pluginId:""});for(const K of this.plugins.values())if("getFeatureFlags"in K)for(const ne of K.getFeatureFlags())kn.registerFlag({name:ne.name,pluginId:K.getId()});else for(const ne of K.output())ne.type==="feature-flag"&&kn.registerFlag({name:ne.name,pluginId:K.getId()});const Sn=kn.getRegisteredFlags(),Gn=new Set(Sn.map(K=>K.name));for(const K of xt)Gn.has(K)||kn.registerFlag({name:K,pluginId:""})}}const{ThemeProvider:Tn=Tt}=this.components;return n.createElement(Z,{apis:this.getApiHolder()},n.createElement(Ie,{appContext:o},n.createElement(Tn,null,n.createElement(D,{routePaths:rt.paths,routeParents:rt.parents,routeObjects:rt.objects,routeBindings:Wt,basePath:nn(cn.api)},n.createElement(be.Provider,{value:{routeObjects:rt.objects,appIdentityProxy:this.appIdentityProxy}},M)))))}}getRouter(){return Pn}getApiHolder(){if(this.apiHolder){for(const o of this.plugins)for(const i of o.getApis())this.apiFactoryRegistry.get(i.api)||this.apiFactoryRegistry.register("default",i);return F.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:_.hg,deps:{},factory:()=>pt.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:_.Ds,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:_.$4,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("default",{api:_.W0,deps:{},factory:()=>new We});for(const o of this.defaultApis)this.apiFactoryRegistry.register("default",o);for(const o of this.plugins)for(const i of o.getApis())if(!this.apiFactoryRegistry.register("default",i))throw new Error(`Plugin ${o.getId()} tried to register duplicate or forbidden API factory for ${i.api}`);for(const o of this.apis)if(!this.apiFactoryRegistry.register("app",o))throw new Error(`Duplicate or forbidden API factory for ${o.api} in app`);return F.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new F(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(o){const i=new Set;for(const g of o){const M=g.getId();if(i.has(M))throw new Error(`Duplicate plugin found '${M}'`);i.add(M)}}}Fn=new WeakMap;function dr(W){return new gr(W)}let ir=!1;const nr=W=>{const o=(0,_.qD)(),{NotFoundErrorPage:i}=o.getComponents(),g=(0,n.useMemo)(()=>Qe(),[]),ve=[...(0,_.vJ)(W.children,Fe=>Fe.getElements().flatMap(rt=>{var xt;let Wt=rt.props.path;if(Wt==="")return[];Wt=(xt=Wt==null?void 0:Wt.replace(/\/\*$/,""))!=null?xt:"/";let cn=g?rt:rt.props.element;return!g&&!cn&&(cn=rt,ir||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),ir=!0)),[{path:Wt,element:cn,children:rt.props.children?[{path:Wt==="/"?"/":"*",element:rt.props.children}]:void 0}]}).sort((rt,xt)=>xt.path.localeCompare(rt.path)).map(rt=>({...rt,path:rt.path==="/"?"/":`${rt.path}/*`}))),{path:"*",element:n.createElement(i,null)}];return(0,x.V$)(ve)}},80236:function(Rt,d,e){e.d(d,{BT:function(){return gi},BV:function(){return Ai},Ex:function(){return va},Fw:function(){return Ea},GB:function(){return De},Gk:function(){return vt},Hz:function(){return La},J3:function(){return Qo},Kq:function(){return _s},M6:function(){return sr},NX:function(){return Fe},Oh:function(){return fl},Oi:function(){return M},Oo:function(){return xo},Or:function(){return es},Pd:function(){return Ps},Pf:function(){return Pa},Ph:function(){return Ya},Qj:function(){return o},R6:function(){return Ro},SA:function(){return Ho},SX:function(){return In},T3:function(){return Sa},VC:function(){return Os},VY:function(){return Oa},XF:function(){return ve},YE:function(){return pi},aR:function(){return wo},db:function(){return zs},dh:function(){return Rs},fy:function(){return Vs},g9:function(){return gl},h4:function(){return Ra},hB:function(){return $l},hu:function(){return ko},i9:function(){return cl},iA:function(){return Bo},in:function(){return Vt},k2:function(){return Co},mZ:function(){return pa},mf:function(){return el},mn:function(){return Qt},nU:function(){return jo},oZ:function(){return Ml},oz:function(){return Di},qE:function(){return Vn},qt:function(){return Qs},r0:function(){return $a},rJ:function(){return ia},rU:function(){return nr},sidebarConfig:function(){return Hr},sk:function(){return Pr},tB:function(){return Gs},tR:function(){return di},tn:function(){return Do},ub:function(){return on},uw:function(){return Zi},v7:function(){return So},vK:function(){return bs},wA:function(){return Cs},xT:function(){return Ws},yW:function(){return Uo},yu:function(){return _t},zG:function(){return js}});var n=e(30705),l=e(61837),u=e(37265),m=e(90436),a=e(87685),c=e(99688),_=e(19928),b=e.n(_),t=e(2784),E=e(43434),h=e(79692),$=e(60364),L=e(41128),k=e(15459),z=e(12420),y=e(76600),S=e(41547),x=e(77277),f=e(86689),T=e(72779),C=e.n(T),P=e(76635),p=e.n(P),Z=e(73557),F=e(39857),Me=e(16060),Ee=e(95544),Xe=e(56553),Bt=e(26639),st=e(39595),jt=e(80030),Zt=e(19353),J=e(95074),an=e(41156),Re=e(88188),xe=e(13725),O=e(11105),Ze=e(97963),ce=e(46506),R=e.n(ce),N=e(54073),ee=e.n(N),Pe=e(10368),Ge=e(76985),Ct=e(39829),ht=e(19574),It=e.n(ht),q=e(72164),oe=e(93657),Ae=e(60905),Je=e(79265),ct=e(85910),At=e(52059),qt=e(38225),zt=e(11776),Be=e(38402),Pt=e(49378),dt=e(27616),hn=e(8284),dn=e(70660),bn=e(91750),it=e(38016),St=e(85256),En=e(28316),ln=e(35292),fe=e(48049),V=e(51209),X=e(32407),ue=e(28156),ge=e(8629),Se=e(49429),ot=e(38724),tt=e(79249),pt=e(3806),Lt=e(32272),de=e(15277),re=e.n(de),A=e(29862),j=e(67358),Q=e(94339),me=e(14503),We=e(24579),Ke=e(32552),He=e(27597),mt=e(39307),se=e(21324),pe=e(7089),ye=e(42494),we=e(74603),nt=e(56939),$t=e(12231),Ut=e(73698),wt=e(72379),sn=e(74600),vn=e.n(sn),Le=e(37390),$e=e(97485),be=e(15584),Qe=e(89571),lt=e(86136),kt=e(79784),Mt=e(19126),nn=e.n(Mt),gn=e(80079),An=e(18671),Pn=e(50023),Bn=e(4190),Un=e(44882),zn=e(18473),Nn=e(57998),Ve=e(6487),_e=e(99152),Ne=e(67222),Te=e(21070),ut=e(90324),gt=e(98281),Et=e(33375),at=e(44233),Dt=e(27604),en=e(36444),fn=e(37971),Cn=e(59709),Qn=e(17373),er=e(3702),Zn=e(93111),jn=e(44311),tr=e.n(jn),D=e(83543),I=e(59797),G=e(26739),ie=e(86619),Ie=e(98989),qe=e(53305),B=e(16173),H=e(30195),Ce=e(63955),je=e(74828),Tt=e(45455),Kt=e.n(Tt);function Vt(r){const[s,v]=(0,t.useState)([]),w=(0,n.h_)(n.$v),{anchorOrigin:U={vertical:"top",horizontal:"center"},transientTimeoutMs:te}=r,ae=te!=null?te:5e3;(0,t.useEffect)(()=>{const ke=w.alert$().subscribe(yt=>v(ft=>ft.concat(yt)));return()=>{ke.unsubscribe()}},[w]);const[Ue]=s;if((0,t.useEffect)(()=>{if(Ue&&Ue.display==="transient"){const ke=setTimeout(()=>{v(yt=>{const ft=yt.filter(Gt=>Gt!==Ue);return ft.length===yt.length?yt:ft})},ae);return()=>clearTimeout(ke)}},[Ue,ae]),s.length===0)return null;const ze=()=>{v(ke=>ke.filter(yt=>yt!==Ue))};return t.createElement(u.Z,{open:!0,anchorOrigin:U},t.createElement(c.Z,{action:t.createElement(l.Z,{color:"inherit",size:"small",onClick:ze,"data-testid":"error-button-close"},t.createElement(a.Z,null)),severity:Ue.severity},t.createElement(m.Z,{component:"span"},String(Ue.message),s.length>1&&t.createElement("em",null,` (${s.length-1} older ${b()("message",s.length-1)})`))))}function yn(r){let s=0;for(let w=0;w<r.length;w++)s=r.charCodeAt(w)+((s<<5)-s);let v="#";for(let w=0;w<3;w++){const U=s>>w*8&255;v+=`00${U.toString(16)}`.slice(-2)}return v}function Rn(r){var s;return(s=r.match(/\b\w/g))==null?void 0:s.join("").slice(0,2)}const un=(0,h.Z)(r=>({avatar:{width:"4rem",height:"4rem",color:r.palette.common.white},avatarText:{fontWeight:r.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Vn(r){const{displayName:s,picture:v,customStyles:w}=r,U=un();let te={...w};const ae={fontFamily:te.fontFamily,fontSize:te.fontSize,fontWeight:te.fontWeight};return v||(te={backgroundColor:yn(s||""),...w}),t.createElement(E.Z,{alt:s,src:v,className:U.avatar,style:te},s&&t.createElement(m.Z,{variant:"h6",component:"span",className:U.avatarText,style:ae},Rn(s)))}function xn(){const[r]=(0,Z.is)(t.createElement(Z.AW,{index:!0,element:t.createElement("div",null)}));return!r.index}const Yn=(0,h.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Fn=r=>/^([a-z+.-]+):/.test(r),Xn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Jn=window.open;if(Jn&&!Jn.__backstage){const r=function(...v){const w=String(v[0]);if(Xn.test(w))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Jn.apply(this,v)};r.__backstage=!0,window.open=r}const ur=()=>{try{return(0,n.h_)(n.Ds).getOptionalString("app.baseUrl")}catch{return}},gr=()=>{var r;const s="http://sample.dev",v=(r=ur())!=null?r:"/",{pathname:w}=new URL(v,s);return(0,P.trimEnd)(w,"/")},dr=r=>{let s=String(r);const v=gr(),w=Fn(s),U=s.startsWith(v);return!w&&!U&&(s=v.concat(s)),s},ir=r=>{var s;return r instanceof Array?r.map(ir).join(" ").trim():typeof r=="object"&&r?ir((s=r==null?void 0:r.props)==null?void 0:s.children):["string","number"].includes(typeof r)?String(r):""},nr=t.forwardRef(({onClick:r,noTrack:s,...v},w)=>{const U=Yn(),te=(0,n.z$)(),ae=xn()?dr(v.to):v.to,Ue=ir(v.children)||ae,ze=Fn(ae),ke=ze&&!!/^https?:/.exec(ae);if(Xn.test(ae))throw new Error("Link component rejected javascript: URL as a security precaution");const yt=ft=>{r==null||r(ft),s||te.captureEvent("click",Ue,{attributes:{to:ae}})};return ze?t.createElement(f.Z,{...ke?{target:"_blank",rel:"noopener"}:{},...v,...v["aria-label"]?{"aria-label":`${v["aria-label"]}, Opens in a new window`}:{},ref:w,href:ae,onClick:yt,className:C()(U.externalLink,v.className)},v.children,t.createElement(m.Z,{component:"span",className:U.visuallyHidden},", Opens in a new window")):t.createElement(f.Z,{...v,ref:w,component:F.rU,to:ae,onClick:yt})}),W=t.forwardRef((r,s)=>t.createElement(nr,{ref:s,...r,color:"initial"})),o=t.forwardRef((r,s)=>t.createElement(x.Z,{ref:s,component:W,...r})),i=null;function g(r){const{text:s,tooltipDelay:v=1e3,tooltipText:w="Text copied to clipboard","aria-label":U="Copy text"}=r,te=(0,n.h_)(n.VE),[ae,Ue]=(0,t.useState)(!1),[{error:ze},ke]=(0,J.Z)();(0,t.useEffect)(()=>{ze&&te.post(ze)},[ze,te]);const yt=ft=>{ft.stopPropagation(),Ue(!0),ke(s)};return t.createElement(t.Fragment,null,t.createElement(jt.ZP,{id:"copy-test-tooltip",title:w,placement:"top",leaveDelay:v,onClose:()=>Ue(!1),open:ae},t.createElement(l.Z,{onClick:yt,"aria-label":U},t.createElement(Zt.Z,null))))}function M(r){const{text:s,language:v,showLineNumbers:w=!1,highlightedNumbers:U,customStyle:te,showCopyCodeButton:ae=!1}=r,Ue=(0,$.Z)(),ze=Ue.palette.type==="dark"?Bt.Z:st.Z,ke=Ue.palette.type==="dark"?"#256bf3":"#e6ffed";return t.createElement(Ee.Z,{position:"relative"},t.createElement(Xe.Z,{customStyle:te,language:v,style:ze,showLineNumbers:w,wrapLines:!0,lineNumberStyle:{color:Ue.palette.textVerySubtle},lineProps:yt=>U!=null&&U.includes(yt)?{style:{backgroundColor:ke}}:{}},s),ae&&t.createElement(Ee.Z,{position:"absolute",top:0,right:0},t.createElement(g,{text:s})))}function ve(r){const{title:s,to:v}=r,w=(0,an.Z)(U=>U.breakpoints.down("xs"));return v?w?t.createElement(l.Z,{component:F.rU,color:"primary",title:s,size:"small",to:v},t.createElement(Re.Z,null)):t.createElement(x.Z,{component:F.rU,variant:"contained",color:"primary",to:v},s):null}var Fe;(r=>{(s=>{s.TOP_BOTTOM="TB",s.BOTTOM_TOP="BT",s.LEFT_RIGHT="LR",s.RIGHT_LEFT="RL"})(r.Direction||(r.Direction={})),(s=>{s.UP_LEFT="UL",s.UP_RIGHT="UR",s.DOWN_LEFT="DL",s.DOWN_RIGHT="DR"})(r.Alignment||(r.Alignment={})),(s=>{s.NETWORK_SIMPLEX="network-simplex",s.TIGHT_TREE="tight-tree",s.LONGEST_PATH="longest-path"})(r.Ranker||(r.Ranker={})),(s=>{s.LEFT="l",s.RIGHT="r",s.CENTER="c"})(r.LabelPosition||(r.LabelPosition={}))})(Fe||(Fe={}));const rt=(0,h.Z)(r=>({node:{fill:r.palette.primary.light,stroke:r.palette.primary.light},text:{fill:r.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function xt({node:{id:r}}){const s=rt(),[v,w]=t.useState(0),[U,te]=t.useState(0),ae=t.useRef(null);t.useLayoutEffect(()=>{if(ae.current){let{height:yt,width:ft}=ae.current.getBBox();yt=Math.round(yt),ft=Math.round(ft),(yt!==U||ft!==v)&&(w(ft),te(yt))}},[v,U]);const Ue=10,ze=v+Ue*2,ke=U+Ue*2;return t.createElement("g",null,t.createElement("rect",{className:s.node,width:ze,height:ke,rx:10}),t.createElement("text",{ref:ae,className:s.text,y:ke/2,x:ze/2,textAnchor:"middle",alignmentBaseline:"middle"},r))}const Wt="arrow-marker",cn="node",mn="edge",Tn="label",kn=(0,Pe.Z)(r=>({node:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),Sn=r=>t.createElement(xt,{...r});function Gn({render:r=Sn,setNode:s,node:v}){const{width:w,height:U,x:te=0,y:ae=0}=v,Ue=v,ze=kn(),ke=t.useRef(null);return t.useLayoutEffect(()=>{if(ke.current){let{height:yt,width:ft}=ke.current.getBBox();yt=Math.round(yt),ft=Math.round(ft),(yt!==U||ft!==w)&&s(v.id,{...v,height:yt,width:ft})}},[v,w,U,s]),t.createElement("g",{ref:ke,"data-testid":cn,className:ze.node,transform:`translate(${te-w/2},${ae-U/2})`},r({node:Ue}))}const K=(0,Pe.Z)(r=>({text:{fill:r.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function ne({edge:{label:r}}){const s=K();return t.createElement("text",{className:s.text,textAnchor:"middle"},r)}const he=(0,Pe.Z)(r=>({path:{strokeWidth:1,stroke:r.palette.textSubtle,fill:"none",transition:`${r.transitions.duration.shortest}ms`},label:{transition:`${r.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),Ye=r=>t.createElement(ne,{...r});function Ot({render:r=Ye,setEdge:s,id:v,edge:w,curve:U}){const{x:te=0,y:ae=0,width:Ue,height:ze,points:ke}=w,yt=w,ft=he(),Gt=t.useRef(null);t.useLayoutEffect(()=>{if(Gt.current){let{height:On,width:qn}=Gt.current.getBBox();On=Math.round(On),qn=Math.round(qn),(On!==ze||qn!==Ue)&&s(v,{...w,height:On,width:qn})}},[w,ze,Ue,s,v]);let Ft="";const pn=t.useMemo(()=>Ge.Z().x(On=>On.x).y(On=>On.y).curve(Ct[U]),[U]);if(ke){const On=ke.filter(qn=>It()(qn.x)&&It()(qn.y));Ft=pn(On)||""}return t.createElement(t.Fragment,null,Ft&&t.createElement("path",{"data-testid":mn,className:ft.path,d:Ft}),yt.label?t.createElement("g",{ref:Gt,"data-testid":Tn,className:ft.label,transform:`translate(${te},${ae})`},r({edge:yt})):null)}const Nt="workspace";function Qt(r){var s,v;const{edges:w,nodes:U,renderNode:te,direction:ae=Fe.Direction.TOP_BOTTOM,align:Ue,nodeMargin:ze=50,edgeMargin:ke=10,rankMargin:yt=50,paddingX:ft=0,paddingY:Gt=0,acyclicer:Ft,ranker:pn=Fe.Ranker.NETWORK_SIMPLEX,labelPosition:On=Fe.LabelPosition.RIGHT,labelOffset:qn=10,edgeRanks:hr=1,edgeWeight:wr=1,renderLabel:Ur,defs:Hn,zoom:mr="enabled",curve:cr="curveMonotoneX",fit:Wr="grow",...Vr}=r,Nr=(0,Ze.Z)(),[Kr,fa]=t.useState(100),[qr,Ka]=t.useState(100),lr=t.useRef(new(R()).graphlib.Graph),[da,wa]=t.useState(((s=lr.current.graph())==null?void 0:s.width)||0),[ea,Fa]=t.useState(((v=lr.current.graph())==null?void 0:v.height)||0),[Dr,Jr]=t.useState([]),[ta,na]=t.useState([]),yr=Math.max(da,Kr),Rr=Math.max(ea,qr),ma=Math.min(ea,qr),ra=Wr==="grow"?Rr:ma,ha=t.useMemo(()=>ee()(Cr=>{if(!Cr)return;const Tr=O.Z(Cr),_r=O.Z(Cr.getElementById(Nt));function Fr(){Tr.call(xe.sP().scaleExtent([1,10]).on("zoom",Yr=>{Yr.transform.x=Math.min(0,Math.max(Yr.transform.x,yr-yr*Yr.transform.k)),Yr.transform.y=Math.min(0,Math.max(Yr.transform.y,Rr-Rr*Yr.transform.k)),_r.attr("transform",Yr.transform)}))}mr==="enabled"?Fr():mr==="enable-on-click"&&Tr.on("click",()=>Fr());const{width:zr,height:Da}=Cr.getBoundingClientRect();Kr!==zr&&fa(zr),qr!==Da&&Ka(Da)},100),[qr,Kr,yr,Rr,mr]),Fo=t.useCallback(()=>{const Cr=lr.current.nodes(),Tr=lr.current.edges();Cr.forEach(_r=>{U.some(zr=>zr.id===_r)||lr.current.removeNode(_r)}),Tr.forEach(_r=>{w.some(zr=>zr.from===_r.v&&zr.to===_r.w)||lr.current.removeEdge(_r.v,_r.w)}),U.forEach(_r=>{const Fr=lr.current.nodes().find(zr=>_r.id===zr);if(Fr&&lr.current.node(Fr)){const{width:zr,height:Da,x:Yr,y:xl}=lr.current.node(Fr);lr.current.setNode(Fr,{..._r,width:zr,height:Da,x:Yr,y:xl})}else lr.current.setNode(_r.id,{..._r,width:0,height:0})}),w.forEach(_r=>{lr.current.setEdge(_r.from,_r.to,{..._r,label:_r.label,width:0,height:0,labelpos:On,labeloffset:qn,weight:wr,minlen:hr})})},[w,U,On,qn,wr,hr]),ga=t.useMemo(()=>ee()(()=>{R().layout(lr.current);const{height:Cr,width:Tr}=lr.current.graph(),_r=Math.max(0,Cr||0),Fr=Math.max(0,Tr||0);wa(Fr),Fa(_r),Jr(lr.current.nodes()),na(lr.current.edges())},250,{leading:!0}),[]);t.useEffect(()=>(lr.current.setGraph({rankdir:ae,align:Ue,nodesep:ze,edgesep:ke,ranksep:yt,marginx:ft,marginy:Gt,acyclicer:Ft,ranker:pn}),Fo(),ga(),ga.cancel),[Ft,Ue,ae,ke,ft,Gt,ze,yt,pn,Fo,ga]);function Bl(Cr,Tr){return lr.current.setNode(Cr,Tr),ga(),lr.current}function Ul(Cr,Tr){return lr.current.setEdge(Cr,Tr),ga(),lr.current}return t.createElement("svg",{ref:ha,...Vr,width:"100%",height:ra,viewBox:`0 0 ${yr} ${Rr}`},t.createElement("defs",null,t.createElement("marker",{id:Wt,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},t.createElement("path",{fill:Nr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Hn),t.createElement("g",{id:Nt},t.createElement("svg",{width:da,height:ea,y:Rr/2-ea/2,x:yr/2-da/2,viewBox:`0 0 ${da} ${ea}`},ta.map(Cr=>{const Tr=lr.current.edge(Cr);return Tr?t.createElement(Ot,{key:`${Cr.v}-${Cr.w}`,id:Cr,setEdge:Ul,render:Ur,edge:Tr,curve:cr}):null}),Dr.map(Cr=>{const Tr=lr.current.node(Cr);return Tr?t.createElement(Gn,{key:Cr,setNode:Bl,render:te,node:Tr}):null}))))}const tn=(0,h.Z)(r=>{var s,v;return{root:{padding:r.spacing(0),marginBottom:r.spacing(0),marginTop:r.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:r.spacing(6),marginTop:-r.spacing(3),zIndex:"unset"},icon:{fontSize:r.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:r.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:r.palette.banner.link}},button:{color:(s=r.palette.banner.closeButtonColor)!=null?s:"inherit"},info:{backgroundColor:r.palette.banner.info},error:{backgroundColor:r.palette.banner.error},warning:{backgroundColor:(v=r.palette.banner.warning)!=null?v:r.palette.banner.error}}},{name:"BackstageDismissableBanner"}),In=r=>{var s;const{variant:v,message:w,id:U,fixed:te=!1}=r,ae=tn(),ze=(0,n.h_)(n.E6).forBucket("notifications"),ke=(s=ze.snapshot("dismissedBanners").value)!=null?s:[],[yt,ft]=(0,t.useState)(new Set(ke)),Gt=(0,q.Z)(ze.observe$("dismissedBanners"));(0,t.useEffect)(()=>{var pn;if(Gt!=null&&Gt.value){const On=(pn=Gt==null?void 0:Gt.value)!=null?pn:[];ft(new Set(On))}},[Gt==null?void 0:Gt.value]);const Ft=()=>{ze.set("dismissedBanners",[...yt,U])};return t.createElement(u.Z,{anchorOrigin:te?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!yt.has(U),classes:{root:C()(ae.root,!te&&ae.topPosition)}},t.createElement(oe.Z,{classes:{root:C()(ae.content,ae[v]),message:ae.message},message:w,action:[t.createElement(l.Z,{key:"dismiss",title:"Permanently dismiss this message",className:ae.button,onClick:Ft},t.createElement(a.Z,{className:ae.icon}))]}))},Mn=(0,h.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),wn=({missing:r})=>{const s=Mn();switch(r){case"field":return t.createElement("img",{src:Je,className:s.generalImg,alt:"annotation is missing"});case"info":return t.createElement("img",{src:ct,alt:"no Information",className:s.generalImg});case"content":return t.createElement("img",{src:At,alt:"create Component",className:s.generalImg});case"data":return t.createElement("img",{src:qt,alt:"no Build",className:s.generalImg});default:return null}},Wn=(0,h.Z)(r=>({root:{backgroundColor:r.palette.background.default,padding:r.spacing(2,0,0,0)},action:{marginTop:r.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function on(r){const{title:s,description:v,missing:w,action:U}=r,te=Wn();return t.createElement(Ae.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:te.root,spacing:2},t.createElement(Ae.Z,{item:!0,xs:12,md:6},t.createElement(Ae.Z,{container:!0,direction:"column"},t.createElement(Ae.Z,{item:!0,xs:!0},t.createElement(m.Z,{variant:"h5"},s)),t.createElement(Ae.Z,{item:!0,xs:!0},t.createElement(m.Z,{variant:"body1"},v)),t.createElement(Ae.Z,{item:!0,xs:!0,className:te.action},U))),t.createElement(Ae.Z,{item:!0,xs:12,md:6,className:te.imageContainer},typeof w=="string"?t.createElement(wn,{missing:w}):w.customImage))}const rr=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,Er=/^.*ANNOTATION.*$/m,Or=rr.match(Er)[0],ar=rr.split(`
`).findIndex(r=>Er.test(r)),Ar=(0,h.Z)(r=>({code:{borderRadius:6,margin:`${r.spacing(2)}px 0px`,background:r.palette.type==="dark"?"#444":r.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function xr(r){return Array.from(Array(r+1).keys(),s=>s+ar)}function vr(r){const s=r.map(v=>Or.replace("ANNOTATION",v)).join(`
`);return rr.replace(Or,s)}function pr(r){const s=r.length<=1;return t.createElement(t.Fragment,null,"The ",s?"annotation":"annotations"," ",r.map(v=>t.createElement("code",null,v)).reduce((v,w)=>t.createElement(t.Fragment,null,v,", ",w))," ",s?"is":"are"," missing. You need to add the"," ",s?"annotation":"annotations"," to your component if you want to enable this tool.")}function Pr(r){const{annotation:s,readMoreUrl:v}=r,w=Array.isArray(s)?s:[s],U=v||"https://backstage.io/docs/features/software-catalog/well-known-annotations",te=Ar();return t.createElement(on,{missing:"field",title:"Missing Annotation",description:pr(w),action:t.createElement(t.Fragment,null,t.createElement(m.Z,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),t.createElement(Ee.Z,{className:te.code},t.createElement(M,{text:vr(w),language:"yaml",showLineNumbers:!0,highlightedNumbers:xr(w.length),customStyle:{background:"inherit",fontSize:"115%"}})),t.createElement(x.Z,{color:"primary",component:nr,to:U},"Read more"))})}const Lr=(r,s)=>(s.palette.type==="light"?L._j:L.$n)(s.palette[r].light,.6),kr=(r,s)=>(s.palette.type==="light"?L.$n:L._j)(s.palette[r].light,.9),Ir=(0,h.Z)(r=>({root:{marginRight:r.spacing(1),fill:({severity:s})=>Lr(s,r)}})),Gr=({severity:r})=>{const s=Ir({severity:r});return t.createElement(bn.Z,{classes:s})},Xr=({severity:r})=>{const s=Ir({severity:r});return t.createElement(it.Z,{classes:s})},Y=(0,h.Z)(r=>({panel:{backgroundColor:({severity:s})=>kr(s,r),color:({severity:s})=>Lr(s,r),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:s})=>Lr(s,r),fontWeight:r.typography.fontWeightBold},message:{width:"100%",display:"block",color:({severity:s})=>Lr(s,r),backgroundColor:({severity:s})=>kr(s,r)},details:{width:"100%",display:"block",color:r.palette.textContrast,backgroundColor:r.palette.background.default,border:`1px solid ${r.palette.border}`,padding:r.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),le=r=>r.charAt(0).toLocaleUpperCase("en-US")+r.slice(1);function De(r){const{severity:s="warning",title:v,message:w,children:U,defaultExpanded:te}=r,ae=Y({severity:s}),Ue=le(s)+(v?`: ${v}`:"");return t.createElement(dt.Z,{defaultExpanded:te!=null?te:!1,className:ae.panel,role:"alert"},t.createElement(hn.Z,{expandIcon:t.createElement(Xr,{severity:s}),className:ae.summary},t.createElement(Gr,{severity:s}),t.createElement(m.Z,{className:ae.summaryText,variant:"subtitle1"},Ue)),(w||U)&&t.createElement(dn.Z,null,t.createElement(Ae.Z,{container:!0},w&&t.createElement(Ae.Z,{item:!0,xs:12},t.createElement(m.Z,{className:ae.message,variant:"body1"},w)),U&&t.createElement(Ae.Z,{item:!0,xs:12,className:ae.details},U))))}const Oe=(0,h.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageErrorPanel"}),et=({error:r,message:s,stack:v,children:w})=>{const U=Oe();return t.createElement(zt.Z,{dense:!0},t.createElement(Be.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:U.text},primary:"Error",secondary:r}),t.createElement(g,{text:r})),t.createElement(Be.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:U.text},primary:"Message",secondary:s}),t.createElement(g,{text:s})),v&&t.createElement(Be.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:U.text},primary:"Stack Trace",secondary:v}),t.createElement(g,{text:v})),w)};function _t(r){const{title:s,error:v,defaultExpanded:w,children:U}=r;return t.createElement(De,{severity:"error",title:s!=null?s:v.message,defaultExpanded:w},t.createElement(et,{error:v.name,message:v.message,stack:v.stack,children:U}))}const bt=(0,h.Z)(r=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:r.spacing(2)},divider:{margin:r.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function vt(r){var s;const{title:v,error:w,defaultExpanded:U}=r,te=bt();if(w.name!=="ResponseError")return t.createElement(_t,{title:v!=null?v:w.message,defaultExpanded:U,error:w});const{body:ae,cause:Ue}=w,{request:ze,response:ke}=ae,yt=`${ke.statusCode}: ${Ue.name}`,ft=ze&&`${ze.method} ${ze.url}`,Gt=Ue.message.replace(/\\n/g,`
`),Ft=(s=Ue.stack)==null?void 0:s.replace(/\\n/g,`
`),pn=JSON.stringify(ae,void 0,2);return t.createElement(_t,{title:v!=null?v:w.message,defaultExpanded:U,error:{name:yt,message:Gt,stack:Ft}},ft&&t.createElement(Be.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:te.text},primary:"Request",secondary:ze?`${ft}`:void 0}),t.createElement(g,{text:ft})),t.createElement(t.Fragment,null,t.createElement(St.Z,{component:"li",className:te.divider}),t.createElement(Be.Z,{alignItems:"flex-start"},t.createElement(Pt.Z,{classes:{secondary:te.text},primary:"Full Error as JSON"})),t.createElement(M,{language:"json",text:pn,showCopyCodeButton:!0})))}function rn(r){const s=document.createElement("div");return s.setAttribute("id",r),s}function Xt(r){document.body.insertBefore(r,document.body.lastElementChild.nextElementSibling)}function Jt(r){const s=useRef(null);useEffect(function(){const U=document.querySelector(`#${r}`),te=U||rn(r);return U||Xt(te),te.appendChild(s.current),function(){s.current.remove(),te.childNodes.length===-1&&te.remove()}},[r]);function v(){return s.current||(s.current=document.createElement("div")),s.current}return v()}const Ht="core.calloutSeen";function Ln(){const[r,s]=useState(()=>{const w=localStorage.getItem(Ht);return w?JSON.parse(w):{}}),v=useCallback((w,U)=>{const te=localStorage.getItem(Ht),Ue={...te?JSON.parse(te):{},[w]:U};s(Ue),localStorage.setItem(Ht,JSON.stringify(Ue))},[]);return{states:r,setState:v}}function $n(r){const{states:s,setState:v}=Ln(),w=useCallback(()=>{v(r,!0)},[v,r]);return{seen:s[r]===!0,markSeen:w}}function _n(r){const{seen:s,markSeen:v}=$n(r);return{show:s===!1,hide:v}}const Yt=(0,h.Z)(r=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${r.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:r.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function Dn(r){const{featureId:s,title:v,description:w,children:U}=r,{show:te,hide:ae}=_n(s),Ue=Jt("core.callout"),ze=useRef(null),[ke,yt]=useState(),ft=Yt(),Gt=useCallback(()=>{if(ze.current){const Ft=ze.current.getBoundingClientRect(),pn=Math.max(Ft.width,Ft.height),On=800,qn=Ft.x-(pn-Ft.width)/2-On,hr=Ft.y-(pn-Ft.height)/2-On,wr=pn+2*On,Ur=450,Hn=Ft.x+Ft.width/2-Ur,mr=Ft.y-(pn-Ft.height)/2+pn+20;yt({dotLeft:qn,dotTop:hr,dotSize:wr,borderWidth:On,textTop:mr,textLeft:Hn,textWidth:Ur})}},[]);return useEffect(()=>(window.addEventListener("resize",Gt),window.addEventListener("scroll",Gt),()=>{window.removeEventListener("resize",Gt),window.removeEventListener("scroll",Gt)}),[Gt]),useLayoutEffect(Gt,[ze.current,Gt]),te?React.createElement(React.Fragment,null,React.createElement(Box,{className:ft.featureWrapper,ref:ze},U),createPortal(React.createElement(Box,{className:ft.backdrop},React.createElement(ClickAwayListener,{onClickAway:ae},React.createElement(React.Fragment,null,React.createElement(Box,{className:ft.dot,"data-testid":"dot",style:{left:ke==null?void 0:ke.dotLeft,top:ke==null?void 0:ke.dotTop,width:ke==null?void 0:ke.dotSize,height:ke==null?void 0:ke.dotSize,borderWidth:ke==null?void 0:ke.borderWidth},onClick:ae,onKeyDown:ae,role:"button",tabIndex:0},React.createElement(Box,{className:ft.pulseCircle})),React.createElement(Box,{className:ft.text,"data-testid":"text",style:{left:ke==null?void 0:ke.textLeft,top:ke==null?void 0:ke.textTop,width:ke==null?void 0:ke.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},v),React.createElement(Typography,null,w))))),Ue)):React.createElement(React.Fragment,null,U)}const Kn=(0,h.Z)(r=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:r.palette.text.secondary,cursor:"default"},primary:{color:r.palette.primary.main},secondary:{color:r.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:r.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function fr({color:r="primary",disabled:s=!1,href:v="#",icon:w=t.createElement(ln.Z,null),label:U,onClick:te,title:ae}){const Ue=Kn();return s?t.createElement(Ee.Z,{title:ae,className:C()(Ue.link,Ue.disabled)},w,t.createElement(m.Z,{variant:"caption",component:"span",className:Ue.label},U)):t.createElement(nr,{title:ae,className:C()(Ue.link,Ue[r]),to:v,onClick:te},w,t.createElement(m.Z,{variant:"caption",component:"span",className:Ue.label},U))}const or=(0,h.Z)(r=>({links:{margin:r.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:r.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function sr(r){const{links:s}=r,v=or();return t.createElement("nav",{className:v.links},s.map((w,U)=>t.createElement(fr,{key:U+1,...w})))}const br=r=>{const s=r==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${s}) 0%,
    hsla(0, 0%, ${s}, 0.987) 8.1%,
    hsla(0, 0%, ${s}, 0.951) 15.5%,
    hsla(0, 0%, ${s}, 0.896) 22.5%,
    hsla(0, 0%, ${s}, 0.825) 29%,
    hsla(0, 0%, ${s}, 0.741) 35.3%,
    hsla(0, 0%, ${s}, 0.648) 41.2%,
    hsla(0, 0%, ${s}, 0.55) 47.1%,
    hsla(0, 0%, ${s}, 0.45) 52.9%,
    hsla(0, 0%, ${s}, 0.352) 58.8%,
    hsla(0, 0%, ${s}, 0.259) 64.7%,
    hsla(0, 0%, ${s}, 0.175) 71%,
    hsla(0, 0%, ${s}, 0.104) 77.5%,
    hsla(0, 0%, ${s}, 0.049) 84.5%,
    hsla(0, 0%, ${s}, 0.013) 91.9%,
    hsla(0, 0%, ${s}, 0) 100%
  `},Sr=100,jr=10,Qr=(0,h.Z)(r=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:Sr,height:`calc(100% + ${jr}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-jr,background:`linear-gradient(90deg, ${br(r.palette.type)})`},fadeRight:{right:-jr,background:`linear-gradient(270deg, ${br(r.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-r.spacing(2)},buttonRight:{right:-r.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function aa(r){const[[s,v],w]=React.useState([0,0]);return React.useLayoutEffect(()=>{const U=r.current;if(!U){w([0,0]);return}const te=()=>{const ae=U.scrollLeft,Ue=U.scrollWidth-U.offsetWidth-U.scrollLeft;w([ae,Ue])};return te(),U.addEventListener("scroll",te),window.addEventListener("resize",te),()=>{U.removeEventListener("scroll",te),window.removeEventListener("resize",te)}},[r]),[s,v]}function Mr(r,s,v){const[w,U]=React.useState(0);return React.useLayoutEffect(()=>{if(w===0)return;const te=window.performance.now(),ae=requestAnimationFrame(Ue=>{if(!r.current)return;const ze=Ue-te,ke=Math.abs(w)*ze/s,ft=Math.max(v,ke)*Math.sign(w);r.current.scrollBy({left:ft});const Gt=w-ft;Math.sign(w)!==Math.sign(Gt)?U(0):U(Gt)});return()=>cancelAnimationFrame(ae)},[r,w,s,v]),U}function $r(r){const{scrollStep:s=100,scrollSpeed:v=50,minScrollDistance:w=5,children:U,...te}=r,ae=Qr(r),Ue=React.useRef(),[ze,ke]=aa(Ue),yt=Mr(Ue,v,w),ft=Gt=>{Ue.current&&yt(Gt?s:-s)};return React.createElement(Box,{...te,className:ae.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:ae.container,ref:Ue},U),React.createElement(Box,{className:classNames(ae.fade,ae.fadeLeft,{[ae.fadeHidden]:ze===0})}),React.createElement(Box,{className:classNames(ae.fade,ae.fadeRight,{[ae.fadeHidden]:ke===0})}),ze>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>ft(!1),className:classNames(ae.button,ae.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),ke>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>ft(!0),className:classNames(ae.button,ae.buttonRight,{})},React.createElement(ChevronRight,null)))}const oa=(0,h.Z)(r=>({alpha:{color:r.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function Ea(r){const s=oa(r),{shorthand:v,alpha:w}=r;return v?t.createElement(m.Z,{component:"span",className:s[w?"alpha":"beta"],style:{fontSize:"120%"}},w?t.createElement(t.Fragment,null,"\u03B1"):t.createElement(t.Fragment,null,"\u03B2")):t.createElement(m.Z,{component:"span",className:s[w?"alpha":"beta"]},w?"Alpha":"Beta")}const zo=(0,t.lazy)(()=>e.e(4091).then(e.bind(e,54091)).then(r=>({default:r.RealLogViewer})));function jo(r){const{Progress:s}=(0,n.qD)().getComponents();return t.createElement(t.Suspense,{fallback:t.createElement(s,null)},t.createElement(zo,{...r}))}const Vo=(0,h.Z)(r=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${r.palette.border}`},"& th, & td":{border:`1px solid ${r.palette.border}`,padding:r.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:r.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:r.palette.background.paper},"& tr":{backgroundColor:r.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:r.palette.background.default},"& a":{color:r.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),za=(r,s)=>s?typeof s=="string"?r+s:t.Children.toArray(s.props.children).reduce(za,r):r,sa=({level:r,children:s})=>{const U=t.Children.toArray(s).reduce(za,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return t.createElement(`h${r}`,{id:U},s)},Go={code:({inline:r,className:s,children:v,...w})=>{const U=String(v).replace(/\n+$/,""),te=/language-(\w+)/.exec(s||"");return!r&&te?t.createElement(M,{language:te[1],text:U}):t.createElement("code",{className:s,...w},v)},h1:sa,h2:sa,h3:sa,h4:sa,h5:sa,h6:sa};function Ho(r){const{content:s,dialect:v="gfm",linkTarget:w,transformLinkUri:U,transformImageUri:te,className:ae}=r,Ue=Vo();return t.createElement(X.D,{remarkPlugins:v==="gfm"?[ue.Z]:[],className:`${Ue.markdown} ${ae}`,children:s,components:Go,linkTarget:w,transformLinkUri:U,transformImageUri:te})}const Jo=(0,h.Z)(r=>({root:{paddingLeft:r.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Yo=({request:r,busy:s,setBusy:v})=>{const w=Jo(),[U,te]=(0,t.useState)(),ae=async()=>{v(!0);try{await r.trigger()}catch(ze){te((0,Lt.VZ)(ze)?ze.message:"An unspecified error occurred")}finally{v(!1)}},Ue=r.provider.icon;return t.createElement(Be.Z,{disabled:s,classes:{root:w.root}},t.createElement(pt.Z,null,t.createElement(Ue,{fontSize:"large"})),t.createElement(Pt.Z,{primary:r.provider.title,secondary:U&&t.createElement(m.Z,{color:"error"},U)}),t.createElement(x.Z,{color:"primary",variant:"contained",onClick:ae},"Log in"))},Xo=(0,h.Z)(r=>({dialog:{paddingTop:r.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:r.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:r.spacing(2,0)}}),{name:"OAuthRequestDialog"});function Qo(r){var s;const v=Xo(),[w,U]=(0,t.useState)(!1),te=(0,n.h_)(n.ZM),Ue=(s=(0,n.h_)(n.Ds).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?s:!1,ze=(0,q.Z)((0,t.useMemo)(()=>te.authRequest$(),[te]),[]),ke=()=>{ze.forEach(yt=>yt.reject())};return t.createElement(ge.Z,{open:Boolean(ze.length),fullWidth:!0,maxWidth:"xs",classes:{paper:v.dialog},"aria-labelledby":"oauth-req-dialog-title"},t.createElement("main",null,t.createElement(tt.Z,{classes:{root:v.title},id:"oauth-req-dialog-title"},t.createElement(m.Z,{className:v.titleHeading,variant:"h1"},"Login Required"),Ue?t.createElement(m.Z,null,"This will trigger a http redirect to OAuth Login."):null),t.createElement(ot.Z,{dividers:!0,classes:{root:v.contentList}},t.createElement(zt.Z,null,ze.map(yt=>t.createElement(Yo,{key:yt.provider.title,request:yt,busy:w,setBusy:U}))))),t.createElement(Se.Z,{classes:{root:v.actionButtons}},t.createElement(x.Z,{onClick:ke},"Reject All")))}const qo=(0,h.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function es(r){var s;const[v,w]=(0,t.useState)(!1),U=(0,A.t)(),te=qo(),ae=Ue=>{U()&&w(Ue)};return t.createElement(jt.ZP,{title:(s=r.title)!=null?s:r.text||"",placement:r.placement,disableHoverListener:!v},t.createElement(re(),{text:r.text,line:r.line,onToggled:ae,containerClassName:te.container}))}function va(r){const s=(0,$.Z)(),[v,w]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const U=setTimeout(()=>w(!0),s.transitions.duration.short);return()=>clearTimeout(U)},[s.transitions.duration.short]),v?t.createElement(j.Z,{...r,"data-testid":"progress"}):t.createElement(Ee.Z,{display:"none"})}const ts=(0,h.Z)(r=>({root:{maxWidth:"fit-content",padding:r.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:r.palette.textSubtle},arrow:{color:r.palette.textSubtle}}),{name:"BackstageBottomLink"});function ja(r){const{link:s,title:v,onClick:w}=r,U=ts();return t.createElement(Ee.Z,null,t.createElement(St.Z,null),t.createElement(nr,{to:s,onClick:w,underline:"none"},t.createElement(Ee.Z,{display:"flex",alignItems:"center",className:U.root},t.createElement(Ee.Z,{className:U.boxTitle,fontWeight:"fontWeightBold",m:1},t.createElement(m.Z,null,t.createElement("strong",null,v))),t.createElement(He.Z,{className:U.arrow}))))}const ns=r=>{const{slackChannel:s}=r;if(s){if(typeof s=="string")return t.createElement(m.Z,null,"Please contact ",s," for help.");if(!s.href)return t.createElement(m.Z,null,"Please contact ",s.name," for help.")}else return null;return t.createElement(o,{to:s.href,variant:"contained"},s.name)},Va=class extends t.Component{constructor(s){super(s),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(s,v){console.error(`ErrorBoundary, error: ${s}, info: ${v}`),this.setState({error:s,errorInfo:v})}render(){const{slackChannel:s,children:v}=this.props,{error:w}=this.state;return w?t.createElement(_t,{title:"Something Went Wrong",error:w},t.createElement(ns,{slackChannel:s})):v}},rs=(0,h.Z)(r=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:r.spacing(2,2,2,2.5)},headerTitle:{fontWeight:r.typography.fontWeightBold},headerSubheader:{paddingTop:r.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),as=(0,k.Z)(r=>({root:{display:"inline-block",padding:r.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(me.Z),Ga={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function ia(r){const{title:s,subheader:v,divider:w=!0,deepLink:U,slackChannel:te,errorBoundaryProps:ae,variant:Ue,children:ze,headerStyle:ke,headerProps:yt,icon:ft,action:Gt,actionsClassName:Ft,actions:pn,cardClassName:On,actionsTopRight:qn,className:hr,noPadding:wr,titleTypographyProps:Ur}=r,Hn=rs();let mr={},cr={};Ue&&Ue.split(/[\s]+/g).forEach(Kr=>{mr={...mr,...Ga.card[Kr]},cr={...cr,...Ga.cardContent[Kr]}});const Wr=()=>!v&&!ft?null:t.createElement("div",{className:Hn.headerSubheader,"data-testid":"info-card-subheader"},v&&t.createElement("div",{className:Hn.subheader},v),ft),Vr=ae||(te?{slackChannel:te}:{});return t.createElement(Q.Z,{style:mr,className:hr},t.createElement(Va,{...Vr},s&&t.createElement(Ke.Z,{classes:{root:Hn.header,title:Hn.headerTitle,subheader:Hn.headerSubheader,avatar:Hn.headerAvatar,action:Hn.headerAction,content:Hn.headerContent},title:s,subheader:Wr(),action:Gt,style:{...ke},titleTypographyProps:Ur,...yt}),qn&&t.createElement(as,null,qn),w&&t.createElement(St.Z,null),t.createElement(We.Z,{className:C()(On,{[Hn.noPadding]:wr}),style:cr},ze),pn&&t.createElement(me.Z,{className:Ft},pn),U&&t.createElement(ja,{...U})))}const os=(0,h.Z)(r=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:r.typography.pxToRem(45),fontWeight:r.typography.fontWeightBold,color:r.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Ha={fractional:!0,inverse:!1,unit:"%",max:100},Ja=({palette:r,value:s,inverse:v,max:w})=>{if(isNaN(s))return"#ddd";const U=w||Ha.max,te=v?U-s:s;return te<U/3?r.status.error:te<U*(2/3)?r.status.warning:r.status.ok};function ss(r){const[s,v]=useState(null),{getColor:w=Ja}=r,U=os(r),{palette:te}=useTheme(),{value:ae,fractional:Ue,inverse:ze,unit:ke,max:yt,description:ft}={...Ha,...r},Gt=Ue?Math.round(ae*yt):ae,Ft=yt!==100?Math.round(ae):Gt,[pn,On]=useState(!1);return useEffect(()=>{const qn=s,hr=()=>On(!0),wr=()=>On(!1);return qn&&ft?(qn.addEventListener("mouseenter",hr),qn.addEventListener("mouseleave",wr),()=>{qn.removeEventListener("mouseenter",hr),qn.removeEventListener("mouseleave",wr)}):()=>{On(!1)}},[ft,s]),React.createElement(Box,{ref:v,className:U.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Gt,strokeWidth:12,trailWidth:12,strokeColor:w({palette:te,value:Ft,inverse:ze,max:yt}),className:U.circle}),ft&&pn?React.createElement(Box,{className:U.description},ft):React.createElement(Box,{className:U.overlay},isNaN(ae)?"N/A":`${Ft}${ke}`))}const is=(0,h.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function kl(r){const s=is(r),{title:v,subheader:w,progress:U,inverse:te,deepLink:ae,description:Ue,icon:ze,variant:ke,getColor:yt}=r,ft={inverse:te,description:Ue,getColor:yt,value:U};return React.createElement(Box,{className:s.root},React.createElement(ia,{title:v,subheader:w,deepLink:ae,variant:ke,icon:ze},React.createElement(ss,{...ft})))}function Zl(r){const{value:s,getColor:v=Ja}=r,{palette:w}=useTheme();if(isNaN(s))return null;let U=Math.round(s*100*100)/100;U>100&&(U=100);const te=v({palette:w,value:U,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${U}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:U,strokeWidth:4,trailWidth:4,strokeColor:te})))}const ls=(0,h.Z)(r=>(0,z.Z)({icon:{position:"absolute",right:r.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),cs=()=>{const r=ls();return t.createElement(wt.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},us=(0,h.Z)(r=>(0,z.Z)({icon:{position:"absolute",right:r.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),ds=()=>{const r=us();return t.createElement(wt.Z,{className:r.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},ms=(0,k.Z)(r=>(0,z.Z)({root:{"label + &":{marginTop:r.spacing(3)}},input:{borderRadius:r.shape.borderRadius,position:"relative",backgroundColor:r.palette.background.paper,border:"1px solid #ced4da",fontSize:r.typography.body1.fontSize,padding:r.spacing(1.25,3.25,1.25,1.5),transition:r.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:r.palette.background.paper,borderRadius:r.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(we.Z),ps=(0,h.Z)(r=>(0,z.Z)({formControl:{margin:`${r.spacing(1)} 0px`,maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:r.typography.body2.fontSize,fontFamily:r.typography.fontFamily,color:r.palette.text.primary,"&.Mui-focused":{color:r.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:r.typography.body2.fontSize,fontFamily:r.typography.fontFamily,color:r.palette.text.primary,"&.Mui-focused":{color:r.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function Ya(r){const{multiple:s,items:v,label:w,placeholder:U,selected:te,onChange:ae,triggerReset:Ue,native:ze=!1,disabled:ke=!1,margin:yt}=r,ft=ps(),[Gt,Ft]=(0,t.useState)(te||(s?[]:"")),[pn,On]=(0,t.useState)(!1);(0,t.useEffect)(()=>{Ft(s?[]:"")},[Ue,s]),(0,t.useEffect)(()=>{Ft(te||(s?[]:""))},[te,s]);const qn=Hn=>{Ft(Hn.target.value),ae(Hn.target.value)},hr=Hn=>{if(ke){Hn.preventDefault();return}On(mr=>s&&!(Hn.target instanceof HTMLElement)?!0:!mr)},wr=()=>{On(!1)},Ur=Hn=>()=>{const mr=Gt.filter(cr=>cr!==Hn);Ft(mr),ae(mr)};return t.createElement(Ee.Z,{className:ft.root},t.createElement(ye.Z,{className:ft.formControl},t.createElement(nt.Z,{className:ft.formLabel},w),t.createElement(Ut.Z,{"aria-label":w,value:Gt,native:ze,disabled:ke,"data-testid":"select",displayEmpty:!0,multiple:s,margin:yt,onChange:qn,open:pn,onOpen:hr,onClose:wr,input:t.createElement(ms,null),label:w,tabIndex:0,renderValue:Hn=>{var mr;return s&&Gt.length!==0?t.createElement(Ee.Z,{className:ft.chips},Hn.map(cr=>{var Wr,Vr;return t.createElement(pe.Z,{key:(Wr=v.find(Nr=>Nr.value===cr))==null?void 0:Wr.value,label:(Vr=v.find(Nr=>Nr.value===cr))==null?void 0:Vr.label,clickable:!0,onDelete:Ur(cr),className:ft.chip})})):t.createElement(m.Z,null,Gt.length===0?U||"":(mr=v.find(cr=>cr.value===Hn))==null?void 0:mr.label)},IconComponent:()=>pn?t.createElement(ds,null):t.createElement(cs,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},U&&!s&&t.createElement($t.Z,{value:[]},U),ze?v&&v.map(Hn=>t.createElement("option",{value:Hn.value,key:Hn.value},Hn.label)):v&&v.map(Hn=>t.createElement($t.Z,{key:Hn.value,value:Hn.value},s&&t.createElement(se.Z,{color:"primary",checked:Gt.includes(Hn.value)||!1,className:ft.checkbox}),Hn.label)))))}const Ta=()=>{},Xa=t.createContext({stepperLength:0,stepIndex:0,setStepIndex:Ta,stepHistory:[],setStepHistory:Ta,onStepChange:Ta});function Wl(r){const{children:s,elevated:v,onStepChange:w,activeStep:U=0}=r,[te,ae]=useState(U),[Ue,ze]=useState([0]);useEffect(()=>{ae(U)},[U]);const ke=[];let yt;return Children.forEach(s,ft=>{isValidElement(ft)&&(ft.props.end?yt=ft:ke.push(ft))}),React.createElement(React.Fragment,null,React.createElement(Xa.Provider,{value:{stepIndex:te,setStepIndex:ae,stepHistory:Ue,setStepHistory:ze,onStepChange:w,stepperLength:Children.count(s)}},React.createElement(MuiStepper,{activeStep:te,orientation:"vertical",elevation:v?2:0},ke)),te>=Children.count(s)-1&&yt)}const fs=(0,h.Z)(r=>({root:{marginTop:r.spacing(3),"& button":{marginRight:r.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),hs=({text:r,handleClick:s})=>React.createElement(Button$1,{onClick:s},r||"Reset"),gs=({text:r,handleClick:s,disabled:v,last:w,stepIndex:U})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:v,"data-testid":`nextButton-${U}`,onClick:s},r||(w?"Finish":"Next")),Es=({text:r,handleClick:s,disabled:v,stepIndex:w})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:v,"data-testid":`skipButton-${w}`,onClick:s},r||"Skip"),vs=({text:r,handleClick:s,disabled:v,stepIndex:w})=>React.createElement(Button$1,{onClick:s,"data-testid":`backButton-${w}`,disabled:v},r||"Back"),Qa=({actions:r={},children:s})=>{const v=fs(),{stepperLength:w,stepIndex:U,setStepIndex:te,stepHistory:ae,setStepHistory:Ue,onStepChange:ze}=useContext(Xa),ke=(Ft,pn)=>{pn&&pn(),ze&&ze(U,Ft),te(Ft)},yt=()=>{const Ft=r.nextStep?r.nextStep(U,w-1):U+1;ke(Ft,r.onNext),Ue([...ae,Ft])},ft=()=>{ae.pop(),ke(ae[ae.length-1],r.onBack),Ue([...ae])},Gt=()=>{ke(0,r.onRestart),Ue([0])};return React.createElement(Box,{className:v.root},[void 0,!0].includes(r.showBack)&&U!==0&&React.createElement(vs,{text:r.backText,handleClick:ft,disabled:U===0,stepIndex:U}),r.showSkip&&React.createElement(Es,{text:r.skipText,handleClick:yt,disabled:!!w&&U>=w||!!r.canSkip&&!r.canSkip(),stepIndex:U}),[void 0,!0].includes(r.showNext)&&React.createElement(gs,{text:r.nextText,handleClick:yt,disabled:!!w&&U>=w||!!r.canNext&&!r.canNext(),stepIndex:U}),r.showRestart&&U!==0&&React.createElement(hs,{text:r.restartText,handleClick:Gt,stepIndex:U}),s)},ys=(0,h.Z)(r=>({end:{padding:r.spacing(3)}}),{name:"SimpleStepperStep"});function Nl(r){const{title:s,children:v,end:w,actions:U,...te}=r,ae=ys();return w?React.createElement(Box,{className:ae.end},React.createElement(Typography,{variant:"h6"},s),v,React.createElement(Qa,{actions:{...U||{},showNext:!1}})):React.createElement(MuiStep,{...te},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},s)),React.createElement(StepContent,null,v,React.createElement(Qa,{actions:U})))}const la=(0,h.Z)(r=>({status:{fontWeight:r.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:r.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:r.palette.status.ok}},warning:{"&::before":{backgroundColor:r.palette.status.warning}},error:{"&::before":{backgroundColor:r.palette.status.error}},pending:{"&::before":{backgroundColor:r.palette.status.pending}},running:{"&::before":{backgroundColor:r.palette.status.running}},aborted:{"&::before":{backgroundColor:r.palette.status.aborted}}}),{name:"BackstageStatus"});function _s(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.ok),"aria-label":"Status ok","aria-hidden":"true",...r})}function Ps(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.warning),"aria-label":"Status warning","aria-hidden":"true",...r})}function bs(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.error),"aria-label":"Status error","aria-hidden":"true",...r})}function Cs(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.pending),"aria-label":"Status pending","aria-hidden":"true",...r})}function Os(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.running),"aria-label":"Status running","aria-hidden":"true",...r})}function Rs(r){const s=la(r);return t.createElement(m.Z,{component:"span",className:C()(s.status,s.aborted),"aria-label":"Status aborted","aria-hidden":"true",...r})}const Ss=r=>(0,z.Z)({root:{fontWeight:r.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:r.spacing(4),border:"0",verticalAlign:"top"}}),As={root:{border:"0",verticalAlign:"top"}},ws=r=>(0,z.Z)({root:{margin:r.spacing(0,0,-1,0)}}),Ds=r=>(0,z.Z)({root:{padding:r.spacing(0,0,1,0)},random:{}}),Ts=(0,k.Z)(Ss,{name:"BackstageMetadataTableTitleCell"})(be.Z),Is=(0,k.Z)(As,{name:"BackstageMetadataTableCell"})(be.Z),Ms=({dense:r,children:s})=>t.createElement(Le.Z,{size:r?"small":"medium"},t.createElement($e.Z,null,s)),Ls=({title:r,children:s,...v})=>t.createElement(Qe.Z,null,r&&t.createElement(Ts,null,r),t.createElement(Is,{colSpan:r?1:2,...v},s)),qa=(0,k.Z)(ws,{name:"BackstageMetadataTableList"})(({classes:r,children:s})=>t.createElement(zt.Z,{disablePadding:!0,className:r.root},s)),eo=(0,k.Z)(Ds,{name:"BackstageMetadataTableListItem"})(({classes:r,children:s})=>t.createElement(Be.Z,{className:r.root},s)),to=(0,z.Z)({root:{margin:"0 0",listStyleType:"none"}}),$s=r=>(0,z.Z)({root:{...to.root,paddingLeft:r.spacing(1)}}),no=(0,k.Z)(to,{name:"BackstageStructuredMetadataTableList"})(({classes:r,children:s})=>t.createElement(qa,{classes:r},s)),ro=(0,k.Z)($s,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:r,children:s})=>t.createElement(qa,{classes:r},s));function Bs(r,s){const v=r.map((w,U)=>t.createElement(eo,{key:U},Ia(w)));return s?t.createElement(ro,null,v):t.createElement(no,null,v)}function Us(r,s,v){const w=Object.keys(r).map(U=>{const te=Ia(r[U],!0),ae=v&&v.titleFormat?v.titleFormat(U):vn()(U);return t.createElement(eo,{key:U},t.createElement(m.Z,{variant:"body2",component:"span"},`${ae}: `),te)});return s?t.createElement(ro,null,w):t.createElement(no,null,w)}function Ia(r,s,v){return t.isValidElement(r)?t.createElement(t.Fragment,null,r):typeof r=="object"&&!Array.isArray(r)?Us(r,s,v):Array.isArray(r)?Bs(r,v):typeof r=="boolean"?t.createElement(t.Fragment,null,r?"\u2705":"\u274C"):t.createElement(m.Z,{variant:"body2",component:"span"},r)}const xs=({value:r,options:s})=>t.createElement(t.Fragment,null,Ia(r,s)),ks=({title:r,value:s,options:v})=>t.createElement(Ls,{title:v&&v.titleFormat?v.titleFormat(r):vn()(r)},t.createElement(xs,{value:s,options:v}));function Zs(r,s){return Object.keys(r).map(v=>t.createElement(ks,{key:v,title:v,value:r[v],options:s}))}function Ws(r){const{metadata:s,dense:v=!0,options:w}=r,U=Zs(s,w||{});return t.createElement(Ms,{dense:v},U)}function Ns(r){return qs.stringify(r,{strictNullHandling:!0})}function ao(r){return qs.parse(r,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function oo(r,s){return ao(r)[s]}function Ks(r,s,v){const w={...ao(r),[s]:v};return Ns(w)}function Kl(r,s=250){const[v,w]=useSearchParams(),U=v.toString(),[te,ae]=useState(oo(U,r));return useEffect(()=>{const Ue=oo(U,r);ae(ze=>isEqual(Ue,ze)?ze:Ue)},[U,ae,r]),useDebouncedEffect(()=>{const Ue=Ks(U,r,te);U!==Ue&&w(Ue,{replace:!0})},[w,te,U,r],s),[te,ae]}const Fs={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function so(){const s=(0,n.I_)().get(n.Ds),v=s==null?void 0:s.getOptionalConfig("app.support");return v?{url:v.getString("url"),items:v.getConfigArray("items").flatMap(w=>{var U;return{title:w.getString("title"),icon:w.getOptionalString("icon"),links:((U=w.getOptionalConfigArray("links"))!=null?U:[]).flatMap(te=>({url:te.getString("url"),title:te.getString("title")}))}})}:Fs}function Zr(r,s){const w=(0,n.qD)().getSystemIcon(r);return w?t.createElement(w,{...s}):t.createElement(gn.Z,{...s})}function Fl(r){return Zr("brokenImage",r)}function zs(r){return Zr("catalog",r)}function zl(r){return Zr("chat",r)}function jl(r){return Zr("dashboard",r)}function js(r){return Zr("docs",r)}function Vl(r){return Zr("email",r)}function Vs(r){return Zr("github",r)}function Gl(r){return Zr("group",r)}function ya(r){return Zr("help",r)}function Gs(r){return Zr("user",r)}function Hl(r){return Zr("warning",r)}const Hs=(0,h.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),Js=({icon:r})=>{var s;const v=(0,n.qD)(),w=r&&(s=v.getSystemIcon(r))!=null?s:ya;return t.createElement(w,null)},Ys=({link:r})=>{var s;return t.createElement(nr,{to:r.url},(s=r.title)!=null?s:r.url)},Xs=({item:r})=>{var s;return t.createElement(Be.Z,null,t.createElement(lt.Z,null,t.createElement(Js,{icon:r.icon})),t.createElement(Pt.Z,{primary:r.title,secondary:(s=r.links)==null?void 0:s.reduce((v,w,U)=>[...v,U>0&&t.createElement("br",{key:U}),t.createElement(Ys,{link:w,key:w.url})],[])}))};function Qs(r){const{title:s,items:v,children:w}=r,{items:U}=so(),[te,ae]=(0,t.useState)(!1),[Ue,ze]=(0,t.useState)(null),ke=Hs(),yt=(0,an.Z)(Ft=>Ft.breakpoints.down("sm")),ft=Ft=>{ze(Ft.currentTarget),ae(!0)},Gt=()=>{ae(!1)};return t.createElement(t.Fragment,null,t.createElement(Ee.Z,{display:"flex",ml:1},yt?t.createElement(l.Z,{color:"primary",size:"small",onClick:ft,"data-testid":"support-button","aria-label":"Support"},t.createElement(ya,null)):t.createElement(x.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:ft,startIcon:t.createElement(ya,null)},"Support")),t.createElement(kt.ZP,{"data-testid":"support-button-popover",open:te,anchorEl:Ue,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Gt},t.createElement(zt.Z,{className:ke.popoverList},s&&t.createElement(Be.Z,{alignItems:"flex-start"},t.createElement(m.Z,{variant:"subtitle1"},s)),t.Children.map(w,(Ft,pn)=>t.createElement(Be.Z,{alignItems:"flex-start",key:`child-${pn}`},Ft)),(v!=null?v:U).map((Ft,pn)=>t.createElement(Xs,{item:Ft,key:`item-${pn}`}))),t.createElement(Se.Z,null,t.createElement(x.Z,{color:"primary",onClick:Gt,"aria-label":"Close"},"Close"))))}const _a=72,io=24,lo=18,Hr={drawerWidthClosed:_a,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:_a,iconSize:_a-io*2,iconPadding:io,selectedIndicatorWidth:3,userBadgePadding:lo,userBadgeDiameter:_a-lo*2,mobileSidebarHeight:56},ei=r=>({...Hr,...r,iconContainerWidth:Hr.drawerWidthClosed,iconSize:Hr.drawerWidthClosed-Hr.iconPadding*2,userBadgeDiameter:Hr.drawerWidthClosed-Hr.userBadgePadding*2}),co={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Hr.defaultOpenDelayMs+200},ti=r=>({...co,...r}),ni="@backstage/core/sidebar-intro-dismissed",Br=(0,t.createContext)({sidebarConfig:Hr,submenuConfig:co}),Ma=(0,t.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),uo={isOpen:!1,setOpen:()=>{}},mo=(0,t.createContext)(uo),po=(0,zn.CT)("sidebar-open-state-context");function fo(r){const{children:s,value:v}=r;return t.createElement(mo.Provider,{value:v},t.createElement(po.Provider,{value:(0,zn.EI)({1:v})},s))}const pa=()=>{const r=(0,t.useContext)(po),s=(0,t.useContext)(mo);if(r===void 0)return s||uo;const v=r.atVersion(1);if(v===void 0)throw new Error("No context found for version 1.");return v},ho={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},go=(0,t.createContext)(ho),Eo=(0,zn.CT)("sidebar-pin-state-context");function ri(r){const{children:s,value:v}=r;return t.createElement(go.Provider,{value:v},t.createElement(Eo.Provider,{value:(0,zn.EI)({1:v})},s))}const Pa=()=>{const r=(0,t.useContext)(Eo),s=(0,t.useContext)(go);if(r===void 0)return s||ho;const v=r.atVersion(1);if(v===void 0)throw new Error("No context found for version 1.");return v},ai=(0,h.Z)(r=>({root:{flexGrow:0,margin:r.spacing(0,2),color:r.palette.navigation.color},selected:s=>({color:`${r.palette.navigation.selectedColor}!important`,borderTop:`solid ${s.sidebarConfig.selectedIndicatorWidth}px ${r.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),oi=r=>{const{to:s,label:v,icon:w,value:U}=r,{sidebarConfig:te}=(0,t.useContext)(Br),ae=ai({sidebarConfig:te}),Ue=(0,Z.TH)(),{selectedMenuItemIndex:ze,setSelectedMenuItemIndex:ke}=(0,t.useContext)(yo),yt=(Gt,Ft)=>{ke(Ft===ze?-1:Ft)},ft=U===ze&&ze>=0||U!==ze&&!(ze>=0)&&s===Ue.pathname;return t.createElement(Nn.Z,{"aria-label":v,label:v,icon:w,component:nr,to:s||Ue.pathname,onChange:yt,value:U,selected:ft,classes:ae})},La=r=>{const{children:s,to:v,label:w,icon:U,value:te}=r,{isMobile:ae}=Pa();return ae?t.createElement(oi,{to:v,label:w,icon:U,value:te}):t.createElement(t.Fragment,null,s)},vo=(0,h.Z)(r=>({root:{position:"fixed",backgroundColor:r.palette.navigation.background,color:r.palette.navigation.color,bottom:0,left:0,right:0,zIndex:r.zIndex.snackbar,borderTop:"1px solid #383838"},overlay:s=>({background:r.palette.navigation.background,width:"100%",bottom:`${s.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${s.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:r.palette.text.primary,alignItems:"center",justifyContent:"space-between",padding:r.spacing(2,3)},overlayHeaderClose:{color:r.palette.text.primary},marginMobileSidebar:s=>({marginBottom:`${s.sidebarConfig.mobileSidebarHeight}px`})})),si=r=>(0,P.orderBy)(r,({props:{priority:s}})=>Number.isInteger(s)?s:-1,"desc"),ii=t.createElement(La).type,li=({children:r,label:s="Menu",open:v,onClose:w})=>{const{sidebarConfig:U}=(0,t.useContext)(Br),te=vo({sidebarConfig:U});return t.createElement(Bn.ZP,{anchor:"bottom",open:v,onClose:w,ModalProps:{BackdropProps:{classes:{root:te.marginMobileSidebar}}},classes:{root:te.marginMobileSidebar,paperAnchorBottom:te.overlay}},t.createElement(Ee.Z,{className:te.overlayHeader},t.createElement(m.Z,{variant:"h3"},s),t.createElement(l.Z,{onClick:w,classes:{root:te.overlayHeaderClose}},t.createElement(a.Z,null))),t.createElement(Ee.Z,{component:"nav"},r))},yo=(0,t.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),ci=r=>{const{sidebarConfig:s}=(0,t.useContext)(Br),{children:v}=r,w=vo({sidebarConfig:s}),U=(0,Z.TH)(),[te,ae]=(0,t.useState)(-1);(0,t.useEffect)(()=>{ae(-1)},[U.pathname]);let Ue=(0,n.vJ)(v,ke=>ke.getElements().filter(yt=>yt.type===ii));if(v)Ue.length?Ue=si(Ue):Ue.push(t.createElement(La,{key:"default_menu",icon:t.createElement(Un.Z,null)},v));else return null;const ze=te>=0&&!Ue[te].props.to;return t.createElement(fo,{value:{isOpen:!0,setOpen:()=>{}}},t.createElement(yo.Provider,{value:{selectedMenuItemIndex:te,setSelectedMenuItemIndex:ae}},t.createElement(li,{label:Ue[te]&&Ue[te].props.label,open:ze,onClose:()=>ae(-1)},Ue[te]&&Ue[te].props.children),t.createElement(Pn.Z,{className:w.root,"data-testid":"mobile-sidebar-root",component:"nav"},Ue)))},_o={getSidebarPinState(){let r;try{r=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!r},setSidebarPinState(r){return window.localStorage.setItem("sidebarPinState",JSON.stringify(r))}},ui=(0,h.Z)(r=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[r.breakpoints.up("sm")]:{paddingLeft:s=>s.isPinned?s.sidebarConfig.drawerWidthOpen:s.sidebarConfig.drawerWidthClosed},[r.breakpoints.down("xs")]:{paddingBottom:s=>s.sidebarConfig.mobileSidebarHeight}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Po=(0,t.createContext)({content:{contentRef:void 0}});function di(r){const[s,v]=(0,t.useState)(()=>_o.getSidebarPinState()),{sidebarConfig:w}=(0,t.useContext)(Br),U=(0,t.useRef)(null),te=(0,t.useMemo)(()=>({content:{contentRef:U}}),[U]);(0,t.useEffect)(()=>{_o.setSidebarPinState(s)},[s]);const ae=(0,an.Z)(ke=>ke.breakpoints.down("xs"),{noSsr:!0}),Ue=()=>v(!s),ze=ui({isPinned:s,sidebarConfig:w});return t.createElement(ri,{value:{isPinned:s,toggleSidebarPinState:Ue,isMobile:ae}},t.createElement(Po.Provider,{value:te},t.createElement(Ee.Z,{className:ze.root},r.children)))}function $a(){const{content:r}=(0,t.useContext)(Po);return{focusContent:(0,t.useCallback)(()=>{var v,w;(w=(v=r==null?void 0:r.contentRef)==null?void 0:v.current)==null||w.focus()},[r]),contentRef:r==null?void 0:r.contentRef}}const bo=(0,h.Z)(r=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:r.zIndex.appBar,background:r.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}},drawerWidth:s=>({width:s.sidebarConfig.drawerWidthClosed}),drawerOpen:s=>({width:s.sidebarConfig.drawerWidthOpen,transition:r.transitions.create("width",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),mi=r=>{const{sidebarConfig:s}=(0,t.useContext)(Br),{openDelayMs:v=s.defaultOpenDelayMs,closeDelayMs:w=s.defaultCloseDelayMs,disableExpandOnHover:U,children:te}=r,ae=bo({sidebarConfig:s}),Ue=(0,an.Z)(hr=>hr.breakpoints.down("md"),{noSsr:!0}),[ze,ke]=(0,t.useState)(0),yt=(0,t.useRef)(),{isPinned:ft,toggleSidebarPinState:Gt}=Pa(),Ft=()=>{ft||U||(yt.current&&(clearTimeout(yt.current),yt.current=void 0),ze!==2&&!Ue&&(yt.current=window.setTimeout(()=>{yt.current=void 0,ke(2)},v),ke(1)))},pn=()=>{ft||U||(yt.current&&(clearTimeout(yt.current),yt.current=void 0),ze===1?ke(0):ze===2&&(yt.current=window.setTimeout(()=>{yt.current=void 0,ke(0)},w)))},On=ze===2&&!Ue||ft,qn=hr=>{hr?(ke(2),Gt()):(ke(0),Gt())};return t.createElement("nav",{style:{},"aria-label":"sidebar nav"},t.createElement(fi,null),t.createElement(fo,{value:{isOpen:On,setOpen:qn}},t.createElement(Ee.Z,{className:ae.root,"data-testid":"sidebar-root",onMouseEnter:U?()=>{}:Ft,onFocus:U?()=>{}:Ft,onMouseLeave:U?()=>{}:pn,onBlur:U?()=>{}:pn},t.createElement(Ee.Z,{className:C()(ae.drawer,ae.drawerWidth,{[ae.drawerOpen]:On})},te))))},pi=r=>{var s,v;const w=ei((s=r.sidebarOptions)!=null?s:{}),U=ti((v=r.submenuOptions)!=null?v:{}),{children:te,disableExpandOnHover:ae,openDelayMs:Ue,closeDelayMs:ze}=r,{isMobile:ke}=Pa();return ke?t.createElement(ci,null,te):t.createElement(Br.Provider,{value:{sidebarConfig:w,submenuConfig:U}},t.createElement(mi,{openDelayMs:Ue,closeDelayMs:ze,disableExpandOnHover:ae},te))};function fi(){const{sidebarConfig:r}=(0,t.useContext)(Br),{focusContent:s,contentRef:v}=$a(),w=bo({sidebarConfig:r});return v!=null&&v.current?t.createElement(x.Z,{onClick:s,variant:"contained",className:C()(w.visuallyHidden)},"Skip to content"):null}function ba(r,s){const v=new URLSearchParams(s.search).toString(),w=nn().parse(v),U=new URLSearchParams(r.search).toString(),te=nn().parse(U);return(0,P.isEqual)(s.pathname,r.pathname)&&(0,P.isMatch)(te,w)}const hi=(0,h.Z)(r=>{var s,v;return{item:{height:48,width:"100%","&:hover":{background:((s=r.palette.navigation.navItem)==null?void 0:s.hoverBackground)||"#6f6f6f",color:r.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:r.palette.navigation.color,padding:r.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:r.palette.common.white},label:{margin:r.spacing(1.75),marginLeft:r.spacing(1),fontSize:r.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((v=r.palette.navigation.navItem)==null?void 0:v.hoverBackground)||"#6f6f6f",color:r.palette.navigation.selectedColor}},textContent:{color:r.palette.navigation.color,paddingLeft:r.spacing(4),paddingRight:r.spacing(1),fontSize:r.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),gi=r=>{const{title:s,subtitle:v,to:w,icon:U,dropdownItems:te}=r,ae=hi(),{setIsHoveredOn:Ue}=(0,t.useContext)(Ma),ze=()=>{Ue(!1)},ke=(0,Z.WU)(w!=null?w:""),yt=(0,Z.TH)();let ft=ba(yt,ke);const[Gt,Ft]=(0,t.useState)(!1),pn=()=>{Ft(!Gt)};return te!==void 0?(te.some(On=>{const qn=(0,Me.i3)(On.to);return ft=ba(yt,qn),ft}),t.createElement(Ee.Z,{className:ae.itemContainer},t.createElement(jt.ZP,{title:s,enterDelay:500,enterNextDelay:500},t.createElement(x.Z,{role:"button",onClick:pn,onTouchStart:On=>On.stopPropagation(),className:C()(ae.item,ft?ae.selected:void 0)},U&&t.createElement(U,{fontSize:"small"}),t.createElement(m.Z,{variant:"subtitle1",className:ae.label},s,t.createElement("br",null),v&&t.createElement(m.Z,{variant:"caption",className:ae.subtitle},v)),Gt?t.createElement(I.Z,{className:ae.dropdownArrow}):t.createElement(D.Z,{className:ae.dropdownArrow}))),te&&Gt&&t.createElement(Ee.Z,{className:ae.dropdown},te.map((On,qn)=>t.createElement(jt.ZP,{key:qn,title:On.title,enterDelay:500,enterNextDelay:500},t.createElement(nr,{to:On.to,underline:"none",className:ae.dropdownItem,onClick:ze,onTouchStart:hr=>hr.stopPropagation()},t.createElement(m.Z,{className:ae.textContent},On.title))))))):t.createElement(Ee.Z,{className:ae.itemContainer},t.createElement(jt.ZP,{title:s,enterDelay:500,enterNextDelay:500},t.createElement(nr,{to:w,underline:"none",className:C()(ae.item,ft?ae.selected:void 0),onClick:ze,onTouchStart:On=>On.stopPropagation()},U&&t.createElement(U,{fontSize:"small"}),t.createElement(m.Z,{variant:"subtitle1",className:ae.label},s,t.createElement("br",null),v&&t.createElement(m.Z,{variant:"caption",className:ae.subtitle},v)))))},Ei=(0,h.Z)(r=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:r.spacing(7)+1},drawer:s=>{var v,w;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[r.breakpoints.up("sm")]:{marginLeft:s.left,transition:r.transitions.create("margin-left",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(w=(v=r.palette.navigation.submenu)==null?void 0:v.background)!=null?w:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:s.submenuConfig.drawerWidthClosed,transitionDelay:`${s.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:s=>({width:s.submenuConfig.drawerWidthOpen,[r.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:r.spacing(3),left:0,top:0}}),title:{fontSize:r.typography.h5.fontSize,fontWeight:r.typography.fontWeightMedium,color:r.palette.common.white,padding:r.spacing(2.5),[r.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Co=r=>{const{isOpen:s}=pa(),{sidebarConfig:v,submenuConfig:w}=(0,t.useContext)(Br),U=s?v.drawerWidthOpen:v.drawerWidthClosed,te=Ei({left:U,submenuConfig:w}),{isHoveredOn:ae}=(0,t.useContext)(Ma),[Ue,ze]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{ze(ae)},[ae]),t.createElement(Ee.Z,{className:C()(te.drawer,{[te.drawerOpen]:Ue})},t.createElement(m.Z,{variant:"h5",className:te.title},r.title),r.children)},vi=(0,h.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),yi=()=>{const r=vi();return React.createElement(Box,{className:r.iconContainer},React.createElement(Box,{className:r.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},_i=(0,h.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Pi=()=>{const r=_i();return React.createElement(Box,{className:r.iconContainer},React.createElement(Box,{className:r.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},bi=r=>(0,h.Z)(s=>{var v,w,U,te;return{root:{color:s.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:r.drawerWidthClosed,justifyContent:"center"},open:{[s.breakpoints.up("sm")]:{width:r.drawerWidthOpen}},highlightable:{"&:hover":{background:(w=(v=s.palette.navigation.navItem)==null?void 0:v.hoverBackground)!=null?w:"#404040"}},highlighted:{background:(te=(U=s.palette.navigation.navItem)==null?void 0:U.hoverBackground)!=null?te:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:r.iconContainerWidth,marginRight:-s.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:s.typography.fontWeightBold,fontSize:s.typography.fontSize},searchFieldHTMLInput:{padding:s.spacing(2,0,2)},searchContainer:{width:r.drawerWidthOpen-r.iconContainerWidth},secondaryAction:{width:s.spacing(6),textAlign:"center",marginRight:s.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:s.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${r.selectedIndicatorWidth}px ${s.palette.navigation.indicator}`,color:s.palette.navigation.selectedColor},"&$closed":{width:r.drawerWidthClosed},"& $closedItemIcon":{paddingRight:r.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-r.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function Ca(r){return(0,t.useMemo)(()=>bi(r),[r])()}const Ci=(r,s)=>(0,n.vJ)(r.props.children,v=>{let w=!1;return v.getElements().forEach(({props:{to:U,dropdownItems:te}})=>{if(!w){if(te!=null&&te.length){te.forEach(({to:ae})=>w=w||ba(s,(0,Me.i3)(ae)));return}U&&(w=ba(s,(0,Me.i3)(U)))}}),w},[s.pathname]);function Ba(r){return r.to===void 0}const Oi=t.createElement(Co).type,Ri=t.forwardRef(function({to:s,end:v,style:w,className:U,activeStyle:te,caseSensitive:ae,activeClassName:Ue="active","aria-current":ze="page",...ke},yt){let{pathname:ft}=(0,Z.TH)(),{pathname:Gt}=(0,Z.WU)(s);ae||(ft=ft.toLocaleLowerCase("en-US"),Gt=Gt.toLocaleLowerCase("en-US"));let Ft=ft===Gt;!Ft&&!v&&(Ft=ft.startsWith(`${Gt}/`));const pn=Ft?ze:void 0;return t.createElement(F.rU,{...ke,to:s,ref:yt,"aria-current":pn,style:{...w,...Ft?te:void 0},className:C()([U,Ft?Ue:void 0])})}),Oo=(0,t.forwardRef)((r,s)=>{const{icon:v,text:w,hasNotifications:U=!1,hasSubmenu:te=!1,disableHighlight:ae=!1,onClick:Ue,noTrack:ze,children:ke,className:yt,...ft}=r,{sidebarConfig:Gt}=(0,t.useContext)(Br),Ft=Ca(Gt),{isOpen:pn}=pa(),On=!pn&&te?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},qn=t.createElement(Ee.Z,{style:On},t.createElement(v,{fontSize:"small"}),!pn&&te?t.createElement(Ie.Z,{fontSize:"small"}):t.createElement(t.Fragment,null)),hr=t.createElement(G.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!U,className:C()({[Ft.closedItemIcon]:!pn})},qn),wr=t.createElement(t.Fragment,null,t.createElement(Ee.Z,{"data-testid":"login-button",className:Ft.iconContainer},hr),w&&t.createElement(m.Z,{variant:"subtitle2",className:Ft.label},w),t.createElement("div",{className:Ft.secondaryAction},ke)),Ur=pn?wr:hr,Hn={onClick:Ue,className:C()(yt,Ft.root,pn?Ft.open:Ft.closed,Ba(r)&&Ft.buttonItem,{[Ft.highlightable]:!ae})},mr=(0,n.z$)(),{pathname:cr}=(0,Z.WU)(!Ba(r)&&r.to?r.to:""),Wr=(0,t.useCallback)(Vr=>{if(!ze){const Nr="click",Kr=w!=null?w:"Sidebar Item",fa=cr?{attributes:{to:cr}}:void 0;mr.captureEvent(Nr,Kr,fa)}Ue==null||Ue(Vr)},[mr,w,cr,ze,Ue]);return Ba(r)?t.createElement(x.Z,{role:"button","aria-label":w,...Hn,ref:s,onClick:Wr},Ur):t.createElement(Ri,{...Hn,activeClassName:Ft.selected,to:r.to?r.to:"",ref:s,"aria-label":w||r.to,...ft,onClick:Wr},Ur)}),Si=({children:r,...s})=>{const{sidebarConfig:v}=(0,t.useContext)(Br),w=Ca(v),[U,te]=(0,t.useState)(!1),ae=(0,Z.TH)(),Ue=Ci(r,ae),ze=(0,an.Z)(Gt=>Gt.breakpoints.down("sm")),ke=()=>{te(!0)},yt=()=>{te(!1)},ft=()=>ze?U?t.createElement(I.Z,{fontSize:"small",className:w.submenuArrow}):t.createElement(D.Z,{fontSize:"small",className:w.submenuArrow}):!U&&t.createElement(Ie.Z,{fontSize:"small",className:w.submenuArrow});return t.createElement(Ma.Provider,{value:{isHoveredOn:U,setIsHoveredOn:te}},t.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:yt,onTouchStart:U?yt:ke,onMouseEnter:ke,className:C()(U&&w.highlighted)},t.createElement(Oo,{hasSubmenu:!0,className:Ue?w.selected:"",...s},ft()),U&&r))},Ro=(0,t.forwardRef)((r,s)=>{const[v]=(0,n.vJ)(r.children,w=>w.getElements().filter(U=>U.type===Oi));return v?t.createElement(Si,{...r},v):t.createElement(Oo,{...r,ref:s})});function Jl(r){const{sidebarConfig:s}=useContext(Br),[v,w]=useState(""),U=Ca(s),te=r.icon?r.icon:SearchIcon,ae=()=>{r.onSearch(v),w("")},Ue=ft=>{ft.key==="Enter"&&(ft.preventDefault(),ae())},ze=ft=>{w(ft.target.value)},ke=ft=>{ft.preventDefault(),ft.stopPropagation()},yt=ft=>{ae(),ft.preventDefault()};return React.createElement(Box,{className:U.searchRoot},React.createElement(Ro,{icon:te,to:r.to,onClick:yt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:v,onClick:ke,onChange:ze,onKeyDown:Ue,className:U.searchContainer,InputProps:{disableUnderline:!0,className:U.searchField},inputProps:{className:U.searchFieldHTMLInput}})))}const Ai=(0,y.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Yl=(0,y.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),So=(0,y.Z)("hr")(({theme:r})=>({height:1,width:"100%",background:"#383838",border:"none",margin:r.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),wi=r=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:r.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:r.palette.text.hint,borderRadius:"5px"}}),Di=(0,y.Z)("div")(({theme:r})=>{const s=wi(r);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":s,"&:hover":s}}),Xl=()=>{const{sidebarConfig:r}=useContext(Br),s=Ca(r),{isOpen:v,setOpen:w}=pa();if(useMediaQuery(ae=>ae.breakpoints.down("md"),{noSsr:!0}))return null;const te=()=>{w(!v)};return React.createElement(Button$1,{role:"button",onClick:te,className:s.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:s.arrows},v?React.createElement(yi,null):React.createElement(Pi,null)))},Ti=(0,h.Z)(r=>({introCard:s=>({color:"#b5b5b5",fontSize:12,width:s.sidebarConfig.drawerWidthOpen,marginTop:r.spacing(2.25),marginBottom:r.spacing(1.5),paddingLeft:s.sidebarConfig.iconPadding,paddingRight:s.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:r.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:r.spacing(.5),"&:hover":{color:r.palette.linkHover,transition:r.transitions.create("color",{easing:r.transitions.easing.sharp,duration:r.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:r.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function Ii(r){const{sidebarConfig:s}=useContext(Br),v=Ti({sidebarConfig:s}),{text:w,onClose:U}=r,te=()=>U();return React.createElement(Box,{className:v.introCard},React.createElement(Typography,{variant:"subtitle2"},w),React.createElement(Box,{className:v.introDismiss},React.createElement(IconButton,{onClick:te,className:v.introDismissLink},React.createElement(CloseIcon,{className:v.introDismissIcon}),React.createElement(Typography,{component:"span",className:v.introDismissText},"Dismiss"))))}const Ao=r=>{const{text:s,onDismiss:v}=r,[w,U]=useState(!1),te=()=>{U(!0)};return React.createElement(Collapse,{in:!w,onExited:v},React.createElement(Ii,{text:s,onClose:te}))},Mi=null,Li="And your recently viewed plugins will pop up here!";function Ql(r){const{isOpen:s}=pa(),v={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:w,set:U}=useLocalStorageValue(ni),{starredItemsDismissed:te,recentlyViewedItemsDismissed:ae}=w!=null?w:{},Ue=()=>{U(ke=>({...v,...ke,starredItemsDismissed:!0}))},ze=()=>{U(ke=>({...v,...ke,recentlyViewedItemsDismissed:!0}))};return s?React.createElement(React.Fragment,null,!te&&React.createElement(React.Fragment,null,React.createElement(Ao,{text:Mi,onDismiss:Ue}),React.createElement(So,null)),!ae&&React.createElement(Ao,{text:Li,onDismiss:ze})):null}const $i=(0,h.Z)(r=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:r.spacing(3),paddingBottom:r.spacing(3),paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Oa(r){const{className:s,stretch:v,noPadding:w,children:U,...te}=r,{contentRef:ae}=$a(),Ue=$i();return t.createElement("article",{ref:ae,tabIndex:-1,...te,className:C()(Ue.root,s,{[Ue.stretch]:v,[Ue.noPadding]:w})},U)}const Bi=(0,h.Z)(r=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:r.palette.background.paper,paddingLeft:r.spacing(3),minWidth:0},defaultTab:{...r.typography.caption,padding:r.spacing(3,3),textTransform:"uppercase",fontWeight:r.typography.fontWeightBold,color:r.palette.text.secondary},selected:{color:r.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:r.palette.background.default,color:r.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function wo(r){const{tabs:s,onChange:v,selectedIndex:w}=r,[U,te]=(0,t.useState)(w!=null?w:0),ae=Bi(),Ue=(0,t.useCallback)((ze,ke)=>{w===void 0&&te(ke),v&&w!==ke&&v(ke)},[w,v]);return(0,t.useEffect)(()=>{w!==void 0&&te(w)},[w]),t.createElement(Ee.Z,{className:ae.tabsWrapper},t.createElement(_e.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:Ue,value:U},s.map((ze,ke)=>t.createElement(Ve.Z,{...ze.tabProps,"data-testid":`header-tab-${ke}`,label:ze.label,key:ze.id,value:ke,className:ae.defaultTab,classes:{selected:ae.selected,root:ae.tabRoot}}))))}function Ui(r){var s,v,w,U;const te=(0,Z.UO)(),Ue=r.map(({path:Gt,children:Ft})=>({caseSensitive:!1,path:`${Gt}/*`,element:Ft})).sort((Gt,Ft)=>Ft.path.replace(/\/\*$/,"").localeCompare(Gt.path.replace(/\/\*$/,""))),ze=(s=(0,Z.V$)(Ue))!=null?s:r[0].children;let ke=(v=te["*"])!=null?v:"";ke.startsWith("/")||(ke=`/${ke}`);const[yt]=(w=(0,Me.fp)(Ue,ke))!=null?w:[],ft=yt?r.findIndex(Gt=>`${Gt.path}/*`===yt.route.path):0;return{index:ft===-1?0:ft,element:ze,route:(U=r[ft])!=null?U:r[0]}}function Do(r){const{routes:s}=r,v=(0,Z.s0)(),{index:w,route:U,element:te}=Ui(s),ae=(0,t.useMemo)(()=>s.map(ze=>({id:ze.path,label:ze.title,tabProps:ze.tabProps})),[s]),Ue=ze=>{let{path:ke}=s[ze];ke=ke.replace(/\/\*$/,""),ke=ke.replace(/^\//,""),v(ke)};return t.createElement(t.Fragment,null,t.createElement(wo,{tabs:ae,selectedIndex:w,onChange:Ue}),t.createElement(Oa,null,t.createElement(An.q,{title:U.title}),te))}const Ua=()=>null;(0,n.R5)(Ua,"core.gatherMountPoints",!0);function To(r){const s=t.createElement(Ua,{path:"",title:""},t.createElement("div",null)).type;return t.Children.toArray(r).flatMap(v=>{if(!(0,t.isValidElement)(v))return[];if(v.type===t.Fragment)return To(v.props.children);if(v.type!==s)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:w,title:U,children:te,tabProps:ae}=v.props;return[{path:w,title:U,children:te,tabProps:ae}]})}function xi(r){const s=To(r.children);return t.createElement(Do,{routes:s})}xi.Route=Ua;const ki=(0,h.Z)(r=>({value:{marginBottom:r.spacing(.75)},subvalue:{color:r.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Zi(r){const{value:s,subvalue:v}=r,w=ki();return t.createElement(t.Fragment,null,t.createElement(Ee.Z,{className:w.value},s),t.createElement(Ee.Z,{className:w.subvalue},v))}const Wi=(0,h.Z)(r=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:r.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:r.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${r.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:r.spacing(2)}}}),{name:"BackstageTableFilters"}),Ni=r=>{var s;const v=Wi(),{onChangeFilters:w}=r,[U,te]=(0,t.useState)({...r.selectedFilters}),[ae,Ue]=(0,t.useState)(!1),ze=()=>{te({}),Ue(ke=>!ke)};return(0,t.useEffect)(()=>{w(U)},[U,w]),t.createElement(Ee.Z,{className:v.root},t.createElement(Ee.Z,{className:v.header},t.createElement(Ee.Z,{className:v.value},"Filters"),t.createElement(x.Z,{color:"primary",onClick:ze},"Clear all")),t.createElement(Ee.Z,{className:v.filters},((s=r.filters)==null?void 0:s.length)&&r.filters.map(ke=>t.createElement(Ya,{triggerReset:ae,key:ke.element.label,...ke.element,selected:U[ke.element.label],onChange:yt=>te({...U,[ke.element.label]:yt})}))))},Io={Add:(0,t.forwardRef)((r,s)=>t.createElement(Te.Z,{...r,ref:s})),Check:(0,t.forwardRef)((r,s)=>t.createElement(gt.Z,{...r,ref:s})),Clear:(0,t.forwardRef)((r,s)=>t.createElement(Et.Z,{...r,ref:s})),Delete:(0,t.forwardRef)((r,s)=>t.createElement(at.Z,{...r,ref:s})),DetailPanel:(0,t.forwardRef)((r,s)=>t.createElement(V.Z,{...r,ref:s})),Edit:(0,t.forwardRef)((r,s)=>t.createElement(Dt.Z,{...r,ref:s})),Export:(0,t.forwardRef)((r,s)=>t.createElement(er.Z,{...r,ref:s})),Filter:(0,t.forwardRef)((r,s)=>t.createElement(en.Z,{...r,ref:s})),FirstPage:(0,t.forwardRef)((r,s)=>t.createElement(fn.Z,{...r,ref:s})),LastPage:(0,t.forwardRef)((r,s)=>t.createElement(Cn.Z,{...r,ref:s})),NextPage:(0,t.forwardRef)((r,s)=>t.createElement(V.Z,{...r,ref:s})),PreviousPage:(0,t.forwardRef)((r,s)=>t.createElement(fe.Z,{...r,ref:s})),ResetSearch:(0,t.forwardRef)((r,s)=>t.createElement(Et.Z,{...r,ref:s})),Search:(0,t.forwardRef)((r,s)=>t.createElement(en.Z,{...r,ref:s})),SortArrow:(0,t.forwardRef)((r,s)=>t.createElement(ut.Z,{...r,ref:s})),ThirdStateCheck:(0,t.forwardRef)((r,s)=>t.createElement(Qn.Z,{...r,ref:s})),ViewColumn:(0,t.forwardRef)((r,s)=>t.createElement(Zn.Z,{...r,ref:s}))};function Mo(r,s){const v=s.split(".");let w=r[v[0]];for(let U=1;U<v.length;++U){if(w===void 0)return w;const te=v[U];w=w[te]}return w}const Ki=(0,k.Z)(r=>({header:{padding:r.spacing(1,2,1,2.5),borderTop:`1px solid ${r.palette.grey.A100}`,borderBottom:`1px solid ${r.palette.grey.A100}`,fontWeight:r.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Ne.W$),Lo=(0,k.Z)(r=>({root:{padding:r.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:r.typography.fontWeightBold}},searchField:{paddingRight:r.spacing(2)}}),{name:"BackstageTableToolbar"})(Ne.UW),Fi=(0,h.Z)(r=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:r.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),zi=(0,h.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function ji(r,s){return r.map(v=>{var w;const U=(w=v.headerStyle)!=null?w:{};let te=v.cellStyle||{};if(v.highlight)if(U.color=s.palette.textContrast,typeof te=="object")te.fontWeight=s.typography.fontWeightBold;else{const ae=te;te=(Ue,ze,ke)=>({...ae(Ue,ze,ke),fontWeight:s.typography.fontWeightBold})}return{...v,headerStyle:U,cellStyle:te}})}function Vi(r,s){return(0,P.transform)(r,(v,w,U)=>{(0,P.isEqual)(w,s[U])||(v[U]=w)})}const $o={search:"",filtersOpen:!1,filters:{}};function Gi(r){const{toolbarRef:s,setSearch:v,hasFilters:w,selectedFiltersLength:U,toggleFilters:te}=r,ae=Fi(),Ue=(0,t.useCallback)(ze=>{r.onSearchChanged(ze),v(ze)},[r,v]);return w?t.createElement(Ee.Z,{className:ae.root},t.createElement(Ee.Z,{className:ae.root},t.createElement(l.Z,{onClick:te,"aria-label":"filter list"},t.createElement(en.Z,null)),t.createElement(m.Z,{className:ae.title},"Filters (",U,")")),t.createElement(Lo,{...r,ref:s,onSearchChanged:Ue})):t.createElement(Lo,{...r,ref:s,onSearchChanged:Ue})}function Bo(r){const{data:s,columns:v,options:w,title:U,subtitle:te,filters:ae,initialState:Ue,emptyContent:ze,onStateChange:ke,components:yt,...ft}=r,Gt=zi(),Ft=(0,$.Z)(),pn={...$o,...Ue},[On,qn]=(0,t.useState)(pn.filtersOpen),hr=(0,t.useCallback)(()=>qn(Dr=>!Dr),[qn]),[wr,Ur]=(0,t.useState)(0),[Hn,mr]=(0,t.useState)(s),[cr,Wr]=(0,t.useState)(pn.filters),Vr=ji(v,Ft),[Nr,Kr]=(0,t.useState)(pn.search);(0,t.useEffect)(()=>{if(ke){const Dr=Vi({search:Nr,filtersOpen:On,filters:cr},$o);ke(Dr)}},[Nr,On,cr,ke]);const fa={headerStyle:{textTransform:"uppercase"}},qr=(0,t.useCallback)(Dr=>{var Jr;return(Jr=v.find(ta=>ta.title===Dr))==null?void 0:Jr.field},[v]);(0,t.useEffect)(()=>{if(typeof s=="function")return;if(!cr){mr(s);return}const Dr=Object.values(cr);if(s&&Dr.flat().length){const Jr=s.filter(ta=>!!Object.entries(cr).filter(([,na])=>!!na.length).every(([na,yr])=>{const Rr=Mo(ta,qr(na));return Array.isArray(Rr)&&Array.isArray(yr)?Rr.some(ma=>yr.includes(ma)):Array.isArray(Rr)?Rr.includes(yr):Array.isArray(yr)?yr.includes(Rr):Rr===yr}));mr(Jr)}else mr(s);Ur(Dr.flat().length)},[s,cr,qr]);const Ka=(Dr,Jr)=>{const ta=yr=>{const Rr=new Set,ma=ra=>{ra!=null&&Rr.add(ra)};return Jr&&Jr.forEach(ra=>{const ha=Mo(ra,qr(yr));Array.isArray(ha)?ha.forEach(ma):ma(ha)}),Rr},na=yr=>({placeholder:"All results",label:yr.column,multiple:yr.type==="multiple-select",items:[...ta(yr.column)].sort().map(Rr=>({label:Rr,value:Rr}))});return Dr.map(yr=>({type:yr.type,element:na(yr)}))},lr=!!(ae!=null&&ae.length),da=(0,t.useCallback)(Dr=>t.createElement(Gi,{setSearch:Kr,hasFilters:lr,selectedFiltersLength:wr,toggleFilters:hr,...Dr}),[hr,lr,wr,Kr]),wa=typeof s!="function"&&s.length===0,ea=v.length,Fa=(0,t.useCallback)(Dr=>ze&&wa?t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{colSpan:ea},ze))):t.createElement(Ne.os,{...Dr}),[wa,ze,ea]);return t.createElement(Ee.Z,{className:Gt.root},On&&s&&typeof s!="function"&&(ae==null?void 0:ae.length)&&t.createElement(Ni,{filters:Ka(ae,s),selectedFilters:cr,onChangeFilters:Wr}),t.createElement(Ne.ZP,{components:{Header:Ki,Toolbar:da,Body:Fa,...yt},options:{...fa,...w},columns:Vr,icons:Io,title:t.createElement(t.Fragment,null,t.createElement(m.Z,{variant:"h5",component:"h2"},U),te&&t.createElement(m.Z,{color:"textSecondary",variant:"body1"},te)),data:typeof s=="function"?s:Hn,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},...ft}))}Bo.icons=Object.freeze(Io);function Hi(r,s){const v=r[r.length-1];if(v)return v>=.9?s.palette.status.ok:v>=.5?s.palette.status.warning:s.palette.status.error}function ql(r){var s;const v=useTheme();return r.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...r},r.title&&React.createElement("title",null,r.title),React.createElement(SparklinesLine,{color:(s=r.color)!=null?s:Hi(r.data,v)})):null}const Ji=r=>(0,h.Z)(s=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:s.spacing(2),textAlign:r.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:s.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Yi=({title:r="Unknown page",className:s})=>t.createElement(m.Z,{variant:"h4",component:"h2",className:s,"data-testid":"header-title"},r);function Uo(r){const{description:s,title:v,titleComponent:w=void 0,children:U,textAlign:te="left"}=r,ae=Ji({textAlign:te})(),Ue=w||t.createElement(Yi,{title:v,className:ae.title});return t.createElement(t.Fragment,null,t.createElement(An.q,{title:v}),t.createElement(Ee.Z,{className:ae.container},t.createElement(Ee.Z,{className:ae.leftItemsBox},Ue,s&&t.createElement(m.Z,{className:ae.description,variant:"body2"},s)),t.createElement(Ee.Z,{className:ae.rightItemsBox},U)))}const Xi=(0,h.Z)(r=>({micDrop:{maxWidth:"60%",bottom:r.spacing(2),right:r.spacing(2),[r.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:`${r.spacing(10)}px auto ${r.spacing(4)}px`}}}),{name:"BackstageErrorPageMicDrop"}),Qi=()=>{const r=Xi();return t.createElement("img",{src:qe,className:r.micDrop,alt:"Girl dropping mic from her hands"})},qi=(0,h.Z)(r=>({container:{padding:r.spacing(8),[r.breakpoints.down("xs")]:{padding:r.spacing(2)}},title:{paddingBottom:r.spacing(5),[r.breakpoints.down("xs")]:{paddingBottom:r.spacing(4),fontSize:r.typography.h3.fontSize}},subtitle:{color:r.palette.textSubtle}}),{name:"BackstageErrorPage"});function el(r){const{status:s,statusMessage:v,additionalInfo:w,supportUrl:U}=r,te=qi(),ae=(0,Z.s0)(),Ue=so();return t.createElement(Ae.Z,{container:!0,spacing:0,className:te.container},t.createElement(Ae.Z,{item:!0,xs:12,sm:8,md:4},t.createElement(m.Z,{"data-testid":"error",variant:"body1",className:te.subtitle},"ERROR ",s,": ",v),t.createElement(m.Z,{variant:"body1",className:te.subtitle},w),t.createElement(m.Z,{variant:"h2",className:te.title},"Looks like someone dropped the mic!"),t.createElement(m.Z,{variant:"h6"},t.createElement(nr,{to:"#","data-testid":"go-back-link",onClick:()=>ae(-1)},"Go back"),"... or please"," ",t.createElement(nr,{to:U||Ue.url},"contact support")," if you think this is a bug.")),t.createElement(Qi,null))}const tl=(0,k.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(m.Z),xa=(0,k.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(Ee.Z);function xo(r){const{children:s,...v}=r,[w,U]=t.useState(null),te=t.Children.toArray(s),[ae,Ue,...ze]=te,ke=ze.length?ze.pop():te[te.length-1],yt=te.length>3,ft=pn=>{U(pn.currentTarget)},Gt=()=>{U(null)},Ft=Boolean(w);return t.createElement(t.Fragment,null,t.createElement(B.Z,{"aria-label":"breadcrumb",...v},te.length>1&&t.createElement(xa,{clone:!0},ae),te.length>2&&t.createElement(xa,{clone:!0},Ue),yt&&t.createElement(tl,{onClick:ft},"..."),t.createElement(Ee.Z,{style:{fontStyle:"italic"}},ke)),t.createElement(kt.ZP,{open:Ft,anchorEl:w,onClose:Gt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},t.createElement(zt.Z,null,ze.map((pn,On)=>t.createElement(Be.Z,{key:On,button:!0},t.createElement(xa,{clone:!0},pn))))))}const nl=(0,h.Z)(r=>({header:{gridArea:"pageHeader",padding:r.spacing(3),width:"100%",boxShadow:r.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:r.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[r.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:r.page.fontColor,wordBreak:"break-word",fontSize:r.typography.h3.fontSize,marginBottom:0},subtitle:{color:r.page.fontColor,opacity:.8,display:"inline-block",marginTop:r.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:r.spacing(1),color:r.page.fontColor},breadcrumb:{color:r.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-r.spacing(.3),marginBottom:r.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-r.spacing(.3),marginBottom:r.spacing(.3)}}),{name:"BackstageHeader"}),rl=({type:r,typeLink:s,classes:v,pageTitle:w})=>r?s?t.createElement(xo,{className:v.breadcrumb},t.createElement(nr,{to:s},r),t.createElement(m.Z,null,w)):t.createElement(m.Z,{className:v.type},r):null,al=({pageTitle:r,classes:s,tooltip:v})=>{const w=t.createElement(m.Z,{className:s.title,variant:"h1"},r);return v?t.createElement(jt.ZP,{title:v,placement:"top-start"},w):w},ol=({classes:r,subtitle:s})=>s?typeof s!="string"?t.createElement(t.Fragment,null,s):t.createElement(m.Z,{className:r.subtitle,variant:"subtitle2",component:"span"},s):null;function Ra(r){const{children:s,pageTitleOverride:v,style:w,subtitle:U,title:te,tooltip:ae,type:Ue,typeLink:ze}=r,ke=nl(),ft=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage",Gt=v||te,Ft=te||v,pn=`${Gt} | %s | ${ft}`,On=`${Gt} | ${ft}`;return t.createElement(t.Fragment,null,t.createElement(An.q,{titleTemplate:pn,defaultTitle:On}),t.createElement("header",{style:w,className:ke.header},t.createElement(Ee.Z,{className:ke.leftItemsBox},t.createElement(rl,{classes:ke,type:Ue,typeLink:ze,pageTitle:Ft}),t.createElement(al,{classes:ke,pageTitle:Ft,tooltip:ae}),t.createElement(ol,{classes:ke,subtitle:U})),t.createElement(Ae.Z,{container:!0,className:ke.rightItemsBox,spacing:4},s)))}const sl=({label:r,secondaryLabel:s,icon:v,disabled:w=!1,onClick:U})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:w,button:!0,onClick:te=>{U&&U(te)}},v&&React.createElement(ListItemIcon,null,v),React.createElement(ListItemText,{primary:r,secondary:s})));function ec(r){const{palette:{common:{white:s}}}=useTheme(),{actionItems:v}=r,[w,U]=React.useState(!1),te=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>U(!0),"data-testid":"header-action-menu",ref:te,style:{color:s,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:w,anchorEl:te.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>U(!1)},React.createElement(List,null,v.map((ae,Ue)=>React.createElement(sl,{key:`header-action-menu-${Ue}`,...ae})))))}const il=(0,h.Z)(r=>({root:{textAlign:"left"},label:{color:r.page.fontColor,fontWeight:r.typography.fontWeightBold,letterSpacing:0,fontSize:r.typography.fontSize,marginBottom:r.spacing(1)/2,lineHeight:1},value:{color:(0,L.Fq)(r.page.fontColor,.8),fontSize:r.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),ll=({value:r,className:s})=>t.createElement(m.Z,{component:typeof r=="string"?"p":"span",className:s},r);function cl(r){const{label:s,value:v,url:w}=r,U=il(),te=t.createElement(ll,{className:U.value,value:v||"<Unknown>"});return t.createElement(Ae.Z,{item:!0},t.createElement(m.Z,{component:"span",className:U.root},t.createElement(m.Z,{className:U.label},s),w?t.createElement(nr,{to:w},te):te))}const ul=r=>(0,z.Z)({root:{color:r.palette.common.white,padding:r.spacing(2,2,3),backgroundImage:r.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),dl=(0,h.Z)(ul,{name:"BackstageItemCardHeader"});function ko(r){const{title:s,subtitle:v,children:w}=r,U=dl(r);return t.createElement(Ee.Z,{className:U.root},v&&t.createElement(m.Z,{variant:"subtitle2",component:"h3"},v),s&&t.createElement(m.Z,{variant:"h6",component:"h4"},s),w)}function tc(r){const{description:s,tags:v,title:w,type:U,subtitle:te,label:ae,onClick:Ue,href:ze}=r;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(ko,{title:w,subtitle:te||U})),React.createElement(CardContent,null,v!=null&&v.length?React.createElement(Box,null,v.map((ke,yt)=>React.createElement(Chip,{size:"small",label:ke,key:yt}))):null,s),React.createElement(CardActions,null,!ze&&React.createElement(o,{to:"#",onClick:Ue,color:"primary"},ae),ze&&React.createElement(o,{to:ze,color:"primary"},ae)))}const ml=r=>(0,z.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:r.spacing(2)}}),pl=(0,h.Z)(ml,{name:"BackstageItemCardGrid"});function fl(r){const{children:s,...v}=r,w=pl(v);return t.createElement(Ee.Z,{className:w.root,...v},s)}const hl=(0,h.Z)(r=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[r.breakpoints.down("xs")]:{height:"100%"}}}),{name:"BackstagePage"});function Sa(r){const{themeId:s,children:v}=r,w=hl();return t.createElement(S.Z,{theme:U=>({...U,page:U.getPageTheme({themeId:s})})},t.createElement("main",{className:w.root},v))}function gl(r){const{themeId:s,children:v,...w}=r;return t.createElement(Sa,{themeId:s},t.createElement(Ra,{...w}),v)}const El=H.z.object({providerInfo:H.z.object({}).catchall(H.z.unknown()).optional(),profile:H.z.object({email:H.z.string().optional(),displayName:H.z.string().optional(),picture:H.z.string().optional()}),backstageIdentity:H.z.object({token:H.z.string(),identity:H.z.object({type:H.z.literal("user"),userEntityRef:H.z.string(),ownershipEntityRefs:H.z.array(H.z.string())})})}),Zo={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function vl(r){const s=new Date(Date.now()+Zo.defaultTokenExpiryMillis);if(!r)return s;const[v,w,U]=r.split("."),te=JSON.parse(window.atob(w));return typeof te.exp!="number"?s:new Date(te.exp*1e3-Zo.tokenExpiryMarginMillis)}class yl{constructor(s){this.options=s,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:s}=this.getSessionSync(),v=s.identity.userEntityRef,w=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(v);if(!w)throw new TypeError(`Invalid user entity reference "${v}"`);return w[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const s=this.state.type==="active"?this.state.session:void 0,v=this.fetchSession().then(w=>(this.state={type:"active",session:w,expiresAt:vl(w.backstageIdentity.token)},w),w=>{throw this.state={type:"failed",error:w},w});return this.state={type:"fetching",promise:v,previous:s},v}async fetchSession(){const s=await this.options.discoveryApi.getBaseUrl("auth"),v=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,w=new Headers(v);w.set("X-Requested-With","XMLHttpRequest");const U=await fetch(`${s}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:w,credentials:"include"});if(!U.ok)throw await ResponseError.fromResponse(U);return El.parse(await U.json())}}const nc=r=>{const s=useApi(discoveryApiRef),[{status:v,error:w},{execute:U}]=useAsync(async()=>{const te=new yl({provider:r.provider,discoveryApi:s,headers:r.headers});await te.start(),r.onSignInSuccess(te)});return useMountEffect(U),v==="loading"?React.createElement(va,null):w?React.createElement(_t,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:w}):null};class ka{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const s="user:default/guest";return{type:"user",userEntityRef:s,ownershipEntityRefs:[s]}}async getCredentials(){return{}}async signOut(){}}function _l(r){const[s,v,w]=r.split(".");return JSON.parse(window.atob(v))}class Za{constructor(s){this.result=s}getUserId(){return this.result.userId}static fromResult(s){return new Za(s)}async getIdToken(){var s,v;return(v=(s=this.result).getIdToken)==null?void 0:v.call(s)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const s=await this.getIdToken();if(!s){const U=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:U,ownershipEntityRefs:[U]}}const{sub:v,ent:w}=_l(s);return{type:"user",userEntityRef:v,ownershipEntityRefs:w!=null?w:[]}}async getCredentials(){var s,v;return{token:await((v=(s=this.result).getIdToken)==null?void 0:v.call(s))}}async signOut(){var s,v;return(v=(s=this.result).signOut)==null?void 0:v.call(s)}}class ca{constructor(s,v,w){this.identity=s,this.authApi=v,this.profile=w}static createGuest(){return new ka}static fromLegacy(s){return Za.fromResult(s)}static create(s){return new ca(s.identity,s.authApi,s.profile)}getUserId(){const s=this.identity.userEntityRef,v=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(s);if(!v)throw new TypeError(`Invalid user entity reference "${s}"`);return v[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(s){throw this.profilePromise=void 0,s}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Wa=(0,h.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Aa=({children:r})=>{const s=Wa();return t.createElement(Ae.Z,{component:"li",item:!0,classes:s},r)},Pl={Component:({config:r,onSignInStarted:s,onSignInSuccess:v,onSignInFailure:w})=>{const{apiRef:U,title:te,message:ae}=r,Ue=(0,n.h_)(U),ze=(0,n.h_)(n.VE),ke=async()=>{try{s();const yt=await Ue.getBackstageIdentity({instantPopup:!0});if(!yt)throw w(),new Error(`The ${te} provider is not configured to support sign-in`);const ft=await Ue.getProfile();v(ca.create({identity:yt.identity,profile:ft,authApi:Ue}))}catch(yt){w(),ze.post(new Lt.SP("Login failed",yt))}};return t.createElement(Aa,null,t.createElement(ia,{variant:"fullHeight",title:te,actions:t.createElement(x.Z,{color:"primary",variant:"outlined",onClick:ke},"Sign In")},t.createElement(m.Z,{variant:"body1"},ae)))},loader:async(r,s)=>{const v=r.get(s),w=await v.getBackstageIdentity({optional:!0});if(!w)return;const U=await v.getProfile();return ca.create({identity:w.identity,profile:U,authApi:v})}},bl={Component:({onSignInStarted:r,onSignInSuccess:s})=>t.createElement(Aa,null,t.createElement(ia,{title:"Guest",variant:"fullHeight",actions:t.createElement(x.Z,{color:"primary",variant:"outlined",onClick:()=>{r(),s(new ka)}},"Enter")},t.createElement(m.Z,{variant:"body1"},"Enter as a Guest User.",t.createElement("br",null),"You will not have a verified identity,",t.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new ka},Cl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Ol=(0,h.Z)(r=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:r.spacing(2)}}),{name:"BackstageCustomProvider"}),Wo=r=>{const{ref:s,...v}=r;return{inputRef:s,...v}},Rl={Component:({onSignInStarted:r,onSignInSuccess:s})=>{const v=Ol(),{register:w,handleSubmit:U,formState:te}=(0,Ce.cI)({mode:"onChange"}),{errors:ae}=te,Ue=({userId:ze,idToken:ke})=>{r(),s(ca.fromLegacy({userId:ze,getIdToken:ke!==void 0?async()=>ke:void 0,profile:{email:`${ze}@example.com`}}))};return t.createElement(Aa,null,t.createElement(ia,{title:"Custom User",variant:"fullHeight"},t.createElement(m.Z,{variant:"body1"},"Enter your own User ID and credentials.",t.createElement("br",null),"This selection will not be stored."),t.createElement("form",{className:v.form,onSubmit:U(Ue)},t.createElement(ye.Z,null,t.createElement(ie.Z,{...Wo(w("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(ae.userId)}),ae.userId&&t.createElement(je.Z,{error:!0},ae.userId.message)),t.createElement(ye.Z,null,t.createElement(ie.Z,{...Wo(w("idToken",{required:!1,validate:ze=>!ze||Cl.test(ze)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(ae.idToken)}),ae.idToken&&t.createElement(je.Z,{error:!0},ae.idToken.message)),t.createElement(x.Z,{type:"submit",color:"primary",variant:"outlined",className:v.button,disabled:!(te!=null&&te.isDirty)||!Kt()(ae)},"Continue"))))},loader:async()=>{}};class Na{constructor(s){this.config=s}static from(s){return new Na(s)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const ua="@backstage/core:SignInPage:provider",No={guest:bl,custom:Rl,common:Pl};function Ko(r,s){if(r in s)throw new Error(`"${r}" ID is duplicated. IDs of identity providers have to be unique.`)}function Sl(r){return r.reduce((v,w)=>{if(typeof w=="string")return Ko(w,v),v[w]={components:No[w],id:w},v;const{id:U}=w;return Ko(U,v),v[U]={components:No.common,id:U,config:w},v},{})}const Al=(r,s)=>{const v=useApi(errorApiRef),w=useApiHolder(),[U,te]=useState(!0),ae=useCallback(ze=>{s(Na.from({identityApi:ze,signOut:async()=>{var ke;localStorage.removeItem(ua),await((ke=ze.signOut)==null?void 0:ke.call(ze))}}))},[s]);useLayoutEffect(()=>{var ze;if(!U)return;const ke=localStorage.getItem(ua);if(ke===null){te(!1);return}const yt=r[ke];if(!yt){te(!1);return}let ft=!1;return yt.components.loader(w,(ze=yt.config)==null?void 0:ze.apiRef).then(Gt=>{if(ft){localStorage.removeItem(ua);return}Gt?ae(Gt):te(!1)}).catch(Gt=>{localStorage.removeItem(ua),!ft&&(v.post(Gt),te(!1))}),()=>{ft=!0}},[U,v,s,w,r,ae]);const Ue=useMemo(()=>Object.keys(r).map(ze=>{const ke=r[ze],{Component:yt}=ke.components,ft=pn=>{ae(pn)},Gt=()=>{var pn;localStorage.setItem(ua,((pn=ke==null?void 0:ke.config)==null?void 0:pn.id)||ke.id)},Ft=()=>{localStorage.removeItem(ua)};return React.createElement(yt,{key:ke.id,config:ke.config,onSignInStarted:Gt,onSignInSuccess:ft,onSignInFailure:Ft})}),[r,ae]);return[U,Ue]},wl=({onSignInSuccess:r,providers:s=[],title:v,align:w="left"})=>{const U=useApi(configApiRef),te=Wa(),ae=Sl(s),[Ue,ze]=Al(ae,r);return Ue?React.createElement(va,null):React.createElement(Sa,{themeId:"home"},React.createElement(Ra,{title:U.getString("app.title")}),React.createElement(Oa,null,v&&React.createElement(Uo,{title:v,textAlign:w}),React.createElement(Grid,{container:!0,justifyContent:w==="center"?w:"flex-start",spacing:2,component:"ul",classes:te},ze)))},Dl=({provider:r,auto:s,onSignInSuccess:v})=>{const w=Wa(),U=useApi(r.apiRef),te=useApi(configApiRef),[ae,Ue]=useState(),[ze,ke]=useState(!1),yt=async({checkExisting:ft,showPopup:Gt})=>{try{let Ft;if(ft&&(Ft=await U.getBackstageIdentity({optional:!0})),!Ft&&(Gt||s)&&(ke(!0),Ft=await U.getBackstageIdentity({instantPopup:!0}),!Ft))throw new Error(`The ${r.title} provider is not configured to support sign-in`);if(!Ft){ke(!0);return}const pn=await U.getProfile();v(ca.create({identity:Ft.identity,authApi:U,profile:pn}))}catch(Ft){Ue(Ft),ke(!0)}};return useMountEffect(()=>yt({checkExisting:!0})),ze?React.createElement(Sa,{themeId:"home"},React.createElement(Ra,{title:te.getString("app.title")}),React.createElement(Oa,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:w},React.createElement(Aa,null,React.createElement(ia,{variant:"fullHeight",title:r.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{yt({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},r.message),ae&&ae.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},ae.message)))))):React.createElement(va,null)};function cc(r){return"provider"in r?React.createElement(Dl,{...r}):React.createElement(wl,{...r})}const Tl=(0,h.Z)(r=>({root:{padding:r.spacing(0,2,0,2.5),minHeight:r.spacing(3)},indicator:{backgroundColor:r.palette.info.main,height:r.spacing(.3)}}),{name:"BackstageTabbedCard"}),Il=(0,k.Z)(r=>({root:{padding:r.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:r.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(Ke.Z);function Ml(r){const{slackChannel:s,errorBoundaryProps:v,children:w,title:U,deepLink:te,value:ae,onChange:Ue}=r,ze=Tl(),[ke,yt]=(0,t.useState)(0),ft=Ue||((pn,On)=>yt(On));let Gt;ae?t.Children.map(w,pn=>{var On;t.isValidElement(pn)&&(pn==null?void 0:pn.props.value)===ae&&(Gt=(On=pn==null?void 0:pn.props)==null?void 0:On.children)}):t.Children.map(w,(pn,On)=>{t.isValidElement(pn)&&On===ke&&(Gt=pn==null?void 0:pn.props.children)});const Ft=v||(s?{slackChannel:s}:{});return t.createElement(Q.Z,null,t.createElement(Va,{...Ft},U&&t.createElement(Il,{title:U}),t.createElement(_e.Z,{selectionFollowsFocus:!0,classes:ze,value:ae||ke,onChange:ft},w),t.createElement(St.Z,null),t.createElement(We.Z,null,Gt),te&&t.createElement(ja,{...te})))}const Ll=(0,h.Z)(r=>({root:{minWidth:r.spacing(6),minHeight:r.spacing(3),margin:r.spacing(0,2,0,0),padding:r.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:r.palette.text.primary}},selected:{fontWeight:r.typography.fontWeightBold}}),{name:"BackstageCardTab"});function $l(r){const{children:s,...v}=r,w=Ll();return t.createElement(Ve.Z,{disableRipple:!0,classes:w,...v})}},49408:function(Rt,d,e){e.d(d,{P:function(){return m},u:function(){return a}});var n=e(18473),l=e(2784);const u="plugin-context",m=c=>{const{children:_,plugin:b}=c,{Provider:t}=(0,n.CT)(u);return l.createElement(t,{value:(0,n.EI)({1:{plugin:b}})},_)};function a(){const c=(0,n.Vt)(u);if(!c)throw new Error("Plugin Options context is not available");const _=c.atVersion(1);if(!_)throw new Error("Plugin Options v1 is not available");return _.plugin.getPluginOptions()}},30705:function(Rt,d,e){e.d(d,{$4:function(){return J},$v:function(){return Z},CL:function(){return st},CO:function(){return hn},D:function(){return S},Ds:function(){return Ee},E6:function(){return Re},F4:function(){return y},IY:function(){return Pe},I_:function(){return b},Km:function(){return P},Kp:function(){return z},NT:function(){return It},NW:function(){return Xe},Oi:function(){return Be},P4:function(){return dt},R5:function(){return ee},Rz:function(){return Je},T0:function(){return $},VE:function(){return Bt},W0:function(){return jt},YO:function(){return dn},ZM:function(){return an},bq:function(){return C},fC:function(){return _},gP:function(){return Zt},gW:function(){return T},h_:function(){return t},hg:function(){return Me},ni:function(){return L},p_:function(){return f},qD:function(){return ce},rx:function(){return ln},sM:function(){return k},tg:function(){return zt},uB:function(){return p},ux:function(){return x},vJ:function(){return St},v_:function(){return F},x8:function(){return qt},z$:function(){return Ze}});var n=e(18473),l=e(2784),u=e(73557),m=e(49408);const a=(0,n.CT)("analytics-context"),c=()=>{const fe=(0,l.useContext)(a);if(fe===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const V=fe.atVersion(1);if(V===void 0)throw new Error("No context found for version 1.");return V},_=fe=>{const{attributes:V,children:X}=fe,ge={...c(),...V},Se=(0,n.EI)({1:ge});return l.createElement(a.Provider,{value:Se},X)};function b(){const fe=(0,n.Vt)("api-context");if(!fe)throw new Error("API context is not available");const V=fe.atVersion(1);if(!V)throw new Error("ApiContext v1 not available");return V}function t(fe){const X=b().get(fe);if(!X)throw new Error(`No implementation available for ${fe}`);return X}function E(fe){return function(X){const ue=Se=>{const ot=b(),tt={};for(const pt in fe)if(fe.hasOwnProperty(pt)){const Lt=fe[pt],de=ot.get(Lt);if(!de)throw new Error(`No implementation available for ${Lt}`);tt[pt]=de}return React.createElement(X,{...Se,...tt})},ge=X.displayName||X.name||"Component";return ue.displayName=`withApis(${ge})`,ue}}class h{constructor(V){if(this.config=V,!V.id.split(".").flatMap(ue=>ue.split("-")).every(ue=>ue.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${V.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function $(fe){return new h(fe)}function L(fe,V){return"id"in fe?{api:fe,deps:{},factory:()=>V}:fe}var k=(fe=>(fe.SignedIn="SignedIn",fe.SignedOut="SignedOut",fe))(k||{});const z=$({id:"core.auth.google"}),y=$({id:"core.auth.github"}),S=$({id:"core.auth.okta"}),x=$({id:"core.auth.gitlab"}),f=$({id:"core.auth.microsoft"}),T=$({id:"core.auth.onelogin"}),C=$({id:"core.auth.bitbucket"}),P=$({id:"core.auth.bitbucket-server"}),p=$({id:"core.auth.atlassian"}),Z=$({id:"core.alert"}),F=$({id:"core.analytics"}),Me=$({id:"core.apptheme"}),Ee=$({id:"core.config"}),Xe=$({id:"core.discovery"}),Bt=$({id:"core.error"});var st=(fe=>(fe[fe.None=0]="None",fe[fe.Active=1]="Active",fe))(st||{});const jt=$({id:"core.featureflags"}),Zt=$({id:"core.fetch"}),J=$({id:"core.identity"}),an=$({id:"core.oauthrequest"}),Re=$({id:"core.storage"});class xe{constructor(V,X={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=V,this.context=X}setContext(V){this.context=V}captureEvent(V,X,{value:ue,attributes:ge}={}){try{this.analyticsApi.captureEvent({action:V,subject:X,value:ue,attributes:ge,context:this.context})}catch(Se){console.warn("Error during analytics event capture. %o",Se)}}}function O(){try{return t(F)}catch{return{captureEvent:()=>{}}}}function Ze(){const fe=(0,l.useRef)(null),V=c(),X=O();function ue(){return fe.current===null&&(fe.current=new xe(X)),fe.current}const ge=ue();return ge.setContext(V),ge}const ce=()=>{const fe=(0,n.Vt)("app-context");if(!fe)throw new Error("App context is not available");const V=fe.atVersion(1);if(!V)throw new Error("AppContext v1 not available");return V},R=(0,n.uW)("component-data-store",()=>new WeakMap),N="__backstage_data";function ee(fe,V,X){var ue;const ge=fe;let Se=(ue=ge[N])!=null?ue:R.get(fe);if(Se||(Se={map:new Map},Object.defineProperty(ge,N,{enumerable:!1,configurable:!0,writable:!1,value:Se}),R.set(fe,Se)),Se.map.has(V)){const ot=fe.displayName||fe.name;throw new Error(`Attempted to attach duplicate data "${V}" to component "${ot}"`)}Se.map.set(V,X)}function Pe(fe,V){var X;if(!fe)return;const ue=fe.type;if(!ue)return;const ge=(X=ue[N])!=null?X:R.get(ue);if(ge)return ge.map.get(V)}const Ge=(0,n.uW)("route-ref-type",()=>Symbol("route-ref-type"));var Ct;class ht{constructor(V,X){this.id=V,this.params=X,this[Ct]="absolute"}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}Ct=Ge;function It(fe){var V;return new ht(fe.id,(V=fe.params)!=null?V:[])}var q;const oe=/^\w+$/;class Ae{constructor(V,X,ue,ge){this.id=V,this.path=X,this.parent=ue,this.params=ge,this[q]="sub"}toString(){return`routeRef{type=sub,id=${this.id}}`}}q=Ge;function Je(fe){const{id:V,path:X,parent:ue}=fe,ge=X.split("/").filter(tt=>tt.startsWith(":")).map(tt=>tt.substring(1)),Se=[...ue.params,...ge];if(ue.params.some(tt=>ge.includes(tt)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!X.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${X}'`);if(X.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${X}'`);for(const tt of ge)if(!oe.test(tt))throw new Error(`SubRouteRef path has invalid param, got '${tt}'`);return new Ae(V,X,ue,Se)}var ct;class At{constructor(V,X,ue){this.id=V,this.params=X,this.optional=ue,this[ct]="external"}toString(){return`routeRef{type=external,id=${this.id}}`}}ct=Ge;function qt(fe){var V;return new At(fe.id,(V=fe.params)!=null?V:[],Boolean(fe.optional))}function zt(fe){const{pathname:V}=(0,u.TH)(),X=(0,n.Vt)("routing-context");if(!X)throw new Error("Routing context is not available");const ue=X.atVersion(1),ge=(0,l.useMemo)(()=>ue&&ue.resolve(fe,{pathname:V}),[ue,fe,V]);if(!X)throw new Error("useRouteRef used outside of routing context");if(!ue)throw new Error("RoutingContext v1 not available");const Se="optional"in fe&&fe.optional;if(!ge&&!Se)throw new Error(`No path for ${fe}`);return ge}function Be(fe){return(0,u.UO)()}class Pt extends l.Component{constructor(){super(...arguments),this.state={error:void 0},this.handleErrorReset=()=>{this.setState({error:void 0})}}static getDerivedStateFromError(V){return{error:V}}render(){const{error:V}=this.state,{app:X,plugin:ue}=this.props,{ErrorBoundaryFallback:ge}=X.getComponents();return V?l.createElement(ge,{error:V,resetError:this.handleErrorReset,plugin:ue}):this.props.children}}function dt(fe){const{component:V,mountPoint:X,name:ue}=fe;return dn({component:{lazy:()=>V().then(ge=>{const Se=tt=>{try{zt(X)}catch(pt){if(typeof pt=="object"&&pt!==null){const{message:Lt}=pt;if(typeof Lt=="string"&&Lt.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${X} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw pt}return l.createElement(ge,{...tt})},ot=ue||ge.displayName||ge.name||"LazyComponent";return Se.displayName=`RoutableExtension(${ot})`,Se},ge=>ot=>{const tt=ce(),{BootErrorPage:pt}=tt.getComponents();return l.createElement(pt,{step:"load-chunk",error:ge})})},data:{"core.mountPoint":X},name:ue})}function hn(fe){const{component:V,name:X}=fe;return dn({component:V,name:X})}function dn(fe){const{data:V={},name:X}=fe;X||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let ue;if("lazy"in fe.component){const Se=fe.component.lazy;ue=(0,l.lazy)(()=>Se().then(ot=>({default:ot})))}else ue=fe.component.sync;const ge=X||ue.displayName||ue.name||"Component";return{expose(Se){const ot=tt=>{const pt=ce(),{Progress:Lt}=pt.getComponents(),de=V==null?void 0:V["core.mountPoint"];return l.createElement(l.Suspense,{fallback:l.createElement(Lt,null)},l.createElement(Pt,{app:pt,plugin:Se},l.createElement(_,{attributes:{pluginId:Se.getId(),...X&&{extension:X},...de&&{routeRef:de.id}}},l.createElement(m.P,{plugin:Se},l.createElement(ue,{...tt})))))};ee(ot,"core.plugin",Se),ee(ot,"core.extensionName",X);for(const[tt,pt]of Object.entries(V))ee(ot,tt,pt);return ot.displayName=`Extension(${ge})`,ot}}}function bn(fe,V,X,ue){return l.Children.toArray(fe).flatMap(ge=>{if(!(0,l.isValidElement)(ge))return[];if(ge.type===l.Fragment)return bn(ge.props.children,V,X,ue);if(Pe(ge,"core.featureFlagged")){const Se=ge.props;return("with"in Se?V.isActive(Se.with):!V.isActive(Se.without))?bn(ge.props.children,V,X,ue):[]}if(X===void 0||X(ge))return[ge];if(ue)throw new Error(ue);return bn(ge.props.children,V,X,ue)})}class it{constructor(V,X){this.node=V,this.featureFlagsApi=X}selectByComponentData(V){const X=bn(this.node,this.featureFlagsApi,ue=>Pe(ue,V.key)!==void 0,V.withStrictError);return new it(X,this.featureFlagsApi)}findComponentData(V){return bn(this.node,this.featureFlagsApi,ue=>Pe(ue,V.key)!==void 0).map(ue=>Pe(ue,V.key)).filter(ue=>ue!==void 0)}getElements(){return bn(this.node,this.featureFlagsApi)}}function St(fe,V,X=[]){const ue=t(jt),ge=new it(fe,ue);return(0,l.useMemo)(()=>V(ge),[fe,...X])}class En{constructor(V){this.config=V,this.options=void 0}getId(){return this.config.id}getApis(){var V;return(V=this.config.apis)!=null?V:[]}getFeatureFlags(){var V,X;return(X=(V=this.config.featureFlags)==null?void 0:V.slice())!=null?X:[]}get routes(){var V;return(V=this.config.routes)!=null?V:{}}get externalRoutes(){var V;return(V=this.config.externalRoutes)!=null?V:{}}provide(V){return V.expose(this)}__experimentalReconfigure(V){this.config.__experimentalConfigure&&(this.options=this.config.__experimentalConfigure(V))}getPluginOptions(){var V;return this.config.__experimentalConfigure&&!this.options&&(this.options=this.config.__experimentalConfigure()),(V=this.options)!=null?V:{}}toString(){return`plugin{${this.config.id}}`}}function ln(fe){return new En(fe)}},32272:function(Rt,d,e){e.d(d,{BD:function(){return m},SP:function(){return y},VL:function(){return x},VZ:function(){return u},dR:function(){return $}});var n=e(24852),l=e.n(n);function u(f){if(typeof f!="object"||f===null||Array.isArray(f))return!1;const T=f;return!(typeof T.name!="string"||T.name===""||typeof T.message!="string")}function m(f){if(typeof f!="object"||f===null||Array.isArray(f))throw new Error(`Encountered invalid error, not an object, got '${f}'`);const T=f;if(typeof T.name!="string"||T.name==="")throw new Error(`Encountered error object without a name, got '${f}'`);if(typeof T.message!="string")throw new Error(`Encountered error object without a message, got '${f}'`)}function a(f,T){const P={name:"Unknown",message:"<no reason given>",...serializeError$1(f)};return T!=null&&T.includeStack||delete P.stack,P}function c(f){const T=(0,n.deserializeError)(f);return f.stack||(T.stack=void 0),T}function _(f){if(u(f)){const T=String(f);return T!=="[object Object]"?T:`${f.name}: ${f.message}`}return`unknown error '${f}'`}class b extends Error{constructor(T,C){var P;let p=T;if(C!==void 0){const Z=_(C);p?p+=`; caused by ${Z}`:p=`caused by ${Z}`}super(p),(P=Error.captureStackTrace)==null||P.call(Error,this,this.constructor),this.name=this.constructor.name,this.cause=u(C)?C:void 0}}class t extends null{}class E extends null{}class h extends null{}class $ extends b{}class L extends null{}class k extends null{}class z extends null{}class y extends b{constructor(T,C){super(T,C),this.name=u(C)?C.name:"Error"}}async function S(f){var T;try{const C=await f.text();if(C){if((T=f.headers.get("content-type"))!=null&&T.startsWith("application/json"))try{const P=JSON.parse(C);if(P.error&&P.response)return P}catch{}return{error:{name:"Error",message:`Request failed with status ${f.status} ${f.statusText}, ${C}`},response:{statusCode:f.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${f.status} ${f.statusText}`},response:{statusCode:f.status}}}class x extends Error{constructor(T){super(T.message),this.name="ResponseError",this.response=T.response,this.body=T.data,this.cause=T.cause}static async fromResponse(T){const C=await S(T),P=C.response.statusCode||T.status,p=C.error.name||T.statusText,Z=`Request failed with ${P} ${p}`,F=c(C.error);return new x({message:Z,response:T,data:C,cause:F})}}},49462:function(Rt,d,e){e.d(d,{Om:function(){return a},ae:function(){return x},nW:function(){return T},q3:function(){return f},zN:function(){return S}});var n=e(30705),l=e(1854),u=e(73250),m=e(2784);const a=(0,n.T0)({id:"core.scmauth"});var c=(C,P,p)=>{if(!P.has(C))throw TypeError("Cannot "+p)},_=(C,P,p)=>(c(C,P,"read from private field"),p?p.call(C):P.get(C)),b=(C,P,p)=>{if(P.has(C))throw TypeError("Cannot add the same private member more than once");P instanceof WeakSet?P.add(C):P.set(C,p)},t=(C,P,p,Z)=>(c(C,P,"write to private field"),Z?Z.call(C,p):P.set(C,p),p),E,h,$,L,k;class z{constructor(P){b(this,E,void 0),t(this,E,P)}async getCredentials(P){const p=new URL(P.url),Z=_(this,E).find(F=>F.isUrlSupported(p));if(!Z)throw new Error(`No auth provider available for '${P.url}', see https://backstage.io/link?scm-auth`);return Z.getCredentials(P)}}E=new WeakMap;const y=class{constructor(C,P,p,Z){b(this,h,void 0),b(this,$,void 0),b(this,L,void 0),b(this,k,void 0),t(this,h,P),t(this,$,p),t(this,L,Z),t(this,k,C)}static createDefaultApiFactory(){return(0,n.ni)({api:a,deps:{github:n.F4,gitlab:n.ux,azure:n.p_,bitbucket:n.bq},factory:({github:C,gitlab:P,azure:p,bitbucket:Z})=>y.merge(y.forGithub(C),y.forGitlab(P),y.forAzure(p),y.forBitbucket(Z))})}static forAuthApi(C,P){return new y("generic",C,P.host,P.scopeMapping)}static forGithub(C,P){var p;const Z=(p=P==null?void 0:P.host)!=null?p:"github.com";return new y("github",C,Z,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(C,P){var p;const Z=(p=P==null?void 0:P.host)!=null?p:"gitlab.com";return new y("gitlab",C,Z,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(C,P){var p;const Z=(p=P==null?void 0:P.host)!=null?p:"dev.azure.com";return new y("azure",C,Z,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(C,P){var p;const Z=(p=P==null?void 0:P.host)!=null?p:"bitbucket.org";return new y("bitbucket",C,Z,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...C){return new z(C)}isUrlSupported(C){return C.host===_(this,$)}getAdditionalScopesForProvider(C){var P,p;return!(C!=null&&C.customScopes)||_(this,k)==="generic"?[]:(p=(P=C.customScopes)==null?void 0:P[_(this,k)])!=null?p:[]}async getCredentials(C){const{url:P,additionalScope:p,...Z}=C,F=_(this,L).default.slice();p!=null&&p.repoWrite&&F.push(..._(this,L).repoWrite);const Me=this.getAdditionalScopesForProvider(p);Me.length&&F.push(...Me);const Ee=[...new Set(F)],Xe=await _(this,h).getAccessToken(Ee,Z);return{token:Xe,headers:{Authorization:`Bearer ${Xe}`}}}};let S=y;h=new WeakMap,$=new WeakMap,L=new WeakMap,k=new WeakMap;class x{static fromConfig(P){return l.Lx.fromConfig(P)}}const f=(0,n.T0)({id:"integration.scmintegrations"}),T=C=>{var P;const{type:p}=C,Z=(0,n.qD)(),F=u.Z,Me=p&&(P=Z.getSystemIcon(p))!=null?P:F;return m.createElement(Me,null)}},1854:function(Rt,d,e){e.d(d,{BT:function(){return Un},Lx:function(){return tr},MY:function(){return vn},ah:function(){return Zn}});var n=e(82717),l=e.n(n),u=e(76635),m=e.n(u),a=e(96279),c=e.n(a),_=e(72872),b=e(89393),t=e(26228),E=e(48834).Buffer;function h(D){const I=new URL("http://example.com");return I.host=D,I.host===D}function $(D){try{return new URL(D),!0}catch{return!1}}function L(D,I){return{list(){return D},byUrl(G){try{const ie=typeof G=="string"?new URL(G):G;return D.find(Ie=>I(Ie)===ie.host)}catch{return}},byHost(G){return D.find(ie=>I(ie)===G)}}}function k(D){const{url:I,base:G,lineNumber:ie}=D;try{return new URL(I),I}catch{}let Ie;if(I.startsWith("/")){const{filepath:qe}=l()(G);Ie=new URL(G);const B=(0,u.trimEnd)(Ie.pathname.substring(0,Ie.pathname.length-qe.length),"/");Ie.pathname=`${B}${I}`}else Ie=new URL(I,G);return Ie.search=new URL(G).search,ie&&(Ie.hash=`L${ie}`),Ie.toString()}const z="amazonaws.com";function y(D){var I;const G=D.getOptionalString("endpoint"),ie=(I=D.getOptionalBoolean("s3ForcePathStyle"))!=null?I:!1;let Ie,qe;if(G){try{const Tt=new URL(G);Ie=Tt.host,qe=Tt.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${G}' is not a valid URL`)}if(qe!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${G}'`)}else Ie=z;const B=D.getOptionalString("accessKeyId"),H=D.getOptionalString("secretAccessKey"),Ce=D.getOptionalString("roleArn"),je=D.getOptionalString("externalId");return{host:Ie,endpoint:G,s3ForcePathStyle:ie,accessKeyId:B,secretAccessKey:H,roleArn:Ce,externalId:je}}function S(D){const I=D.map(y);return I.some(G=>G.host===z)||I.push({host:z}),I}const x=class{constructor(D){this.integrationConfig=D}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){return k(D)}resolveEditUrl(D){return D}};let f=x;f.factory=({config:D})=>{var I;const G=S((I=D.getOptionalConfigArray("integrations.awsS3"))!=null?I:[]);return L(G.map(ie=>new x(ie)),ie=>ie.config.host)};var T=(D,I,G)=>{if(!I.has(D))throw TypeError("Cannot "+G)},C=(D,I,G)=>(T(D,I,"read from private field"),G?G.call(D):I.get(D)),P=(D,I,G)=>{if(I.has(D))throw TypeError("Cannot add the same private member more than once");I instanceof WeakSet?I.add(D):I.set(D,G)},p=(D,I,G,ie)=>(T(D,I,"write to private field"),ie?ie.call(D,G):I.set(D,G),G),Z,F,Me,Ee,Xe,Bt,st;const jt="GB",Zt=class{constructor(D,I,G,ie,Ie,qe){P(this,Z,void 0),P(this,F,void 0),P(this,Me,void 0),P(this,Ee,void 0),P(this,Xe,void 0),P(this,Bt,void 0),P(this,st,(...B)=>{const H=new URL(C(this,Z));return H.pathname=B.map(Ce=>encodeURIComponent(Ce)).join("/"),H}),p(this,Z,D),p(this,F,I),p(this,Me,G),p(this,Ee,ie),p(this,Xe,Ie),p(this,Bt,qe)}static fromRepoUrl(D){var I;const G=new URL(D);let ie,Ie,qe;const B=G.pathname.split("/").map(Tt=>decodeURIComponent(Tt));if(B[2]==="_git"?(ie=B[1],Ie=qe=B[3]):B[3]==="_git"?(ie=B[1],Ie=B[2],qe=B[4]):B[4]==="_git"&&(ie=`${B[1]}/${B[2]}`,Ie=B[3],qe=B[5]),!ie||!Ie||!qe)throw new Error("Azure URL must point to a git repository");const H=(I=G.searchParams.get("path"))!=null?I:void 0;let Ce;const je=G.searchParams.get("version");if(je){if(je.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Ce=je.slice(2)}return new Zt(G.origin,ie,Ie,qe,H,Ce)}toRepoUrl(){let D;return C(this,Me)===C(this,Ee)?D=C(this,st).call(this,C(this,F),"_git",C(this,Ee)):D=C(this,st).call(this,C(this,F),C(this,Me),"_git",C(this,Ee)),C(this,Xe)&&D.searchParams.set("path",C(this,Xe)),C(this,Bt)&&D.searchParams.set("version",jt+C(this,Bt)),D.toString()}toFileUrl(){if(!C(this,Xe))throw new Error("Azure URL must point to a specific path to be able to download a file");const D=C(this,st).call(this,C(this,F),C(this,Me),"_apis","git","repositories",C(this,Ee),"items");return D.searchParams.set("api-version","6.0"),D.searchParams.set("path",C(this,Xe)),C(this,Bt)&&D.searchParams.set("version",C(this,Bt)),D.toString()}toArchiveUrl(){const D=C(this,st).call(this,C(this,F),C(this,Me),"_apis","git","repositories",C(this,Ee),"items");return D.searchParams.set("recursionLevel","full"),D.searchParams.set("download","true"),D.searchParams.set("api-version","6.0"),C(this,Xe)&&D.searchParams.set("scopePath",C(this,Xe)),C(this,Bt)&&D.searchParams.set("version",C(this,Bt)),D.toString()}toCommitsUrl(){const D=C(this,st).call(this,C(this,F),C(this,Me),"_apis","git","repositories",C(this,Ee),"commits");return D.searchParams.set("api-version","6.0"),C(this,Bt)&&D.searchParams.set("searchCriteria.itemVersion.version",C(this,Bt)),D.toString()}getOwner(){return C(this,F)}getProject(){return C(this,Me)}getRepo(){return C(this,Ee)}getPath(){return C(this,Xe)}getRef(){return C(this,Bt)}};let J=Zt;Z=new WeakMap,F=new WeakMap,Me=new WeakMap,Ee=new WeakMap,Xe=new WeakMap,Bt=new WeakMap,st=new WeakMap;const an="dev.azure.com";function Re(D){var I;const G=(I=D.getOptionalString("host"))!=null?I:an,ie=D.getOptionalString("token");if(!h(G))throw new Error(`Invalid Azure integration config, '${G}' is not a valid host`);return{host:G,token:ie}}function xe(D){const I=D.map(Re);return I.some(G=>G.host===an)||I.push({host:an}),I}const O=class{constructor(D){this.integrationConfig=D}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){var I;const{url:G,base:ie}=D;if($(G))return G;try{const Ie=J.fromRepoUrl(ie),qe=new URL(ie),B=new URL(`https://a.com${(I=Ie.getPath())!=null?I:""}`),H=new URL(G,B).pathname;return qe.searchParams.set("path",H),D.lineNumber&&(qe.searchParams.set("line",String(D.lineNumber)),qe.searchParams.set("lineEnd",String(D.lineNumber+1)),qe.searchParams.set("lineStartColumn","1"),qe.searchParams.set("lineEndColumn","1")),qe.toString()}catch{return new URL(G,ie).toString()}}resolveEditUrl(D){return D}};let Ze=O;Ze.factory=({config:D})=>{var I;const G=xe((I=D.getOptionalConfigArray("integrations.azure"))!=null?I:[]);return L(G.map(ie=>new O(ie)),ie=>ie.config.host)};function ce(D){return J.fromRepoUrl(D).toFileUrl()}function R(D){return J.fromRepoUrl(D).toArchiveUrl()}function N(D){return J.fromRepoUrl(D).toCommitsUrl()}function ee(D,I){const G=I?{...I}:{};if(D.token){const ie=E.from(`:${D.token}`,"utf8");G.Authorization=`Basic ${ie.toString("base64")}`}return{headers:G}}const Pe="bitbucket.org",Ge="https://api.bitbucket.org/2.0";function Ct(D){var I;const G=(I=D.getOptionalString("host"))!=null?I:Pe;let ie=D.getOptionalString("apiBaseUrl");const Ie=D.getOptionalString("token"),qe=D.getOptionalString("username"),B=D.getOptionalString("appPassword");if(!h(G))throw new Error(`Invalid Bitbucket integration config, '${G}' is not a valid host`);return ie?ie=(0,u.trimEnd)(ie,"/"):G===Pe?ie=Ge:ie=`https://${G}/rest/api/1.0`,{host:G,apiBaseUrl:ie,token:Ie,username:qe,appPassword:B}}function ht(D){const I=D.map(Ct);return I.some(G=>G.host===Pe)||I.push({host:Pe,apiBaseUrl:Ge}),I}const It=class{constructor(D){this.integrationConfig=D}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){const I=k(D);if(!D.lineNumber)return I;const G=new URL(I);return this.integrationConfig.host==="bitbucket.org"?G.hash=`lines-${D.lineNumber}`:G.hash=`${D.lineNumber}`,G.toString()}resolveEditUrl(D){const I=l()(D),G=new URL(D);return G.searchParams.set("mode","edit"),G.searchParams.set("spa","0"),G.searchParams.set("at",I.ref),G.toString()}};let q=It;q.factory=({config:D})=>{var I,G,ie;const Ie=ht((ie=D.getOptionalConfigArray("integrations.bitbucket"))!=null?ie:[...(I=D.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?I:[],...(G=D.getOptionalConfigArray("integrations.bitbucketServer"))!=null?G:[]]);return L(Ie.map(qe=>new It(qe)),qe=>qe.config.host)};async function oe(D,I){const{name:G,owner:ie,resource:Ie}=parseGitUrl(D),qe=Ie==="bitbucket.org";let B=qe?`${I.apiBaseUrl}/repositories/${ie}/${G}`:`${I.apiBaseUrl}/projects/${ie}/repos/${G}/default-branch`,H=await fetch(B,ct(I));if(H.status===404&&!qe&&(B=`${I.apiBaseUrl}/projects/${ie}/repos/${G}/branches/default`,H=await fetch(B,ct(I))),!H.ok){const je=`Failed to retrieve default branch from ${B}, ${H.status} ${H.statusText}`;throw new Error(je)}let Ce;if(qe)Ce=(await H.json()).mainbranch.name;else{const{displayId:je}=await H.json();Ce=je}if(!Ce)throw new Error(`Failed to read default branch from ${B}. Response ${H.status} ${H.json()}`);return Ce}async function Ae(D,I){const{name:G,owner:ie,ref:Ie,protocol:qe,resource:B,filepath:H}=parseGitUrl(D),Ce=B==="bitbucket.org";let je=Ie;je||(je=await oe(D,I));const Tt=H?`&path=${encodeURIComponent(decodeURIComponent(H))}`:"";return Ce?`${qe}://${B}/${ie}/${G}/get/${je}.tar.gz`:`${I.apiBaseUrl}/projects/${ie}/repos/${G}/archive?format=tgz&at=${je}&prefix=${ie}-${G}${Tt}`}function Je(D,I){try{const{owner:G,name:ie,ref:Ie,filepathtype:qe,filepath:B}=parseGitUrl(D);if(!G||!ie||qe!=="browse"&&qe!=="raw"&&qe!=="src")throw new Error("Invalid Bitbucket URL or file path");const H=B.replace(/^\//,"");if(I.host==="bitbucket.org"){if(!Ie)throw new Error("Invalid Bitbucket URL or file path");return`${I.apiBaseUrl}/repositories/${G}/${ie}/src/${Ie}/${H}`}return`${I.apiBaseUrl}/projects/${G}/repos/${ie}/raw/${H}?at=${Ie}`}catch(G){throw new Error(`Incorrect URL: ${D}, ${G}`)}}function ct(D){const I={};if(D.token)I.Authorization=`Bearer ${D.token}`;else if(D.username&&D.appPassword){const G=E.from(`${D.username}:${D.appPassword}`,"utf8");I.Authorization=`Basic ${G.toString("base64")}`}return{headers:I}}const At="bitbucket.org",qt="https://api.bitbucket.org/2.0";function zt(D){const I=At,G=qt,ie=D.getString("username"),Ie=D.getString("appPassword");return{host:I,apiBaseUrl:G,username:ie,appPassword:Ie}}function Be(D){const I=D.map(zt);return I.length===0&&I.push({host:At,apiBaseUrl:qt}),I}const Pt=class{constructor(D){this.integrationConfig=D}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){const I=k(D);if(D.lineNumber){const G=new URL(I);return G.hash=`lines-${D.lineNumber}`,G.toString()}return I}resolveEditUrl(D){const I=l()(D),G=new URL(D);return G.searchParams.set("mode","edit"),G.searchParams.set("at",I.ref),G.toString()}};let dt=Pt;dt.factory=({config:D})=>{var I;const G=Be((I=D.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?I:[]);return L(G.map(ie=>new Pt(ie)),ie=>ie.config.host)};async function hn(D,I){const{name:G,owner:ie}=parseGitUrl(D),Ie=`${I.apiBaseUrl}/repositories/${ie}/${G}`,qe=await fetch(Ie,it(I));if(!qe.ok){const Ce=`Failed to retrieve default branch from ${Ie}, ${qe.status} ${qe.statusText}`;throw new Error(Ce)}const H=(await qe.json()).mainbranch.name;if(!H)throw new Error(`Failed to read default branch from ${Ie}. Response ${qe.status} ${qe.json()}`);return H}async function dn(D,I){const{name:G,owner:ie,ref:Ie,protocol:qe,resource:B}=parseGitUrl(D);let H=Ie;return H||(H=await hn(D,I)),`${qe}://${B}/${ie}/${G}/get/${H}.tar.gz`}function bn(D,I){try{const{owner:G,name:ie,ref:Ie,filepathtype:qe,filepath:B}=parseGitUrl(D);if(!G||!ie||qe!=="src"&&qe!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const H=B.replace(/^\//,"");if(!Ie)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${I.apiBaseUrl}/repositories/${G}/${ie}/src/${Ie}/${H}`}catch(G){throw new Error(`Incorrect URL: ${D}, ${G}`)}}function it(D){const I={};if(D.username&&D.appPassword){const G=E.from(`${D.username}:${D.appPassword}`,"utf8");I.Authorization=`Basic ${G.toString("base64")}`}return{headers:I}}function St(D){const I=D.getString("host");let G=D.getOptionalString("apiBaseUrl");const ie=D.getOptionalString("token"),Ie=D.getOptionalString("username"),qe=D.getOptionalString("password");if(!h(I))throw new Error(`Invalid Bitbucket Server integration config, '${I}' is not a valid host`);return G?G=(0,u.trimEnd)(G,"/"):G=`https://${I}/rest/api/1.0`,{host:I,apiBaseUrl:G,token:ie,username:Ie,password:qe}}function En(D){return D.map(St)}const ln=class{constructor(D){this.integrationConfig=D}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){const I=k(D);if(D.lineNumber){const G=new URL(I);return G.hash=D.lineNumber.toString(),G.toString()}return I}resolveEditUrl(D){return D.includes("?")?D.substring(0,D.indexOf("?")):D}};let fe=ln;fe.factory=({config:D})=>{var I;const G=En((I=D.getOptionalConfigArray("integrations.bitbucketServer"))!=null?I:[]);return L(G.map(ie=>new ln(ie)),ie=>ie.config.host)};async function V(D,I){const{name:G,owner:ie}=parseGitUrl(D);let Ie=`${I.apiBaseUrl}/projects/${ie}/repos/${G}/default-branch`,qe=await fetch(Ie,ge(I));if(qe.status===404&&(Ie=`${I.apiBaseUrl}/projects/${ie}/repos/${G}/branches/default`,qe=await fetch(Ie,ge(I))),!qe.ok){const Ce=`Failed to retrieve default branch from ${Ie}, ${qe.status} ${qe.statusText}`;throw new Error(Ce)}const{displayId:B}=await qe.json(),H=B;if(!H)throw new Error(`Failed to read default branch from ${Ie}. Response ${qe.status} ${qe.json()}`);return H}async function X(D,I){const{name:G,owner:ie,ref:Ie,filepath:qe}=parseGitUrl(D);let B=Ie;B||(B=await V(D,I));const H=qe?`&path=${encodeURIComponent(decodeURIComponent(qe))}`:"";return`${I.apiBaseUrl}/projects/${ie}/repos/${G}/archive?format=tgz&at=${B}&prefix=${ie}-${G}${H}`}function ue(D,I){try{const{owner:G,name:ie,ref:Ie,filepathtype:qe,filepath:B}=parseGitUrl(D);if(!G||!ie||qe!=="browse"&&qe!=="raw"&&qe!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const H=B.replace(/^\//,"");return`${I.apiBaseUrl}/projects/${G}/repos/${ie}/raw/${H}?at=${Ie}`}catch(G){throw new Error(`Incorrect URL: ${D}, ${G}`)}}function ge(D){const I={};if(D.token)I.Authorization=`Bearer ${D.token}`;else if(D.username&&D.password){const G=E.from(`${D.username}:${D.password}`,"utf8");I.Authorization=`Basic ${G.toString("base64")}`}return{headers:I}}function Se(D){const I=D.getString("host");let G=D.getOptionalString("baseUrl"),ie=D.getOptionalString("cloneUrl"),Ie=D.getOptionalString("gitilesBaseUrl");const qe=D.getOptionalString("username"),B=D.getOptionalString("password");if(h(I)){if(G&&!$(G))throw new Error(`Invalid Gerrit integration config, '${G}' is not a valid baseUrl`);if(ie&&!$(ie))throw new Error(`Invalid Gerrit integration config, '${ie}' is not a valid cloneUrl`);if(Ie&&!$(Ie))throw new Error(`Invalid Gerrit integration config, '${Ie}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${I}' is not a valid host`);return G?G=(0,u.trimEnd)(G,"/"):G=`https://${I}`,Ie?Ie=(0,u.trimEnd)(Ie,"/"):Ie=`https://${I}`,ie?ie=(0,u.trimEnd)(ie,"/"):ie=G,{host:I,baseUrl:G,cloneUrl:ie,gitilesBaseUrl:Ie,username:qe,password:B}}function ot(D){return D.map(Se)}const tt=")]}'";function pt(D,I){const ie=I.replace(D.gitilesBaseUrl,"").split("/").filter(je=>!!je),Ie=ie.indexOf("+");if(Ie<=0)throw new Error(`Unable to parse project from url: ${I}`);const qe=(0,u.trimStart)(ie.slice(0,Ie).join("/"),"/"),B=ie.indexOf("heads");if(B<=0)throw new Error(`Unable to parse branch from url: ${I}`);const H=ie[B+1],Ce=ie.slice(B+2).join("/");return{branch:H,filePath:Ce===""?"/":Ce,project:qe}}function Lt(D,I,G,ie){return`${D.gitilesBaseUrl}/${I}/+/refs/heads/${G}/${(0,u.trimStart)(ie,"/")}`}function de(D){return D.password?"/a/":"/"}function re(D,I){const{branch:G,project:ie}=pt(D,I);return`${D.baseUrl}${de(D)}projects/${encodeURIComponent(ie)}/branches/${G}`}function A(D,I){const{project:G}=pt(D,I);return`${D.cloneUrl}${de(D)}${G}`}function j(D,I){const{branch:G,filePath:ie,project:Ie}=pt(D,I);return`${D.baseUrl}${de(D)}projects/${encodeURIComponent(Ie)}/branches/${G}/files/${encodeURIComponent(ie)}/content`}function Q(D){return`${D.baseUrl}${de(D)}projects/`}function me(D){const I={};if(!D.password)return I;const G=E.from(`${D.username}:${D.password}`,"utf8");return I.Authorization=`Basic ${G.toString("base64")}`,{headers:I}}async function We(D){const I=await D.text();if(I.startsWith(tt))try{return JSON.parse(I.slice(tt.length))}catch(G){throw new Error(`Invalid response from Gerrit: ${I.slice(0,10)} - ${G}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${I.slice(0,10)}`)}const Ke=class{constructor(D){this.integrationConfig=D}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){const{url:I,base:G,lineNumber:ie}=D;let Ie;if(I.startsWith("/")){const{branch:qe,project:B}=pt(this.config,G);return Lt(this.config,B,qe,I)}return I?Ie=new URL(I,G):Ie=new URL(G),ie&&(Ie.hash=ie.toString()),Ie.toString()}resolveEditUrl(D){return D}};let He=Ke;He.factory=({config:D})=>{var I;const G=ot((I=D.getOptionalConfigArray("integrations.gerrit"))!=null?I:[]);return L(G.map(ie=>new Ke(ie)),ie=>ie.config.host)};function mt(D){const I=D.getString("host");let G=D.getOptionalString("baseUrl");const ie=D.getOptionalString("username"),Ie=D.getOptionalString("password");if(!h(I))throw new Error(`Invalid Gitea integration config, '${I}' is not a valid host`);return G?G=(0,u.trimEnd)(G,"/"):G=`https://${I}`,{host:I,baseUrl:G,username:ie,password:Ie}}function se(D,I){var G;try{const ie=(G=D.baseUrl)!=null?G:`https://${D.host}`,[Ie,qe,B,H,Ce,je,...Tt]=I.replace(ie,"").split("/"),Kt=Tt.join("/").replace(/^\//,"");return`${ie}/${qe}/${B}/_edit/${je}/${Kt}`}catch(ie){throw new Error(`Incorrect URL: ${I}, ${ie}`)}}function pe(D,I){var G;try{const ie=(G=D.baseUrl)!=null?G:`https://${D.host}`,[Ie,qe,B,H,Ce,je,...Tt]=I.replace(ie,"").split("/"),Kt=Tt.join("/").replace(/^\//,"");return`${ie}/api/v1/repos/${qe}/${B}/contents/${Kt}?ref=${je}`}catch(ie){throw new Error(`Incorrect URL: ${I}, ${ie}`)}}function ye(D){const I={},{username:G,password:ie}=D;return ie?(G?I.Authorization=`basic ${E.from(`${G}:${ie}`).toString("base64")}`:I.Authorization=`token ${ie}`,{headers:I}):I}const we=class{constructor(D){this.config=D}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(D){return k(D)}resolveEditUrl(D){return se(this.config,D)}};let nt=we;nt.factory=({config:D})=>{var I;const ie=((I=D.getOptionalConfigArray("integrations.gitea"))!=null?I:[]).map(Ie=>mt(Ie));return L(ie.map(Ie=>new we(Ie)),Ie=>Ie.config.host)};const $t="github.com",Ut="https://api.github.com",wt="https://raw.githubusercontent.com";function sn(D){var I,G;const ie=(I=D.getOptionalString("host"))!=null?I:$t;let Ie=D.getOptionalString("apiBaseUrl"),qe=D.getOptionalString("rawBaseUrl");const B=D.getOptionalString("token"),H=(G=D.getOptionalConfigArray("apps"))==null?void 0:G.map(Ce=>({appId:Ce.getNumber("appId"),clientId:Ce.getString("clientId"),clientSecret:Ce.getString("clientSecret"),webhookSecret:Ce.getString("webhookSecret"),privateKey:Ce.getString("privateKey"),allowedInstallationOwners:Ce.getOptionalStringArray("allowedInstallationOwners")}));if(!h(ie))throw new Error(`Invalid GitHub integration config, '${ie}' is not a valid host`);return Ie?Ie=(0,u.trimEnd)(Ie,"/"):ie===$t&&(Ie=Ut),qe?qe=(0,u.trimEnd)(qe,"/"):ie===$t&&(qe=wt),{host:ie,apiBaseUrl:Ie,rawBaseUrl:qe,token:B,apps:H}}function vn(D){const I=D.map(sn);return I.some(G=>G.host===$t)||I.push({host:$t,apiBaseUrl:Ut,rawBaseUrl:wt}),I}function Le(D,I,G){try{const{owner:ie,name:Ie,ref:qe,filepathtype:B,filepath:H}=parseGitUrl(D);if(!ie||!Ie||!qe||B!=="blob"&&B!=="raw"&&B!=="tree")throw new Error("Invalid GitHub URL or file path");const Ce=H.replace(/^\//,"");return be(I,G)==="api"?`${I.apiBaseUrl}/repos/${ie}/${Ie}/contents/${Ce}?ref=${qe}`:`${I.rawBaseUrl}/${ie}/${Ie}/${qe}/${Ce}`}catch(ie){throw new Error(`Incorrect URL: ${D}, ${ie}`)}}function $e(D,I){const G={};return be(D,I)==="api"&&(G.Accept="application/vnd.github.v3.raw"),I.token&&(G.Authorization=`token ${I.token}`),{headers:G}}function be(D,I){return D.apiBaseUrl&&(I.token||!D.rawBaseUrl)?"api":"raw"}class Qe{constructor(){this.tokenCache=new Map,this.isExpired=I=>t.ou.local()>I}async getOrCreateToken(I,G,ie){let Ie=this.tokenCache.get(I);if((!Ie||this.isExpired(Ie.expiresAt))&&(Ie=await ie(),Ie.expiresAt=Ie.expiresAt.minus({minutes:10}),this.tokenCache.set(I,Ie)),!this.appliesToRepo(Ie,G))throw new Error(`The Backstage GitHub application used in the ${I} organization does not have access to a repository with the name ${G}`);return{accessToken:Ie.token}}appliesToRepo(I,G){return G===void 0?!0:I.repositories!==void 0?I.repositories.includes(G):!0}}const lt={Accept:"application/vnd.github.machine-man-preview+json"};class kt{constructor(I,G){this.cache=new Qe,this.allowedInstallationOwners=I.allowedInstallationOwners,this.baseUrl=G,this.baseAuthConfig={appId:I.appId,privateKey:I.privateKey.replace(/\\n/gm,`
`)},this.appClient=new b.v({baseUrl:G,headers:lt,authStrategy:_.i,auth:this.baseAuthConfig})}async getInstallationCredentials(I,G){var ie;return this.allowedInstallationOwners&&!((ie=this.allowedInstallationOwners)!=null&&ie.includes(I))?{accessToken:void 0}:this.cache.getOrCreateToken(I,G,async()=>{var Ie;const{installationId:qe,suspended:B}=await this.getInstallationData(I);if(B)throw new Error(`The GitHub application for ${I} is suspended`);const H=await this.appClient.apps.createInstallationAccessToken({installation_id:qe,headers:lt});let Ce;if(H.data.repository_selection==="selected"){const je=new b.v({baseUrl:this.baseUrl,auth:H.data.token}),Tt=await je.paginate(je.apps.listReposAccessibleToInstallation);Ce=((Ie=Tt.repositories)!=null?Ie:Tt).map(Vt=>Vt.name)}return{token:H.data.token,expiresAt:t.ou.fromISO(H.data.expires_at),repositories:Ce}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(I){const ie=(await this.getInstallations()).find(qe=>{var B,H;return((H=(B=qe.account)==null?void 0:B.login)==null?void 0:H.toLocaleLowerCase("en-US"))===I.toLocaleLowerCase("en-US")});if(ie)return{installationId:ie.id,suspended:Boolean(ie.suspended_by)};const Ie=new Error(`No app installation found for ${I} in ${this.baseAuthConfig.appId}`);throw Ie.name="NotFoundError",Ie}}class Mt{constructor(I){var G,ie;this.apps=(ie=(G=I.apps)==null?void 0:G.map(Ie=>new kt(Ie,I.apiBaseUrl)))!=null?ie:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(G=>G.getInstallations()))).flat():[]}async getAppToken(I,G){if(this.apps.length===0)return;const ie=await Promise.all(this.apps.map(H=>H.getInstallationCredentials(I,G).then(Ce=>({credentials:Ce,error:void 0}),Ce=>({credentials:void 0,error:Ce})))),Ie=ie.find(H=>{var Ce;return(Ce=H.credentials)==null?void 0:Ce.accessToken});if(Ie)return Ie.credentials.accessToken;const B=ie.map(H=>H.error).find(H=>(H==null?void 0:H.name)!=="NotFoundError");if(B)throw B}}const nn=class{constructor(D,I){this.githubAppCredentialsMux=D,this.token=I}async getCredentials(D){const I=l()(D.url),G=I.owner||I.name,ie=I.owner?I.name:void 0;let Ie="app",qe=await this.githubAppCredentialsMux.getAppToken(G,ie);return qe||(Ie="token",qe=this.token),{headers:qe?{Authorization:`Bearer ${qe}`}:void 0,token:qe,type:Ie}}};let gn=nn;gn.create=D=>new nn(new Mt(D),D.token);class An{constructor(I){this.providers=I}static fromIntegrations(I){const G=new Map;return I.github.list().forEach(ie=>{const Ie=gn.create(ie.config);G.set(ie.config.host,Ie)}),new An(G)}async getCredentials(I){const G=new URL(I.url),ie=this.providers.get(G.host);if(!ie)throw new Error(`There is no GitHub integration that matches ${I.url}. Please add a configuration for an integration.`);return ie.getCredentials(I)}}const Pn=class{constructor(D){this.integrationConfig=D}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){return Un(k(D),"tree")}resolveEditUrl(D){return Un(D,"edit")}};let Bn=Pn;Bn.factory=({config:D})=>{var I;const G=vn((I=D.getOptionalConfigArray("integrations.github"))!=null?I:[]);return L(G.map(ie=>new Pn(ie)),ie=>ie.config.host)};function Un(D,I){return D.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(G,ie,Ie,qe)=>`//${ie}/${Ie}/${qe}/${I}/`)}const zn=null;class Nn extends Bn{constructor(I){super(I)}get config(){return super.config}}Nn.factory=Bn.factory;const Ve=null,_e=null,Ne=null,Te="gitlab.com",ut="https://gitlab.com/api/v4";function gt(D){const I=D.getString("host");let G=D.getOptionalString("apiBaseUrl");const ie=D.getOptionalString("token");let Ie=D.getOptionalString("baseUrl");if(G?G=(0,u.trimEnd)(G,"/"):I===Te&&(G=ut),Ie?Ie=(0,u.trimEnd)(Ie,"/"):Ie=`https://${I}`,h(I)){if(!G||!$(G))throw new Error(`Invalid GitLab integration config, '${G}' is not a valid apiBaseUrl`);if(!$(Ie))throw new Error(`Invalid GitLab integration config, '${Ie}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${I}' is not a valid host`);return{host:I,token:ie,apiBaseUrl:G,baseUrl:Ie}}function Et(D){const I=D.map(gt);return I.some(G=>G.host===Te)||I.push({host:Te,apiBaseUrl:ut,baseUrl:`https://${Te}`}),I}function at(D){let I="";return D.host!==Te&&(I=new URL(D.baseUrl).pathname),trimEnd(I,"/")}async function Dt(D,I){const G=await Cn(D,I);return fn(D,G,I).toString()}function en(D){const{token:I=""}=D;return{headers:{"PRIVATE-TOKEN":I}}}function fn(D,I,G){try{const ie=new URL(D),Ie=ie.pathname.split("/blob/").slice(1).join("/blob/"),[qe,...B]=Ie.split("/"),H=at(G);return ie.pathname=[...H?[H]:[],"api/v4/projects",I,"repository/files",encodeURIComponent(decodeURIComponent(B.join("/"))),"raw"].join("/"),ie.search=`?ref=${qe}`,ie}catch(ie){throw new Error(`Incorrect url: ${D}, ${ie}`)}}async function Cn(D,I){const G=new URL(D);if(!G.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let ie=G.pathname.split("/-/blob/")[0].split("/blob/")[0];const Ie=at(I);Ie&&(ie=ie.replace(Ie,""));const qe=new URL(`${G.origin}${Ie}/api/v4/projects/${encodeURIComponent(ie.replace(/^\//,""))}`),B=await fetch(qe.toString(),en(I)),H=await B.json();if(!B.ok)throw new Error(`GitLab Error '${H.error}', ${H.error_description}`);return Number(H.id)}catch(ie){throw new Error(`Could not get GitLab project ID for: ${D}, ${ie}`)}}const Qn=class{constructor(D){this.integrationConfig=D}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(D){return k(D)}resolveEditUrl(D){return Zn(D,"edit")}};let er=Qn;er.factory=({config:D})=>{var I;const G=Et((I=D.getOptionalConfigArray("integrations.gitlab"))!=null?I:[]);return L(G.map(ie=>new Qn(ie)),ie=>ie.config.host)};function Zn(D,I){return D.replace(/\/\-\/(blob|tree|edit)\//,`/-/${I}/`)}function jn(D){if(!D)return{};if(!D.has("clientEmail")&&!D.has("privateKey"))return{};const I=D.getString("privateKey").split("\\n").join(`
`);return{clientEmail:D.getString("clientEmail"),privateKey:I}}class tr{static fromConfig(I){return new tr({awsS3:f.factory({config:I}),azure:Ze.factory({config:I}),bitbucket:q.factory({config:I}),bitbucketCloud:dt.factory({config:I}),bitbucketServer:fe.factory({config:I}),gerrit:He.factory({config:I}),github:Bn.factory({config:I}),gitlab:er.factory({config:I}),gitea:nt.factory({config:I})})}constructor(I){this.byType=I}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(I=>I.list())}byUrl(I){let G=Object.values(this.byType).map(ie=>ie.byUrl(I)).filter(Boolean);if(G.length>1){const ie=G.filter(Ie=>!(Ie instanceof q));ie.length!==0&&(G=ie)}return G[0]}byHost(I){return Object.values(this.byType).map(G=>G.byHost(I)).find(Boolean)}resolveUrl(I){const G=this.byUrl(I.base);return G?G.resolveUrl(I):k(I)}resolveEditUrl(I){const G=this.byUrl(I);return G?G.resolveEditUrl(I):I}}},63115:function(Rt,d,e){e.d(d,{Cy:function(){return Bt},DC:function(){return Be},OO:function(){return hn},RE:function(){return Me},XQ:function(){return dt},Yq:function(){return Ze},ap:function(){return bn},bM:function(){return q},cm:function(){return Ae},d1:function(){return qt},fP:function(){return F},fe:function(){return Je},gC:function(){return dn},hK:function(){return zt},hs:function(){return ct},nE:function(){return ce},x1:function(){return Pt},zJ:function(){return At}});var n=e(2784),l=e(73557),u=e(80236),m=e(30705),a=e(16673),c=e(73495),_=e(99688),b=e(13737),t=e(60364),E=e(90436),h=e(79692),$=e(95544),L=e(8629),k=e(79249),z=e(38724),y=e(99152),S=e(6487),x=e(49429),f=e(77277),T=e(34520),C=e(15933);const P=(0,m.NT)({id:"api-docs"}),p=(0,m.x8)({id:"register-component",optional:!0}),Z=[a.Es.columns.createTitleColumn({hidden:!0}),a.Es.columns.createNameColumn({defaultKind:"API"}),a.Es.columns.createSystemColumn(),a.Es.columns.createOwnerColumn(),a.Es.columns.createSpecTypeColumn(),a.Es.columns.createSpecLifecycleColumn(),a.Es.columns.createMetadataDescriptionColumn(),a.Es.columns.createTagsColumn()],F=it=>{var St;const{initiallySelectedFilter:En="all",columns:ln,actions:fe}=it,X=`${(St=(0,m.h_)(m.Ds).getOptionalString("organization.name"))!=null?St:"Backstage"} API Explorer`,ue=(0,m.tg)(p);return n.createElement(u.g9,{themeId:"apis",title:"APIs",subtitle:X,pageTitleOverride:"APIs"},n.createElement(u.VY,null,n.createElement(u.yW,{title:""},n.createElement(u.XF,{title:"Register Existing API",to:ue==null?void 0:ue()}),n.createElement(u.qt,null,"All your APIs")),n.createElement(c.UO,null,n.createElement(c._i,null,n.createElement(c._i.Filters,null,n.createElement(c.tW,{initialFilter:"api",hidden:!0}),n.createElement(c.sL,null),n.createElement(c.EW,{initialFilter:En}),n.createElement(c.dq,null),n.createElement(c.df,null),n.createElement(c.xE,null)),n.createElement(c._i.Content,null,n.createElement(a.Es,{columns:ln||Z,actions:fe}))))))},Me=it=>(0,l.pC)()||n.createElement(F,{...it}),Ee=(0,m.T0)({id:"plugin.api-docs.config"}),Xe=it=>n.createElement(u.Oi,{text:it.definition,language:it.language,showCopyCodeButton:!0}),Bt=()=>{var it;const{entity:St}=(0,c.X2)(),En=(0,m.h_)(Ee),{getApiDefinitionWidget:ln}=En;if(!St)return n.createElement(_.Z,{severity:"error"},"Could not fetch the API");const fe=ln(St),V=(it=St.metadata.title)!=null?it:St.metadata.name;return fe?n.createElement(u.oZ,{title:V},n.createElement(u.hB,{label:fe.title,key:"widget"},fe.component(St.spec.definition)),n.createElement(u.hB,{label:"Raw",key:"raw"},n.createElement(Xe,{definition:St.spec.definition,language:fe.rawLanguage||St.spec.type}))):n.createElement(u.oZ,{title:V,children:[n.createElement(u.hB,{label:St.spec.type,key:"raw"},n.createElement(Xe,{definition:St.spec.definition,language:St.spec.type}))]})},st=n.lazy(()=>Promise.all([e.e(4778),e.e(1978),e.e(7700),e.e(8847),e.e(4971)]).then(e.bind(e,64971)).then(it=>({default:it.AsyncApiDefinition}))),jt=it=>n.createElement(n.Suspense,{fallback:n.createElement(u.Ex,null)},n.createElement(st,{...it})),Zt=n.lazy(()=>e.e(4774).then(e.bind(e,14774)).then(it=>({default:it.GraphQlDefinition}))),J=it=>n.createElement(n.Suspense,{fallback:n.createElement(u.Ex,null)},n.createElement(Zt,{...it})),an=n.lazy(()=>Promise.all([e.e(1978),e.e(9361),e.e(7700),e.e(2788)]).then(e.bind(e,42788)).then(it=>({default:it.OpenApiDefinition}))),Re=it=>n.createElement(n.Suspense,{fallback:n.createElement(u.Ex,null)},n.createElement(an,{...it})),xe=it=>{const St=(0,t.Z)();return n.createElement(u.Oi,{customStyle:{backgroundColor:St.palette.background.default},text:it.definition,language:"protobuf",showCopyCodeButton:!0})},O=it=>{const{definition:St}=it,En=(0,t.Z)();return n.createElement(u.Oi,{customStyle:{backgroundColor:En.palette.background.default},text:St,language:"typescript",showCopyCodeButton:!0})};function Ze(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:it=>n.createElement(Re,{definition:it})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:it=>n.createElement(jt,{definition:it})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:it=>n.createElement(J,{definition:it})},{type:"grpc",title:"gRPC",component:it=>n.createElement(xe,{definition:it})},{type:"trpc",title:"tRPC",component:it=>n.createElement(O,{definition:it})}]}const ce=it=>{const{apiEntity:St}=it,ln=(0,m.h_)(Ee).getApiDefinitionWidget(St),fe=ln?ln.title:St.spec.type;return n.createElement(E.Z,{component:"span"},fe)},R=(0,h.Z)(it=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${it.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:it.palette.text.primary,wordBreak:"break-word",fontSize:it.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:it.spacing(1),color:it.palette.text.primary}}));function N(it){const{children:St,value:En,index:ln,...fe}=it,V=R();return n.createElement("div",{role:"tabpanel",hidden:En!==ln,id:`vertical-tabpanel-${ln}`,"aria-labelledby":`vertical-tab-${ln}`,className:V.tabContents,...fe},En===ln&&n.createElement($.Z,{pl:3,pr:3},St))}function ee(it){return{id:`vertical-tab-${it}`,"aria-controls":`vertical-tabpanel-${it}`}}function Pe(it){var St,En,ln;const{open:fe,entity:V,onClose:X}=it,[ue,ge]=n.useState(0),Se=R();(0,n.useEffect)(()=>{ge(0)},[fe]);const tt=(0,m.h_)(Ee).getApiDefinitionWidget(V);let pt=0,Lt=0;return n.createElement(L.Z,{fullWidth:!0,maxWidth:"xl",open:fe,onClose:X,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:Se.fullHeightDialog}},n.createElement(k.Z,{id:"api-definition-dialog-title",disableTypography:!0},n.createElement(E.Z,{className:Se.type},"API - ",(St=tt==null?void 0:tt.title)!=null?St:"Raw"),n.createElement(E.Z,{className:Se.title,variant:"h1"},(En=V.metadata.title)!=null?En:V.metadata.name)),n.createElement(z.Z,{dividers:!0,className:Se.root},n.createElement(y.Z,{orientation:"vertical",variant:"scrollable",value:ue,onChange:(de,re)=>ge(re),"aria-label":"API definition options",className:Se.tabs},tt?n.createElement(S.Z,{label:tt.title,...ee(pt++)}):null,n.createElement(S.Z,{label:"Raw",...ee(pt++)})),tt?n.createElement(N,{value:ue,index:Lt++},tt.component(V.spec.definition)):null,n.createElement(N,{value:ue,index:Lt++},n.createElement(Xe,{definition:V.spec.definition,language:(ln=tt==null?void 0:tt.rawLanguage)!=null?ln:V.spec.type}))),n.createElement(x.Z,null,n.createElement(f.Z,{onClick:X,color:"primary"},"Close")))}function Ge(){return{title:"Type",field:"spec.type",render:it=>n.createElement(ce,{apiEntity:it})}}const Ct=({apiEntity:it})=>{const[St,En]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement(b.Z,{onClick:()=>En(!St)},n.createElement(C.Z,null)),n.createElement(Pe,{entity:it,open:St,onClose:()=>En(!1)}))};function ht(){return{title:"API Definition",render:it=>n.createElement(Ct,{apiEntity:it})}}const It=[c.u3.columns.createEntityRefColumn({defaultKind:"API"}),c.u3.columns.createSystemColumn(),c.u3.columns.createOwnerColumn(),Ge(),c.u3.columns.createSpecLifecycleColumn(),c.u3.columns.createMetadataDescriptionColumn(),ht()],q=it=>{const{variant:St="gridItem",columns:En=It}=it,{entity:ln}=(0,c.X2)(),{entities:fe,loading:V,error:X}=(0,c.eK)(ln,{type:T.Dg});return V?n.createElement(u.rJ,{variant:St,title:"Consumed APIs"},n.createElement(u.Ex,null)):X||!fe?n.createElement(u.rJ,{variant:St,title:"Consumed APIs"},n.createElement(u.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(u.Oi,{text:`${X}`,language:"text"})})):n.createElement(c.u3,{title:"Consumed APIs",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(E.Z,{variant:"body1"},"This ",ln.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),n.createElement(E.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:En,entities:fe})},oe=[c.u3.columns.createEntityRefColumn({defaultKind:"API"}),c.u3.columns.createOwnerColumn(),Ge(),c.u3.columns.createSpecLifecycleColumn(),c.u3.columns.createMetadataDescriptionColumn()],Ae=it=>{const{variant:St="gridItem",columns:En=oe}=it,{entity:ln}=(0,c.X2)(),{entities:fe,loading:V,error:X}=(0,c.eK)(ln,{type:T.aS,kind:"API"});return V?n.createElement(u.rJ,{variant:St,title:"APIs"},n.createElement(u.Ex,null)):X||!fe?n.createElement(u.rJ,{variant:St,title:"APIs"},n.createElement(u.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(u.Oi,{text:`${X}`,language:"text"})})):n.createElement(c.u3,{title:"APIs",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(E.Z,{variant:"body1"},"This ",ln.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),n.createElement(E.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:En,entities:fe})},Je=it=>{const{variant:St="gridItem",columns:En=It}=it,{entity:ln}=(0,c.X2)(),{entities:fe,loading:V,error:X}=(0,c.eK)(ln,{type:T.M_});return V?n.createElement(u.rJ,{variant:St,title:"Provided APIs"},n.createElement(u.Ex,null)):X||!fe?n.createElement(u.rJ,{variant:St,title:"Provided APIs"},n.createElement(u.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(u.Oi,{text:`${X}`,language:"text"})})):n.createElement(c.u3,{title:"Provided APIs",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(E.Z,{variant:"body1"},"This ",ln.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),n.createElement(E.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:En,entities:fe})},ct=it=>{const{variant:St="gridItem"}=it,{entity:En}=(0,c.X2)(),{entities:ln,loading:fe,error:V}=(0,c.eK)(En,{type:T.X9});return fe?n.createElement(u.rJ,{variant:St,title:"Consumers"},n.createElement(u.Ex,null)):V||!ln?n.createElement(u.rJ,{variant:St,title:"Consumers"},n.createElement(u.GB,{severity:"error",title:"Could not load components",message:n.createElement(u.Oi,{text:`${V}`,language:"text"})})):n.createElement(c.u3,{title:"Consumers",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(E.Z,{variant:"body1"},"No component consumes this API."),n.createElement(E.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:c.u3.componentEntityColumns,entities:ln})},At=it=>{const{variant:St="gridItem"}=it,{entity:En}=(0,c.X2)(),{entities:ln,loading:fe,error:V}=(0,c.eK)(En,{type:T.Zj});return fe?n.createElement(u.rJ,{variant:St,title:"Providers"},n.createElement(u.Ex,null)):V||!ln?n.createElement(u.rJ,{variant:St,title:"Providers"},n.createElement(u.GB,{severity:"error",title:"Could not load components",message:n.createElement(u.Oi,{text:`${V}`,language:"text"})})):n.createElement(c.u3,{title:"Providers",variant:St,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(E.Z,{variant:"body1"},"No component provides this API."),n.createElement(E.Z,{variant:"body2"},n.createElement(u.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:c.u3.componentEntityColumns,entities:ln})},qt=(0,m.rx)({id:"api-docs",routes:{root:P},apis:[(0,m.ni)({api:Ee,deps:{},factory:()=>{const it=Ze();return{getApiDefinitionWidget:St=>it.find(En=>En.type===St.spec.type)}}})],externalRoutes:{registerApi:p}}),zt=qt.provide((0,m.P4)({name:"ApiExplorerPage",component:()=>e.e(4814).then(e.bind(e,24814)).then(it=>it.ApiExplorerIndexPage),mountPoint:P})),Be=qt.provide((0,m.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(9049).then(e.bind(e,19049)).then(it=>it.ApiDefinitionCard)}})),Pt=qt.provide((0,m.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(6578).then(e.bind(e,26578)).then(it=>it.ConsumedApisCard)}})),dt=qt.provide((0,m.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(7187).then(e.bind(e,17187)).then(it=>it.ConsumingComponentsCard)}})),hn=qt.provide((0,m.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(6578).then(e.bind(e,26578)).then(it=>it.ProvidedApisCard)}})),dn=qt.provide((0,m.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(7187).then(e.bind(e,17187)).then(it=>it.ProvidingComponentsCard)}})),bn=qt.provide((0,m.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(6578).then(e.bind(e,26578)).then(it=>it.HasApisCard)}}))},75650:function(Rt,d,e){e.d(d,{j8:function(){return a},x7:function(){return m}});var n=e(5083);const l="catalog-entity",u=(0,n.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:l}),m=(0,n.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),a=(0,n.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:l}),c=(0,n.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:l}),_=(0,n.J$)({name:"catalog.location.read",attributes:{action:"read"}}),b=(0,n.J$)({name:"catalog.location.create",attributes:{action:"create"}}),t=(0,n.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),E=[u,m,a,c,_,b,t]},98487:function(Rt,d,e){e.d(d,{Az:function(){return J},Ho:function(){return st},Nm:function(){return p},_U:function(){return Bt},t0:function(){return an},vw:function(){return P}});var n=e(34520),l=e(80236),u=e(30705),m=e(79692),a=e(60364),c=e(4614),_=e(72779),b=e.n(_),t=e(2784),E=e(10368),h=e(73495),$=e(39412),L=e(48760),k=e(14162),z=e.n(k),y=e(69294);const S=(0,E.Z)(Re=>({text:{fill:Re.palette.textContrast},secondary:{fill:Re.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function x({edge:{relations:Re}}){const xe=S();return t.createElement("text",{className:xe.text,textAnchor:"middle"},Re.map((O,Ze)=>t.createElement("tspan",{key:O,className:b()(Ze>0&&xe.secondary)},Ze>0&&t.createElement("tspan",null," / "),O)))}function f({kind:Re,...xe}){var O;const ce=(O=(0,u.qD)().getSystemIcon(`kind:${Re.toLocaleLowerCase("en-US")}`))!=null?O:$.Z;return t.createElement(ce,{...xe})}const T=(0,m.Z)(Re=>({node:{fill:Re.palette.grey[300],stroke:Re.palette.grey[300],"&.primary":{fill:Re.palette.primary.light,stroke:Re.palette.primary.light},"&.secondary":{fill:Re.palette.secondary.light,stroke:Re.palette.secondary.light}},text:{fill:Re.palette.getContrastText(Re.palette.grey[300]),"&.primary":{fill:Re.palette.primary.contrastText},"&.secondary":{fill:Re.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function C({node:{id:Re,kind:xe,namespace:O,name:Ze,color:ce="default",focused:R,title:N,onClick:ee}}){const Pe=T(),[Ge,Ct]=(0,t.useState)(0),[ht,It]=(0,t.useState)(0),q=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{if(q.current){let{height:zt,width:Be}=q.current.getBBox();zt=Math.round(zt),Be=Math.round(Be),(zt!==ht||Be!==Ge)&&(Ct(Be),It(zt))}},[Ge,ht]);const oe=10,Ae=ht,Je=xe?Ae+oe:0,ct=Je+Ge+oe*2,At=ht+oe*2,qt=N!=null?N:xe&&Ze&&O?(0,h.$3)({kind:xe,name:Ze,namespace:O}):Re;return t.createElement("g",{onClick:ee,className:b()(ee&&Pe.clickable)},t.createElement("rect",{className:b()(Pe.node,ce==="primary"&&"primary",ce==="secondary"&&"secondary"),width:ct,height:At,rx:10}),xe&&t.createElement(f,{kind:xe,y:oe,x:oe,width:Ae,height:Ae,className:b()(Pe.text,R&&"focused",ce==="primary"&&"primary",ce==="secondary"&&"secondary")}),t.createElement("text",{ref:q,className:b()(Pe.text,R&&"focused",ce==="primary"&&"primary",ce==="secondary"&&"secondary"),y:At/2,x:Je+(Ge+oe*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},qt))}const P=[[n.$1,n.S4],[n.Dg,n.X9],[n.Zj,n.M_],[n.aS,n.cz],[n._b,n.wP],[n.KS,n.hr],[n.nP,n.w$]];var p=(Re=>(Re.TOP_BOTTOM="TB",Re.BOTTOM_TOP="BT",Re.LEFT_RIGHT="LR",Re.RIGHT_LEFT="RL",Re))(p||{});const Z=z()(10);function F(){const Re=(0,u.h_)(h.Ah),xe=(0,t.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[O,Ze]=(0,t.useState)({}),ce=(0,t.useCallback)(()=>{const{cachedEntities:Ct,requestedEntities:ht}=xe.current,It={};ht.forEach(q=>{const oe=Ct.get(q);oe&&(It[q]=oe)}),Ze(It)},[xe,Ze]),[R,N]=(0,y.default)(async()=>{const{requestedEntities:Ct,outstandingEntities:ht,cachedEntities:It}=xe.current;await Promise.all(Array.from(Ct).map(q=>Z(async()=>{if(It.has(q))return;if(ht.has(q)){await ht.get(q);return}const oe=Re.getEntityByRef(q);ht.set(q,oe);try{const Ae=await oe;Ae&&(It.set(q,Ae),ce())}finally{ht.delete(q)}})))},[xe,ce]),{loading:ee,error:Pe}=R,Ge=(0,t.useCallback)(Ct=>{const ht=new Set(Ct),{requestedEntities:It}=xe.current;(ht.size!==It.size||Array.from(ht).some(q=>!It.has(q)))&&(xe.current.requestedEntities=ht,N(),ce())},[xe,N,ce]);return{entities:O,loading:ee,error:Pe,requestEntities:Ge}}function Me({rootEntityRefs:Re,filter:{maxDepth:xe=Number.POSITIVE_INFINITY,relations:O,kinds:Ze}={}}){const{entities:ce,loading:R,error:N,requestEntities:ee}=F();return(0,t.useEffect)(()=>{const Pe=new Set([...Re]),Ge=new Set;let Ct=[...Re],ht=0;for(;Ct.length>0&&(!isFinite(xe)||ht<xe);){const It=Ct;for(Ct=[];It.length>0;){const q=It.shift(),oe=ce[q];if(Ge.add(q),oe&&oe.relations)for(const Ae of oe.relations)(!O||O.includes(Ae.type))&&(!Ze||Ze.some(Je=>Ae.targetRef.startsWith(`${Je.toLocaleLowerCase("en-US")}:`)))&&(Ge.has(Ae.targetRef)||(Ct.push(Ae.targetRef),Pe.add(Ae.targetRef)))}++ht}ee([...Pe])},[ce,Re,xe,O,Ze,ee]),{entities:ce,loading:R,error:N}}function Ee({rootEntityRefs:Re,maxDepth:xe=Number.POSITIVE_INFINITY,unidirectional:O=!0,mergeRelations:Ze=!0,kinds:ce,relations:R,onNodeClick:N,relationPairs:ee=P}){const[Pe,Ge]=(0,t.useState)({}),{entities:Ct,loading:ht,error:It}=Me({rootEntityRefs:Re,filter:{maxDepth:xe,kinds:ce,relations:R}});return(0,L.Z)(()=>{var q;if(!Ct||Object.keys(Ct).length===0){Ge({});return}const oe=Object.entries(Ct).map(([At,qt])=>{var zt,Be,Pt;const dt=Re.includes(At),hn={id:At,title:(Be=(zt=qt.metadata)==null?void 0:zt.title)!=null?Be:void 0,kind:qt.kind,name:qt.metadata.name,namespace:(Pt=qt.metadata.namespace)!=null?Pt:n.zG,focused:dt,color:dt?"secondary":"primary"};return N&&(hn.onClick=dn=>N(hn,dn)),hn}),Ae=[],Je=new Set,ct=[...Re];for(;ct.length>0;){const At=ct.pop(),qt=Ct[At];Je.add(At),qt&&((q=qt==null?void 0:qt.relations)==null||q.forEach(zt=>{var Be;if(Ct[zt.targetRef]&&!(R&&!R.includes(zt.type))&&!(ce&&!ce.some(Pt=>zt.targetRef.startsWith(`${Pt.toLocaleLowerCase("en-US")}:`)))){if(!O||!Je.has(zt.targetRef))if(Ze){const Pt=(Be=ee.find(([hn,dn])=>hn===zt.type||dn===zt.type))!=null?Be:[zt.type],[dt]=Pt;Ae.push({from:dt===zt.type?At:zt.targetRef,to:dt===zt.type?zt.targetRef:At,relations:Pt,label:"visible"})}else Ae.push({from:At,to:zt.targetRef,relations:[zt.type],label:"visible"});Je.has(zt.targetRef)||(ct.push(zt.targetRef),Je.add(zt.targetRef))}}))}Ge({nodes:oe,edges:Ae})},100,[Ct,Re,ce,R,O,Ze,N,ee]),{loading:ht,error:It,...Pe}}const Xe=(0,m.Z)(Re=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${Re.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),Bt=Re=>{const{rootEntityNames:xe,maxDepth:O=2,unidirectional:Ze=!0,mergeRelations:ce=!0,kinds:R,relations:N,direction:ee=p.LEFT_RIGHT,onNodeClick:Pe,relationPairs:Ge=P,className:Ct,zoom:ht="enabled",renderNode:It,renderLabel:q,curve:oe}=Re,Ae=(0,a.Z)(),Je=Xe(),ct=(0,t.useMemo)(()=>(Array.isArray(xe)?xe:[xe]).map(dt=>(0,n.eE)(dt)),[xe]),At=(0,u.h_)(u.VE),{loading:qt,error:zt,nodes:Be,edges:Pt}=Ee({rootEntityRefs:ct,maxDepth:O,unidirectional:Ze,mergeRelations:ce,kinds:R,relations:N,onNodeClick:Pe,relationPairs:Ge});return(0,t.useEffect)(()=>{zt&&At.post(zt)},[At,zt]),t.createElement("div",{className:b()(Je.container,Ct)},qt&&t.createElement(c.Z,{className:Je.progress}),Be&&Pt&&t.createElement(l.mn,{nodes:Be,edges:Pt,renderNode:It||C,renderLabel:q||x,direction:ee,className:Je.graph,paddingX:Ae.spacing(4),paddingY:Ae.spacing(4),labelPosition:l.NX.LabelPosition.RIGHT,labelOffset:Ae.spacing(1),zoom:ht,curve:oe}))},st=(0,u.NT)({id:"catalog-graph"}),jt=(0,u.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),Zt=(0,u.rx)({id:"catalog-graph",routes:{catalogGraph:st},externalRoutes:{catalogEntity:jt}}),J=Zt.provide((0,u.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(4463).then(e.bind(e,4463)).then(Re=>Re.CatalogGraphCard)}})),an=Zt.provide((0,u.P4)({name:"CatalogGraphPage",component:()=>e.e(3683).then(e.bind(e,43683)).then(Re=>Re.CatalogGraphPage),mountPoint:st}))},93316:function(Rt,d,e){e.d(d,{gA:function(){return mt},vr:function(){return dt},wS:function(){return Pt}});var n=e(30705),l=e(49462),u=e(73495),m=e(89393),a=e(49431),c=e(82717),_=e.n(c),b=e(80236),t=e(90436),E=e(7089),h=e(77277),$=e(4614),L=e(11776),k=e(38402),z=e(86136),y=e(49378),S=e(9520),x=e(61837),f=e(82113),T=e(60905),C=e(86619),P=e(74828),p=e(94339),Z=e(32552),F=e(24579),Me=e(95544),Ee=e(21324),Xe=e(34546),Bt=e(5806),st=e(31377),jt=e(67471),Zt=e(31625),J=e(2784),an=e(79692),Re=e(4989),xe=e(84905),O=e(38016),Ze=e(39412),ce=e(96795),R=e.n(ce),N=e(63955),ee=e(88013),Pe=e(10921),Ge=e(76635),Ct=e.n(Ge),ht=e(32272),It=e(64279),q=e(34520);const oe=(0,n.T0)({id:"plugin.catalog-import.service"}),Ae=(se,pe)=>{const ye=se.github.byUrl(pe);if(!ye)return;const{name:we,owner:nt}=_()(pe);return{repo:we,owner:nt,githubIntegrationConfig:ye.config}};function Je(se){const{ref:pe,...ye}=se;return{inputRef:pe,...ye}}function ct(se){var pe;return(pe=se.getOptionalString("catalog.import.entityFilename"))!=null?pe:"catalog-info.yaml"}function At(se){var pe;return(pe=se.getOptionalString("catalog.import.pullRequestBranchName"))!=null?pe:"backstage-integration"}class qt{constructor(pe){this.discoveryApi=pe.discoveryApi,this.scmAuthApi=pe.scmAuthApi,this.identityApi=pe.identityApi,this.scmIntegrationsApi=pe.scmIntegrationsApi,this.catalogApi=pe.catalogApi,this.configApi=pe.configApi}async analyzeUrl(pe){var ye;if(new URL(pe).pathname.match(/\.ya?ml$/)||(ye=new URL(pe).searchParams.get("path"))!=null&&ye.match(/.ya?ml$/)){const $t=await this.catalogApi.addLocation({type:"url",target:pe,dryRun:!0});return{type:"locations",locations:[{exists:$t.exists,target:$t.location.target,entities:$t.entities.map(Ut=>{var wt;return{kind:Ut.kind,namespace:(wt=Ut.metadata.namespace)!=null?wt:"default",name:Ut.metadata.name}})}]}}if(!Ae(this.scmIntegrationsApi,pe)){const $t=this.scmIntegrationsApi.byUrl(pe),Ut=ct(this.configApi);throw $t?new Error(`The ${$t.title} integration only supports full URLs to ${Ut} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Ut} file instead.`)}const nt=await this.analyzeLocation({repo:pe});if(nt.existingEntityFiles.length>0){const $t=nt.existingEntityFiles.reduce((Ut,wt)=>{var sn;return Ut[wt.location.target]={target:wt.location.target,exists:wt.isRegistered,entities:[...wt.location.target in Ut?Ut[wt.location.target].entities:[],{name:wt.entity.metadata.name,namespace:(sn=wt.entity.metadata.namespace)!=null?sn:"default",kind:wt.entity.kind}]},Ut},{});return{type:"locations",locations:Object.values($t)}}return{type:"repository",integrationType:"github",url:pe,generatedEntities:nt.generateEntities.map($t=>$t.entity)}}async preparePullRequest(){var pe;const ye=(pe=this.configApi.getOptionalString("app.title"))!=null?pe:"Backstage",we=this.configApi.getString("app.baseUrl");return{title:`Add ${ct(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${ye} software catalog](${we}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(pe){const{repositoryUrl:ye,fileContent:we,title:nt,body:$t}=pe,Ut=Ae(this.scmIntegrationsApi,ye);if(Ut)return await this.submitGitHubPrToRepo({...Ut,repositoryUrl:ye,fileContent:we,title:nt,body:$t});throw new Error("unimplemented!")}async analyzeLocation(pe){const{token:ye}=await this.identityApi.getCredentials(),we=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...ye&&{Authorization:`Bearer ${ye}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:pe.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch($t=>{throw new Error(`Failed to generate entity definitions, ${$t.message}`)});if(!we.ok)throw new Error(`Failed to generate entity definitions. Received http response ${we.status}: ${we.statusText}`);return await we.json()}async submitGitHubPrToRepo(pe){const{owner:ye,repo:we,title:nt,body:$t,fileContent:Ut,repositoryUrl:wt,githubIntegrationConfig:sn}=pe,{token:vn}=await this.scmAuthApi.getCredentials({url:wt,additionalScope:{repoWrite:!0}}),Le=new m.v({auth:vn,baseUrl:sn.apiBaseUrl}),$e=At(this.configApi),be=ct(this.configApi),Qe=await Le.repos.get({owner:ye,repo:we}).catch(Mt=>{throw new Error(zt("Couldn't fetch repo data",Mt))}),lt=await Le.git.getRef({owner:ye,repo:we,ref:`heads/${Qe.data.default_branch}`}).catch(Mt=>{throw new Error(zt("Couldn't fetch default branch data",Mt))});return await Le.git.createRef({owner:ye,repo:we,ref:`refs/heads/${$e}`,sha:lt.data.object.sha}).catch(Mt=>{throw new Error(zt(`Couldn't create a new branch with name '${$e}'`,Mt))}),await Le.repos.createOrUpdateFileContents({owner:ye,repo:we,path:be,message:nt,content:a.DS.encode(Ut),branch:$e}).catch(Mt=>{throw new Error(zt(`Couldn't create a commit with ${be} file added`,Mt))}),{link:(await Le.pulls.create({owner:ye,repo:we,title:nt,head:$e,body:$t,base:Qe.data.default_branch}).catch(Mt=>{throw new Error(zt(`Couldn't create a pull request for ${$e} branch`,Mt))})).data.html_url,location:`https://${sn.host}/${ye}/${we}/blob/${Qe.data.default_branch}/${be}`}}}function zt(se,pe){return`${se}, received http response status code ${pe.status}: ${pe.message}`}const Be=(0,n.NT)({id:"catalog-import"}),Pt=(0,n.rx)({id:"catalog-import",apis:[(0,n.ni)({api:oe,deps:{discoveryApi:n.NW,scmAuthApi:l.Om,identityApi:n.$4,scmIntegrationsApi:l.q3,catalogApi:u.Ah,configApi:n.Ds},factory:({discoveryApi:se,scmAuthApi:pe,identityApi:ye,scmIntegrationsApi:we,catalogApi:nt,configApi:$t})=>new qt({discoveryApi:se,scmAuthApi:pe,scmIntegrationsApi:we,identityApi:ye,catalogApi:nt,configApi:$t})})],routes:{importPage:Be}}),dt=Pt.provide((0,n.P4)({name:"CatalogImportPage",component:()=>e.e(6207).then(e.bind(e,76207)).then(se=>se.ImportPage),mountPoint:Be}));function hn(){const se=(0,n.h_)(n.Ds);return ct(se)}const dn=se=>{const{exampleLocationUrl:pe="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:ye="https://github.com/backstage/backstage"}=se,we=(0,n.h_)(n.Ds),nt=we.getOptional("app.title")||"Backstage",$t=(0,n.h_)(oe),Ut=we.has("integrations.github"),wt=hn();return J.createElement(b.rJ,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/"}},J.createElement(t.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",nt,"."),J.createElement(t.Z,{component:"h4",variant:"h6"},"Link to an existing entity file"),J.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",J.createElement("code",null,pe)),J.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",nt," catalog."),Ut&&J.createElement(J.Fragment,null,J.createElement(t.Z,{component:"h4",variant:"h6"},"Link to a repository"," ",J.createElement(E.Z,{label:"GitHub only",variant:"outlined",size:"small"})),J.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",J.createElement("code",null,ye)),J.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",J.createElement("code",null,wt)," files in the repository, previews the entities, and adds them to the ",nt," ","catalog."),$t.preparePullRequest&&J.createElement(t.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",J.createElement("code",null,wt)," and prepares the ",nt," catalog to load all entities as soon as the Pull Request is merged.")))};function bn(se){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:se,previousStates:[]}}function it(se,pe){switch(pe.type){case"onAnalysis":{if(se.activeState!=="analyze")return se;const{activeState:ye,previousStates:we}=se,[nt,$t,Ut,wt]=pe.args;return{...se,analysisUrl:$t,activeFlow:nt,analyzeResult:Ut,prepareResult:wt==null?void 0:wt.prepareResult,activeState:(wt==null?void 0:wt.prepareResult)===void 0?"prepare":"review",previousStates:we.concat(ye)}}case"onPrepare":{if(se.activeState!=="prepare")return se;const{activeState:ye,previousStates:we}=se,[nt,$t]=pe.args;return{...se,prepareResult:nt,activeState:"review",previousStates:$t!=null&&$t.notRepeatable?[]:we.concat(ye)}}case"onReview":{if(se.activeState!=="review")return se;const{activeState:ye,previousStates:we}=se,[nt]=pe.args;return{...se,reviewResult:nt,activeState:"finish",previousStates:we.concat(ye)}}case"onGoBack":{const{activeState:ye,previousStates:we}=se;return{...se,activeState:we.length>0?we[we.length-1]:ye,previousStates:we.slice(0,we.length-1)}}case"onReset":return{...bn(pe.initialUrl),prepareResult:se.prepareResult};default:throw new Error}}const St=se=>{const[pe,ye]=(0,J.useReducer)(it,se==null?void 0:se.initialUrl,bn),{activeFlow:we,activeState:nt,analysisUrl:$t,previousStates:Ut}=pe;return{activeFlow:we,activeState:nt,activeStepNumber:["analyze","prepare","review","finish"].indexOf(nt),analysisUrl:$t,analyzeResult:pe.analyzeResult,prepareResult:pe.prepareResult,reviewResult:pe.reviewResult,onAnalysis:(wt,sn,vn,Le)=>ye({type:"onAnalysis",args:[wt,sn,vn,Le]}),onPrepare:(wt,sn)=>ye({type:"onPrepare",args:[wt,sn]}),onReview:wt=>ye({type:"onReview",args:[wt]}),onGoBack:Ut.length>0?()=>ye({type:"onGoBack"}):void 0,onReset:()=>ye({type:"onReset",initialUrl:se==null?void 0:se.initialUrl})}},En=(0,an.Z)(se=>({wrapper:{marginTop:se.spacing(1),marginRight:se.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:se.spacing(1),marginRight:se.spacing(1)}})),ln=se=>{const{loading:pe,...ye}=se,we=En();return J.createElement("div",{className:we.wrapper},J.createElement(h.Z,{color:"primary",variant:"contained",...ye,disabled:se.disabled||se.loading}),se.loading&&J.createElement($.Z,{size:"1.5rem",className:we.buttonProgress}),se.loading)},fe=se=>{const pe=En();return J.createElement(h.Z,{variant:"outlined",className:pe.button,...se},se.children||"Back")},V=(0,an.Z)(se=>({nested:{paddingLeft:se.spacing(4)}}));function X(se){return se.sort((pe,ye)=>(0,u.$3)(pe).localeCompare((0,u.$3)(ye)))}const ue=se=>{const{locations:pe,collapsed:ye=!1,locationListItemIcon:we,onItemClick:nt,firstListItem:$t,withLinks:Ut=!1}=se,wt=(0,n.qD)(),sn=V(),[vn,Le]=(0,J.useState)([]),$e=be=>{Le(Qe=>Qe.includes(be)?Qe.filter(lt=>lt!==be):Qe.concat(be))};return J.createElement(L.Z,null,$t,pe.map(be=>J.createElement(J.Fragment,{key:be.target},J.createElement(k.Z,{dense:!0,button:Boolean(nt),onClick:()=>nt==null?void 0:nt(be.target)},J.createElement(z.Z,null,we(be.target)),J.createElement(y.Z,{primary:be.target,secondary:`Entities: ${be.entities.length}`}),ye&&J.createElement(S.Z,null,J.createElement(x.Z,{edge:"end",onClick:()=>$e(be.target)},vn.includes(be.target)?J.createElement(xe.Z,null):J.createElement(O.Z,null)))),J.createElement(f.Z,{in:!ye||vn.includes(be.target),timeout:"auto",unmountOnExit:!0},J.createElement(L.Z,{component:"div",disablePadding:!0,dense:!0},X(be.entities).map(Qe=>{var lt;const kt=(lt=wt.getSystemIcon(`kind:${Qe.kind.toLocaleLowerCase("en-US")}`))!=null?lt:Ze.Z;return J.createElement(k.Z,{key:(0,u.$3)(Qe),className:sn.nested,...Ut?{component:u.dx,entityRef:Qe,button:Ut}:{}},J.createElement(z.Z,null,J.createElement(kt,null)),J.createElement(y.Z,{primary:(0,u.$3)(Qe)}))}))))))},ge=({prepareResult:se,onReset:pe})=>{const ye=J.createElement(T.Z,{container:!0,spacing:0},J.createElement(fe,{onClick:pe},"Register another"));if(se.type==="repository")return J.createElement(J.Fragment,null,J.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",J.createElement(b.rU,{to:se.pullRequest.url,target:"_blank",rel:"noreferrer"},se.pullRequest.url)),J.createElement(t.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),ye);const[we,nt]=R()(se.locations,$t=>$t.exists);return J.createElement(J.Fragment,null,nt.length>0&&J.createElement(J.Fragment,null,J.createElement(t.Z,null,"The following entities have been added to the catalog:"),J.createElement(ue,{locations:nt,locationListItemIcon:()=>J.createElement(Re.Z,null),withLinks:!0})),we.length>0&&J.createElement(J.Fragment,null,J.createElement(t.Z,null,"A refresh was triggered for the following locations:"),J.createElement(ue,{locations:we,locationListItemIcon:()=>J.createElement(Re.Z,null),withLinks:!0})),ye)},Se=se=>{const{onAnalysis:pe,analysisUrl:ye="",disablePullRequest:we=!1,exampleLocationUrl:nt="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=se,$t=(0,n.h_)(n.VE),Ut=(0,n.h_)(oe),{register:wt,handleSubmit:sn,formState:{errors:vn},watch:Le}=(0,N.cI)({mode:"onTouched",defaultValues:{url:ye}}),[$e,be]=(0,J.useState)(!1),[Qe,lt]=(0,J.useState)(void 0),kt=(0,J.useCallback)(async({url:Mt})=>{var nn,gn,An;be(!0);try{const Pn=await Ut.analyzeUrl(Mt);switch(Pn.type){case"repository":!we&&Pn.generatedEntities.length>0?pe("no-location",Mt,Pn):(lt("Couldn't generate entities for your repository"),be(!1));break;case"locations":{Pn.locations.length===1?pe("single-location",Mt,Pn,{prepareResult:Pn}):Pn.locations.length>1?pe("multiple-locations",Mt,Pn):(lt("There are no entities at this location"),be(!1));break}default:{const Bn=`Received unknown analysis result of type ${Pn.type}. Please contact the support team.`;lt(Bn),be(!1),$t.post(new Error(Bn));break}}}catch(Pn){lt((An=(gn=(nn=Pn==null?void 0:Pn.data)==null?void 0:nn.error)==null?void 0:gn.message)!=null?An:Pn.message),be(!1)}},[Ut,we,$t,pe]);return J.createElement("form",{onSubmit:sn(kt)},J.createElement(C.Z,{...Je(wt("url",{required:!0,validate:{httpsValidator:Mt=>typeof Mt=="string"&&Mt.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"Repository URL",placeholder:nt,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:Boolean(vn.url),required:!0}),vn.url&&J.createElement(P.Z,{error:!0},vn.url.message),Qe&&J.createElement(P.Z,{error:!0},Qe),J.createElement(T.Z,{container:!0,spacing:0},J.createElement(ln,{disabled:Boolean(vn.url)||!Le("url"),loading:$e,type:"submit"},"Analyze")))},ot=se=>{const{name:pe,options:ye,required:we,errors:nt,rules:$t,loading:Ut=!1,loadingText:wt,helperText:sn,errorHelperText:vn,textFieldProps:Le={}}=se;return J.createElement(N.Qr,{name:pe,rules:$t,render:({field:{onChange:$e}})=>J.createElement(ee.ZP,{loading:Ut,loadingText:wt,options:ye||[],autoSelect:!0,freeSolo:!0,onChange:(be,Qe)=>$e(Qe),renderInput:be=>J.createElement(C.Z,{...be,helperText:(nt==null?void 0:nt[pe])&&vn||sn,error:Boolean(nt==null?void 0:nt[pe]),margin:"normal",variant:"outlined",required:we,InputProps:{...be.InputProps,endAdornment:J.createElement(J.Fragment,null,Ut?J.createElement($.Z,{color:"inherit",size:"1em"}):null,be.InputProps.endAdornment)},...Le})})})},tt=se=>{const{defaultValues:pe,onSubmit:ye,render:we}=se,nt=(0,N.cI)({mode:"onTouched",defaultValues:pe}),{handleSubmit:$t,watch:Ut,control:wt,register:sn,formState:vn,setValue:Le}=nt;return J.createElement(N.RV,{...nt},J.createElement("form",{onSubmit:$t(ye)},we({values:Ut(),formState:vn,register:sn,control:wt,setValue:Le})))},pt=se=>{const{repositoryUrl:pe,entities:ye,classes:we}=se,nt=hn();return J.createElement(p.Z,{variant:"outlined",className:we==null?void 0:we.card},J.createElement(Z.Z,{title:J.createElement("code",null,`${(0,Ge.trimEnd)(pe,"/")}/${nt}`)}),J.createElement(F.Z,{className:we==null?void 0:we.cardContent},J.createElement(b.Oi,{text:ye.map($t=>Pe.ZP.stringify($t)).join(`---
`).trim(),language:"yaml"})))},Lt=se=>{const{title:pe,description:ye,classes:we}=se;return J.createElement(p.Z,{variant:"outlined",className:we==null?void 0:we.card},J.createElement(Z.Z,{title:pe,subheader:"Create a new Pull Request"}),J.createElement(F.Z,{className:we==null?void 0:we.cardContent},J.createElement(b.SA,{content:ye})))},de=(0,an.Z)(se=>({previewCard:{marginTop:se.spacing(1)},previewCardContent:{paddingTop:0}}));function re(se,pe,ye){return se.map(we=>({...we,apiVersion:we.apiVersion,kind:we.kind,metadata:{...we.metadata,name:pe},spec:{...we.spec,...ye?{owner:ye}:{}}}))}const A=se=>{var pe,ye,we,nt,$t,Ut;const{analyzeResult:wt,onPrepare:sn,onGoBack:vn,renderFormFields:Le}=se,$e=de(),be=(0,n.h_)(u.Ah),Qe=(0,n.h_)(oe),lt=(0,n.h_)(n.VE),[kt,Mt]=(0,J.useState)(!1),[nn,gn]=(0,J.useState)(),An=hn(),{loading:Pn,value:Bn,error:Un}=(0,It.default)(()=>Qe.preparePullRequest(),[Qe.preparePullRequest]);(0,J.useEffect)(()=>{Un&&lt.post(Un)},[Un,lt]);const{loading:zn,value:Nn}=(0,It.default)(async()=>(await be.getEntities({filter:{kind:"group"}})).items.map(Ne=>(0,u.$3)(Ne,{defaultKind:"group"})).sort()),Ve=(0,J.useCallback)(async _e=>{Mt(!0);try{const Ne=await Qe.submitPullRequest({repositoryUrl:wt.url,title:_e.title,body:_e.body,fileContent:re(wt.generatedEntities,_e.componentName,_e.owner).map(Te=>Pe.ZP.stringify(Te)).join(`---
`)});sn({type:"repository",url:wt.url,integrationType:wt.integrationType,pullRequest:{url:Ne.link},locations:[{target:Ne.location,entities:re(wt.generatedEntities,_e.componentName,_e.owner).map(Te=>({kind:Te.kind,namespace:Te.metadata.namespace,name:Te.metadata.name}))}]},{notRepeatable:!0})}catch(Ne){(0,ht.BD)(Ne),gn(Ne.message),Mt(!1)}},[wt.generatedEntities,wt.integrationType,wt.url,Qe,sn]);return J.createElement(J.Fragment,null,J.createElement(t.Z,null,"You entered a link to a ",wt.integrationType," repository but a"," ",J.createElement("code",null,An)," could not be found. Use this form to open a Pull Request that creates one."),!Pn&&J.createElement(tt,{onSubmit:Ve,defaultValues:{title:(pe=Bn==null?void 0:Bn.title)!=null?pe:"",body:(ye=Bn==null?void 0:Bn.body)!=null?ye:"",owner:((nt=(we=wt.generatedEntities[0])==null?void 0:we.spec)==null?void 0:nt.owner)||"",componentName:((Ut=($t=wt.generatedEntities[0])==null?void 0:$t.metadata)==null?void 0:Ut.name)||"",useCodeowners:!1},render:({values:_e,formState:Ne,register:Te,setValue:ut})=>J.createElement(J.Fragment,null,Le({values:_e,formState:Ne,register:Te,setValue:ut,groups:Nn!=null?Nn:[],groupsLoading:zn}),J.createElement(Me.Z,{marginTop:2},J.createElement(t.Z,{variant:"h6"},"Preview Pull Request")),J.createElement(Lt,{title:_e.title,description:_e.body,classes:{card:$e.previewCard,cardContent:$e.previewCardContent}}),J.createElement(Me.Z,{marginTop:2,marginBottom:1},J.createElement(t.Z,{variant:"h6"},"Preview Entities")),J.createElement(pt,{entities:re(wt.generatedEntities,_e.componentName,_e.owner),repositoryUrl:wt.url,classes:{card:$e.previewCard,cardContent:$e.previewCardContent}}),nn&&J.createElement(P.Z,{error:!0},nn),J.createElement(T.Z,{container:!0,spacing:0},vn&&J.createElement(fe,{onClick:vn,disabled:kt}),J.createElement(ln,{type:"submit",disabled:Boolean(Ne.errors.title||Ne.errors.body||Ne.errors.owner),loading:kt},"Create PR")))}))},j=({analyzeResult:se,prepareResult:pe,onPrepare:ye,onGoBack:we})=>{const[nt,$t]=(0,J.useState)((pe==null?void 0:pe.locations.map($e=>$e.target))||[]),[Ut,wt]=R()(se==null?void 0:se.locations,$e=>$e.exists),sn=(0,J.useCallback)(async()=>{ye({type:"locations",locations:wt.filter($e=>nt.includes($e.target))})},[wt,ye,nt]),vn=$e=>{$t(be=>be.includes($e)?be.filter(Qe=>Qe!==$e):be.concat($e))},Le=()=>{$t($e=>$e.length<wt.length?wt.map(be=>be.target):[])};return J.createElement(J.Fragment,null,wt.length>0&&J.createElement(J.Fragment,null,J.createElement(t.Z,null,"Select one or more locations that are present in your git repository:"),J.createElement(ue,{firstListItem:J.createElement(k.Z,{dense:!0,button:!0,onClick:Le},J.createElement(z.Z,null,J.createElement(Ee.Z,{edge:"start",checked:nt.length===wt.length,indeterminate:nt.length>0&&nt.length<wt.length,tabIndex:-1,disableRipple:!0})),J.createElement(y.Z,{primary:"Select All"})),onItemClick:vn,locations:wt,locationListItemIcon:$e=>J.createElement(Ee.Z,{edge:"start",checked:nt.includes($e),tabIndex:-1,disableRipple:!0}),collapsed:!0})),Ut.length>0&&J.createElement(J.Fragment,null,J.createElement(t.Z,null,"These locations already exist in the catalog:"),J.createElement(ue,{locations:Ut,locationListItemIcon:()=>J.createElement(Re.Z,null),withLinks:!0,collapsed:!0})),J.createElement(T.Z,{container:!0,spacing:0},we&&J.createElement(fe,{onClick:we}),J.createElement(ln,{disabled:nt.length===0,onClick:sn},"Review")))},Q=({prepareResult:se,onReview:pe,onGoBack:ye})=>{const we=(0,n.h_)(u.Ah),$t=(0,n.h_)(n.Ds).getOptional("app.title")||"Backstage",[Ut,wt]=(0,J.useState)(!1),[sn,vn]=(0,J.useState)(),Le=!!(se.type==="locations"&&se.locations.some(be=>be.exists)),$e=(0,J.useCallback)(async()=>{wt(!0);try{let be=new Array;se.type==="locations"&&(be=await Promise.all(se.locations.filter(lt=>lt.exists).map(async lt=>{var kt;const Mt=(0,q.eE)((kt=lt.entities[0])!=null?kt:lt);return await we.refreshEntity(Mt),{target:lt.target}})));const Qe=await Promise.all(se.locations.filter(lt=>!lt.exists).map(async lt=>{const kt=await we.addLocation({type:"url",target:lt.target});return{target:kt.location.target,entities:kt.entities}}));pe({...se,refreshed:be,locations:Qe})}catch(be){(0,ht.BD)(be),se.type==="repository"&&be.message.startsWith("Location was added but has no entities specified yet")?pe({...se,locations:se.locations.map(Qe=>({target:Qe.target,entities:[]}))}):(vn(be.message),wt(!1))}},[se,pe,we]);return J.createElement(J.Fragment,null,se.type==="repository"&&J.createElement(J.Fragment,null,J.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",J.createElement(b.rU,{to:se.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},se.pullRequest.url)),J.createElement(t.Z,{paragraph:!0},"You can already import the location and ",$t," will fetch the entities as soon as the Pull Request is merged.")),J.createElement(t.Z,null,Le?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),J.createElement(ue,{locations:se.locations,locationListItemIcon:()=>J.createElement(Re.Z,null)}),sn&&J.createElement(P.Z,{error:!0},sn),J.createElement(T.Z,{container:!0,spacing:0},ye&&J.createElement(fe,{onClick:ye,disabled:Ut}),J.createElement(ln,{disabled:Ut,loading:Ut,onClick:()=>$e()},Le?"Refresh":"Import")))};function me(se,pe){switch(se){case"single-location":return{...pe,prepare:()=>({stepLabel:J.createElement(Xe.Z,{optional:J.createElement(t.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:J.createElement(J.Fragment,null)})};case"multiple-locations":return{...pe,prepare:(ye,we)=>ye.analyzeResult.type!=="locations"?pe.prepare(ye,we):{stepLabel:J.createElement(Xe.Z,{optional:J.createElement(t.Z,{variant:"caption"},"Discovered Locations: ",ye.analyzeResult.locations.length)},"Select Locations"),content:J.createElement(j,{analyzeResult:ye.analyzeResult,prepareResult:ye.prepareResult,onPrepare:ye.onPrepare,onGoBack:ye.onGoBack})}};case"no-location":return{...pe,prepare:(ye,we)=>ye.analyzeResult.type!=="repository"?pe.prepare(ye,we):{stepLabel:J.createElement(Xe.Z,null,"Create Pull Request"),content:J.createElement(A,{analyzeResult:ye.analyzeResult,onPrepare:ye.onPrepare,onGoBack:ye.onGoBack,renderFormFields:({values:nt,setValue:$t,formState:Ut,groupsLoading:wt,groups:sn,register:vn})=>J.createElement(J.Fragment,null,J.createElement(Me.Z,{marginTop:2},J.createElement(t.Z,{variant:"h6"},"Pull Request Details")),J.createElement(C.Z,{...Je(vn("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ut.errors.title),required:!0}),J.createElement(C.Z,{...Je(vn("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ut.errors.body),multiline:!0,required:!0}),J.createElement(Me.Z,{marginTop:2},J.createElement(t.Z,{variant:"h6"},"Entity Configuration")),J.createElement(C.Z,{...Je(vn("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ut.errors.componentName),required:!0}),!nt.useCodeowners&&J.createElement(ot,{name:"owner",errors:Ut.errors,options:sn||[],loading:wt,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),J.createElement(Bt.Z,{control:J.createElement(Ee.Z,{...Je(vn("useCodeowners")),onChange:(Le,$e)=>{$e&&$t("owner","")}}),label:J.createElement(J.Fragment,null,"Use ",J.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),J.createElement(P.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return pe}}const We={analyze:(se,{apis:pe})=>({stepLabel:J.createElement(Xe.Z,null,"Select URL"),content:J.createElement(Se,{key:"analyze",analysisUrl:se.analysisUrl,onAnalysis:se.onAnalysis,disablePullRequest:!pe.catalogImportApi.preparePullRequest})}),prepare:se=>({stepLabel:J.createElement(Xe.Z,{optional:J.createElement(t.Z,{variant:"caption"},"Optional")},"Import Actions"),content:J.createElement(fe,{onClick:se.onGoBack})}),review:se=>({stepLabel:J.createElement(Xe.Z,null,"Review"),content:J.createElement(Q,{prepareResult:se.prepareResult,onReview:se.onReview,onGoBack:se.onGoBack})}),finish:se=>({stepLabel:J.createElement(Xe.Z,null,"Finish"),content:J.createElement(ge,{prepareResult:se.prepareResult,onReset:se.onReset})})},Ke=(0,an.Z)(()=>({stepperRoot:{padding:0}})),He=se=>{const{initialUrl:pe,generateStepper:ye=me,variant:we}=se,nt=(0,n.h_)(oe),$t=Ke(),Ut=St({initialUrl:pe}),wt=(0,J.useMemo)(()=>ye(Ut.activeFlow,We),[ye,Ut.activeFlow]),sn=vn=>J.createElement(st.Z,null,vn.stepLabel,J.createElement(jt.Z,null,vn.content));return J.createElement(b.rJ,{variant:we},J.createElement(Zt.Z,{classes:{root:$t.stepperRoot},activeStep:Ut.activeStepNumber,orientation:"vertical"},sn(wt.analyze(Ut,{apis:{catalogImportApi:nt}})),sn(wt.prepare(Ut,{apis:{catalogImportApi:nt}})),sn(wt.review(Ut,{apis:{catalogImportApi:nt}})),sn(wt.finish(Ut,{apis:{catalogImportApi:nt}}))))},mt=()=>{const pe=(0,n.h_)(n.Ds).getOptional("app.title")||"Backstage";return J.createElement(b.T3,{themeId:"home"},J.createElement(b.h4,{title:"Register an existing component"}),J.createElement(b.VY,null,J.createElement(b.yW,{title:`Start tracking your component in ${pe}`},J.createElement(b.qt,null,"Start tracking your component in ",pe," by adding it to the software catalog.")),J.createElement(T.Z,{container:!0,spacing:2,direction:"row-reverse"},J.createElement(T.Z,{item:!0,xs:12,md:4,lg:6,xl:8},J.createElement(dn,null)),J.createElement(T.Z,{item:!0,xs:12,md:8,lg:6,xl:4},J.createElement(He,null)))))}},52963:function(Rt,d,e){e.d(d,{N:function(){return b}});var n=e(34520),l=e(78373),u=e(56563),m=e(30705),a=e(18473),c=e(2784);function _(t,E){const h=new Set([...getEntityRelations(t,RELATION_MEMBER_OF,{kind:"group"}),...t?[getCompoundEntityRef(t)]:[]].map(stringifyEntityRef)),$=getEntityRelations(E,RELATION_OWNED_BY).map(stringifyEntityRef);for(const L of $)if(h.has(L))return!0;return!1}function b(t){const{entity:E,loading:h,error:$}=(0,l.a)(),{allowed:L,loading:k,error:z}=(0,u.gI)({permission:t,resourceRef:E?(0,n.eE)(E):void 0});return h||k?{loading:!0,allowed:!1}:$?{loading:!1,allowed:!1,error:$}:{loading:!1,allowed:L,error:z}}},78373:function(Rt,d,e){e.d(d,{A:function(){return _},a:function(){return E},g:function(){return a},u:function(){return t}});var n=e(34520),l=e(30705),u=e(18473),m=e(2784);function a(h,$,L){var k;let z=((k=h==null?void 0:h.relations)==null?void 0:k.filter(y=>y.type===$).map(y=>(0,n.of)(y.targetRef)))||[];return L!=null&&L.kind&&(z=z.filter(y=>y.kind.toLocaleLowerCase("en-US")===L.kind.toLocaleLowerCase("en-US"))),z}const c=(0,u.CT)("entity-context"),_=h=>{const{children:$,entity:L,loading:k,error:z,refresh:y}=h,S={entity:L,loading:k,error:z,refresh:y};return m.createElement(c.Provider,{value:(0,u.EI)({1:S})},m.createElement(l.fC,{attributes:{...L?{entityRef:(0,n.eE)(L)}:void 0}},$))},b=h=>React.createElement(_,{entity:h.entity,loading:!Boolean(h.entity),error:void 0,refresh:void 0,children:h.children});function t(){const h=(0,u.Vt)("entity-context");if(!h)throw new Error("Entity context is not available");const $=h.atVersion(1);if(!$)throw new Error("EntityContext v1 not available");if(!$.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:$.entity}}function E(){const h=(0,u.Vt)("entity-context");if(!h)throw new Error("Entity context is not available");const $=h.atVersion(1);if(!$)throw new Error("EntityContext v1 not available");const{entity:L,loading:k,error:z,refresh:y}=$;return{entity:L,loading:k,error:z,refresh:y}}},73495:function(Rt,d,e){e.d(d,{$3:function(){return at},Ah:function(){return Q},CR:function(){return Pn},CV:function(){return ye},EW:function(){return vr},LH:function(){return nr},UO:function(){return lt},U_:function(){return on},Uh:function(){return Mt},X2:function(){return Ge.u},ZW:function(){return zn},_i:function(){return mt},ce:function(){return Ge.a},df:function(){return Et},dq:function(){return Qn},dx:function(){return jn},eK:function(){return gn},h$:function(){return Ge.A},hF:function(){return Ge.g},hd:function(){return Zn},n3:function(){return n.n3},nN:function(){return je},nl:function(){return kr},p3:function(){return me},ph:function(){return Gr},pp:function(){return ar},rI:function(){return D},sL:function(){return dr},tW:function(){return Ne},u3:function(){return Rn},wi:function(){return er},wp:function(){return kt},xE:function(){return gr}});var n=e(88285),l=e(30705),u=e(82394),m=e.n(u),a=e(2784),c=e(41156),_=e(60364),b=e(77277),t=e(4190),E=e(95544),h=e(90436),$=e(60905),L=e(79692),k=e(5806),z=e(21324),y=e(86619),S=e(80030),x=e(15223),f=e(42494),T=e(29611),C=e(50581),P=e(61837),p=e(15459),Z=e(55999),F=e(49378),Me=e(54506),Ee=e(94339),Xe=e(24579),Bt=e(38402),st=e(86136),jt=e(11776),Zt=e(8629),J=e(79249),an=e(38724),Re=e(99152),xe=e(6487),O=e(49429),Ze=e(85256),ce=e(12231),R=e(9520),N=e(36444),ee=e(80236),Pe=e(34520),Ge=e(78373),Ct=e(76635),ht=e.n(Ct),It=e(19126),q=e.n(It),oe=e(73557),Ae=e(69294),Je=e(48760),ct=e(90736),At=e(64279),qt=e(18149),zt=e.n(qt),Be=e(829),Pt=e.n(Be),dt=e(72164),hn=e(19996),dn=e(25505),bn=e(38016),it=e(88013),St=e(99688),En=e(72579),ln=e.n(En),fe=e(18473),V=e(33375),X=e(21853),ue=e(72779),ge=e.n(ue),Se=e(11640),ot=e(28347),tt=e(39412),pt=e(27685),Lt=e(3440),de=e.n(Lt),re=e(10921),A=e(32272),j=e(47603);const Q=(0,l.T0)({id:"plugin.catalog.service"}),me=(0,l.T0)({id:"catalog-react.starred-entities"});class We{constructor(){this.starredEntities=new Set,this.subscribers=new Set,this.observable=new ObservableImpl(le=>(le.next(new Set(this.starredEntities)),this.subscribers.add(le),()=>{this.subscribers.delete(le)}))}async toggleStarred(le){this.starredEntities.delete(le)||this.starredEntities.add(le);for(const De of this.subscribers)De.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const Ke=Y=>{const le=(0,c.Z)(_t=>_t.breakpoints.down("md")),De=(0,_.Z)(),[Oe,et]=(0,a.useState)(!1);return le?a.createElement(a.Fragment,null,a.createElement(b.Z,{style:{marginTop:De.spacing(1),marginLeft:De.spacing(1)},onClick:()=>et(!0),startIcon:a.createElement(N.Z,null)},"Filters"),a.createElement(t.ZP,{open:Oe,onClose:()=>et(!1),anchor:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},a.createElement(E.Z,{m:2},a.createElement(h.Z,{variant:"h6",component:"h2",style:{marginBottom:De.spacing(1)}},"Filters"),Y.children))):a.createElement($.Z,{item:!0,lg:2},Y.children)},He=Y=>a.createElement($.Z,{item:!0,xs:12,lg:10},Y.children),mt=Y=>a.createElement($.Z,{container:!0,style:{position:"relative"}},Y.children);mt.Filters=Ke,mt.Content=He;function se(Y){return Y.reduce((le,De)=>({...le,...De.getCatalogFilters?De.getCatalogFilters():{}}),{})}function pe(Y){return le=>Y.every(De=>!De.filterEntity||De.filterEntity(le))}function ye(Y,le){var De;const Oe=(De=Y.metadata.annotations)==null?void 0:De[Pe.M6];if(Oe)try{const et=(0,Pe.Ou)(Oe),_t=le.byUrl(et.target);return{locationTargetUrl:et.target,integrationType:_t==null?void 0:_t.type}}catch{return}}class we{constructor(le){this.value=le}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class nt{constructor(le){this.value=le}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class $t{constructor(le){this.values=le}filterEntity(le){return this.values.every(De=>{var Oe;return((Oe=le.metadata.tags)!=null?Oe:[]).includes(De)})}toQueryValue(){return this.values}}class Ut{constructor(le){this.value=le}filterEntity(le){const De=this.toUpperArray(this.value.split(/\s/)),Oe=this.toUpperArray([le.metadata.tags]),et=this.toUpperArray([le.metadata.name,le.metadata.title]);for(const _t of De)if(Oe.every(bt=>bt!==_t)&&et.every(bt=>!bt.includes(_t)))return!1;return!0}toUpperArray(le){return le.flat().filter(De=>Boolean(De)).map(De=>De.toLocaleUpperCase("en-US"))}}class wt{constructor(le){this.values=le.reduce((De,Oe)=>{try{return De.push((0,Pe.eE)((0,Pe.of)(Oe,{defaultKind:"Group"}))),De}catch{return De}},[])}filterEntity(le){return this.values.some(De=>(0,Ge.g)(le,Pe.S4).some(Oe=>(0,Pe.eE)(Oe)===De))}toQueryValue(){return this.values}}class sn{constructor(le){this.values=le}filterEntity(le){return this.values.some(De=>{var Oe;return((Oe=le.spec)==null?void 0:Oe.lifecycle)===De})}toQueryValue(){return this.values}}class vn{constructor(le){this.values=le}filterEntity(le){return this.values.some(De=>le.metadata.namespace===De)}toQueryValue(){return this.values}}class Le{constructor(le,De,Oe){this.value=le,this.isOwnedEntity=De,this.isStarredEntity=Oe}filterEntity(le){switch(this.value){case"owned":return this.isOwnedEntity(le);case"starred":return this.isStarredEntity(le);default:return!0}}toQueryValue(){return this.value}}class $e{constructor(le){this.value=le}filterEntity(le){var De;const Oe=(De=le.metadata.annotations)==null?void 0:De["backstage.io/orphan"];return Oe!==void 0&&this.value.toString()===Oe}}class be{constructor(le){this.value=le}filterEntity(le){var De,Oe;const et=((Oe=(De=le==null?void 0:le.status)==null?void 0:De.items)==null?void 0:Oe.length)>0;return et!==void 0&&this.value===et}}const Qe=(0,a.createContext)(void 0),lt=Y=>{const le=(0,ct.default)(),De=(0,l.h_)(Q),[Oe,et]=(0,a.useState)({}),_t=(0,oe.TH)(),bt=(0,a.useMemo)(()=>{var _n;return(_n=q().parse(_t.search,{ignoreQueryPrefix:!0}).filters)!=null?_n:{}},[_t]),[vt,rn]=(0,a.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:Xt,error:Jt},Ht]=(0,Ae.default)(async()=>{var _n;const Yt=(0,Ct.compact)(Object.values(Oe)),Dn=pe(Yt),Kn=se(Yt),fr=se((0,Ct.compact)(Object.values(vt.appliedFilters))),or=Object.keys(Oe).reduce((sr,br)=>{const Sr=Oe[br];return Sr!=null&&Sr.toQueryValue&&(sr[br]=Sr.toQueryValue()),sr},{});if((0,Ct.isEqual)(fr,Kn))rn({appliedFilters:Oe,backendEntities:vt.backendEntities,entities:vt.backendEntities.filter(Dn)});else{const sr=await De.getEntities({filter:Kn});rn({appliedFilters:Oe,backendEntities:sr.items,entities:sr.items.filter(Dn)})}if(le()){const sr=q().parse(_t.search,{ignoreQueryPrefix:!0}),br=q().stringify({...sr,filters:or},{addQueryPrefix:!0,arrayFormat:"repeat"}),Sr=`${window.location.pathname}${br}`;(_n=window.history)==null||_n.replaceState(null,document.title,Sr)}},[De,bt,Oe,vt],{loading:!0});(0,Je.Z)(Ht,10,[Oe]);const Ln=(0,a.useCallback)(_n=>{et(Yt=>{const Dn=typeof _n=="function"?_n(Yt):_n;return{...Yt,...Dn}})},[]),$n=(0,a.useMemo)(()=>({filters:vt.appliedFilters,entities:vt.entities,backendEntities:vt.backendEntities,updateFilters:Ln,queryParameters:bt,loading:Xt,error:Jt}),[vt,Ln,bt,Xt,Jt]);return a.createElement(Qe.Provider,{value:$n},Y.children)};function kt(){const Y=(0,a.useContext)(Qe);if(!Y)throw new Error("useEntityList must be used within EntityListProvider");return Y}function Mt(){var Y;const le=(0,l.h_)(Q),{filters:{kind:De,type:Oe},queryParameters:{type:et},updateFilters:_t}=kt(),bt=(0,a.useMemo)(()=>[et].flat().filter(Boolean),[et]),[vt,rn]=(0,a.useState)(bt.length?bt:(Y=Oe==null?void 0:Oe.getTypes())!=null?Y:[]);(0,a.useEffect)(()=>{bt.length&&rn(bt)},[bt]);const[Xt,Jt]=(0,a.useState)([]),Ht=(0,a.useMemo)(()=>De==null?void 0:De.value,[De]),{error:Ln,loading:$n,value:_n}=(0,At.default)(async()=>Ht?await le.getEntityFacets({filter:{kind:Ht},facets:["spec.type"]}).then(Kn=>Kn.facets["spec.type"]||[]):[],[Ht,le]),Yt=(0,a.useRef)(_n);return(0,a.useEffect)(()=>{const Dn=Yt.current;if(Yt.current=_n,$n||!Ht||Dn===_n||!_n)return;const Kn=[...new Set(Pt()(_n,or=>-or.count).map(or=>or.value.toLocaleLowerCase("en-US")))];Jt(Kn);const fr=vt.filter(or=>Kn.includes(or));zt()(vt,fr)||rn(fr)},[$n,Ht,vt,rn,_n]),(0,a.useEffect)(()=>{_t({type:vt.length?new nt(vt):void 0})},[vt,_t]),{loading:$n,error:Ln,availableTypes:Xt,selectedTypes:vt,setSelectedTypes:rn}}const nn=20;function gn(Y,le){var De,Oe;const et=(De=le==null?void 0:le.type)==null?void 0:De.toLocaleLowerCase("en-US"),_t=(Oe=le==null?void 0:le.kind)==null?void 0:Oe.toLocaleLowerCase("en-US"),bt=(0,l.h_)(Q),{loading:vt,value:rn,error:Xt}=(0,At.default)(async()=>{var Jt;const Ht=(Jt=Y.relations)==null?void 0:Jt.map(Yt=>({type:Yt.type,target:(0,Pe.of)(Yt.targetRef)})).filter(Yt=>(!et||Yt.type.toLocaleLowerCase("en-US")===et)&&(!_t||Yt.target.kind===_t));if(!Ht)return[];const Ln=Object.values((0,Ct.groupBy)(Ht,({target:Yt})=>`${Yt.kind}:${Yt.namespace}`.toLocaleLowerCase("en-US"))),$n=[];for(const Yt of Ln)$n.push({kind:Yt[0].target.kind,namespace:Yt[0].target.namespace,nameBatches:(0,Ct.chunk)(Yt.map(Dn=>Dn.target.name),nn)});return(await Promise.all($n.flatMap(Yt=>Yt.nameBatches.map(Dn=>bt.getEntities({filter:{kind:Yt.kind,"metadata.namespace":Yt.namespace,"metadata.name":Dn}}))))).flatMap(Yt=>Yt.items)},[Y,et,_t]);return{entities:rn,loading:vt,error:Xt}}function An(Y){return typeof Y=="string"?Y:(0,Pe.eE)(Y)}function Pn(){const Y=(0,l.h_)(me),le=(0,dt.Z)(Y.starredEntitie$(),new Set),De=(0,a.useCallback)(et=>le.has(An(et)),[le]),Oe=(0,a.useCallback)(et=>Y.toggleStarred(An(et)).then(),[Y]);return{starredEntities:le,toggleStarredEntity:Oe,isStarredEntity:De}}function Bn(Y){return typeof Y=="string"?Y:(0,Pe.eE)(Y)}function Un(Y){const le=(0,l.h_)(me),[De,Oe]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const _t=le.starredEntitie$().subscribe({next(bt){Oe(bt.has(Bn(Y)))}});return()=>{_t.unsubscribe()}},[Y,le]),{toggleStarredEntity:(0,a.useCallback)(()=>le.toggleStarred(Bn(Y)).then(),[Y,le]),isStarredEntity:De}}function zn(){const Y=(0,l.h_)(l.$4),{loading:le,value:De}=(0,At.default)(async()=>{const{ownershipEntityRefs:et}=await Y.getBackstageIdentity();return et},[]),Oe=(0,a.useMemo)(()=>{const et=new Set(De!=null?De:[]);return _t=>{const bt=(0,Ge.g)(_t,Pe.S4).map(Pe.eE);for(const vt of bt)if(et.has(vt))return!0;return!1}},[De]);return(0,a.useMemo)(()=>({loading:le,isOwnedEntity:Oe}),[le,Oe])}function Nn(){const Y=(0,l.h_)(Q),{error:le,loading:De,value:Oe}=(0,At.default)(async()=>await Y.getEntityFacets({facets:["kind"]}).then(_t=>{var bt;return((bt=_t.facets.kind)==null?void 0:bt.map(vt=>vt.value).sort())||[]}),[Y]);return{loading:De,error:le,allKinds:Oe!=null?Oe:[]}}function Ve(Y,le,De){let Oe=Y;return le&&(Oe=Oe.filter(_t=>le.some(bt=>bt.toLocaleLowerCase("en-US")===_t.toLocaleLowerCase("en-US")))),De&&!Y.some(_t=>_t.toLocaleLowerCase("en-US")===De.toLocaleLowerCase("en-US"))&&(Oe=Oe.concat([De])),Oe.sort().reduce((_t,bt)=>(_t[bt.toLocaleLowerCase("en-US")]=bt,_t),{})}function _e(Y){var le,De;const{filters:Oe,queryParameters:{kind:et},updateFilters:_t}=kt(),bt=(0,a.useMemo)(()=>[et].flat()[0],[et]),[vt,rn]=(0,a.useState)((De=bt!=null?bt:(le=Oe.kind)==null?void 0:le.value)!=null?De:Y.initialFilter);(0,a.useEffect)(()=>{bt&&rn(bt)},[bt]),(0,a.useEffect)(()=>{var Ln,$n;(Ln=Oe.kind)!=null&&Ln.value&&rn(($n=Oe.kind)==null?void 0:$n.value)},[Oe.kind]),(0,a.useEffect)(()=>{_t({kind:vt?new we(vt):void 0})},[vt,_t]);const{allKinds:Xt,loading:Jt,error:Ht}=Nn();return{loading:Jt,error:Ht,allKinds:Xt!=null?Xt:[],selectedKind:vt,setSelectedKind:rn}}const Ne=Y=>{const{allowedKinds:le,hidden:De,initialFilter:Oe="component"}=Y,et=(0,l.h_)(l.$v),{error:_t,allKinds:bt,selectedKind:vt,setSelectedKind:rn}=_e({initialFilter:Oe});if((0,a.useEffect)(()=>{_t&&et.post({message:"Failed to load entity kinds",severity:"error"})},[_t,et]),_t)return null;const Xt=Ve(bt,le,vt),Jt=Object.keys(Xt).map(Ht=>({value:Ht,label:Xt[Ht]}));return De?null:a.createElement(E.Z,{pb:1,pt:1},a.createElement(ee.Ph,{label:"Kind",items:Jt,selected:vt.toLocaleLowerCase("en-US"),onChange:Ht=>rn(String(Ht))}))},Te=(0,L.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),ut=a.createElement(dn.Z,{fontSize:"small"}),gt=a.createElement(hn.Z,{fontSize:"small"}),Et=Y=>{var le,De;const{initialFilter:Oe=[]}=Y,et=Te(),{updateFilters:_t,backendEntities:bt,filters:vt,queryParameters:{lifecycles:rn}}=kt(),Xt=(0,a.useMemo)(()=>[rn].flat().filter(Boolean),[rn]),[Jt,Ht]=(0,a.useState)(Xt.length?Xt:(De=(le=vt.lifecycles)==null?void 0:le.values)!=null?De:Oe);(0,a.useEffect)(()=>{Xt.length&&Ht(Xt)},[Xt]);const Ln=(0,a.useMemo)(()=>[...new Set(bt.map($n=>{var _n;return(_n=$n.spec)==null?void 0:_n.lifecycle}).filter(Boolean))].sort(),[bt]);return(0,a.useEffect)(()=>{_t({lifecycles:Jt.length&&Ln.length?new sn(Jt):void 0})},[Jt,_t,Ln]),Ln.length?a.createElement(E.Z,{pb:1,pt:1},a.createElement(h.Z,{variant:"button",component:"label"},"Lifecycle",a.createElement(it.ZP,{multiple:!0,disableCloseOnSelect:!0,options:Ln,value:Jt,onChange:($n,_n)=>Ht(_n),renderOption:($n,{selected:_n})=>a.createElement(k.Z,{control:a.createElement(z.Z,{icon:ut,checkedIcon:gt,checked:_n}),onClick:Yt=>Yt.preventDefault(),label:$n}),size:"small",popupIcon:a.createElement(bn.Z,{"data-testid":"lifecycle-picker-expand"}),renderInput:$n=>a.createElement(y.Z,{...$n,className:et.input,variant:"outlined"})}))):null};function at(Y,le){const De=le==null?void 0:le.defaultKind;let Oe,et,_t;return"metadata"in Y?(Oe=Y.kind,et=Y.metadata.namespace,_t=Y.metadata.name):(Oe=Y.kind,et=Y.namespace,_t=Y.name),(et===void 0||et==="")&&(et=Pe.zG),(le==null?void 0:le.defaultNamespace)!==void 0?(le==null?void 0:le.defaultNamespace)===et&&(et=void 0):et===Pe.zG&&(et=void 0),Oe=Oe.toLocaleLowerCase("en-US"),Oe=De&&De.toLocaleLowerCase("en-US")===Oe?void 0:Oe,`${Oe?`${Oe}:`:""}${et?`${et}/`:""}${_t}`}function Dt(Y,le){for(const De of["spec.profile.displayName","metadata.title"]){const Oe=ln()(Y,De);if(Oe&&typeof Oe=="string")return Oe}return at(Y,le)}const en=(0,L.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),fn=a.createElement(dn.Z,{fontSize:"small"}),Cn=a.createElement(hn.Z,{fontSize:"small"}),Qn=()=>{var Y,le,De;const Oe=en(),{updateFilters:et,backendEntities:_t,filters:bt,queryParameters:{owners:vt}}=kt(),rn=(0,l.h_)(Q),Xt=(0,l.h_)(l.VE),Jt=(0,a.useMemo)(()=>[vt].flat().filter(Boolean),[vt]),[Ht,Ln]=(0,a.useState)(Jt.length?new wt(Jt).values:(le=(Y=bt.owners)==null?void 0:Y.values)!=null?le:[]),{loading:$n,error:_n,value:Yt}=(0,At.default)(async()=>{const Dn=[...new Set(_t.flatMap(or=>(0,Ge.g)(or,Pe.S4).map(sr=>(0,Pe.eE)(sr))).filter(Boolean))],{items:Kn}=await rn.getEntitiesByRefs({entityRefs:Dn,fields:["kind","metadata.name","metadata.title","metadata.namespace","spec.profile.displayName"]});return Kn.map((or,sr)=>or?{label:Dt(or,{defaultKind:"Group"}),entityRef:(0,Pe.eE)(or)}:{label:at((0,Pe.of)(Dn[sr]),{defaultKind:"group"}),entityRef:Dn[sr]}).sort((or,sr)=>or.label.localeCompare(sr.label,"en-US",{ignorePunctuation:!0,caseFirst:"upper"}))},[_t]);return(0,a.useEffect)(()=>{_n&&Xt.post({..._n,message:`EntityOwnerPicker failed to initialize: ${_n.message}`},{})},[_n,Xt]),(0,a.useEffect)(()=>{if(Jt.length){const Dn=new wt(Jt);Ln(Dn.values)}},[Jt]),(0,a.useEffect)(()=>{!$n&&Yt&&et({owners:Ht.length&&Yt.length?new wt(Ht):void 0})},[Ht,et,Yt,$n]),!$n&&!(Yt!=null&&Yt.length)?null:a.createElement(E.Z,{pb:1,pt:1},a.createElement(h.Z,{variant:"button",component:"label"},"Owner",a.createElement(it.ZP,{multiple:!0,disableCloseOnSelect:!0,loading:$n,options:Yt||[],value:(De=Yt==null?void 0:Yt.filter(Dn=>Ht.some(Kn=>Kn===Dn.entityRef)))!=null?De:[],onChange:(Dn,Kn)=>Ln(Kn.map(fr=>fr.entityRef)),getOptionLabel:Dn=>Dn.label,renderOption:(Dn,{selected:Kn})=>a.createElement(k.Z,{control:a.createElement(z.Z,{icon:fn,checkedIcon:Cn,checked:Kn}),onClick:fr=>fr.preventDefault(),label:Dn.label}),size:"small",popupIcon:a.createElement(bn.Z,{"data-testid":"owner-picker-expand"}),renderInput:Dn=>a.createElement(y.Z,{...Dn,className:Oe.input,variant:"outlined"})})))},er=(0,fe.uW)("catalog:entity-route-ref",()=>(0,l.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function Zn(Y){var le,De;return{kind:Y.kind.toLocaleLowerCase("en-US"),namespace:(De=(le=Y.metadata.namespace)==null?void 0:le.toLocaleLowerCase("en-US"))!=null?De:Pe.zG,name:Y.metadata.name}}const jn=(0,a.forwardRef)((Y,le)=>{var De;const{entityRef:Oe,defaultKind:et,title:_t,children:bt,...vt}=Y,rn=(0,l.tg)(er);let Xt,Jt,Ht;if(typeof Oe=="string"){const Yt=(0,Pe.of)(Oe);Xt=Yt.kind,Jt=Yt.namespace,Ht=Yt.name}else"metadata"in Oe?(Xt=Oe.kind,Jt=Oe.metadata.namespace,Ht=Oe.metadata.name):(Xt=Oe.kind,Jt=Oe.namespace,Ht=Oe.name);Xt=Xt.toLocaleLowerCase("en-US"),Jt=(De=Jt==null?void 0:Jt.toLocaleLowerCase("en-US"))!=null?De:Pe.zG;const Ln={kind:Xt,namespace:Jt,name:Ht},$n=at({kind:Xt,namespace:Jt,name:Ht},{defaultKind:et}),_n=a.createElement(ee.rU,{...vt,ref:le,to:rn(Ln)},bt,!bt&&(_t!=null?_t:$n));return _t?a.createElement(S.ZP,{title:$n},_n):_n});function tr(Y){const{entityRefs:le,defaultKind:De,getTitle:Oe,...et}=Y,_t=(0,l.h_)(Q),{value:bt=new Array,loading:vt,error:rn}=(0,At.default)(async()=>{const Xt=le.reduce((Ht,Ln)=>typeof Ln=="object"&&"metadata"in Ln?Ht:[...Ht,(0,Pe.of)(Ln)],new Array),Jt=le.filter(Ht=>typeof Ht=="object"&&"metadata"in Ht);return Xt.length>0?[...(await _t.getEntities({filter:Xt.map(Ht=>({kind:Ht.kind,"metadata.namespace":Ht.namespace,"metadata.name":Ht.name}))})).items,...Jt]:Jt},[le]);return vt?a.createElement(ee.Ex,null):rn?a.createElement(ee.yu,{error:rn}):a.createElement(a.Fragment,null,bt.map((Xt,Jt)=>a.createElement(a.Fragment,{key:Jt},Jt>0&&", ",a.createElement(jn,{...et,defaultKind:De,entityRef:Xt,title:Oe(Xt)}))))}function D(Y){const{entityRefs:le,defaultKind:De,fetchEntities:Oe,getTitle:et,..._t}=Y;return Oe?a.createElement(tr,{..._t,defaultKind:De,entityRefs:le,getTitle:et}):a.createElement(a.Fragment,null,le.map((bt,vt)=>a.createElement(a.Fragment,{key:vt},vt>0&&", ",a.createElement(jn,{..._t,defaultKind:De,entityRef:bt,title:et?et(bt):void 0}))))}const I=Y=>{const le=useRouteRef(er);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:le(getCompoundEntityRef(Y.entity))},React.createElement(InfoIcon,null))},G=Y=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${Y.email}`,to:`mailto:${Y.email}`},React.createElement(EmailIcon,null)),ie=Y=>{var le;const De=(le=Y.entity.spec.profile)==null?void 0:le.email;return De?React.createElement(G,{email:De}):null},Ie=Y=>{var le;const De=(le=Y.entity.spec.profile)==null?void 0:le.email;return De?React.createElement(G,{email:De}):null},qe=(0,L.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),B=4,H=Y=>{var le,De,Oe;const{entityRef:et,children:_t,delayTime:bt=500}=Y,vt=qe(),rn=useApiHolder(),Xt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[Jt,Ht]=useState(!1),Ln=useMemo(()=>debounce(()=>Ht(!0),bt),[bt]),[{loading:$n,error:_n,value:Yt},Dn]=useAsyncFn(async()=>{const fr=rn.get(Q);if(fr){const or=await fr.getEntityByRef(et);if(!or)throw new Error(`${et} not found`);return or}},[rn,et]),Kn=()=>{Ht(!1),Ln.cancel()};return useEffect(()=>{Xt.isOpen&&!Yt&&!_n&&!$n&&Dn()},[Xt.isOpen,Dn,Yt,_n,$n]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:Ln},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(Xt)},_t)),Jt&&React.createElement(HoverPopover,{PaperProps:{className:vt.popoverPaper},...bindPopover(Xt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:Kn},React.createElement(Card,null,React.createElement(CardContent,null,_n&&React.createElement(ResponseErrorPanel,{error:_n}),$n&&React.createElement(Progress,null),Yt&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},Yt.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},Yt.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},Yt.kind),Yt.metadata.description&&React.createElement(Typography,{className:vt.descriptionTypography,paragraph:!0},Yt.metadata.description),React.createElement(Typography,null,(le=Yt.spec)==null?void 0:le.type),React.createElement(Box,{marginTop:"0.5em"},(Yt.metadata.tags||[]).slice(0,B).map(fr=>React.createElement(Chip,{key:fr,size:"small",label:fr})),((De=Yt.metadata.tags)==null?void 0:De.length)&&((Oe=Yt.metadata.tags)==null?void 0:Oe.length)>B&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!_n&&Yt&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(Yt)&&React.createElement(Ie,{entity:Yt}),isGroupEntity(Yt)&&React.createElement(ie,{entity:Yt}),React.createElement(I,{entity:Yt}))))))},Ce=(0,L.Z)(Y=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),je=()=>{var Y,le;const De=Ce(),{filters:Oe,updateFilters:et}=kt(),[_t,bt]=(0,a.useState)((le=(Y=Oe.text)==null?void 0:Y.value)!=null?le:"");return(0,Je.Z)(()=>{et({text:_t.length?new Ut(_t):void 0})},250,[_t,et]),a.createElement(x.Z,{className:De.searchToolbar},a.createElement(f.Z,null,a.createElement(T.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:De.input,placeholder:"Search",autoComplete:"off",onChange:vt=>bt(vt.target.value),value:_t,startAdornment:a.createElement(C.Z,{position:"start"},a.createElement(X.Z,null)),endAdornment:a.createElement(C.Z,{position:"end"},a.createElement(P.Z,{"aria-label":"clear search",onClick:()=>bt(""),edge:"end",disabled:_t.length===0},a.createElement(V.Z,null)))})))},Tt=Object.freeze({createEntityRefColumn(Y){const{defaultKind:le}=Y;function De(Oe){var et;return((et=Oe.metadata)==null?void 0:et.title)||at(Oe,{defaultKind:le})}return{title:"Name",highlight:!0,customFilterAndSearch(Oe,et){return De(et).includes(Oe)},customSort(Oe,et){return De(Oe).localeCompare(De(et))},render:Oe=>{var et;return a.createElement(jn,{entityRef:Oe,defaultKind:le,title:(et=Oe.metadata)==null?void 0:et.title})}}},createEntityRelationColumn(Y){const{title:le,relation:De,defaultKind:Oe,filter:et}=Y;function _t(vt){return(0,Ge.g)(vt,De,et)}function bt(vt){return _t(vt).map(rn=>at(rn,{defaultKind:Oe})).join(", ")}return{title:le,customFilterAndSearch(vt,rn){return bt(rn).includes(vt)},customSort(vt,rn){return bt(vt).localeCompare(bt(rn))},render:vt=>a.createElement(D,{entityRefs:_t(vt),defaultKind:Oe})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:Pe.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:Pe.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:Pe.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:Y=>a.createElement(ee.Or,{text:Y.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),Kt=[Tt.createEntityRefColumn({defaultKind:"system"}),Tt.createDomainColumn(),Tt.createOwnerColumn(),Tt.createMetadataDescriptionColumn()],Vt=[Tt.createEntityRefColumn({defaultKind:"component"}),Tt.createSystemColumn(),Tt.createOwnerColumn(),Tt.createSpecTypeColumn(),Tt.createSpecLifecycleColumn(),Tt.createMetadataDescriptionColumn()],yn=(0,L.Z)(Y=>({empty:{padding:Y.spacing(2),display:"flex",justifyContent:"center"}})),Rn=Y=>{const{entities:le,title:De,emptyContent:Oe,variant:et="gridItem",columns:_t}=Y,bt=yn(),vt={minWidth:"0",width:"100%"};return et==="gridItem"&&(vt.height="calc(100% - 10px)"),a.createElement(ee.iA,{columns:_t,title:De,style:vt,emptyContent:Oe&&a.createElement("div",{className:bt.empty},Oe),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1},data:le})};Rn.columns=Tt,Rn.systemEntityColumns=Kt,Rn.componentEntityColumns=Vt;const un=a.createElement(dn.Z,{fontSize:"small"}),Vn=a.createElement(hn.Z,{fontSize:"small"});function xn({selected:Y}){return a.createElement(z.Z,{icon:un,checkedIcon:Vn,checked:Y})}const Yn=(0,a.memo)(Y=>{const{selected:le,value:De,availableOptions:Oe,showCounts:et}=Y,_t=et?`${De} (${Oe==null?void 0:Oe[De]})`:De;return a.createElement(k.Z,{control:a.createElement(xn,{selected:le}),label:_t,onClick:bt=>bt.preventDefault()})}),Fn=(0,L.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function Xn(Y){const le=Fn();return a.createElement(y.Z,{variant:"outlined",...Y,className:ge()(le.input,Y.className)})}function Jn(Y){var le,De;const{label:Oe,name:et,path:_t,showCounts:bt,Filter:vt,InputProps:rn}=Y,{updateFilters:Xt,filters:Jt,queryParameters:{[et]:Ht}}=kt(),Ln=(0,l.h_)(Q),{value:$n}=(0,At.default)(async()=>{var sr;const br=_t,{facets:Sr}=await Ln.getEntityFacets({facets:[br],filter:(sr=Jt.kind)==null?void 0:sr.getCatalogFilters()});return Object.fromEntries(Sr[br].map(({value:jr,count:Qr})=>[jr,Qr]))},[Jt.kind]),_n=(0,a.useMemo)(()=>[Ht].flat().filter(Boolean),[Ht]),[Yt,Dn]=(0,a.useState)(_n.length?_n:(De=(le=Jt[et])==null?void 0:le.values)!=null?De:[]);(0,a.useEffect)(()=>{_n.length&&Dn(_n)},[_n]);const Kn=Object.keys($n!=null?$n:{}),fr=Yt.length&&Kn.length;(0,a.useEffect)(()=>{Xt({[et]:fr?new vt(Yt):void 0})},[et,fr,Yt,vt,Xt]);const or=Jt[et];return or&&typeof or=="object"&&!("values"in or)||!Kn.length||Kn.length<=1?null:a.createElement(E.Z,{pb:1,pt:1},a.createElement(h.Z,{variant:"button",component:"label"},Oe,a.createElement(it.ZP,{multiple:!0,disableCloseOnSelect:!0,options:Kn,value:Yt,onChange:(sr,br)=>Dn(br),renderOption:(sr,{selected:br})=>a.createElement(Yn,{selected:br,value:sr,availableOptions:$n,showCounts:!!bt}),size:"small",popupIcon:a.createElement(bn.Z,{"data-testid":`${String(et)}-picker-expand`}),renderInput:sr=>a.createElement(Xn,{...sr,...rn})})))}const ur=(0,L.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),gr=Y=>{const le=ur();return a.createElement(Jn,{label:"Tags",name:"tags",path:"metadata.tags",Filter:$t,showCounts:Y.showCounts,InputProps:{className:le.input}})},dr=Y=>{var le;const{hidden:De,initialFilter:Oe}=Y,et=(0,l.h_)(l.$v),{error:_t,availableTypes:bt,selectedTypes:vt,setSelectedTypes:rn}=Mt();if((0,a.useEffect)(()=>{_t&&et.post({message:"Failed to load entity types",severity:"error"}),Oe&&rn([Oe])},[_t,et,Oe,rn]),bt.length===0||_t)return null;const Xt=[{value:"all",label:"all"},...bt.map(Jt=>({value:Jt,label:Jt}))];return De?null:a.createElement(E.Z,{pb:1,pt:1},a.createElement(ee.Ph,{label:"Type",items:Xt,selected:(le=Xt.length>1?vt[0]:void 0)!=null?le:"all",onChange:Jt=>rn(Jt==="all"?[]:[String(Jt)])}))},ir=(0,p.Z)({root:{color:"#f3ba37"}})(Se.Z),nr=Y=>{const{toggleStarredEntity:le,isStarredEntity:De}=Un(Y.entity);return a.createElement(P.Z,{"aria-label":"favorite",color:"inherit",...Y,onClick:()=>le()},a.createElement(S.ZP,{title:De?"Remove from favorites":"Add to favorites"},De?a.createElement(ir,null):a.createElement(ot.Z,null)))},W=tt.Z;function o(Y,le){if(Y)return Y.toLocaleLowerCase("en-US");if(le)try{return(0,Pe.of)(le).kind.toLocaleLowerCase("en-US")}catch{return}}function i(Y,le){const De=(0,l.qD)(),Oe=o(Y,le);return Oe&&De.getSystemIcon(`kind:${Oe}`)||W}function g(Y){const{kind:le,entityRef:De,...Oe}=Y,et=i(le,De);return a.createElement(et,{...Oe})}const M=(0,L.Z)(Y=>({node:{fill:Y.palette.grey[300],stroke:Y.palette.grey[300],"&.primary":{fill:Y.palette.primary.light,stroke:Y.palette.primary.light},"&.secondary":{fill:Y.palette.secondary.light,stroke:Y.palette.secondary.light}},text:{fill:Y.palette.getContrastText(Y.palette.grey[300]),"&.primary":{fill:Y.palette.primary.contrastText},"&.secondary":{fill:Y.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function ve(Y){const le=(0,l.h_)(Q),De=(0,Pe.eE)(Y),{loading:Oe,error:et,value:_t}=(0,At.default)(async()=>{const bt=await le.getEntityAncestors({entityRef:De}),vt=new Array,rn=new Array;for(const Xt of bt.items){const Jt=(0,Pe.eE)(Xt.entity),Ht=Jt===bt.rootEntityRef;vt.push({id:Jt,root:Ht,...Xt.entity});for(const Ln of Xt.parentEntityRefs)rn.push({from:Jt,to:Ln})}return{nodes:vt,edges:rn}},[De]);return{loading:Oe,error:et,nodes:(_t==null?void 0:_t.nodes)||[],edges:(_t==null?void 0:_t.edges)||[]}}function Fe({node:Y}){const le=M(),De=(0,oe.s0)(),Oe=(0,l.tg)(er),[et,_t]=(0,a.useState)(0),[bt,vt]=(0,a.useState)(0),rn=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{if(rn.current){let{height:Dn,width:Kn}=rn.current.getBBox();Dn=Math.round(Dn),Kn=Math.round(Kn),(Dn!==bt||Kn!==et)&&(_t(Kn),vt(Dn))}},[et,bt]);const Xt=10,Jt=bt,Ht=Jt+Xt,Ln=Ht+et+Xt*2,$n=bt+Xt*2,_n=Y.metadata.title||(Y.kind&&Y.metadata.name&&Y.metadata.namespace?at({kind:Y.kind,name:Y.metadata.name,namespace:Y.metadata.namespace||""}):Y.id),Yt=()=>{De(Oe({kind:Y.kind,namespace:Y.metadata.namespace||Pe.zG,name:Y.metadata.name}))};return a.createElement("g",{onClick:Yt,className:le.clickable},a.createElement("rect",{className:ge()(le.node,Y.root?"secondary":"primary"),width:Ln,height:$n,rx:10}),a.createElement(g,{kind:Y.kind,y:Xt,x:Xt,width:Jt,height:Jt,className:ge()(le.text,Y.root?"secondary":"primary")}),a.createElement("text",{ref:rn,className:ge()(le.text,Y.root?"secondary":"primary"),y:$n/2,x:Ht+(et+Xt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},_n))}function rt(Y){const{loading:le,error:De,nodes:Oe,edges:et}=ve(Y.entity);return le?a.createElement(ee.Ex,null):De?a.createElement(ee.Gk,{error:De}):a.createElement(a.Fragment,null,a.createElement(Z.Z,{variant:"h2"},"Ancestry"),a.createElement(Z.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",a.createElement(ee.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),a.createElement(E.Z,{mt:4},a.createElement(ee.mn,{nodes:Oe,edges:et,renderNode:Fe,direction:ee.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const xt=(0,L.Z)(Y=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:Y.spacing(2)},helpIcon:{marginLeft:Y.spacing(1),color:Y.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Wt(Y){const le=xt();return a.createElement(F.Z,{...Y,primaryTypographyProps:{className:le.monospace},secondaryTypographyProps:{className:le.monospace}})}function cn(Y){const le=xt();return a.createElement(Me.Z,{className:le.monospace},Y.children)}function mn(Y){return a.createElement(E.Z,{mt:2},a.createElement(Ee.Z,{variant:"outlined"},a.createElement(Xe.Z,null,a.createElement(h.Z,{variant:"h6",gutterBottom:!0},Y.title,Y.helpLink&&a.createElement(Sn,{to:Y.helpLink})),Y.children)))}function Tn(Y){if(Y.match(/^url:https?:\/\//))return Y.slice(4);if(Y.match(/^https?:\/\//))return Y}function kn(Y){const[le,De]=Y.entry,Oe=Tn(De);return a.createElement(Bt.Z,null,Y.indent&&a.createElement(st.Z,null),a.createElement(Wt,{primary:le,secondary:Oe?a.createElement(ee.rU,{to:Oe},De):De}))}function Sn(Y){const le=xt();return a.createElement(ee.rU,{to:Y.to,className:le.helpIcon},a.createElement(pt.Z,{fontSize:"inherit"}))}const Gn=(0,L.Z)({root:{display:"flex",flexDirection:"column"}});function K(Y){var le,De;const Oe=(0,l.h_)(Q),et=(0,Pe.eE)(Y),_t=(le=Y.metadata.annotations)==null?void 0:le[Pe.P1],bt=(De=Y.metadata.annotations)==null?void 0:De[Pe.q1],{loading:vt,error:rn,value:Xt}=(0,At.default)(async()=>!_t&&!bt?[]:(await Oe.getEntities({filter:[..._t?[{[`metadata.annotations.${Pe.P1}`]:_t}]:[],...bt?[{[`metadata.annotations.${Pe.q1}`]:bt}]:[]]})).items,[_t,bt]);return{loading:vt,error:rn,location:_t,originLocation:bt,colocatedEntities:Xt==null?void 0:Xt.filter(Jt=>(0,Pe.eE)(Jt)!==et)}}function ne(Y){return a.createElement(jt.Z,{dense:!0},Y.header&&a.createElement(kn,{key:"header",entry:Y.header}),Y.entities.map(le=>a.createElement(Bt.Z,{key:(0,Pe.eE)(le)},a.createElement(st.Z,null,a.createElement(g,{kind:le.kind})),a.createElement(Wt,{primary:a.createElement(jn,{entityRef:le})}))))}function he(Y){const{entity:le}=Y,{loading:De,error:Oe,location:et,originLocation:_t,colocatedEntities:bt}=K(le);if(De)return a.createElement(ee.Ex,null);if(Oe)return a.createElement(ee.Gk,{error:Oe});if(!et&&!_t)return a.createElement(St.Z,{severity:"warning"},"Entity had no location information.");if(!(bt!=null&&bt.length))return a.createElement(St.Z,{severity:"info"},"There were no other entities on this location.");if(et===_t)return a.createElement(ne,{entities:bt});const vt=bt.filter(Xt=>{var Jt;return((Jt=Xt.metadata.annotations)==null?void 0:Jt[Pe.P1])===et}),rn=bt.filter(Xt=>{var Jt;return((Jt=Xt.metadata.annotations)==null?void 0:Jt[Pe.q1])===_t});return a.createElement(a.Fragment,null,vt.length>0&&a.createElement(ne,{entities:vt,header:["At the same location",et]}),rn.length>0&&a.createElement(ne,{entities:rn,header:["At the same origin",_t]}))}function Ye(Y){const le=Gn();return a.createElement(a.Fragment,null,a.createElement(Z.Z,{variant:"h2"},"Colocated"),a.createElement(Z.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),a.createElement("div",{className:le.root},a.createElement(he,{entity:Y.entity})))}function Ot(Y){return Object.fromEntries([...Object.entries(Y)].sort((le,De)=>le[0]<De[0]?-1:1))}function Nt(Y){return a.createElement(a.Fragment,null,a.createElement(Z.Z,{variant:"h2"},"Entity as JSON"),a.createElement(Z.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),a.createElement(Z.Z,null,a.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},a.createElement(ee.Oi,{text:JSON.stringify(Ot(Y.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Qt=(0,L.Z)({root:{display:"flex",flexDirection:"column"}});function tn(Y){var le,De;const Oe=Qt(),{apiVersion:et,kind:_t,metadata:bt,spec:vt,relations:rn=[],status:Xt={}}=Y.entity,Jt=de()(Pt()(rn,Ht=>Ht.targetRef),"type");return a.createElement(a.Fragment,null,a.createElement(Z.Z,{variant:"h2"},"Overview"),a.createElement("div",{className:Oe.root},a.createElement(mn,{title:"Identity"},a.createElement(jt.Z,{dense:!0},a.createElement(Bt.Z,null,a.createElement(Wt,{primary:"apiVersion",secondary:et})),a.createElement(Bt.Z,null,a.createElement(Wt,{primary:"kind",secondary:_t})),(vt==null?void 0:vt.type)&&a.createElement(Bt.Z,null,a.createElement(Wt,{primary:"spec.type",secondary:vt.type})),bt.uid&&a.createElement(Bt.Z,null,a.createElement(Wt,{primary:"uid",secondary:bt.uid})),bt.etag&&a.createElement(Bt.Z,null,a.createElement(Wt,{primary:"etag",secondary:bt.etag})))),a.createElement(mn,{title:"Metadata"},!!Object.keys(bt.annotations||{}).length&&a.createElement(jt.Z,{dense:!0,subheader:a.createElement(cn,null,"Annotations",a.createElement(Sn,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(bt.annotations).map(Ht=>a.createElement(kn,{key:Ht[0],indent:!0,entry:Ht}))),!!Object.keys(bt.labels||{}).length&&a.createElement(jt.Z,{dense:!0,subheader:a.createElement(cn,null,"Labels")},Object.entries(bt.labels).map(Ht=>a.createElement(kn,{key:Ht[0],indent:!0,entry:Ht}))),!!((le=bt.tags)!=null&&le.length)&&a.createElement(jt.Z,{dense:!0,subheader:a.createElement(cn,null,"Tags")},bt.tags.map((Ht,Ln)=>a.createElement(Bt.Z,{key:`${Ht}-${Ln}`},a.createElement(st.Z,null),a.createElement(Wt,{primary:Ht}))))),!!rn.length&&a.createElement(mn,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(Jt).map(([Ht,Ln],$n)=>a.createElement("div",{key:$n},a.createElement(jt.Z,{dense:!0,subheader:a.createElement(cn,null,Ht)},Ln.map(_n=>a.createElement(Bt.Z,{key:_n.targetRef},a.createElement(st.Z,null,a.createElement(g,{entityRef:_n.targetRef})),a.createElement(Wt,{primary:a.createElement(jn,{entityRef:_n.targetRef})}))))))),!!((De=Xt.items)!=null&&De.length)&&a.createElement(mn,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Xt.items.map((Ht,Ln)=>a.createElement("div",{key:Ln},a.createElement(h.Z,null,Ht.level,": ",Ht.type),a.createElement(E.Z,{ml:2},Ht.message))))))}function In(Y){return a.createElement(a.Fragment,null,a.createElement(Z.Z,{variant:"h2"},"Entity as YAML"),a.createElement(Z.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),a.createElement(Z.Z,null,a.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},a.createElement(ee.Oi,{text:re.ZP.stringify(Ot(Y.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Mn=(0,L.Z)(Y=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:Y.palette.background.paper},tabs:{borderRight:`1px solid ${Y.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function wn(Y){const{children:le,value:De,index:Oe,...et}=Y,_t=Mn();return a.createElement("div",{role:"tabpanel",hidden:De!==Oe,id:`vertical-tabpanel-${Oe}`,"aria-labelledby":`vertical-tab-${Oe}`,className:_t.tabContents,...et},De===Oe&&a.createElement(E.Z,{pl:3,pr:3},le))}function Wn(Y){return{id:`vertical-tab-${Y}`,"aria-controls":`vertical-tabpanel-${Y}`}}function on(Y){const le=Mn(),[De,Oe]=a.useState(0);return(0,a.useEffect)(()=>{Oe(0)},[Y.open]),Y.entity?a.createElement(Zt.Z,{fullWidth:!0,maxWidth:"xl",open:Y.open,onClose:Y.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:le.fullHeightDialog}},a.createElement(J.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),a.createElement(an.Z,{dividers:!0},a.createElement("div",{className:le.root},a.createElement(Re.Z,{orientation:"vertical",variant:"scrollable",value:De,onChange:(et,_t)=>Oe(_t),"aria-label":"Inspector options",className:le.tabs},a.createElement(xe.Z,{label:"Overview",...Wn(0)}),a.createElement(xe.Z,{label:"Ancestry",...Wn(1)}),a.createElement(xe.Z,{label:"Colocated",...Wn(2)}),a.createElement(xe.Z,{label:"Raw JSON",...Wn(3)}),a.createElement(xe.Z,{label:"Raw YAML",...Wn(4)})),a.createElement(wn,{value:De,index:0},a.createElement(tn,{entity:Y.entity})),a.createElement(wn,{value:De,index:1},a.createElement(rt,{entity:Y.entity})),a.createElement(wn,{value:De,index:2},a.createElement(Ye,{entity:Y.entity})),a.createElement(wn,{value:De,index:3},a.createElement(Nt,{entity:Y.entity})),a.createElement(wn,{value:De,index:4},a.createElement(In,{entity:Y.entity})))),a.createElement(O.Z,null,a.createElement(b.Z,{onClick:Y.onClose,color:"primary"},"Close"))):null}function rr(Y){var le;const De=(0,l.h_)(Q),Oe=(le=Y.metadata.annotations)==null?void 0:le[Pe.q1],et=Y.metadata.uid,_t=Oe==="bootstrap:bootstrap",bt=(0,At.default)(async()=>{const _n=De.getLocationByRef(Oe);let Yt;if(!Oe)Yt=Promise.resolve([]);else{const Dn=`metadata.annotations.${Pe.q1}`;Yt=De.getEntities({filter:{[Dn]:Oe},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(Kn=>Kn.items)}return Promise.all([_n,Yt]).then(([Dn,Kn])=>({location:Dn,colocatedEntities:Kn}))},[De,Y]),vt=(0,a.useCallback)(async function(){const{location:Yt}=bt.value;await De.removeLocationById(Yt.id)},[De,bt]),rn=(0,a.useCallback)(async function(){await De.removeEntityByUid(et)},[De,et]);if(_t)return{type:"bootstrap",location:Oe,deleteEntity:rn};const{loading:Xt,error:Jt,value:Ht}=bt;if(Xt)return{type:"loading"};if(Jt)return{type:"error",error:Jt};const{location:Ln,colocatedEntities:$n}=Ht;return Ln?{type:"unregister",location:Oe,colocatedEntities:$n.map(Pe.iB),unregisterLocation:vt,deleteEntity:rn}:{type:"only-delete",deleteEntity:rn}}const Er=(0,L.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),Or=({entity:Y,onConfirm:le,onClose:De})=>{var Oe;const et=(0,l.h_)(l.$v),_t=(0,l.h_)(l.Ds),bt=Er(),vt=rr(Y),[rn,Xt]=(0,a.useState)(!1),[Jt,Ht]=(0,a.useState)(!1),Ln=(Oe=_t.getOptionalString("app.title"))!=null?Oe:"Backstage",$n=(0,a.useCallback)(async function(){if("unregisterLocation"in vt){Ht(!0);try{await vt.unregisterLocation(),le()}catch(Kn){(0,A.BD)(Kn),et.post({message:Kn.message})}finally{Ht(!1)}}},[et,le,vt]),_n=(0,a.useCallback)(async function(){if("deleteEntity"in vt){Ht(!0);try{await vt.deleteEntity(),le()}catch(Kn){(0,A.BD)(Kn),et.post({message:Kn.message})}finally{Ht(!1)}}},[et,le,vt]),Yt=()=>a.createElement(O.Z,{className:bt.dialogActions},a.createElement(b.Z,{onClick:De,color:"primary"},"Cancel"));return vt.type==="loading"?a.createElement(ee.Ex,null):vt.type==="error"?a.createElement(ee.Gk,{error:vt.error}):vt.type==="bootstrap"?a.createElement(a.Fragment,null,a.createElement(St.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',vt.location,'"). If you believe this is in error, please contact the ',Ln," ","integrator."),a.createElement(E.Z,{marginTop:2},!rn&&a.createElement(a.Fragment,null,a.createElement(b.Z,{variant:"text",size:"small",color:"primary",className:bt.advancedButton,onClick:()=>Xt(!0)},"Advanced Options"),a.createElement(Yt,null)),rn&&a.createElement(a.Fragment,null,a.createElement(Z.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Jt,onClick:_n},"Delete Entity"),a.createElement(Yt,null)))):vt.type==="only-delete"?a.createElement(a.Fragment,null,a.createElement(Z.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Jt,onClick:_n},"Delete Entity"),a.createElement(Yt,null)):vt.type==="unregister"?a.createElement(a.Fragment,null,a.createElement(Z.Z,null,"This action will unregister the following entities:"),a.createElement(Z.Z,{component:"ul"},vt.colocatedEntities.map(Dn=>a.createElement("li",{key:`${Dn.kind}:${Dn.namespace}/${Dn.name}`},a.createElement(jn,{entityRef:Dn})))),a.createElement(Z.Z,null,"Located at the following location:"),a.createElement(Z.Z,{component:"ul"},a.createElement("li",null,vt.location)),a.createElement(Z.Z,null,"To undo, just re-register the entity in ",Ln,"."),a.createElement(E.Z,{marginTop:2},a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Jt,onClick:$n},"Unregister Location"),!rn&&a.createElement(E.Z,{component:"span",marginLeft:2},a.createElement(b.Z,{variant:"text",size:"small",color:"primary",className:bt.advancedButton,onClick:()=>Xt(!0)},"Advanced Options"))),rn&&a.createElement(a.Fragment,null,a.createElement(E.Z,{paddingTop:4,paddingBottom:4},a.createElement(Ze.Z,null)),a.createElement(Z.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),a.createElement(b.Z,{variant:"contained",color:"secondary",disabled:Jt,onClick:_n},"Delete Entity"))):a.createElement(St.Z,{severity:"error"},"Internal error: Unknown state")},ar=Y=>{const{open:le,onConfirm:De,onClose:Oe,entity:et}=Y;return a.createElement(Zt.Z,{open:le,onClose:Oe},a.createElement(J.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),a.createElement(an.Z,null,a.createElement(Or,{entity:et,onConfirm:De,onClose:Oe})))},Ar=(0,L.Z)(Y=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:Y.spacing(1,0,1,0)},title:{margin:Y.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:Y.palette.text.primary},menuItem:{minHeight:Y.spacing(6)},groupWrapper:{margin:Y.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function xr(Y){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:j.Z},{id:"starred",label:"Starred",icon:Se.Z}]},{name:Y!=null?Y:"Company",items:[{id:"all",label:"All"}]}]}const vr=Y=>{var le;const{initialFilter:De,availableFilters:Oe}=Y,et=Ar(),bt=(le=(0,l.h_)(l.Ds).getOptionalString("organization.name"))!=null?le:"Company",{filters:vt,updateFilters:rn,backendEntities:Xt,queryParameters:{kind:Jt,user:Ht},loading:Ln}=kt(),$n=["starred","all"],_n=xr(bt).map(Mr=>({...Mr,items:Mr.items.filter(({id:$r})=>["group","user"].some(oa=>oa===Jt)?$n.includes($r):!Oe||Oe.includes($r))})).filter(({items:Mr})=>!!Mr.length),{isStarredEntity:Yt}=Pn(),{isOwnedEntity:Dn,loading:Kn}=zn(),fr=Ln||Kn,or=(0,a.useMemo)(()=>new Le("owned",Dn,Yt),[Dn,Yt]),sr=(0,a.useMemo)(()=>new Le("starred",Dn,Yt),[Dn,Yt]),br=(0,a.useMemo)(()=>[Ht].flat()[0],[Ht]),[Sr,jr]=(0,a.useState)(br!=null?br:De),Qr=(0,a.useMemo)(()=>Xt.filter(pe((0,Ct.compact)(Object.values({...vt,user:void 0})))),[vt,Xt]),aa=(0,a.useMemo)(()=>({all:Qr.length,starred:Qr.filter(Mr=>sr.filterEntity(Mr)).length,owned:Qr.filter(Mr=>or.filterEntity(Mr)).length}),[Qr,sr,or]);return(0,a.useEffect)(()=>{br&&jr(br)},[br]),(0,a.useEffect)(()=>{!fr&&Sr&&Sr!=="all"&&aa[Sr]===0&&jr("all")},[fr,aa,Sr,jr]),(0,a.useEffect)(()=>{rn({user:Sr?new Le(Sr,Dn,Yt):void 0})},[Sr,Dn,Yt,rn]),a.createElement(Ee.Z,{className:et.root},_n.map(Mr=>a.createElement(a.Fragment,{key:Mr.name},a.createElement(h.Z,{variant:"subtitle2",component:"span",className:et.title},Mr.name),a.createElement(Ee.Z,{className:et.groupWrapper},a.createElement(jt.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":Mr.name},Mr.items.map($r=>{var oa,Ea;return a.createElement(ce.Z,{role:"none presentation",key:$r.id,button:!0,divider:!0,onClick:()=>jr($r.id),selected:$r.id===((oa=vt.user)==null?void 0:oa.value),className:et.menuItem,disabled:aa[$r.id]===0,"data-testid":`user-picker-${$r.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},$r.icon&&a.createElement(st.Z,{className:et.listIcon},a.createElement($r.icon,{fontSize:"small"})),a.createElement(F.Z,null,a.createElement(h.Z,{variant:"body1"},$r.label," ")),a.createElement(R.Z,null,(Ea=aa[$r.id])!=null?Ea:"-"))}))))))},pr=(0,L.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),Pr=a.createElement(dn.Z,{fontSize:"small"}),Lr=a.createElement(hn.Z,{fontSize:"small"}),kr=()=>{const Y=pr(),{updateFilters:le}=kt(),[De,Oe]=(0,a.useState)([]);function et(vt){le({orphan:vt?new $e(vt):void 0})}function _t(vt){le({error:vt?new be(vt):void 0})}const bt=["Is Orphan","Has Error"];return a.createElement(E.Z,{pb:1,pt:1},a.createElement(h.Z,{variant:"button",component:"label"},"Processing Status",a.createElement(it.ZP,{multiple:!0,disableCloseOnSelect:!0,options:bt,value:De,onChange:(vt,rn)=>{Oe(rn),et(rn.includes("Is Orphan")),_t(rn.includes("Has Error"))},renderOption:(vt,{selected:rn})=>a.createElement(k.Z,{control:a.createElement(z.Z,{icon:Pr,checkedIcon:Lr,checked:rn}),onClick:Xt=>Xt.preventDefault(),label:vt}),size:"small",popupIcon:a.createElement(bn.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:vt=>a.createElement(y.Z,{...vt,className:Y.input,variant:"outlined"})})))},Ir=(0,L.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),Gr=()=>{const Y=Ir();return a.createElement(Jn,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:vn,InputProps:{className:Y.input}})};function Xr(Y){var le;const{children:De,value:Oe}=Y,[et,_t]=useState((le=Oe==null?void 0:Oe.filters)!=null?le:{}),bt=useCallback(Xt=>{_t(Jt=>{const Ht=typeof Xt=="function"?Xt(Jt):Xt;return{...Jt,...Ht}})},[]),vt=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),rn=useMemo(()=>{var Xt,Jt,Ht,Ln,$n;return{entities:(Xt=Oe==null?void 0:Oe.entities)!=null?Xt:vt.entities,backendEntities:(Jt=Oe==null?void 0:Oe.backendEntities)!=null?Jt:vt.backendEntities,updateFilters:(Ht=Oe==null?void 0:Oe.updateFilters)!=null?Ht:bt,filters:et,loading:(Ln=Oe==null?void 0:Oe.loading)!=null?Ln:!1,queryParameters:($n=Oe==null?void 0:Oe.queryParameters)!=null?$n:vt.queryParameters,error:Oe==null?void 0:Oe.error}},[Oe,vt,et,bt]);return React.createElement(Qe.Provider,{value:rn},De)}},92449:function(Rt,d,e){e.d(d,{A:function(){return tt},C:function(){return me},E:function(){return Et},F:function(){return Pn},L:function(){return X},a:function(){return Se},b:function(){return St},c:function(){return hn},d:function(){return fn},e:function(){return en},f:function(){return Dt},g:function(){return Cn},h:function(){return at},j:function(){return I},k:function(){return ie},l:function(){return jn},m:function(){return D},n:function(){return tr},o:function(){return Zn},p:function(){return Qn},r:function(){return qe},t:function(){return nt},u:function(){return wt},v:function(){return Ut},w:function(){return $e},x:function(){return Le},y:function(){return lt},z:function(){return An}});var n=e(82394),l=e.n(n),u=e(34520),m=e(76635),a=e.n(m),c=e(80236),_=e(30705),b=e(49462),t=e(73495),E=e(79692),h=e(90436),$=e(60905),L=e(95544),k=e(41156),z=e(90348),y=e(11861),S=e(7089),x=e(94339),f=e(32552),T=e(61837),C=e(85256),P=e(24579),p=e(12420),Z=e(12231),F=e(86136),Me=e(49378),Ee=e(80030),Xe=e(79784),Bt=e(50758),st=e(8629),jt=e(79249),Zt=e(49429),J=e(77277),an=e(52866),Re=e(30254),xe=e(27604),O=e(2784),Ze=e(52160),ce=e(19928),R=e.n(ce),N=e(64279),ee=e(15459),Pe=e(2997),Ge=e(11640),Ct=e(28347),ht=e(99688),It=e(73557),q=e(31654),oe=e(43054),Ae=e(65759),Je=e(52963),ct=e(75650),At=e(49166),qt=e(32272),zt=e(88285),Be=e(92573);async function Pt({storageApi:B}){var H;const Ce=B.forBucket("settings"),je=B.forBucket("starredEntities"),Tt=Ce.snapshot("starredEntities").value;if(!(0,m.isArray)(Tt))return;const Kt=new Set((H=je.snapshot("entityRefs").value)!=null?H:[]);Tt.filter(m.isString).map(Vt=>Vt.split(":")).filter(Vt=>Vt.length===4&&Vt[0]==="entity").map(([Vt,yn,Rn,un])=>(0,u.eE)({kind:yn,namespace:Rn,name:un})).forEach(Vt=>Kt.add(Vt)),await je.set("entityRefs",Array.from(Kt)),await Ce.remove("starredEntities")}class dt{constructor(H){this.subscribers=new Set,this.observable=new(l())(je=>(je.next(new Set(this.starredEntities)),this.subscribers.add(je),()=>{this.subscribers.delete(je)}));var Ce;Pt(H).then(),this.settingsStore=H.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((Ce=this.settingsStore.snapshot("entityRefs").value)!=null?Ce:[]),this.settingsStore.observe$("entityRefs").subscribe({next:je=>{var Tt;this.starredEntities=new Set((Tt=je.value)!=null?Tt:[]),this.notifyChanges()}})}async toggleStarred(H){this.starredEntities.has(H)?this.starredEntities.delete(H):this.starredEntities.add(H),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const H of this.subscribers)H.next(new Set(this.starredEntities))}}const hn=(0,_.x8)({id:"create-component",optional:!0}),dn=(0,_.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),bn=(0,_.NT)({id:"catalog"}),it=(0,E.Z)(B=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:B.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function St(B){const{label:H,value:Ce,gridSizes:je,children:Tt}=B,Kt=it(),Vt=(0,_.vJ)(Tt,Rn=>Rn.getElements()),yn=Vt.length>0?Vt:O.createElement(h.Z,{variant:"body2",className:Kt.value},Ce||"unknown");return O.createElement($.Z,{item:!0,...je},O.createElement(h.Z,{variant:"h2",className:Kt.label},H),yn)}const En=(0,E.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}});function ln(B){const{href:H,text:Ce,Icon:je}=B,Tt=En();return O.createElement(L.Z,{display:"flex"},O.createElement(L.Z,{mr:1,className:Tt.svgIcon},O.createElement(h.Z,{component:"div"},je?O.createElement(je,null):O.createElement(Ze.Z,null))),O.createElement(L.Z,{flexGrow:"1"},O.createElement(c.rU,{to:H,target:"_blank",rel:"noopener"},Ce||H)))}const fe={xs:1,sm:1,md:1,lg:2,xl:3};function V(B){var H,Ce;const je=[(0,k.Z)(Kt=>Kt.breakpoints.up("xl"))?"xl":null,(0,k.Z)(Kt=>Kt.breakpoints.up("lg"))?"lg":null,(0,k.Z)(Kt=>Kt.breakpoints.up("md"))?"md":null,(0,k.Z)(Kt=>Kt.breakpoints.up("sm"))?"sm":null,(0,k.Z)(Kt=>Kt.breakpoints.up("xs"))?"xs":null];let Tt=1;if(typeof B=="number")Tt=B;else{const Kt=(H=je.find(Vt=>Vt!==null))!=null?H:"xs";Tt=(Ce=B==null?void 0:B[Kt])!=null?Ce:fe[Kt]}return Tt}function X(B){const{items:H,cols:Ce=void 0}=B,je=V(Ce);return O.createElement(z.Z,{rowHeight:"auto",cols:je},H.map(({text:Tt,href:Kt,Icon:Vt},yn)=>O.createElement(y.Z,{key:yn},O.createElement(ln,{href:Kt,text:Tt!=null?Tt:Kt,Icon:Vt}))))}const ue=(0,E.Z)({description:{wordBreak:"break-word"}});function ge(B,H,Ce){if(H==="url"||B.includes("://"))return B;const je=Ce.type==="file"?`file://${Ce.target}`:Ce.target;return H==="file"||Ce.type==="file"?new URL(B,je).href:je}function Se(B){var H,Ce,je,Tt,Kt,Vt,yn,Rn;const{entity:un}=B,Vn=ue(),xn=un.kind.toLocaleLowerCase("en-US")==="system",Yn=un.kind.toLocaleLowerCase("en-US")==="resource",Fn=un.kind.toLocaleLowerCase("en-US")==="component",Xn=un.kind.toLocaleLowerCase("en-US")==="api",Jn=un.kind.toLocaleLowerCase("en-US")==="template",ur=un.kind.toLocaleLowerCase("en-US")==="location",gr=un.kind.toLocaleLowerCase("en-US")==="group",dr=(0,t.hF)(un,u.cz,{kind:"system"}),ir=(0,t.hF)(un,u.cz,{kind:"component"}),nr=(0,t.hF)(un,u.cz,{kind:"domain"}),W=(0,t.hF)(un,u.S4);let o;try{o=(0,u.CV)(un)}catch{o=void 0}return O.createElement($.Z,{container:!0},O.createElement(St,{label:"Description",gridSizes:{xs:12}},O.createElement(c.SA,{className:Vn.description,content:((H=un==null?void 0:un.metadata)==null?void 0:H.description)||"No description"})),O.createElement(St,{label:"Owner",value:"No Owner",gridSizes:{xs:12,sm:6,lg:4}},W.length>0&&O.createElement(t.rI,{entityRefs:W,defaultKind:"group"})),(xn||nr.length>0)&&O.createElement(St,{label:"Domain",value:"No Domain",gridSizes:{xs:12,sm:6,lg:4}},nr.length>0&&O.createElement(t.rI,{entityRefs:nr,defaultKind:"domain"})),(Xn||Fn||Yn||dr.length>0)&&O.createElement(St,{label:"System",value:"No System",gridSizes:{xs:12,sm:6,lg:4}},dr.length>0&&O.createElement(t.rI,{entityRefs:dr,defaultKind:"system"})),Fn&&ir.length>0&&O.createElement(St,{label:"Parent Component",value:"No Parent Component",gridSizes:{xs:12,sm:6,lg:4}},O.createElement(t.rI,{entityRefs:ir,defaultKind:"component"})),(Xn||Fn||Yn||Jn||gr||ur||typeof((Ce=un==null?void 0:un.spec)==null?void 0:Ce.type)=="string")&&O.createElement(St,{label:"Type",value:(je=un==null?void 0:un.spec)==null?void 0:je.type,gridSizes:{xs:12,sm:6,lg:4}}),(Xn||Fn||typeof((Tt=un==null?void 0:un.spec)==null?void 0:Tt.lifecycle)=="string")&&O.createElement(St,{label:"Lifecycle",value:(Kt=un==null?void 0:un.spec)==null?void 0:Kt.lifecycle,gridSizes:{xs:12,sm:6,lg:4}}),O.createElement(St,{label:"Tags",value:"No Tags",gridSizes:{xs:12,sm:6,lg:4}},(((Vt=un==null?void 0:un.metadata)==null?void 0:Vt.tags)||[]).map(i=>O.createElement(S.Z,{key:i,size:"small",label:i}))),ur&&(((yn=un==null?void 0:un.spec)==null?void 0:yn.targets)||((Rn=un==null?void 0:un.spec)==null?void 0:Rn.target))&&O.createElement(St,{label:"Targets",gridSizes:{xs:12}},O.createElement(X,{cols:1,items:(un.spec.targets||[un.spec.target]).map(i=>i).map(i=>{var g;return{text:i,href:ge(i,((g=un==null?void 0:un.spec)==null?void 0:g.type)||"unknown",o)}})})))}const ot=(0,E.Z)({gridItemCard:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"},fullHeightCard:{display:"flex",flexDirection:"column",height:"100%"},gridItemCardContent:{flex:1},fullHeightCardContent:{flex:1}});function tt(B){var H,Ce,je;const{variant:Tt}=B,Kt=ot(),{entity:Vt}=(0,t.X2)(),yn=(0,_.h_)(b.q3),Rn=(0,_.h_)(t.Ah),un=(0,_.h_)(_.$v),Vn=(0,_.h_)(_.VE),xn=(0,_.tg)(dn),Yn=(0,t.CV)(Vt,yn),Fn=(H=Vt.metadata.annotations)==null?void 0:H[u.Tf],Xn={label:"View Source",disabled:!Yn,icon:O.createElement(b.nW,{type:Yn==null?void 0:Yn.integrationType}),href:Yn==null?void 0:Yn.locationTargetUrl},Jn={label:"View TechDocs",disabled:!((Ce=Vt.metadata.annotations)!=null&&Ce["backstage.io/techdocs-ref"])||!xn,icon:O.createElement(Re.Z,null),href:xn&&xn({namespace:Vt.metadata.namespace||u.zG,kind:Vt.kind,name:Vt.metadata.name})};let ur="";Tt==="gridItem"?ur=Kt.gridItemCard:Tt==="fullHeight"&&(ur=Kt.fullHeightCard);let gr="";Tt==="gridItem"?gr=Kt.gridItemCardContent:Tt==="fullHeight"&&(gr=Kt.fullHeightCardContent);const dr=(je=Vt.metadata.annotations)==null?void 0:je[u.P1],ir=(dr==null?void 0:dr.startsWith("url:"))||(dr==null?void 0:dr.startsWith("file:")),nr=(0,O.useCallback)(async()=>{try{await Rn.refreshEntity((0,u.eE)(Vt)),un.post({message:"Refresh scheduled",severity:"info"})}catch(W){Vn.post(W)}},[Rn,un,Vn,Vt]);return O.createElement(x.Z,{className:ur},O.createElement(f.Z,{title:"About",action:O.createElement(O.Fragment,null,ir&&O.createElement(T.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:nr},O.createElement(an.Z,null)),O.createElement(T.Z,{component:c.rU,"aria-label":"Edit",disabled:!Fn,title:"Edit Metadata",to:Fn!=null?Fn:"#"},O.createElement(xe.Z,null))),subheader:O.createElement(c.M6,{links:[Xn,Jn]})}),O.createElement(C.Z,null),O.createElement(P.Z,{className:gr},O.createElement(Se,{entity:Vt})))}function pt(){const B=useApi(catalogApiRef),{error:H,loading:Ce,value:je}=useAsync(async()=>await B.getEntityFacets({facets:["kind"]}).then(Kt=>{var Vt;return((Vt=Kt.facets.kind)==null?void 0:Vt.map(yn=>yn.value).sort())||[]}),[B]);return{loading:Ce,error:H,allKinds:je!=null?je:[]}}function Lt(B,H,Ce){let je=B;return H&&(je=je.filter(Kt=>H.some(Vt=>Vt.toLocaleLowerCase("en-US")===Kt.toLocaleLowerCase("en-US")))),Ce&&!B.some(Kt=>Kt.toLocaleLowerCase("en-US")===Ce.toLocaleLowerCase("en-US"))&&(je=je.concat([Ce])),je.sort().reduce((Kt,Vt)=>(Kt[Vt.toLocaleLowerCase("en-US")]=Vt,Kt),{})}const de=(0,E.Z)(B=>(0,p.Z)({root:{...B.typography.h4}}));function re(B){var H,Ce;const{initialFilter:je="component",allowedKinds:Tt}=B,Kt=de(),{allKinds:Vt}=pt(),{filters:yn,updateFilters:Rn,queryParameters:{kind:un}}=useEntityList(),Vn=useMemo(()=>[un].flat()[0],[un]),[xn,Yn]=useState((Ce=Vn!=null?Vn:(H=yn.kind)==null?void 0:H.value)!=null?Ce:je);useEffect(()=>{Vn&&Yn(Vn)},[Vn]),useEffect(()=>{var Xn,Jn;(Xn=yn.kind)!=null&&Xn.value&&Yn((Jn=yn.kind)==null?void 0:Jn.value)},[yn.kind]),useEffect(()=>{Rn({kind:xn?new EntityKindFilter(xn):void 0})},[xn,Rn]);const Fn=Lt(Vt,Tt,xn);return React.createElement(Select,{input:React.createElement(InputBase,null),value:xn.toLocaleLowerCase("en-US"),onChange:Xn=>Yn(Xn.target.value),classes:Kt},Object.keys(Fn).map(Xn=>React.createElement(MenuItem,{value:Xn,key:Xn},`${pluralize(Fn[Xn])}`)))}const A=Object.freeze({createNameColumn(B){function H(Ce){var je;return((je=Ce.metadata)==null?void 0:je.title)||(0,t.$3)(Ce,{defaultKind:B==null?void 0:B.defaultKind})}return{title:"Name",field:"resolved.name",highlight:!0,customSort({entity:Ce},{entity:je}){return H(Ce).localeCompare(H(je))},render:({entity:Ce})=>{var je;return O.createElement(t.dx,{entityRef:Ce,defaultKind:(B==null?void 0:B.defaultKind)||"Component",title:(je=Ce.metadata)==null?void 0:je.title})}}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:B})=>O.createElement(t.rI,{entityRefs:B.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:B})=>O.createElement(t.rI,{entityRefs:B.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:B})=>{var H,Ce;return O.createElement(O.Fragment,null,(((H=B==null?void 0:B.spec)==null?void 0:H.targets)||((Ce=B==null?void 0:B.spec)==null?void 0:Ce.target))&&O.createElement(c.Or,{text:(B.spec.targets||[B.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:B})=>O.createElement(c.Or,{text:B.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:B})=>O.createElement(O.Fragment,null,B.metadata.tags&&B.metadata.tags.map(H=>O.createElement(S.Z,{key:H,label:H,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(B){return{title:"Title",field:"entity.metadata.title",hidden:B==null?void 0:B.hidden,searchable:!0}},createLabelColumn(B,H){return{title:(H==null?void 0:H.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:Ce})=>{var je;const Tt=(je=Ce.metadata)==null?void 0:je.labels,Kt=Tt&&Tt[B]||(H==null?void 0:H.defaultValue);return O.createElement(O.Fragment,null,Kt&&O.createElement(S.Z,{key:Kt,label:Kt,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}}),j=(0,ee.Z)({root:{color:"#f3ba37"}})(Ge.Z),Q=(B,H)=>{const Ce=je=>je.metadata.title||(0,t.$3)(je,{defaultKind:"Component"});return Ce(B).localeCompare(Ce(H))},me=B=>{var H,Ce,je;const{columns:Tt,actions:Kt,tableOptions:Vt,subtitle:yn,emptyContent:Rn}=B,{isStarredEntity:un,toggleStarredEntity:Vn}=(0,t.CR)(),{loading:xn,error:Yn,entities:Fn,filters:Xn}=(0,t.wp)(),Jn=(0,O.useMemo)(()=>{var o;return[A.createTitleColumn({hidden:!0}),A.createNameColumn({defaultKind:(o=Xn.kind)==null?void 0:o.value}),...i(),A.createMetadataDescriptionColumn(),A.createTagsColumn()];function i(){var g;const M=[A.createSystemColumn(),A.createOwnerColumn(),A.createSpecTypeColumn(),A.createSpecLifecycleColumn()];switch((g=Xn.kind)==null?void 0:g.value){case"user":return[];case"domain":case"system":return[A.createOwnerColumn()];case"group":case"template":return[A.createSpecTypeColumn()];case"location":return[A.createSpecTypeColumn(),A.createSpecTargetsColumn()];default:return Fn.every(ve=>ve.metadata.namespace==="default")?M:[...M,A.createNamespaceColumn()]}}},[(H=Xn.kind)==null?void 0:H.value,Fn]),ur=Xn.type===void 0,gr=(0,m.capitalize)((je=(Ce=Xn.user)==null?void 0:Ce.value)!=null?je:"all");if(Yn)return O.createElement("div",null,O.createElement(c.GB,{severity:"error",title:"Could not fetch catalog entities."},O.createElement(c.Oi,{language:"text",text:Yn.toString()})));const dr=[({entity:o})=>{var i;const g=(i=o.metadata.annotations)==null?void 0:i[u.l2],M="View";return{icon:()=>O.createElement(O.Fragment,null,O.createElement(h.Z,{variant:"srOnly"},M),O.createElement(Pe.Z,{fontSize:"small"})),tooltip:M,disabled:!g,onClick:()=>{g&&window.open(g,"_blank")}}},({entity:o})=>{var i;const g=(i=o.metadata.annotations)==null?void 0:i[u.Tf],M="Edit";return{icon:()=>O.createElement(O.Fragment,null,O.createElement(h.Z,{variant:"srOnly"},M),O.createElement(xe.Z,{fontSize:"small"})),tooltip:M,disabled:!g,onClick:()=>{g&&window.open(g,"_blank")}}},({entity:o})=>{const i=un(o),g=i?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>O.createElement(O.Fragment,null,O.createElement(h.Z,{variant:"srOnly"},g),i?O.createElement(j,null):O.createElement(Ct.Z,null)),tooltip:g,onClick:()=>Vn(o)}}],ir=Fn.sort(Q).map(o=>{const i=(0,t.hF)(o,u.cz,{kind:"system"}),g=(0,t.hF)(o,u.S4);return{entity:o,resolved:{name:(0,t.$3)(o,{defaultKind:"Component"}),ownedByRelationsTitle:g.map(M=>(0,t.$3)(M,{defaultKind:"group"})).join(", "),ownedByRelations:g,partOfSystemRelationTitle:i.map(M=>(0,t.$3)(M,{defaultKind:"system"})).join(", "),partOfSystemRelations:i}}}),nr=(Tt||Jn).find(o=>o.title==="Type");nr&&(nr.hidden=!ur);const W=ir.length>20;return O.createElement(c.iA,{isLoading:xn,columns:Tt||Jn,options:{paging:W,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!xn,padding:"dense",pageSizeOptions:[20,50,100],...Vt},title:`${gr} (${Fn.length})`,data:ir,actions:Kt||dr,subtitle:yn,emptyContent:Rn})};me.columns=A;function We(B){var H;const{unregisterEntityOptions:Ce,isUnregisterAllowed:je,onUnregisterEntity:Tt,onClose:Kt}=B,Vt=typeof(Ce==null?void 0:Ce.disableUnregister)=="boolean",yn=(H=!je||(Vt?!!(Ce!=null&&Ce.disableUnregister):(Ce==null?void 0:Ce.disableUnregister)==="disable"))!=null?H:!1;let Rn=O.createElement(O.Fragment,null);return(Ce==null?void 0:Ce.disableUnregister)!=="hidden"&&(Rn=O.createElement(Z.Z,{onClick:()=>{Kt(),Tt()},disabled:yn},O.createElement(F.Z,null,O.createElement(At.Z,{fontSize:"small"})),O.createElement(Me.Z,{primary:"Unregister entity"}))),O.createElement(O.Fragment,null,Rn)}const Ke=(0,E.Z)(B=>({button:{color:B.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function He(B){const{UNSTABLE_extraContextMenuItems:H,UNSTABLE_contextMenuOptions:Ce,onUnregisterEntity:je,onInspectEntity:Tt}=B,[Kt,Vt]=(0,O.useState)(),yn=Ke(),un=(0,Je.N)(ct.j8).allowed,Vn=Jn=>{Vt(Jn.currentTarget)},xn=()=>{Vt(void 0)},Yn=(0,_.h_)(_.$v),Fn=(0,O.useCallback)(()=>{window.navigator.clipboard.writeText(window.location.toString()).then(()=>Yn.post({message:"Copied!",severity:"info",display:"transient"}))},[Yn]),Xn=H&&[...H.map(Jn=>O.createElement(Z.Z,{key:Jn.title,onClick:()=>{xn(),Jn.onClick()}},O.createElement(F.Z,null,O.createElement(Jn.Icon,{fontSize:"small"})),O.createElement(Me.Z,{primary:Jn.title}))),O.createElement(C.Z,{key:"the divider is here!"})];return O.createElement(O.Fragment,null,O.createElement(Ee.ZP,{title:"More",arrow:!0},O.createElement(T.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Kt,role:"button",onClick:Vn,"data-testid":"menu-button",className:yn.button,id:"long-menu"},O.createElement(oe.Z,null))),O.createElement(Xe.ZP,{open:Boolean(Kt),onClose:xn,anchorEl:Kt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},O.createElement(Bt.Z,null,Xn,O.createElement(We,{unregisterEntityOptions:Ce,isUnregisterAllowed:un,onUnregisterEntity:je,onClose:xn}),O.createElement(Z.Z,{onClick:()=>{xn(),Tt()}},O.createElement(F.Z,null,O.createElement(q.Z,{fontSize:"small"})),O.createElement(Me.Z,{primary:"Inspect entity"})),O.createElement(Z.Z,{onClick:()=>{xn(),Fn()}},O.createElement(F.Z,null,O.createElement(Ae.Z,{fontSize:"small"})),O.createElement(Me.Z,{primary:"Copy entity URL"})))))}const mt="plugin.catalog.entityLayoutRoute",se=()=>null;(0,_.R5)(se,mt,!0),(0,_.R5)(se,"core.gatherMountPoints",!0);function pe(B){const{entity:H,title:Ce}=B;return O.createElement(L.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},O.createElement(L.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},Ce),H&&O.createElement(t.LH,{entity:H}))}function ye(B,H,Ce,je){var Tt,Kt,Vt,yn,Rn;const un=(Tt=B!=null?B:je==null?void 0:je.kind)!=null?Tt:"",Vn=(Kt=H!=null?H:je==null?void 0:je.metadata.namespace)!=null?Kt:"";return{headerTitle:`${(Rn=(yn=(Vt=je==null?void 0:je.metadata.title)!=null?Vt:Ce)!=null?yn:je==null?void 0:je.metadata.name)!=null?Rn:""}${Vn&&Vn!==u.zG?` in ${Vn}`:""}`,headerType:(()=>{let Yn=un.toLocaleLowerCase("en-US");return je&&je.spec&&"type"in je.spec&&(Yn+=" \u2014 ",Yn+=je.spec.type.toLocaleLowerCase("en-US")),Yn})()}}function we(B){var H;const{entity:Ce}=B,je=(0,t.hF)(Ce,u.S4);return O.createElement(O.Fragment,null,je.length>0&&O.createElement(c.i9,{label:"Owner",value:O.createElement(t.rI,{entityRefs:je,defaultKind:"Group",color:"inherit"})}),((H=Ce.spec)==null?void 0:H.lifecycle)&&O.createElement(c.i9,{label:"Lifecycle",value:Ce.spec.lifecycle}))}const nt=B=>{var H,Ce,je;const{UNSTABLE_extraContextMenuItems:Tt,UNSTABLE_contextMenuOptions:Kt,children:Vt,NotFoundComponent:yn}=B,{kind:Rn,namespace:un,name:Vn}=(0,_.Oi)(t.wi),{entity:xn,loading:Yn,error:Fn}=(0,t.ce)(),Xn=(0,It.TH)(),Jn=(0,_.vJ)(Vt,g=>g.selectByComponentData({key:mt,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:M})=>{if(xn){if(M.if&&!M.if(xn))return[]}else return[];return[{path:M.path,title:M.title,children:M.children,tabProps:M.tabProps}]}),[xn]),{headerTitle:ur,headerType:gr}=ye(Rn,un,Vn,xn),[dr,ir]=(0,O.useState)(!1),[nr,W]=(0,O.useState)(!1),o=(0,It.s0)(),i=async()=>{ir(!1),W(!1),o("/")};return(0,O.useEffect)(()=>{ir(!1),W(!1)},[Xn.pathname]),O.createElement(c.T3,{themeId:(je=(Ce=(H=xn==null?void 0:xn.spec)==null?void 0:H.type)==null?void 0:Ce.toString())!=null?je:"home"},O.createElement(c.h4,{title:O.createElement(pe,{title:ur,entity:xn}),pageTitleOverride:ur,type:gr},xn&&O.createElement(O.Fragment,null,O.createElement(we,{entity:xn}),O.createElement(He,{UNSTABLE_extraContextMenuItems:Tt,UNSTABLE_contextMenuOptions:Kt,onUnregisterEntity:()=>ir(!0),onInspectEntity:()=>W(!0)}))),Yn&&O.createElement(c.Ex,null),xn&&O.createElement(c.tn,{routes:Jn}),Fn&&O.createElement(c.VY,null,O.createElement(ht.Z,{severity:"error"},Fn.toString())),!Yn&&!Fn&&!xn&&O.createElement(c.VY,null,yn||O.createElement(c.GB,{title:"Entity not found"},"There is no ",Rn," with the requested"," ",O.createElement(c.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),O.createElement(t.pp,{open:dr,entity:xn,onConfirm:i,onClose:()=>ir(!1)}),O.createElement(t.U_,{open:nr,entity:xn,onClose:()=>W(!1)}))};nt.Route=se;function $t(B){const{open:H,onClose:Ce,onConfirm:je,entity:Tt}=B,[Kt,Vt]=(0,O.useState)(!1),yn=(0,_.h_)(t.Ah),Rn=(0,_.h_)(_.$v),un=async()=>{Vt(!0);try{const Vn=Tt.metadata.uid;await yn.removeEntityByUid(Vn),je()}catch(Vn){(0,qt.BD)(Vn),Rn.post({message:Vn.message})}finally{Vt(!1)}};return O.createElement(st.Z,{open:H,onClose:Ce},O.createElement(jt.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),O.createElement(Zt.Z,null,O.createElement(J.Z,{variant:"contained",color:"secondary",disabled:Kt,onClick:un},"Delete"),O.createElement(J.Z,{onClick:Ce,color:"primary"},"Cancel")))}function Ut(B){var H,Ce;return((Ce=(H=B==null?void 0:B.metadata)==null?void 0:H.annotations)==null?void 0:Ce["backstage.io/orphan"])==="true"}function wt(){const B=(0,It.s0)(),H=(0,_.tg)(bn),[Ce,je]=(0,O.useState)(!1),{entity:Tt}=(0,t.X2)(),Kt=async()=>{je(!1),B(H())};return O.createElement(O.Fragment,null,O.createElement(ht.Z,{severity:"warning",onClick:()=>je(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),O.createElement($t,{open:Ce,entity:Tt,onConfirm:Kt,onClose:()=>je(!1)}))}const sn=B=>B.error&&B.level==="error"&&B.type===zt.mk;async function vn(B,H){return{items:(await H.getEntityAncestors({entityRef:B})).items.map(Tt=>{var Kt,Vt;return{errors:((Vt=(Kt=Tt.entity.status)==null?void 0:Kt.items)!=null?Vt:[]).filter(sn).map(un=>un.error).filter(un=>Boolean(un)),entity:Tt.entity}}).filter(Tt=>Tt.errors.length>0)}}async function Le(B,H){const Ce=H.apis.get(t.Ah);if(!Ce)throw new Error(`No implementation available for ${t.Ah}`);return(await vn((0,u.eE)(B),Ce)).items.length>0}function $e(){const{entity:B}=(0,t.X2)(),H=(0,u.eE)(B),Ce=(0,_.h_)(t.Ah),{loading:je,error:Tt,value:Kt}=(0,N.default)(async()=>vn(H,Ce),[H,Ce]);return Tt?O.createElement(L.Z,{mb:1},O.createElement(c.Gk,{error:Tt})):je||!Kt?null:O.createElement(O.Fragment,null,Kt.items.map((Vt,yn)=>O.createElement(L.Z,{key:yn,mb:1},(0,u.eE)(B)!==(0,u.eE)(Vt.entity)&&O.createElement(L.Z,{p:1},"The error below originates from"," ",O.createElement(t.dx,{entityRef:Vt.entity})),Vt.errors.map((Rn,un)=>O.createElement(c.Gk,{key:un,error:Rn})))))}const be="core.backstage.entitySwitch",Qe=B=>null;(0,_.R5)(Qe,be,!0);const lt=B=>{var H,Ce;const{entity:je,loading:Tt}=(0,t.ce)(),Kt=(0,_.I_)(),Vt=(0,_.vJ)(B.children,Rn=>Rn.selectByComponentData({key:be,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(un=>{if(Tt)return[];const{if:Vn,children:xn}=un.props;return je?[{if:Vn==null?void 0:Vn(je,{apis:Kt}),children:xn}]:[{if:Vn===void 0,children:xn}]}),[Kt,je,Tt]);if(Vt.some(Rn=>typeof Rn.if=="object"&&"then"in Rn.if))return O.createElement(kt,{results:Vt,renderMultipleMatches:B.renderMultipleMatches});if(B.renderMultipleMatches==="all"){const Rn=Vt.filter(un=>un.if).map(un=>un.children);return Rn.length===0?Mt(Vt):O.createElement(O.Fragment,null,Rn)}return(Ce=(H=Vt.find(Rn=>Rn.if))==null?void 0:H.children)!=null?Ce:Mt(Vt)};function kt({results:B,renderMultipleMatches:H}){const{loading:Ce,value:je}=(0,N.default)(async()=>{var Tt;const Kt=B.map(async({if:Vt,children:yn})=>{try{if(await Vt)return yn}catch{}return null});if(H==="all"){const Vt=(await Promise.all(Kt)).filter(Boolean);return Vt.length===0?Mt(B):O.createElement(O.Fragment,null,Vt)}return(Tt=(await Promise.all(Kt)).find(Boolean))!=null?Tt:Mt(B)},[B]);return Ce||!je?null:je}function Mt(B){var H,Ce;return(Ce=(H=B.filter(je=>je.if===void 0)[0])==null?void 0:H.children)!=null?Ce:null}lt.Case=Qe;function nn(B,H){return Boolean(B&&typeof B=="string"&&(B==null?void 0:B.toLocaleLowerCase("en-US"))===(H==null?void 0:H.toLocaleLowerCase("en-US")))}function gn(B,H){return typeof H=="string"?nn(B,H):H.length===0||H.some(Ce=>nn(B,Ce))}function An(B){return Un({kind:B})}function Pn(B){return Un({kind:"component",type:B})}function Bn(B){return Un({kind:"resource",type:B})}function Un(B){return H=>{var Ce;return!(B.kind&&!gn(H.kind,B.kind)||B.type&&!gn((Ce=H.spec)==null?void 0:Ce.type,B.type))}}function zn(B){return H=>{var Ce;return gn((Ce=H.metadata)==null?void 0:Ce.namespace,B)}}const Nn=null,Ve=t._i.Filters,_e=t._i.Content,Ne=`metadata:
  name: example
  labels:
    javaVersion: 1.2.3`,Te=(0,E.Z)(B=>({code:{borderRadius:6,margin:`${B.spacing(2)}px 0px`,background:B.palette.type==="dark"?"#444":B.palette.common.white}}),{name:"PluginCatalogEntityLabelsEmptyState"});function ut(){const B=Te();return O.createElement(O.Fragment,null,O.createElement(h.Z,{variant:"body1"},"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:"),O.createElement("div",{className:B.code},O.createElement(c.Oi,{text:Ne,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6],customStyle:{background:"inherit",fontSize:"115%"}})),O.createElement(J.Z,{variant:"contained",color:"primary",target:"_blank",href:"https://backstage.io/docs/features/software-catalog/descriptor-format#labels-optional"},"Read more"))}const gt=(0,E.Z)(B=>({key:{fontWeight:"bold"}})),Et=B=>{var H;const{variant:Ce,title:je}=B,{entity:Tt}=(0,t.X2)(),Kt=gt(),Vt=[{render:Rn=>O.createElement(h.Z,{className:Kt.key,variant:"body2"},Rn.key)},{field:"value"}],yn=(H=Tt==null?void 0:Tt.metadata)==null?void 0:H.labels;return O.createElement(c.rJ,{title:je||"Labels",variant:Ce},!yn||Object.keys(yn).length===0?O.createElement(ut,null):O.createElement(c.iA,{columns:Vt,data:Object.keys(yn).map(Rn=>({key:Rn,value:yn[Rn]})),options:{search:!1,showTitle:!0,loadingType:"linear",header:!1,padding:"dense",pageSize:5,toolbar:!1,paging:Object.keys(yn).length>5}}))};function at(B){var H,Ce;return(H=B==null?void 0:B.metadata)!=null&&H.labels?Object.keys((Ce=B==null?void 0:B.metadata)==null?void 0:Ce.labels).some(Boolean):!1}const Dt=(0,_.rx)({id:"catalog",apis:[(0,_.ni)({api:t.Ah,deps:{discoveryApi:_.NW,fetchApi:_.gP},factory:({discoveryApi:B,fetchApi:H})=>new zt.MS({discoveryApi:B,fetchApi:H})}),(0,_.ni)({api:t.p3,deps:{storageApi:_.E6},factory:({storageApi:B})=>new dt({storageApi:B})})],routes:{catalogIndex:bn,catalogEntity:t.wi},externalRoutes:{createComponent:hn,viewTechDoc:dn},__experimentalConfigure(B){return{...{createButtonTitle:"Create"},...B}}}),en=Dt.provide((0,_.P4)({name:"CatalogIndexPage",component:()=>e.e(4107).then(e.bind(e,64107)).then(B=>B.CatalogPage),mountPoint:bn})),fn=Dt.provide((0,_.P4)({name:"CatalogEntityPage",component:()=>e.e(9958).then(e.bind(e,39958)).then(B=>B.CatalogEntityPage),mountPoint:t.wi})),Cn=Dt.provide((0,_.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(642).then(e.bind(e,90642)).then(B=>B.AboutCard)}})),Qn=Dt.provide((0,_.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(3202).then(e.bind(e,73202)).then(B=>B.EntityLinksCard)}})),er=Dt.provide((0,_.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(1972).then(e.bind(e,41972)).then(B=>B.EntityLabelsCard)}})),Zn=Dt.provide((0,_.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(8737).then(e.bind(e,78737)).then(B=>B.HasSystemsCard)}})),jn=Dt.provide((0,_.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(3355).then(e.bind(e,23355)).then(B=>B.HasComponentsCard)}})),tr=Dt.provide((0,_.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(9507).then(e.bind(e,9507)).then(B=>B.HasSubcomponentsCard)}})),D=Dt.provide((0,_.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(1215).then(e.bind(e,71215)).then(B=>B.HasResourcesCard)}})),I=Dt.provide((0,_.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(4170).then(e.bind(e,34170)).then(B=>B.DependsOnComponentsCard)}})),G=Dt.provide((0,_.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(9371).then(e.bind(e,79371)).then(B=>B.DependencyOfComponentsCard)}})),ie=Dt.provide((0,_.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(1602).then(e.bind(e,11602)).then(B=>B.DependsOnResourcesCard)}})),Ie=Dt.provide((0,_.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(7867).then(e.bind(e,47867)).then(B=>B.RelatedEntitiesCard)}})),qe=Dt.provide((0,Be.E5)({name:"CatalogSearchResultListItem",component:()=>e.e(638).then(e.bind(e,40638)).then(B=>B.CatalogSearchResultListItem),predicate:B=>B.type==="software-catalog"}))},16673:function(Rt,d,e){e.d(d,{BL:function(){return n.o},Cy:function(){return n.m},Eq:function(){return n.u},Es:function(){return n.C},FZ:function(){return n.r},Hz:function(){return n.t},Kf:function(){return n.F},PA:function(){return n.v},Tu:function(){return n.e},_l:function(){return n.z},bM:function(){return n.g},dN:function(){return n.d},f2:function(){return n.p},im:function(){return n.x},jF:function(){return n.j},mr:function(){return n.w},o6:function(){return n.k},oU:function(){return n.n},p$:function(){return n.y},rR:function(){return n.f},yf:function(){return n.l}});var n=e(92449),l=e(82394),u=e.n(l),m=e(34520),a=e(76635),c=e.n(a),_=e(80236),b=e(30705),t=e(49462),E=e(73495),h=e(2784),$=e(19928),L=e.n($),k=e(52963),z=e(75650),y=e(32272),S=e(88285),x=e(92573)},42214:function(Rt,d,e){e.d(d,{IJ:function(){return tt},Oz:function(){return Lt},Q3:function(){return V},fX:function(){return Ct},i4:function(){return ot}});var n=e(30705),l=e(1854),u=e(89393),m=e(2784),a=e(73495),c=e(39857),_=e(73557),b=e(79692),t=e(27616),E=e(8284),h=e(90436),$=e(4614),L=e(80030),k=e(69087),z=e(35111),y=e(14498),S=e(89571),x=e(15584),f=e(49378),T=e(70660),C=e(91256),P=e(37390),p=e(95544),Z=e(67358),F=e(27556),Me=e(97485),Ee=e(61837),Xe=e(77277),Bt=e(38016),st=e(69001),jt=e(26228),Zt=e(80236),J=e(64279),an=e(30254),Re=e(43266),xe=e(58838),O=e(77446),Ze=e(26883);const ce=(0,n.T0)({id:"plugin.githubactions.service"});class R{constructor(re){this.configApi=re.configApi,this.githubAuthApi=re.githubAuthApi}async getOctokit(re){var A;const j=await this.githubAuthApi.getAccessToken(["repo"]),me=(0,l.MY)((A=this.configApi.getOptionalConfigArray("integrations.github"))!=null?A:[]).find(Ke=>Ke.host===re),We=me==null?void 0:me.apiBaseUrl;return new u.v({auth:j,baseUrl:We})}async reRunWorkflow(re){const{hostname:A,owner:j,repo:Q,runId:me}=re;return(await this.getOctokit(A)).actions.reRunWorkflow({owner:j,repo:Q,run_id:me})}async listWorkflowRuns(re){const{hostname:A,owner:j,repo:Q,pageSize:me=100,page:We=0,branch:Ke}=re;return(await(await this.getOctokit(A)).actions.listWorkflowRunsForRepo({owner:j,repo:Q,per_page:me,page:We,...Ke?{branch:Ke}:{}})).data}async getWorkflow(re){const{hostname:A,owner:j,repo:Q,id:me}=re;return(await(await this.getOctokit(A)).actions.getWorkflow({owner:j,repo:Q,workflow_id:me})).data}async getWorkflowRun(re){const{hostname:A,owner:j,repo:Q,id:me}=re;return(await(await this.getOctokit(A)).actions.getWorkflowRun({owner:j,repo:Q,run_id:me})).data}async listJobsForWorkflowRun(re){const{hostname:A,owner:j,repo:Q,id:me,pageSize:We=100,page:Ke=0}=re;return(await(await this.getOctokit(A)).actions.listJobsForWorkflowRun({owner:j,repo:Q,run_id:me,per_page:We,page:Ke})).data}async downloadJobLogsForWorkflowRun(re){const{hostname:A,owner:j,repo:Q,runId:me}=re;return(await(await this.getOctokit(A)).actions.downloadJobLogsForWorkflowRun({owner:j,repo:Q,job_id:me})).data}}var N=(de=>(de[de.success=0]="success",de[de.failure=1]="failure",de[de.pending=2]="pending",de[de.running=3]="running",de))(N||{});const ee=(0,n.NT)({id:"github-actions"}),Pe=(0,n.Rz)({id:"github-actions/build",path:"/:id",parent:ee}),Ge=(0,n.rx)({id:"github-actions",apis:[(0,n.ni)({api:ce,deps:{configApi:n.Ds,githubAuthApi:n.F4},factory:({configApi:de,githubAuthApi:re})=>new R({configApi:de,githubAuthApi:re})})],routes:{entityContent:ee}}),Ct=Ge.provide((0,n.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return ue}).then(de=>de.Router),mountPoint:ee})),ht=Ge.provide((0,n.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(5895).then(e.bind(e,5895)).then(de=>de.LatestWorkflowRunCard)}})),It=Ge.provide((0,n.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(5895).then(e.bind(e,5895)).then(de=>de.LatestWorkflowsForBranchCard)}})),q=Ge.provide((0,n.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(5895).then(e.bind(e,5895)).then(de=>de.RecentWorkflowRunsCard)}})),oe="github.com/project-slug",Ae=de=>{var re,A;return(A=(re=de==null?void 0:de.metadata.annotations)==null?void 0:re[oe])!=null?A:""},Je=({status:de,conclusion:re})=>{if(de===void 0)return null;switch(de.toLocaleLowerCase("en-US")){case"queued":return m.createElement(m.Fragment,null,m.createElement(Zt.wA,null)," Queued");case"in_progress":return m.createElement(m.Fragment,null,m.createElement(Zt.VC,null)," In progress");case"completed":switch(re==null?void 0:re.toLocaleLowerCase("en-US")){case"skipped":return m.createElement(m.Fragment,null,m.createElement(Zt.dh,null)," Aborted");case"timed_out":return m.createElement(m.Fragment,null,m.createElement(Zt.Pd,null)," Timed out");case"failure":return m.createElement(m.Fragment,null,m.createElement(Zt.vK,null)," Error");default:return m.createElement(m.Fragment,null,m.createElement(Zt.Kq,null)," Completed")}default:return m.createElement(m.Fragment,null,m.createElement(Zt.wA,null)," Pending")}},ct=({hostname:de,owner:re,repo:A})=>{const j=(0,n.h_)(ce),{id:Q}=(0,n.Oi)(Pe);return(0,J.default)(async()=>{if(!A||!re)throw new Error("No repo/owner provided");const me=await j.listJobsForWorkflowRun({hostname:de,owner:re,repo:A,id:parseInt(Q,10)});return{total_count:me.total_count,jobs:me.jobs.map(We=>{var Ke,He,mt,se;return{html_url:(Ke=We.html_url)!=null?Ke:void 0,status:We.status,conclusion:(He=We.conclusion)!=null?He:void 0,started_at:We.started_at,completed_at:(mt=We.completed_at)!=null?mt:void 0,id:We.id,name:We.name,steps:(se=We.steps)==null?void 0:se.map(pe=>{var ye,we,nt;return{name:pe.name,status:pe.status,conclusion:(ye=pe.conclusion)!=null?ye:void 0,number:pe.number,started_at:(we=pe.started_at)!=null?we:void 0,completed_at:(nt=pe.completed_at)!=null?nt:void 0}})}})}},[A,re,Q])},At=({hostname:de,owner:re,repo:A})=>{const j=(0,n.h_)(ce),{id:Q}=(0,n.Oi)(Pe);return(0,J.default)(async()=>A&&re?j.getWorkflowRun({hostname:de,owner:re,repo:A,id:parseInt(Q,10)}):Promise.reject(new Error("No repo/owner provided")),[A,re,Q])},qt=({hostname:de,owner:re,repo:A,id:j})=>{const Q=(0,n.h_)(ce);return(0,J.default)(async()=>A&&re?Q.downloadJobLogsForWorkflowRun({hostname:de,owner:re,repo:A,runId:j}):Promise.reject("No repo/owner provided"),[A,re,j])},zt=(0,b.Z)(de=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:de.palette.background.default}})),Be=({entity:de,runId:re,inProgress:A})=>{var j;const Q=(0,n.h_)(n.Ds),me=zt(),We=Ae(de),Ke=(0,l.MY)((j=Q.getOptionalConfigArray("integrations.github"))!=null?j:[])[0].host,[He,mt]=We&&We.split("/")||[],se=qt({hostname:Ke,owner:He,repo:mt,id:re}),pe=se.value?String(se.value):void 0,[ye,we]=m.useState(!1),nt=()=>{we(!0)},$t=()=>{we(!1)};return m.createElement(t.Z,{TransitionProps:{unmountOnExit:!0},disabled:A},m.createElement(E.Z,{expandIcon:m.createElement(Bt.Z,null),IconButtonProps:{className:me.button}},m.createElement(h.Z,{variant:"button"},se.loading?m.createElement($.Z,null):"Job Log"),m.createElement(L.ZP,{title:"Open Log",TransitionComponent:k.Z,arrow:!0},m.createElement(an.Z,{onClick:Ut=>{Ut.stopPropagation(),nt()},style:{marginLeft:"auto"}})),m.createElement(z.Z,{className:me.modal,onClick:Ut=>Ut.stopPropagation(),open:ye,onClose:$t},m.createElement(y.Z,{in:ye},m.createElement("div",{className:me.modalLogContainer},m.createElement(Zt.nU,{text:pe!=null?pe:"No Values Found",classes:{root:me.log}}))))),pe&&m.createElement("div",{className:me.normalLogContainer},m.createElement(Zt.nU,{text:pe,classes:{root:me.log}})))},Pt=(0,b.Z)(de=>({root:{maxWidth:720,margin:de.spacing(2)},title:{padding:de.spacing(1,0,2,0)},table:{padding:de.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),dt=(de,re)=>{if(!de||!re)return"";const A=jt.ou.fromISO(de);return(re?jt.ou.fromISO(re):jt.ou.now()).diff(A).toFormat("m 'minutes' s 'seconds'")},hn=({step:de})=>{var re;return m.createElement(S.Z,null,m.createElement(x.Z,null,m.createElement(f.Z,{primary:de.name,secondary:dt(de.started_at,de.completed_at)})),m.createElement(x.Z,null,m.createElement(Je,{status:de.status.toLocaleUpperCase("en-US"),conclusion:(re=de.conclusion)==null?void 0:re.toLocaleUpperCase("en-US")})))},dn=({job:de,className:re,entity:A})=>{var j;const Q=Pt();return m.createElement(t.Z,{TransitionProps:{unmountOnExit:!0},className:re},m.createElement(E.Z,{expandIcon:m.createElement(Bt.Z,null),IconButtonProps:{className:Q.button}},m.createElement(h.Z,{variant:"button"},de.name," (",dt(de.started_at,de.completed_at),")")),m.createElement(T.Z,{className:Q.accordionDetails},m.createElement(C.Z,null,m.createElement(P.Z,null,(j=de.steps)==null?void 0:j.map(me=>m.createElement(hn,{key:me.number,step:me}))))),de.status==="queued"||de.status==="in_progress"?m.createElement(Be,{runId:de.id,inProgress:!0,entity:A}):m.createElement(Be,{runId:de.id,inProgress:!1,entity:A}))},bn=({jobs:de,entity:re})=>{const A=Pt();return m.createElement(p.Z,null,de&&de.total_count>0&&de.jobs.map(j=>m.createElement(dn,{key:j.id,job:j,className:j.status!=="success"?A.failed:A.success,entity:re})))},it=({entity:de})=>{var re,A,j,Q,me,We,Ke,He,mt,se,pe,ye,we,nt,$t,Ut;const wt=(0,n.h_)(n.Ds),sn=Ae(de),vn=(0,l.MY)((re=wt.getOptionalConfigArray("integrations.github"))!=null?re:[])[0].host,[Le,$e]=sn&&sn.split("/")||[],be=At({hostname:vn,owner:Le,repo:$e}),Qe=ct({hostname:vn,owner:Le,repo:$e}),lt=Pt();return be.error&&be.error.message?m.createElement(h.Z,{variant:"h6",color:"error"},"Failed to load build, ",be.error.message):be.loading?m.createElement(Z.Z,null):m.createElement("div",{className:lt.root},m.createElement(p.Z,{mb:3},m.createElement(Zt.Oo,{"aria-label":"breadcrumb"},m.createElement(Zt.rU,{to:".."},"Workflow runs"),m.createElement(h.Z,null,"Workflow run details"))),m.createElement(C.Z,{component:F.Z,className:lt.table},m.createElement(P.Z,null,m.createElement(Me.Z,null,m.createElement(S.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Branch")),m.createElement(x.Z,null,(A=be.value)==null?void 0:A.head_branch)),m.createElement(S.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Message")),m.createElement(x.Z,null,(Q=(j=be.value)==null?void 0:j.head_commit)==null?void 0:Q.message)),m.createElement(S.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Commit ID")),m.createElement(x.Z,null,(We=(me=be.value)==null?void 0:me.head_commit)==null?void 0:We.id)),m.createElement(S.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Workflow")),m.createElement(x.Z,null,(Ke=be.value)==null?void 0:Ke.name)),m.createElement(S.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Status")),m.createElement(x.Z,null,m.createElement(Je,{status:((He=be.value)==null?void 0:He.status)||void 0,conclusion:((mt=be.value)==null?void 0:mt.conclusion)||void 0}))),m.createElement(S.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Author")),m.createElement(x.Z,null,`${(ye=(pe=(se=be.value)==null?void 0:se.head_commit)==null?void 0:pe.author)==null?void 0:ye.name} (${($t=(nt=(we=be.value)==null?void 0:we.head_commit)==null?void 0:nt.author)==null?void 0:$t.email})`)),m.createElement(S.Z,null,m.createElement(x.Z,null,m.createElement(h.Z,{noWrap:!0},"Links")),m.createElement(x.Z,null,((Ut=be.value)==null?void 0:Ut.html_url)&&m.createElement(Zt.rU,{to:be.value.html_url},"Workflow runs on GitHub"," ",m.createElement(st.Z,{className:lt.externalLinkIcon})))),m.createElement(S.Z,null,m.createElement(x.Z,{colSpan:2},m.createElement(h.Z,{noWrap:!0},"Jobs"),Qe.loading?m.createElement($.Z,null):m.createElement(bn,{jobs:Qe.value,entity:de})))))))};function St({hostname:de,owner:re,repo:A,branch:j,initialPageSize:Q=5}){const me=(0,n.h_)(ce),We=(0,n.h_)(n.VE),[Ke,He]=(0,m.useState)(0),[mt,se]=(0,m.useState)(0),[pe,ye]=(0,m.useState)(Q),{loading:we,value:nt,retry:$t,error:Ut}=(0,O.Z)(async()=>{const wt=await me.listWorkflowRuns({hostname:de,owner:re,repo:A,pageSize:pe,page:mt+1,branch:j});return He(wt.total_count),wt.workflow_runs.map(sn=>{var vn,Le,$e,be,Qe,lt,kt,Mt,nn;return{workflowName:(vn=sn.name)!=null?vn:void 0,message:(Le=sn.head_commit)==null?void 0:Le.message,id:`${sn.id}`,onReRunClick:async()=>{try{await me.reRunWorkflow({hostname:de,owner:re,repo:A,runId:sn.id})}catch(gn){We.post(new Error(`Failed to rerun the workflow: ${gn.message}`))}},source:{branchName:($e=sn.head_branch)!=null?$e:void 0,commit:{hash:(be=sn.head_commit)==null?void 0:be.id,url:(kt=(Qe=sn.head_repository)==null?void 0:Qe.branches_url)==null?void 0:kt.replace("{/branch}",(lt=sn.head_branch)!=null?lt:"")}},status:(Mt=sn.status)!=null?Mt:void 0,conclusion:(nn=sn.conclusion)!=null?nn:void 0,url:sn.url,githubUrl:sn.html_url}})},[mt,pe,A,re]);return[{page:mt,pageSize:pe,loading:we,runs:nt,projectName:`${re}/${A}`,total:Ke,error:Ut},{runs:nt,setPage:se,setPageSize:ye,retry:$t}]}const En=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:de=>{const re=()=>{const A=(0,n.tg)(Pe);return m.createElement(Zt.rU,{component:c.rU,to:A({id:de.id})},de.message)};return m.createElement(re,null)}},{title:"Source",render:de=>{var re,A;return m.createElement(h.Z,{variant:"body2",noWrap:!0},m.createElement(h.Z,{paragraph:!0,variant:"body2"},(re=de.source)==null?void 0:re.branchName),m.createElement(h.Z,{paragraph:!0,variant:"body2"},(A=de.source)==null?void 0:A.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",width:"150px",render:de=>m.createElement(p.Z,{display:"flex",alignItems:"center"},m.createElement(Je,{status:de.status,conclusion:de.conclusion}))},{title:"Actions",render:de=>m.createElement(L.ZP,{title:"Rerun workflow"},m.createElement(Ee.Z,{onClick:de.onReRunClick},m.createElement(Re.Z,null))),width:"10%"}],ln=({projectName:de,loading:re,pageSize:A,page:j,retry:Q,runs:me,onChangePage:We,onChangePageSize:Ke,total:He})=>m.createElement(Zt.iA,{isLoading:re,options:{paging:!0,pageSize:A,padding:"dense"},totalCount:He,page:j,actions:[{icon:()=>m.createElement(Ze.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Q()}],data:me!=null?me:[],onPageChange:We,onRowsPerPageChange:Ke,style:{width:"100%"},title:m.createElement(p.Z,{display:"flex",alignItems:"center"},m.createElement(xe.Z,null),m.createElement(p.Z,{mr:1}),m.createElement(h.Z,{variant:"h6"},de)),columns:En}),fe=({entity:de,branch:re})=>{var A;const j=(0,n.h_)(n.Ds),Q=Ae(de),me=(0,l.MY)((A=j.getOptionalConfigArray("integrations.github"))!=null?A:[])[0].host,[We,Ke]=(Q!=null?Q:"/").split("/"),[{runs:He,...mt},{retry:se,setPage:pe,setPageSize:ye}]=St({hostname:me,owner:We,repo:Ke,branch:re}),we=me||"github.com";return!mt.loading&&!He?m.createElement(Zt.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:m.createElement(Xe.Z,{variant:"contained",color:"primary",href:`https://${we}/${Q}/actions/new`},"Create new Workflow")}):m.createElement(ln,{...mt,runs:He,loading:mt.loading,retry:se,onChangePageSize:ye,onChangePage:pe})},V=de=>{var re;return Boolean((re=de.metadata.annotations)==null?void 0:re[oe])};var ue=Object.freeze({__proto__:null,isGithubActionsAvailable:V,Router:()=>{const{entity:de}=(0,a.X2)();return V(de)?m.createElement(_.Z5,null,m.createElement(_.AW,{path:"/",element:m.createElement(fe,{entity:de})}),m.createElement(_.AW,{path:`${Pe.path}`,element:m.createElement(it,{entity:de})}),")"):m.createElement(Zt.sk,{annotation:oe})}});const ge=(0,b.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),Se=de=>{var re;const{error:A,loading:j,lastRun:Q,branch:me}=de,We=ge();return A?m.createElement(h.Z,null,"Couldn't fetch latest ",me," run"):j?m.createElement(Z.Z,null):m.createElement(Zt.xT,{metadata:{status:m.createElement(m.Fragment,null,m.createElement(Je,{status:Q.status,conclusion:Q.conclusion})),message:Q.message,url:m.createElement(Zt.rU,{to:(re=Q.githubUrl)!=null?re:""},"See more on GitHub"," ",m.createElement(st.Z,{className:We.externalLinkIcon}))}})},ot=de=>{var re,A,j,Q;const{branch:me="master",variant:We}=de,{entity:Ke}=(0,a.X2)(),He=(0,n.h_)(n.Ds),mt=(0,n.h_)(n.VE),se=(0,l.MY)((re=He.getOptionalConfigArray("integrations.github"))!=null?re:[])[0].host,[pe,ye]=((j=(A=Ke==null?void 0:Ke.metadata.annotations)==null?void 0:A[oe])!=null?j:"/").split("/"),[{runs:we,loading:nt,error:$t}]=St({hostname:se,owner:pe,repo:ye,branch:me}),Ut=(Q=we==null?void 0:we[0])!=null?Q:{};return(0,m.useEffect)(()=>{$t&&mt.post($t)},[$t,mt]),m.createElement(Zt.rJ,{title:`Last ${me} build`,variant:We},m.createElement(Se,{error:$t,loading:nt,branch:me,lastRun:Ut}))},tt=de=>{const{branch:re="master",variant:A}=de,{entity:j}=(0,a.X2)();return m.createElement(Zt.rJ,{title:`Last ${re} build`,variant:A},m.createElement(fe,{branch:re,entity:j}))},pt=de=>de.split(`
`)[0],Lt=de=>{var re,A,j;const{branch:Q,dense:me=!1,limit:We=5,variant:Ke}=de,{entity:He}=(0,a.X2)(),mt=(0,n.h_)(n.Ds),se=(0,n.h_)(n.VE),pe=(0,l.MY)((re=mt.getOptionalConfigArray("integrations.github"))!=null?re:[])[0].host,[ye,we]=((j=(A=He==null?void 0:He.metadata.annotations)==null?void 0:A[oe])!=null?j:"/").split("/"),[{runs:nt=[],loading:$t,error:Ut}]=St({hostname:pe,owner:ye,repo:we,branch:Q,initialPageSize:We});(0,m.useEffect)(()=>{Ut&&se.post(Ut)},[Ut,se]);const wt=pe||"github.com",sn=(0,n.tg)(Pe);return Ut?m.createElement(Zt.yu,{title:Ut.message,error:Ut}):m.createElement(Zt.rJ,{title:"Recent Workflow Runs",subheader:Q?`Branch: ${Q}`:"All Branches",noPadding:!0,variant:Ke},nt.length?m.createElement(Zt.iA,{isLoading:$t,options:{search:!1,paging:!1,padding:me?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:vn=>{var Le;return m.createElement(Zt.rU,{component:c.rU,to:sn({id:vn.id})},pt((Le=vn.message)!=null?Le:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:Je}],data:nt}):m.createElement("div",{style:{textAlign:"center"}},m.createElement(h.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),m.createElement(h.Z,{variant:"body2"},m.createElement(Zt.rU,{to:`https://${wt}/${ye}/${we}/actions/new`},"Create a new workflow"))))}},59235:function(Rt,d,e){e.d(d,{$M:function(){return ce},Eg:function(){return N},Jh:function(){return zt},Yq:function(){return ln},jJ:function(){return fe},jQ:function(){return ee},oy:function(){return At},qJ:function(){return oe},rw:function(){return R},w1:function(){return Ze}});var n=e(30705),l=e(34520),u=e(73495),m=e(79692),a=e(12420),c=e(60905),_=e(95544),b=e(90436),t=e(82938),E=e(38402),h=e(86136),$=e(49378),L=e(85256),k=e(61837),z=e(11776),y=e(80030),S=e(9520),x=e(76637),f=e(2784),T=e(16060),C=e(64279),P=e(80236),p=e(73655),Z=e(99688),F=e(52866),Me=e(27604),Ee=e(13384),Xe=e(62367),Bt=e(52160),st=e(98685),jt=e(19928),Zt=e.n(jt),J=e(14162),an=e.n(J),Re=e(19126),xe=e.n(Re);const O=(0,n.x8)({id:"catalog-index"}),Ze=(0,n.rx)({id:"org",externalRoutes:{catalogIndex:O}}),ce=Ze.provide((0,n.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(9814).then(e.bind(e,69814)).then(V=>V.GroupProfileCard)}})),R=Ze.provide((0,n.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(9814).then(e.bind(e,69814)).then(V=>V.MembersListCard)}})),N=Ze.provide((0,n.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(9814).then(e.bind(e,69814)).then(V=>V.OwnershipCard)}})),ee=Ze.provide((0,n.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(9814).then(e.bind(e,69814)).then(V=>V.UserProfileCard)}})),Pe=async(V,X)=>(V.length===0?{items:[]}:await X.getEntities({filter:{kind:"User","relations.memberof":V.map(ge=>(0,l.eE)({kind:"group",namespace:ge.namespace.toLocaleLowerCase("en-US"),name:ge.name.toLocaleLowerCase("en-US")}))}})).items,Ge=async(V,X)=>{var ue;const ge=new Map,ot=[{kind:V.kind,namespace:(ue=V.metadata.namespace)!=null?ue:l.zG,name:V.metadata.name}],tt=[];for(;ot.length>0;){const pt=ot.shift(),Lt=await X.getEntityByRef(pt);ge.set((0,l.eE)(pt),!0);const de=(0,u.hF)(Lt,l._b,{kind:"Group"}).filter(re=>!ge.has((0,l.eE)(re)));de.forEach(re=>ge.set((0,l.eE)(re),!0)),ot.push(...de),tt.push(...de)}return tt},Ct=async(V,X)=>Pe(await Ge(V,X),X),ht=V=>{const X=new Map;return V.filter(ue=>{const ge=(0,l.eE)(ue),Se=X.has(ge);return X.set(ge,!0),!Se})},It=(0,m.Z)(V=>(0,a.Z)({card:{border:`1px solid ${V.palette.divider}`,boxShadow:V.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:V.spacing(4,1,1),flex:"1",minWidth:"0px"}})),q=V=>{var X;const ue=It(),{metadata:{name:ge,description:Se},spec:{profile:ot}}=V.member,tt=(X=ot==null?void 0:ot.displayName)!=null?X:ge;return f.createElement(c.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},f.createElement(_.Z,{className:ue.card},f.createElement(_.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},f.createElement(P.qE,{displayName:tt,picture:ot==null?void 0:ot.picture,customStyles:{position:"absolute",top:"-2rem"}}),f.createElement(_.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},f.createElement(b.Z,{variant:"h6"},f.createElement(P.rU,{"data-testid":"user-link",to:(0,T.Gn)(`/catalog/:namespace/user/${ge}`,(0,u.hd)(V.member))},f.createElement(P.Or,{text:tt}))),(ot==null?void 0:ot.email)&&f.createElement(P.rU,{to:`mailto:${ot.email}`},f.createElement(P.Or,{text:ot.email})),Se&&f.createElement(b.Z,{variant:"subtitle2"},Se)))))},oe=V=>{var X;const{memberDisplayTitle:ue="Members",pageSize:ge=50,showAggregateMembersToggle:Se}=V,{entity:ot}=(0,u.X2)(),{metadata:{name:tt,namespace:pt},spec:{profile:Lt}}=ot,de=(0,n.h_)(u.Ah),re=(X=Lt==null?void 0:Lt.displayName)!=null?X:tt,A=pt||l.zG,[j,Q]=f.useState(1),me=(wt,sn)=>{Q(sn)},[We,Ke]=(0,f.useState)(!1),{loading:He,value:mt}=(0,C.default)(async()=>Se?await Ct(ot,de):[],[de,ot,Se]),{loading:se,error:pe,value:ye}=(0,C.default)(async()=>(await de.getEntities({filter:{kind:"User","relations.memberof":[(0,l.eE)({kind:"group",namespace:A.toLocaleLowerCase("en-US"),name:tt.toLocaleLowerCase("en-US")})]}})).items,[de,ot]),we=ht([...ye!=null?ye:[],...mt&&We?mt:[]].sort((wt,sn)=>(0,l.eE)(wt).localeCompare((0,l.eE)(sn))));if(se)return f.createElement(P.Ex,null);if(pe)return f.createElement(P.Gk,{error:pe});const nt=Math.ceil(((we==null?void 0:we.length)||0)/ge),$t=nt<2?"":`, page ${j} of ${nt}`,Ut=f.createElement(x.Z,{count:nt,page:j,onChange:me,showFirstButton:!0,showLastButton:!0});return f.createElement(c.Z,{item:!0},f.createElement(P.rJ,{title:`${ue} (${(we==null?void 0:we.length)||0}${$t})`,subheader:`of ${re}`,...nt<=1?{}:{actions:Ut}},Se&&f.createElement(f.Fragment,null,"Direct Members",f.createElement(t.Z,{color:"primary",checked:We,onChange:()=>{Ke(!We)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),We&&He?f.createElement(P.Ex,null):f.createElement(c.Z,{container:!0,spacing:3},we&&we.length>0?we.slice(ge*(j-1),ge*j).map(wt=>f.createElement(q,{member:wt,key:wt.metadata.uid})):f.createElement(_.Z,{p:2},f.createElement(b.Z,null,"This group has no ",ue.toLocaleLowerCase(),".")))))},Ae=({href:V,Icon:X,text:ue})=>f.createElement(E.Z,{key:V},f.createElement(h.Z,null,X?f.createElement(X,null):f.createElement(Bt.Z,null)),f.createElement($.Z,null,f.createElement(P.rU,{to:V},ue))),Je=({links:V})=>{const X=(0,n.qD)(),ue=ge=>{var Se;return ge&&(Se=X.getSystemIcon(ge))!=null?Se:Bt.Z};return V===void 0?null:f.createElement(f.Fragment,null,f.createElement(L.Z,null),V.map(ge=>f.createElement(Ae,{key:ge.url,href:ge.url,text:ge.title,Icon:ue(ge.icon)})))},ct=V=>f.createElement(_.Z,{display:"flex",alignItems:"center"},f.createElement(Xe.Z,{fontSize:"inherit"}),f.createElement(_.Z,{ml:1},V.title)),At=V=>{var X,ue,ge;const Se=(0,n.h_)(u.Ah),ot=(0,n.h_)(n.$v),{entity:tt}=(0,u.X2)(),pt=(0,f.useCallback)(async()=>{await Se.refreshEntity((0,l.eE)(tt)),ot.post({message:"Refresh scheduled",severity:"info"})},[Se,ot,tt]);if(!tt)return f.createElement(Z.Z,{severity:"error"},"Group not found");const{metadata:{name:Lt,description:de,title:re,annotations:A,links:j},spec:{profile:Q}}=tt,me=(0,u.hF)(tt,l._b,{kind:"Group"}),We=(0,u.hF)(tt,l.wP,{kind:"group"}),Ke=A==null?void 0:A[l.P1],He=(Ke==null?void 0:Ke.startsWith("url:"))||(Ke==null?void 0:Ke.startsWith("file:")),mt=(X=tt.metadata.annotations)==null?void 0:X[l.Tf],se=(ge=(ue=Q==null?void 0:Q.displayName)!=null?ue:re)!=null?ge:Lt,pe=Q!=null&&Q.email?`mailto:${Q.email}`:"#",ye=mt?f.createElement(k.Z,{"aria-label":"Edit",title:"Edit Metadata",component:P.rU,to:mt},f.createElement(Me.Z,null)):f.createElement(k.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},f.createElement(Me.Z,null));return f.createElement(P.rJ,{title:f.createElement(ct,{title:se}),subheader:de,variant:V.variant,action:f.createElement(f.Fragment,null,He&&f.createElement(k.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:pt},f.createElement(F.Z,null)),ye)},f.createElement(c.Z,{container:!0,spacing:3},f.createElement(c.Z,{item:!0,xs:12,sm:2,xl:1},f.createElement(P.qE,{displayName:se,picture:Q==null?void 0:Q.picture})),f.createElement(c.Z,{item:!0,md:10,xl:11},f.createElement(z.Z,null,(Q==null?void 0:Q.email)&&f.createElement(E.Z,null,f.createElement(h.Z,null,f.createElement(y.ZP,{title:"Email"},f.createElement(Ee.Z,null))),f.createElement($.Z,{primary:f.createElement(P.rU,{to:pe},Q.email),secondary:"Email"})),f.createElement(E.Z,null,f.createElement(h.Z,null,f.createElement(y.ZP,{title:"Parent Group"},f.createElement(p.Z,null))),f.createElement($.Z,{primary:We.length?f.createElement(u.rI,{entityRefs:We,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),f.createElement(E.Z,null,f.createElement(h.Z,null,f.createElement(y.ZP,{title:"Child Groups"},f.createElement(Xe.Z,null))),f.createElement($.Z,{primary:me.length?f.createElement(u.rI,{entityRefs:me,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(V==null?void 0:V.showLinks)&&f.createElement(Je,{links:j})))))},qt=V=>V.title?f.createElement(_.Z,{display:"flex",alignItems:"center"},f.createElement(st.Z,{fontSize:"inherit"}),f.createElement(_.Z,{ml:1},V.title)):null,zt=V=>{var X,ue;const{entity:ge}=(0,u.X2)();if(!ge)return f.createElement(Z.Z,{severity:"error"},"User not found");const Se=(X=ge.metadata.annotations)==null?void 0:X[l.Tf],{metadata:{name:ot,description:tt,links:pt},spec:{profile:Lt}}=ge,de=(ue=Lt==null?void 0:Lt.displayName)!=null?ue:ot,re=Lt!=null&&Lt.email?`mailto:${Lt.email}`:void 0,A=(0,u.hF)(ge,l.hr,{kind:"Group"});return f.createElement(P.rJ,{title:f.createElement(qt,{title:de}),subheader:tt,variant:V.variant,action:f.createElement(f.Fragment,null,Se&&f.createElement(k.Z,{"aria-label":"Edit",title:"Edit Metadata",component:P.rU,to:Se},f.createElement(Me.Z,null)))},f.createElement(c.Z,{container:!0,spacing:3,alignItems:"flex-start"},f.createElement(c.Z,{item:!0,xs:12,sm:2,xl:1},f.createElement(P.qE,{displayName:de,picture:Lt==null?void 0:Lt.picture})),f.createElement(c.Z,{item:!0,md:10,xl:11},f.createElement(z.Z,null,(Lt==null?void 0:Lt.email)&&f.createElement(E.Z,null,f.createElement(h.Z,null,f.createElement(y.ZP,{title:"Email"},f.createElement(Ee.Z,null))),f.createElement($.Z,null,f.createElement(P.rU,{to:re!=null?re:""},Lt.email))),f.createElement(E.Z,null,f.createElement(h.Z,null,f.createElement(y.ZP,{title:"Member of"},f.createElement(Xe.Z,null))),f.createElement($.Z,null,f.createElement(u.rI,{entityRefs:A,defaultKind:"Group"}))),(V==null?void 0:V.showLinks)&&f.createElement(Je,{links:pt})))))},Be=an()(10),Pt=(V,X)=>{const{kind:ue,type:ge}=X,Se=V.map(tt=>(0,u.$3)((0,l.of)(tt),{defaultKind:"group"})),ot={kind:ue.toLocaleLowerCase("en-US"),type:ge,owners:Se,user:"all"};return xe().stringify({filters:ot},{arrayFormat:"repeat"})},dt=V=>{let X=[(0,l.eE)(V)];if(V.kind==="User"){const ge=(0,u.hF)(V,l.hr,{kind:"Group"}).map(Se=>(0,l.eE)({kind:Se.kind,namespace:Se.namespace,name:Se.name}));X=[...X,...ge]}return X},hn=async(V,X)=>{const ue=[],ge=new Map,Se=new Set;ue.push(V);let ot=V;for(;ue.length>0;){const tt=(0,u.hF)(ot,l._b,{kind:"Group"});await Promise.all(tt.map(pt=>Be(async()=>{const Lt=X.getEntityByRef(pt);ge.set(pt.name,Lt);try{const de=await Lt;de&&ue.push(de)}finally{ge.delete(pt.name)}}))),ue.shift(),Se.add((0,l.eE)({kind:ot.kind,namespace:ot.metadata.namespace,name:ot.metadata.name})),ot=ue[0]}return Array.from(Se)};function dn(V,X,ue,ge,Se=6){const ot=(0,n.h_)(u.Ah),tt=ge!=null?ge:["Component","API","System"],{loading:pt,error:Lt,value:de}=(0,C.default)(async()=>{const re=X==="aggregated"&&ue?await hn(V,ot):dt(V);return(await ot.getEntities({filter:[{kind:tt,"relations.ownedBy":re}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]})).items.reduce((me,We)=>{var Ke,He;const mt=me.find(se=>{var pe;return se.kind===We.kind&&se.type===((pe=We.spec)==null?void 0:pe.type)});return mt?mt.count+=1:me.push({kind:We.kind,type:(He=(Ke=We.spec)==null?void 0:Ke.type)==null?void 0:He.toString(),count:1}),me},[]).sort((me,We)=>We.count-me.count).slice(0,Se).map(me=>({counter:me.count,type:me.type,kind:me.kind,queryParams:Pt(re,me)}))},[ot,V,X]);return{componentsWithCounters:de,loading:pt,error:Lt}}const bn=(0,m.Z)(V=>(0,a.Z)({card:{border:`1px solid ${V.palette.divider}`,boxShadow:V.shadows[2],borderRadius:"4px",padding:V.spacing(2),color:V.palette.common.white,transition:`${V.transitions.duration.standard}ms`,"&:hover":{boxShadow:V.shadows[4]},height:"100%"},bold:{fontWeight:V.typography.fontWeightBold},smallFont:{fontSize:V.typography.body2.fontSize},entityTypeBox:{background:X=>V.getPageTheme({themeId:X.type}).backgroundImage}})),it=({counter:V,type:X,kind:ue,url:ge})=>{const Se=bn({type:X!=null?X:ue}),ot=X!=null?X:ue,tt=ot.length>10;return f.createElement(P.rU,{to:ge,variant:"body2"},f.createElement(_.Z,{className:`${Se.card} ${Se.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},f.createElement(b.Z,{className:Se.bold,variant:"h6"},V),f.createElement(_.Z,{sx:{width:"100%",textAlign:"center"}},f.createElement(b.Z,{className:`${Se.bold} ${tt&&Se.smallFont}`,variant:"h6"},f.createElement(P.Or,{text:Zt()(ot.toLocaleUpperCase("en-US"),V)}))),X&&f.createElement(b.Z,{variant:"subtitle1"},ue)))},St=({entity:V,relationsType:X,isGroup:ue,entityFilterKind:ge,entityLimit:Se=6})=>{const ot=(0,n.tg)(O),{componentsWithCounters:tt,loading:pt,error:Lt}=dn(V,X,ue,ge,Se);return pt?f.createElement(P.Ex,null):Lt?f.createElement(P.Gk,{error:Lt}):f.createElement(c.Z,{container:!0},tt==null?void 0:tt.map(de=>{var re;return f.createElement(c.Z,{item:!0,xs:6,md:6,lg:4,key:(re=de.type)!=null?re:de.kind},f.createElement(it,{counter:de.counter,kind:de.kind,type:de.type,url:`${ot()}/?${de.queryParams}`}))}))},En=(0,m.Z)(V=>({list:{[V.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[V.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[V.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),ln=V=>{const{variant:X,entityFilterKind:ue,hideRelationsToggle:ge,relationsType:Se,entityLimit:ot=6}=V,tt=ge===void 0?!1:ge,pt=En(),{entity:Lt}=(0,u.X2)(),de=Lt.kind==="Group",[re,A]=(0,f.useState)(Se||"direct");return f.createElement(P.rJ,{title:"Ownership",variant:X},!tt&&f.createElement(z.Z,{dense:!0},f.createElement(E.Z,{className:pt.list},f.createElement($.Z,{className:pt.listItemText}),f.createElement(S.Z,{className:pt.listItemSecondaryAction},"Direct Relations",f.createElement(y.ZP,{placement:"top",arrow:!0,title:`${re==="direct"?"Direct":"Aggregated"} Relations`},f.createElement(t.Z,{color:"primary",checked:re!=="direct",onChange:()=>A(re==="direct"?"aggregated":"direct"),name:"pin",inputProps:{"aria-label":"Ownership Type Switch"},disabled:!de})),"Aggregated Relations"))),f.createElement(St,{entity:Lt,entityLimit:ot,relationsType:re,isGroup:de,entityFilterKind:ue}))},fe=V=>{const{singularTitle:X,pluralTitle:ue,icon:ge,filter:Se}=V,ot=(0,n.h_)(n.$4),tt=(0,n.h_)(u.Ah),pt=(0,n.tg)(u.wi),{value:Lt}=(0,C.default)(async()=>{const de=await ot.getBackstageIdentity();return(await tt.getEntities({filter:[{kind:"group","relations.hasMember":de.userEntityRef,...Se!=null?Se:{}}],fields:["metadata","kind"]})).items},[]);if(!(Lt!=null&&Lt.length))return null;if(Lt.length===1){const de=Lt[0];return f.createElement(P.R6,{text:X,to:pt((0,l.iB)(de)),icon:ge})}return f.createElement(P.R6,{icon:ge,text:ue},f.createElement(P.k2,{title:ue},Lt==null?void 0:Lt.map(function(re){return f.createElement(P.BT,{title:re.metadata.title||re.metadata.name,subtitle:re.metadata.namespace!==l.zG?re.metadata.namespace:void 0,to:pt((0,l.iB)(re)),icon:ge,key:(0,l.eE)(re)})})))}},5083:function(Rt,d,e){e.d(d,{J$:function(){return k},Y2:function(){return f},g2:function(){return b},rG:function(){return c}});var n=e(32272),l=e(96279),u=e.n(l),m=e(9571),a=e(30195),c=(T=>(T.DENY="DENY",T.ALLOW="ALLOW",T.CONDITIONAL="CONDITIONAL",T))(c||{});function _(T,C){return T.name===C.name}function b(T,C){return"resourceType"in T?!C||T.resourceType===C:!1}function t(T){return T.attributes.action==="create"}function E(T){return T.attributes.action==="read"}function h(T){return T.attributes.action==="update"}function $(T){return T.attributes.action==="delete"}function L(T){return{authorize:async(C,P)=>await T.authorize(C,P),authorizeConditional(C,P){const p=C;return T.authorize(p,P)}}}function k({name:T,attributes:C,resourceType:P}){return P?{type:"resource",name:T,attributes:C,resourceType:P}:{type:"basic",name:T,attributes:C}}const z=a.z.lazy(()=>a.z.object({rule:a.z.string(),resourceType:a.z.string(),params:a.z.record(a.z.any()).optional()}).or(a.z.object({anyOf:a.z.array(z).nonempty()})).or(a.z.object({allOf:a.z.array(z).nonempty()})).or(a.z.object({not:z}))),y=a.z.object({result:a.z.literal(c.ALLOW).or(a.z.literal(c.DENY))}),S=a.z.union([a.z.object({result:a.z.literal(c.ALLOW).or(a.z.literal(c.DENY))}),a.z.object({result:a.z.literal(c.CONDITIONAL),pluginId:a.z.string(),resourceType:a.z.string(),conditions:z})]),x=(T,C)=>a.z.object({items:a.z.array(a.z.intersection(a.z.object({id:a.z.string()}),T)).refine(P=>P.length===C.size&&P.every(({id:p})=>C.has(p)),{message:"Items in response do not match request"})});class f{constructor(C){var P;this.discovery=C.discovery,this.enabled=(P=C.config.getOptionalBoolean("permission.enabled"))!=null?P:!1}async authorize(C,P){return this.makeRequest(C,y,P)}async authorizeConditional(C,P){return this.makeRequest(C,S,P)}async makeRequest(C,P,p){if(!this.enabled)return C.map(st=>({result:c.ALLOW}));const Z={items:C.map(st=>({id:m.Z(),...st}))},F=await this.discovery.getBaseUrl("permission"),Me=await u()(`${F}/authorize`,{method:"POST",body:JSON.stringify(Z),headers:{...this.getAuthorizationHeader(p==null?void 0:p.token),"content-type":"application/json"}});if(!Me.ok)throw await n.VL.fromResponse(Me);const Ee=await Me.json(),Bt=x(P,new Set(Z.items.map(({id:st})=>st))).parse(Ee).items.reduce((st,jt)=>(st[jt.id]=jt,st),{});return Z.items.map(st=>Bt[st.id])}getAuthorizationHeader(C){return C?{Authorization:`Bearer ${C}`}:{}}}},56563:function(Rt,d,e){e.d(d,{RV:function(){return a},gI:function(){return _},iM:function(){return c},un:function(){return t}});var n=e(2784),l=e(30705),u=e(5083),m=e(69984);const a=(0,l.T0)({id:"plugin.permission.api"});class c{constructor(h,$){this.permissionClient=h,this.identityApi=$}static create(h){const{config:$,discovery:L,identity:k}=h,z=new u.Y2({discovery:L,config:$});return new c(z,k)}async authorize(h){return(await this.permissionClient.authorize([h],await this.identityApi.getCredentials()))[0]}}function _(E){const h=(0,l.h_)(a),{data:$,error:L}=(0,m.ZP)(E,async k=>{if((0,u.g2)(k.permission)&&!k.resourceRef)return u.rG.DENY;const{result:z}=await h.authorize(k);return z});return L?{error:L,loading:!1,allowed:!1}:$===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:$===u.rG.ALLOW}}const b=E=>{const{permission:h,resourceRef:$,errorComponent:L,...k}=E,z=_(isResourcePermission(h)?{permission:h,resourceRef:$}:{permission:h}),y=useApp(),{NotFoundErrorPage:S}=y.getComponents();let x=L===void 0?React.createElement(S,null):L;return z.loading?x=null:z.allowed&&(x=E.element),React.createElement(Route,{...k,element:x})};function t(E){const{permission:h,resourceRef:$}=E,L=_((0,u.g2)(h)?{permission:h,resourceRef:$}:{permission:h}),k=(0,l.qD)();if(L.loading)return null;if(L.allowed)return n.createElement(n.Fragment,null,E.children);if(E.errorPage)return n.createElement(n.Fragment,null,E.errorPage);const{NotFoundErrorPage:z}=k.getComponents();return n.createElement(z,null)}},60885:function(Rt,d,e){e.d(d,{F:function(){return m},S:function(){return _},a:function(){return a},s:function(){return t},u:function(){return b}});var n=e(18473),l=e(2784),u=e(30705);const m="scaffolder.extensions.wrapper.v1",a="scaffolder.extensions.field.v1",c=(0,n.CT)("secrets-context"),_=E=>{const[h,$]=(0,l.useState)({});return l.createElement(c.Provider,{value:(0,n.EI)({1:{secrets:h,setSecrets:$}})},E.children)},b=()=>{var E;const h=(E=(0,l.useContext)(c))==null?void 0:E.atVersion(1);if(!h)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:$,secrets:L={}}=h;return{setSecrets:(0,l.useCallback)(z=>{$(y=>({...y,...z}))},[$]),secrets:L}},t=(0,n.uW)("scaffolder:scaffolder-api-ref",()=>(0,u.T0)({id:"plugin.scaffolder.service"}))},12053:function(Rt,d,e){e.d(d,{A3:function(){return l.S},PT:function(){return b},TD:function(){return l.u},WQ:function(){return L},eP:function(){return c},lc:function(){return l.s},zS:function(){return h}});var n=e(30705),l=e(60885),u=e(92233),m=e(2784),a=e(18473);function c(y){return{expose(){const S=()=>null;return(0,n.R5)(S,l.a,y),S}}}const _=()=>null;(0,n.R5)(_,l.F,!0);const b=y=>(0,n.vJ)(y,S=>S.selectByComponentData({key:l.F}).findComponentData({key:l.a})),t="scaffolder.layout.v1",E="scaffolder.layouts.wrapper.v1",h=y=>(0,n.vJ)(y,S=>S.selectByComponentData({key:E}).findComponentData({key:t}));function $(y,S){var x,f,T;switch(S.type){case"INIT":{y.steps=S.data.spec.steps.reduce((C,P)=>(C[P.id]={status:"open",id:P.id},C),{}),y.stepLogs=S.data.spec.steps.reduce((C,P)=>(C[P.id]=[],C),{}),y.loading=!1,y.error=void 0,y.completed=!1,y.task=S.data;return}case"LOGS":{const C=S.data;for(const P of C){const p=`${P.createdAt} ${P.body.message}`;if(!P.body.stepId||!((x=y.steps)!=null&&x[P.body.stepId]))continue;const Z=(f=y.stepLogs)==null?void 0:f[P.body.stepId],F=(T=y.steps)==null?void 0:T[P.body.stepId];P.body.status&&P.body.status!==F.status&&(F.status=P.body.status,F.status==="processing"&&(F.startedAt=P.createdAt),["cancelled","completed","failed"].includes(F.status)&&(F.endedAt=P.createdAt)),Z==null||Z.push(p)}return}case"COMPLETED":{y.completed=!0,y.output=S.data.body.output,y.error=S.data.body.error;return}case"CANCELLED":{y.cancelled=!0;return}case"ERROR":{y.error=S.data,y.loading=!1,y.completed=!0;return}default:return}}const L=y=>{const S=(0,n.h_)(l.s),[x,f]=(0,u.C)($,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,m.useEffect)(()=>{let T=!1,C,P;return S.getTask(y).then(p=>{if(T)return;f({type:"INIT",data:p});const Z=S.streamLogs({taskId:y}),F=new Array;function Me(){if(F.length){const Ee=F.splice(0,F.length);f({type:"LOGS",data:Ee})}}P=setInterval(Me,500),C=Z.subscribe({next:Ee=>{switch(Ee.type){case"log":return F.push(Ee);case"cancelled":f({type:"CANCELLED"});return;case"completion":Me(),f({type:"COMPLETED",data:Ee});return;default:throw new Error(`Unhandled event type ${Ee.type} in observer`)}},error:Ee=>{Me(),f({type:"ERROR",data:Ee})}})},p=>{T||f({type:"ERROR",data:p})}),()=>{T=!0,C&&C.unsubscribe(),P&&clearInterval(P)}},[S,f,y]),x};function k(y){return{expose(){const S=()=>null;return attachComponentData(S,t,y),S}}}const z=()=>null;(0,n.R5)(z,E,!0)},23054:function(Rt,d,e){e.d(d,{A:function(){return zt},B:function(){return Pt},C:function(){return Q},D:function(){return j},F:function(){return pt},G:function(){return St},H:function(){return bn},I:function(){return dn},J:function(){return re},K:function(){return de},T:function(){return Nn},d:function(){return vn},h:function(){return En},k:function(){return mt},l:function(){return Un},n:function(){return Mt},o:function(){return we},p:function(){return ye},q:function(){return pe},r:function(){return Ke},s:function(){return nt},t:function(){return me},u:function(){return se},v:function(){return We},w:function(){return He},x:function(){return Je},y:function(){return Ae},z:function(){return dt}});var n=e(49462),l=e(12053),u=e(34520),m=e(32272),a=e(19126),c=e.n(a),_=e(82394),b=e.n(_),t=e(88285),E=e(30705),h=e(73495),$=e(86619),L=e(42494),k=e(95544),z=e(79692),y=e(60905),S=e(90436),x=e(4614),f=e(97136),T=e(27556),C=e(77277),P=e(88013),p=e(2784),Z=e(64279),F=e(30195),Me=e(68111),Ee=e(74828),Xe=e(29611),Bt=e(56939),st=e(80236),jt=e(48760),Zt=e(62155),J=e(31377),an=e(34546),Re=e(31625),xe=e(12420),O=e(49166),Ze=e(98281),ce=e(16874),R=e(72779),N=e.n(R),ee=e(26228),Pe=e(73557),Ge=e(70218),Ct=e(52160);class ht{constructor(_e){var Ne,Te;this.discoveryApi=_e.discoveryApi,this.fetchApi=(Ne=_e.fetchApi)!=null?Ne:{fetch},this.scmIntegrationsApi=_e.scmIntegrationsApi,this.useLongPollingLogs=(Te=_e.useLongPollingLogs)!=null?Te:!1,this.identityApi=_e.identityApi}async listTasks(_e){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const Ne=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:Te}=await this.identityApi.getBackstageIdentity(),ut=c().stringify(_e.filterByOwnership==="owned"?{createdBy:Te}:{}),gt=await this.fetchApi.fetch(`${Ne}/v2/tasks?${ut}`);if(!gt.ok)throw await m.VL.fromResponse(gt);return await gt.json()}async getIntegrationsList(_e){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(Te=>!this.scmIntegrationsApi.bitbucketCloud.byHost(Te.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(Te.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(Te=>({type:Te.type,title:Te.title,host:Te.config.host})).filter(Te=>_e.allowedHosts.includes(Te.host))}}async getTemplateParameterSchema(_e){const{namespace:Ne,kind:Te,name:ut}=(0,u.of)(_e,{defaultKind:"template"}),gt=await this.discoveryApi.getBaseUrl("scaffolder"),Et=[Ne,Te,ut].map(fn=>encodeURIComponent(fn)).join("/"),at=`${gt}/v2/templates/${Et}/parameter-schema`,Dt=await this.fetchApi.fetch(at);if(!Dt.ok)throw await m.VL.fromResponse(Dt);return await Dt.json()}async scaffold(_e){const{templateRef:Ne,values:Te,secrets:ut={}}=_e,gt=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,Et=await this.fetchApi.fetch(gt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:Ne,values:{...Te},secrets:ut})});if(Et.status!==201){const Dt=`${Et.status} ${Et.statusText}`,en=await Et.text();throw new Error(`Backend request failed, ${Dt} ${en.trim()}`)}const{id:at}=await Et.json();return{taskId:at}}async getTask(_e){const Te=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(_e)}`,ut=await this.fetchApi.fetch(Te);if(!ut.ok)throw await m.VL.fromResponse(ut);return await ut.json()}streamLogs(_e){return this.useLongPollingLogs?this.streamLogsPolling(_e):this.streamLogsEventStream(_e)}async dryRun(_e){const Ne=await this.discoveryApi.getBaseUrl("scaffolder"),Te=await this.fetchApi.fetch(`${Ne}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:_e.template,values:_e.values,secrets:_e.secrets,directoryContents:_e.directoryContents})});if(!Te.ok)throw await m.VL.fromResponse(Te);return Te.json()}streamLogsEventStream({taskId:_e,after:Ne}){return new(b())(Te=>{const ut=new URLSearchParams;Ne!==void 0&&ut.set("after",String(Number(Ne))),this.discoveryApi.getBaseUrl("scaffolder").then(gt=>{const Et=`${gt}/v2/tasks/${encodeURIComponent(_e)}/eventstream`,at=en=>{if(en.data)try{Te.next(JSON.parse(en.data))}catch(fn){Te.error(fn)}},Dt=new EventSource(Et,{withCredentials:!0});Dt.addEventListener("log",at),Dt.addEventListener("cancelled",at),Dt.addEventListener("completion",en=>{at(en),Dt.close(),Te.complete()}),Dt.addEventListener("error",en=>{Te.error(en)})},gt=>{Te.error(gt)})})}streamLogsPolling({taskId:_e,after:Ne}){let Te=Ne;return new(b())(ut=>{this.discoveryApi.getBaseUrl("scaffolder").then(async gt=>{for(;!ut.closed;){const Et=`${gt}/v2/tasks/${encodeURIComponent(_e)}/events?${c().stringify({after:Te})}`,at=await this.fetchApi.fetch(Et);if(!at.ok){await new Promise(en=>setTimeout(en,1e3));continue}const Dt=await at.json();for(const en of Dt)if(Te=Number(en.id),ut.next(en),en.type==="completion"){ut.complete();return}}})})}async listActions(){const _e=await this.discoveryApi.getBaseUrl("scaffolder"),Ne=await this.fetchApi.fetch(`${_e}/v2/actions`);if(!Ne.ok)throw await m.VL.fromResponse(Ne);return await Ne.json()}async cancelTask(_e){const Te=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(_e)}/cancel`,ut=await this.fetchApi.fetch(Te,{method:"POST"});if(!ut.ok)throw await m.VL.fromResponse(ut);return await ut.json()}}function It(Ve,_e){return{schema:{returnValue:(0,Me.ZP)(Ve),uiOptions:_e?(0,Me.ZP)(_e):void 0},type:null,uiOptionsType:null}}const q=F.z.record(F.z.string().or(F.z.object({exists:F.z.boolean().optional()})).or(F.z.array(F.z.string()))),Ae=It(F.z.string(),F.z.object({allowedKinds:F.z.array(F.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:F.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:F.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:F.z.union([F.z.string(),F.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:F.z.array(q).or(q).optional().describe("List of key-value filter expression for entities")})).schema,Je=Ve=>{var _e,Ne,Te,ut,gt;const{onChange:Et,schema:{title:at="Entity",description:Dt="An entity from the catalog"},required:en,uiSchema:fn,rawErrors:Cn,formData:Qn,idSchema:er}=Ve,Zn=qt(fn),jn=(_e=fn["ui:options"])==null?void 0:_e.defaultKind,tr=((Ne=fn["ui:options"])==null?void 0:Ne.defaultNamespace)||void 0,D=(0,E.h_)(h.Ah),{value:I,loading:G}=(0,Z.default)(async()=>{const{items:B}=await D.getEntities(Zn?{filter:Zn}:void 0);return B}),ie=(ut=(Te=fn["ui:options"])==null?void 0:Te.allowArbitraryValues)!=null?ut:!0,Ie=(0,p.useCallback)(B=>{try{return(0,h.$3)((0,u.of)(B,{defaultKind:jn,defaultNamespace:tr}),{defaultKind:jn,defaultNamespace:tr})}catch{return B}},[jn,tr]),qe=(0,p.useCallback)((B,H,Ce)=>{if(typeof H!="string")Et(H?(0,u.eE)(H):void 0);else if(Ce==="blur"||Ce==="create-option"){let je=H;try{je=(0,u.eE)((0,u.of)(H,{defaultKind:jn,defaultNamespace:tr}))}catch{}(Qn!==H||ie)&&Et(je)}},[Et,Qn,jn,tr,ie]);return(0,p.useEffect)(()=>{(I==null?void 0:I.length)===1&&Et((0,u.eE)(I[0]))},[I,Et]),p.createElement(L.Z,{margin:"normal",required:en,error:(Cn==null?void 0:Cn.length)>0&&!Qn},p.createElement(P.ZP,{disabled:(I==null?void 0:I.length)===1,id:er==null?void 0:er.$id,value:(gt=I==null?void 0:I.find(B=>(0,u.eE)(B)===Qn))!=null?gt:ie&&Qn?Ie(Qn):"",loading:G,onChange:qe,options:I||[],getOptionLabel:B=>typeof B=="string"?B:(0,h.$3)(B,{defaultKind:jn,defaultNamespace:tr}),autoSelect:!0,freeSolo:ie,renderInput:B=>p.createElement($.Z,{...B,label:at,margin:"dense",helperText:Dt,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:en,InputProps:B.InputProps})}))};function ct(Ve){return typeof Ve=="object"&&Ve.exists?t.n3:Ve==null?void 0:Ve.toString()}function At(Ve){const _e={};for(const[Ne,Te]of Object.entries(Ve))Array.isArray(Te)?_e[Ne]=Te:_e[Ne]=ct(Te);return _e}function qt(Ve){var _e,Ne;const Te=(_e=Ve["ui:options"])==null?void 0:_e.allowedKinds,ut=((Ne=Ve["ui:options"])==null?void 0:Ne.catalogFilter)||Te&&{kind:Te};if(ut)return Array.isArray(ut)?ut.map(At):At(ut)}const zt=(Ve,_e)=>{u.y$.isValidObjectName(Ve)||_e.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Pt=It(F.z.string()).schema,dt=Ve=>{const{onChange:_e,required:Ne,schema:{title:Te="Name",description:ut="Unique name of the component"},rawErrors:gt,formData:Et,uiSchema:{"ui:autofocus":at},idSchema:Dt,placeholder:en}=Ve;return p.createElement($.Z,{id:Dt==null?void 0:Dt.$id,label:Te,placeholder:en,helperText:ut,required:Ne,value:Et!=null?Et:"",onChange:({target:{value:fn}})=>_e(fn),margin:"normal",error:(gt==null?void 0:gt.length)>0&&!Et,inputProps:{autoFocus:at}})},dn=It(F.z.string(),F.z.object({allowedKinds:F.z.array(F.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:F.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:F.z.union([F.z.string(),F.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:F.z.array(q).or(q).optional().describe("List of key-value filter expression for entities")})).schema,bn=Ve=>{var _e,Ne,Te,ut,gt;const{schema:{title:Et="Owner",description:at="The owner of the component"},uiSchema:Dt,...en}=Ve,fn=(_e=Dt["ui:options"])==null?void 0:_e.defaultNamespace,Cn=(Ne=Dt["ui:options"])==null?void 0:Ne.allowedKinds,Qn=((Te=Dt["ui:options"])==null?void 0:Te.catalogFilter)||{kind:Cn||["Group","User"]},er={...Dt,"ui:options":{catalogFilter:Qn,defaultKind:"Group",allowArbitraryValues:(gt=(ut=Dt["ui:options"])==null?void 0:ut.allowArbitraryValues)!=null?gt:!0,...fn!==void 0?{defaultNamespace:fn}:{}}};return p.createElement(Je,{...en,schema:{title:Et,description:at},uiSchema:er})},St=It(F.z.string(),F.z.object({allowedHosts:F.z.array(F.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:F.z.array(F.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:F.z.array(F.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:F.z.array(F.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:F.z.array(F.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:F.z.object({secretsKey:F.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:F.z.object({gerrit:F.z.array(F.z.string()).optional().describe("Additional Gerrit scopes to request"),github:F.z.array(F.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:F.z.array(F.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:F.z.array(F.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:F.z.array(F.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,En=(Ve,_e,Ne)=>{var Te,ut;try{const{host:gt,searchParams:Et}=new URL(`https://${Ve}`),at=Ne.apiHolder.get(n.q3);gt?(((Te=at==null?void 0:at.byHost(gt))==null?void 0:Te.type)==="bitbucket"?(gt==="bitbucket.org"&&!Et.get("workspace")&&_e.addError("Incomplete repository location provided, workspace not provided"),Et.get("project")||_e.addError("Incomplete repository location provided, project not provided")):((ut=at==null?void 0:at.byHost(gt))==null?void 0:ut.type)!=="gerrit"&&(Et.get("owner")||_e.addError("Incomplete repository location provided, owner not provided")),Et.get("repo")||_e.addError("Incomplete repository location provided, repo not provided")):_e.addError("Incomplete repository location provided, host not provided")}catch{_e.addError("Unable to parse the Repository URL")}},ln=Ve=>{const{allowedOwners:_e=[],rawErrors:Ne,state:Te,onChange:ut}=Ve,gt=_e?_e.map(at=>({label:at,value:at})):[{label:"Loading...",value:"loading"}],{owner:Et}=Te;return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(Ne==null?void 0:Ne.length)>0&&!Et},_e!=null&&_e.length?p.createElement(st.Ph,{native:!0,label:"Owner Available",onChange:at=>ut({owner:String(Array.isArray(at)?at[0]:at)}),disabled:_e.length===1,selected:Et,items:gt}):p.createElement(p.Fragment,null,p.createElement(Bt.Z,{htmlFor:"ownerInput"},"Owner"),p.createElement(Xe.Z,{id:"ownerInput",onChange:at=>ut({owner:at.target.value}),value:Et})),p.createElement(Ee.Z,null,"The organization, user or project that this repo will belong to")))},fe=Ve=>{const{allowedOwners:_e=[],state:Ne,onChange:Te,rawErrors:ut}=Ve,gt=_e?_e.map(at=>({label:at,value:at})):[{label:"Loading...",value:"loading"}],{owner:Et}=Ne;return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(ut==null?void 0:ut.length)>0&&!Et},_e!=null&&_e.length?p.createElement(st.Ph,{native:!0,label:"Owner Available",onChange:at=>Te({owner:String(Array.isArray(at)?at[0]:at)}),disabled:_e.length===1,selected:Et,items:gt}):p.createElement(p.Fragment,null,p.createElement(Bt.Z,{htmlFor:"ownerInput"},"Owner"),p.createElement(Xe.Z,{id:"ownerInput",onChange:at=>Te({owner:at.target.value}),value:Et})),p.createElement(Ee.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},V=Ve=>{const{allowedOrganizations:_e=[],allowedOwners:Ne=[],rawErrors:Te,state:ut,onChange:gt}=Ve,Et=_e?_e.map(fn=>({label:fn,value:fn})):[{label:"Loading...",value:"loading"}],at=Ne?Ne.map(fn=>({label:fn,value:fn})):[{label:"Loading...",value:"loading"}],{organization:Dt,owner:en}=ut;return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(Te==null?void 0:Te.length)>0&&!Dt},_e!=null&&_e.length?p.createElement(st.Ph,{native:!0,label:"Organization",onChange:fn=>gt({organization:String(Array.isArray(fn)?fn[0]:fn)}),disabled:_e.length===1,selected:Dt,items:Et}):p.createElement(p.Fragment,null,p.createElement(Bt.Z,{htmlFor:"orgInput"},"Organization"),p.createElement(Xe.Z,{id:"orgInput",onChange:fn=>gt({organization:fn.target.value}),value:Dt})),p.createElement(Ee.Z,null,"The Organization that this repo will belong to")),p.createElement(L.Z,{margin:"normal",required:!0,error:(Te==null?void 0:Te.length)>0&&!en},Ne!=null&&Ne.length?p.createElement(st.Ph,{native:!0,label:"Owner",onChange:fn=>gt({owner:String(Array.isArray(fn)?fn[0]:fn)}),disabled:Ne.length===1,selected:en,items:at}):p.createElement(p.Fragment,null,p.createElement(Bt.Z,{htmlFor:"ownerInput"},"Project"),p.createElement(Xe.Z,{id:"ownerInput",onChange:fn=>gt({owner:fn.target.value}),value:en})),p.createElement(Ee.Z,null,"The Project that this repo will belong to")))},X=Ve=>{const{allowedOwners:_e=[],allowedProjects:Ne=[],onChange:Te,rawErrors:ut,state:gt}=Ve,{host:Et,workspace:at,project:Dt}=gt,en=_e?_e==null?void 0:_e.map(Cn=>({label:Cn,value:Cn})):[],fn=Ne?Ne==null?void 0:Ne.map(Cn=>({label:Cn,value:Cn})):[];return(0,p.useEffect)(()=>{Et==="bitbucket.org"&&_e.length&&Te({workspace:_e[0]})},[_e,Et,Te]),p.createElement(p.Fragment,null,Et==="bitbucket.org"&&p.createElement(L.Z,{margin:"normal",required:!0,error:(ut==null?void 0:ut.length)>0&&!at},_e!=null&&_e.length?p.createElement(st.Ph,{native:!0,label:"Allowed Workspaces",onChange:Cn=>Te({workspace:String(Array.isArray(Cn)?Cn[0]:Cn)}),disabled:_e.length===1,selected:at,items:en}):p.createElement(p.Fragment,null,p.createElement(Bt.Z,{htmlFor:"workspaceInput"},"Workspace"),p.createElement(Xe.Z,{id:"workspaceInput",onChange:Cn=>Te({workspace:Cn.target.value}),value:at})),p.createElement(Ee.Z,null,"The Workspace that this repo will belong to")),p.createElement(L.Z,{margin:"normal",required:!0,error:(ut==null?void 0:ut.length)>0&&!Dt},Ne!=null&&Ne.length?p.createElement(st.Ph,{native:!0,label:"Allowed Projects",onChange:Cn=>Te({project:String(Array.isArray(Cn)?Cn[0]:Cn)}),disabled:Ne.length===1,selected:Dt,items:fn}):p.createElement(p.Fragment,null,p.createElement(Bt.Z,{htmlFor:"projectInput"},"Project"),p.createElement(Xe.Z,{id:"projectInput",onChange:Cn=>Te({project:Cn.target.value}),value:Dt})),p.createElement(Ee.Z,null,"The Project that this repo will belong to")))},ue=Ve=>{const{onChange:_e,rawErrors:Ne,state:Te}=Ve,{workspace:ut,owner:gt}=Te;return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",error:(Ne==null?void 0:Ne.length)>0&&!ut},p.createElement(Bt.Z,{htmlFor:"ownerInput"},"Owner"),p.createElement(Xe.Z,{id:"ownerInput",onChange:Et=>_e({owner:Et.target.value}),value:gt}),p.createElement(Ee.Z,null,"The owner of the project (optional)")),p.createElement(L.Z,{margin:"normal",required:!0,error:(Ne==null?void 0:Ne.length)>0&&!ut},p.createElement(Bt.Z,{htmlFor:"parentInput"},"Parent"),p.createElement(Xe.Z,{id:"parentInput",onChange:Et=>_e({workspace:Et.target.value}),value:ut}),p.createElement(Ee.Z,null,"The project parent that the repo will belong to")))},ge=Ve=>{const{host:_e,hosts:Ne,onChange:Te,rawErrors:ut}=Ve,gt=(0,E.h_)(l.lc),{value:{integrations:Et}={integrations:[]},loading:at}=(0,Z.default)(async()=>await gt.getIntegrationsList({allowedHosts:Ne!=null?Ne:[]}));(0,p.useEffect)(()=>{_e||(Ne!=null&&Ne.length?Te(Ne[0]):Et!=null&&Et.length&&Te(Et[0].host))},[Ne,_e,Te,Et]);const Dt=Et?Et.filter(en=>Ne!=null&&Ne.length?Ne==null?void 0:Ne.includes(en.host):!0).map(en=>({label:en.title,value:en.host})):[{label:"Loading...",value:"loading"}];return at?p.createElement(st.Ex,null):p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(ut==null?void 0:ut.length)>0&&!_e},p.createElement(st.Ph,{native:!0,disabled:(Ne==null?void 0:Ne.length)===1,label:"Host",onChange:en=>Te(String(Array.isArray(en)?en[0]:en)),selected:_e,items:Dt,"data-testid":"host-select"}),p.createElement(Ee.Z,null,"The host where the repository will be created")))},Se=Ve=>{const{repoName:_e,allowedRepos:Ne,onChange:Te,rawErrors:ut}=Ve;(0,p.useEffect)(()=>{_e||Ne!=null&&Ne.length&&Te(Ne[0])},[Ne,_e,Te]);const gt=Ne?Ne.map(Et=>({label:Et,value:Et})):[{label:"Loading...",value:"loading"}];return p.createElement(p.Fragment,null,p.createElement(L.Z,{margin:"normal",required:!0,error:(ut==null?void 0:ut.length)>0&&!_e},Ne!=null&&Ne.length?p.createElement(st.Ph,{native:!0,label:"Repositories Available",onChange:Et=>String(Array.isArray(Et)?Et[0]:Et),disabled:Ne.length===1,selected:_e,items:gt}):p.createElement(p.Fragment,null,p.createElement(Bt.Z,{htmlFor:"repoNameInput"},"Repository"),p.createElement(Xe.Z,{id:"repoNameInput",onChange:Et=>Te(String(Et.target.value)),value:_e})),p.createElement(Ee.Z,null,"The name of the repository")))};function ot(Ve){if(!Ve.host)return;const _e=new URLSearchParams;return Ve.owner&&_e.set("owner",Ve.owner),Ve.repoName&&_e.set("repo",Ve.repoName),Ve.organization&&_e.set("organization",Ve.organization),Ve.workspace&&_e.set("workspace",Ve.workspace),Ve.project&&_e.set("project",Ve.project),`${Ve.host}?${_e.toString()}`}function tt(Ve){let _e="",Ne="",Te="",ut="",gt="",Et="";try{if(Ve){const at=new URL(`https://${Ve}`);_e=at.host,Ne=at.searchParams.get("owner")||"",Te=at.searchParams.get("repo")||"",ut=at.searchParams.get("organization")||"",gt=at.searchParams.get("workspace")||"",Et=at.searchParams.get("project")||""}}catch{}return{host:_e,owner:Ne,repoName:Te,organization:ut,workspace:gt,project:Et}}const pt=Ve=>{var _e,Ne;const{uiSchema:Te,onChange:ut,rawErrors:gt,formData:Et}=Ve,[at,Dt]=(0,p.useState)(tt(Et)),en=(0,E.h_)(n.q3),fn=(0,E.h_)(n.Om),{setSecrets:Cn}=(0,l.TD)(),Qn=(0,p.useMemo)(()=>{var B,H;return(H=(B=Te==null?void 0:Te["ui:options"])==null?void 0:B.allowedHosts)!=null?H:[]},[Te]),er=(0,p.useMemo)(()=>{var B,H;return(H=(B=Te==null?void 0:Te["ui:options"])==null?void 0:B.allowedOrganizations)!=null?H:[]},[Te]),Zn=(0,p.useMemo)(()=>{var B,H;return(H=(B=Te==null?void 0:Te["ui:options"])==null?void 0:B.allowedOwners)!=null?H:[]},[Te]),jn=(0,p.useMemo)(()=>{var B,H;return(H=(B=Te==null?void 0:Te["ui:options"])==null?void 0:B.allowedProjects)!=null?H:[]},[Te]),tr=(0,p.useMemo)(()=>{var B,H;return(H=(B=Te==null?void 0:Te["ui:options"])==null?void 0:B.allowedRepos)!=null?H:[]},[Te]),{owner:D,organization:I,project:G,repoName:ie}=at;(0,p.useEffect)(()=>{ut(ot(at))},[at,ut]),(0,p.useEffect)(()=>{er.length>0&&!I&&Dt(B=>({...B,organization:er[0]}))},[Dt,er,I]),(0,p.useEffect)(()=>{Zn.length>0&&!D&&Dt(B=>({...B,owner:Zn[0]}))},[Dt,Zn,D]),(0,p.useEffect)(()=>{jn.length>0&&!G&&Dt(B=>({...B,project:jn[0]}))},[Dt,jn,G]),(0,p.useEffect)(()=>{tr.length>0&&!ie&&Dt(B=>({...B,repoName:tr[0]}))},[Dt,tr,ie]);const Ie=(0,p.useCallback)(B=>{Dt(H=>({...H,...B}))},[Dt]);(0,jt.Z)(async()=>{var B;const{requestUserCredentials:H}=(B=Te==null?void 0:Te["ui:options"])!=null?B:{},Ce=at.owner?at.owner:at.project;if(!H||!(at.host&&Ce&&at.repoName))return;const[je,Tt]=[at.host,at.repoName].map(encodeURIComponent),{token:Kt}=await fn.getCredentials({url:`https://${je}/${Ce}/${Tt}`,additionalScope:{repoWrite:!0,customScopes:H.additionalScopes}});Cn({[H.secretsKey]:Kt})},500,[at,Te]);const qe=(Ne=at.host&&((_e=en.byHost(at.host))==null?void 0:_e.type))!=null?Ne:null;return p.createElement(p.Fragment,null,p.createElement(ge,{host:at.host,hosts:Qn,onChange:B=>Dt(H=>({...H,host:B})),rawErrors:gt}),qe==="github"&&p.createElement(ln,{allowedOwners:Zn,onChange:Ie,rawErrors:gt,state:at}),qe==="gitlab"&&p.createElement(fe,{allowedOwners:Zn,rawErrors:gt,state:at,onChange:Ie}),qe==="bitbucket"&&p.createElement(X,{allowedOwners:Zn,allowedProjects:jn,rawErrors:gt,state:at,onChange:Ie}),qe==="azure"&&p.createElement(V,{allowedOrganizations:er,allowedOwners:Zn,rawErrors:gt,state:at,onChange:Ie}),qe==="gerrit"&&p.createElement(ue,{rawErrors:gt,state:at,onChange:Ie}),p.createElement(Se,{repoName:at.repoName,allowedRepos:tr,onChange:B=>Dt(H=>({...H,repoName:B})),rawErrors:gt}))},de=It(F.z.string(),F.z.object({allowedKinds:F.z.array(F.z.string()).optional().describe("List of kinds of entities to derive options from"),defaultKind:F.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:F.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:F.z.union([F.z.string(),F.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed.")})).schema,re=Ve=>{var _e;const{schema:{title:Ne="Entity",description:Te="An entity from the catalog"},uiSchema:ut,required:gt}=Ve,Et=(0,E.h_)(E.$4),{loading:at,value:Dt}=(0,Z.default)(async()=>(await Et.getBackstageIdentity()).ownershipEntityRefs),en=(_e=ut["ui:options"])==null?void 0:_e.allowedKinds;return at?p.createElement(P.ZP,{loading:at,renderInput:fn=>p.createElement($.Z,{...fn,label:Ne,margin:"dense",helperText:Te,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:gt,InputProps:fn.InputProps}),options:[]}):p.createElement(Je,{...Ve,schema:{title:Ne,description:Te},allowedKinds:en,catalogFilter:en?{filter:{kind:en,[`relations.${u.S4}`]:Dt||[]}}:{filter:{[`relations.${u.S4}`]:Dt||[]}}})},j=It(F.z.array(F.z.string()),F.z.object({kinds:F.z.array(F.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:F.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:F.z.string().optional().describe("Helper text to display")})).schema,Q=Ve=>{var _e,Ne,Te;const{formData:ut,onChange:gt,uiSchema:Et}=Ve,at=(0,E.h_)(h.Ah),[Dt,en]=(0,p.useState)([]),[fn,Cn]=(0,p.useState)(""),[Qn,er]=(0,p.useState)(!1),Zn=(0,u.In)().isValidTag,jn=(_e=Et["ui:options"])==null?void 0:_e.kinds,tr=(Ne=Et["ui:options"])==null?void 0:Ne.showCounts,D=(Te=Et["ui:options"])==null?void 0:Te.helperText,{loading:I,value:G}=(0,Z.default)(async()=>{const Ie="metadata.tags",qe={facets:[Ie]};jn&&(qe.filter={kind:jn});const{facets:B}=await at.getEntityFacets(qe),H=Object.fromEntries(B[Ie].map(({value:Ce,count:je})=>[Ce,je]));return en(Object.keys(H).sort((Ce,je)=>tr?H[je]-H[Ce]:Ce.localeCompare(je))),H}),ie=(Ie,qe)=>{let B=!1,H=!1;const Ce=ut||[];if(qe!=null&&qe.length&&Ce.length<qe.length){const je=qe[qe.length-1]=qe[qe.length-1].toLocaleLowerCase("en-US").trim();B=!Zn(je),H=Ce.indexOf(je)!==-1}er(B),Cn(B?fn:""),!B&&!H&&gt(qe||[])};return(0,Zt.Z)(()=>gt(ut||[])),p.createElement(L.Z,{margin:"normal"},p.createElement(P.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:ie,value:ut||[],inputValue:fn,loading:I,options:Dt,ChipProps:{size:"small"},renderOption:Ie=>tr?`${Ie} (${G==null?void 0:G[Ie]})`:Ie,renderInput:Ie=>p.createElement($.Z,{...Ie,label:"Tags",onChange:qe=>Cn(qe.target.value),error:Qn,helperText:D!=null?D:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},me=(0,E.x8)({id:"register-component",optional:!0}),We=(0,E.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Ke=(0,E.NT)({id:"scaffolder"}),He=(0,E.Rz)({id:"scaffolder/legacy/selected-template",parent:Ke,path:"/templates/:templateName"}),mt=(0,E.Rz)({id:"scaffolder/selected-template",parent:Ke,path:"/templates/:namespace/:templateName"}),se=(0,E.Rz)({id:"scaffolder/task",parent:Ke,path:"/tasks/:taskId"}),pe=(0,E.Rz)({id:"scaffolder/list-tasks",parent:Ke,path:"/tasks"}),ye=(0,E.Rz)({id:"scaffolder/actions",parent:Ke,path:"/actions"}),we=(0,E.Rz)({id:"scaffolder/edit",parent:Ke,path:"/edit"}),nt=(0,E.rx)({id:"scaffolder",apis:[(0,E.ni)({api:l.lc,deps:{discoveryApi:E.NW,scmIntegrationsApi:n.q3,fetchApi:E.gP,identityApi:E.$4},factory:({discoveryApi:Ve,scmIntegrationsApi:_e,fetchApi:Ne,identityApi:Te})=>new ht({discoveryApi:Ve,scmIntegrationsApi:_e,fetchApi:Ne,identityApi:Te})})],routes:{root:Ke,selectedTemplate:mt,ongoingTask:se,actions:ye,listTasks:pe,edit:we},externalRoutes:{registerComponent:me,viewTechDoc:We}}),$t=nt.provide((0,l.eP)({component:Je,name:"EntityPicker",schema:Ae})),Ut=nt.provide((0,l.eP)({component:dt,name:"EntityNamePicker",validation:zt,schema:Pt})),wt=nt.provide((0,l.eP)({component:pt,name:"RepoUrlPicker",validation:En,schema:St})),sn=nt.provide((0,l.eP)({component:bn,name:"OwnerPicker",schema:dn})),vn=nt.provide((0,E.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(4778),e.e(9361),e.e(4288),e.e(7380)]).then(e.bind(e,87380)).then(Ve=>Ve.Router),mountPoint:Ke})),Le=nt.provide((0,l.eP)({component:re,name:"OwnedEntityPicker",schema:de})),$e=nt.provide((0,l.eP)({component:Q,name:"EntityTagsPicker",schema:j})),be=nt.provide((0,E.P4)({name:"NextScaffolderPage",component:()=>Promise.all([e.e(4778),e.e(9361),e.e(4288),e.e(5540)]).then(e.bind(e,5540)).then(Ve=>Ve.Router),mountPoint:Ke})),Qe=({error:Ve})=>{const _e=(0,p.useRef)("");return(0,p.useEffect)(()=>{_e.current=String(Math.random())},[Ve]),Ve?p.createElement(k.Z,null,p.createElement(st.SX,{id:_e.current,variant:"warning",message:Ve.message})):null},lt=(0,z.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),kt=Ve=>{const{href:_e,text:Ne,Icon:Te,...ut}=Ve,gt=lt();return p.createElement(y.Z,{container:!0,direction:"row",spacing:1},p.createElement(y.Z,{item:!0},p.createElement(S.Z,{component:"div",className:gt.svgIcon},Te?p.createElement(Te,null):p.createElement(Ct.Z,null))),p.createElement(y.Z,{item:!0},p.createElement(st.rU,{to:_e,...ut},Ne||_e)))},Mt=({output:Ve})=>{const{links:_e=[]}=Ve,Ne=(0,E.qD)(),Te=(0,E.tg)(h.wi),ut=gt=>{var Et;return gt&&(Et=Ne.getSystemIcon(gt))!=null?Et:Ct.Z};return p.createElement(k.Z,{px:3,pb:3},_e.filter(({url:gt,entityRef:Et})=>gt||Et).map(({url:gt,entityRef:Et,title:at,icon:Dt})=>{if(Et){const en=(0,u.of)(Et,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),fn=Te(en);return{title:at,icon:Dt,url:fn}}return{title:at,icon:Dt,url:gt}}).map(({url:gt,title:Et,icon:at},Dt)=>p.createElement(kt,{key:`output-link-${Dt}`,href:gt,text:Et!=null?Et:gt,Icon:ut(at),target:"_blank"})))},nn=e(75951),gn=(0,z.Z)(Ve=>(0,xe.Z)({root:{width:"100%"},button:{marginBottom:Ve.spacing(2),marginLeft:Ve.spacing(2)},actionsContainer:{marginBottom:Ve.spacing(2)},resetContainer:{padding:Ve.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),An=({step:Ve})=>{const[_e,Ne]=(0,p.useState)("");return(0,Ge.Z)(()=>{if(!Ve.startedAt){Ne("");return}const Te=Ve.endedAt?ee.ou.fromISO(Ve.endedAt):ee.ou.local(),ut=ee.ou.fromISO(Ve.startedAt),gt=ee.Xp.fromDateTimes(ut,Te).toDuration().valueOf();Ne(nn(gt,{round:!0}))},1e3),p.createElement(S.Z,{variant:"caption"},_e)},Pn=(0,z.Z)(Ve=>(0,xe.Z)({root:{color:Ve.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:Ve.palette.status.ok},error:{color:Ve.palette.status.error}}));function Bn(Ve){const _e=Pn(),{active:Ne,completed:Te,error:ut}=Ve,gt=()=>Ne?p.createElement(x.Z,{size:"24px"}):Te?p.createElement(Ze.Z,null):ut?p.createElement(O.Z,null):p.createElement(ce.Z,null);return p.createElement("div",{className:N()(_e.root,{[_e.completed]:Te,[_e.error]:ut})},gt())}const Un=(0,p.memo)(Ve=>{const{steps:_e,currentStepId:Ne,onUserStepChange:Te}=Ve,ut=gn(Ve);return p.createElement("div",{className:ut.root},p.createElement(Re.Z,{activeStep:_e.findIndex(gt=>gt.id===Ne),orientation:"vertical",nonLinear:!0},_e.map((gt,Et)=>{const at=gt.status==="cancelled",Dt=gt.status==="processing",en=gt.status==="completed",fn=gt.status==="failed",Cn=gt.status==="skipped";return p.createElement(J.Z,{key:String(Et),expanded:!0},p.createElement(f.Z,{onClick:()=>Te(gt.id)},p.createElement(an.Z,{StepIconProps:{completed:en,error:fn||at,active:Dt},StepIconComponent:Bn,className:ut.stepWrapper},p.createElement("div",{className:ut.labelWrapper},p.createElement(S.Z,{variant:"subtitle2"},gt.name),Cn?p.createElement(S.Z,{variant:"caption"},"Skipped"):p.createElement(An,{step:gt})))))})))}),zn=({links:Ve=[]})=>Ve.length>0,Nn=Ve=>{const{loadingText:_e}=Ve,Ne=gn(),Te=(0,Pe.s0)(),ut=(0,E.tg)(Ke),gt=(0,E.h_)(l.lc),Et=(0,E.tg)(mt),[at,Dt]=(0,p.useState)(void 0),[en,fn]=(0,p.useState)(!1),[Cn,Qn]=(0,p.useState)(void 0),{taskId:er}=(0,E.Oi)(se),Zn=(0,l.WQ)(er),jn=Zn.completed,tr=Zn.cancelled,D=(0,p.useMemo)(()=>{var H,Ce;return(Ce=(H=Zn.task)==null?void 0:H.spec.steps.map(je=>{var Tt;return{...je,...(Tt=Zn==null?void 0:Zn.steps)==null?void 0:Tt[je.id]}}))!=null?Ce:[]},[Zn]);(0,p.useEffect)(()=>{var H;const Ce=D.find(je=>["failed","processing"].includes(je.status));if(jn&&!Ce){Qn((H=D[D.length-1])==null?void 0:H.id);return}Qn(Ce==null?void 0:Ce.id)},[D,jn]);const I=at!=null?at:Cn,G=(0,p.useMemo)(()=>{if(!I)return _e||"Loading...";const H=Zn.stepLogs[I];return H!=null&&H.length?H.join(`
`):"Waiting for logs..."},[Zn.stepLogs,I,_e]),ie=Zn.completed&&!Zn.loading&&!Zn.task,{output:Ie}=Zn,qe=()=>{var H,Ce,je;if(!Zn.task||!((Ce=(H=Zn.task)==null?void 0:H.spec.templateInfo)!=null&&Ce.entityRef)){Te(ut());return}const Tt=Zn.task.spec.parameters,{name:Kt,namespace:Vt}=(0,u.of)((je=Zn.task.spec.templateInfo)==null?void 0:je.entityRef);Te(`${Et({templateName:Kt,namespace:Vt})}?${c().stringify({formData:JSON.stringify(Tt)})}`)},B=async()=>{fn(!0),await gt.cancelTask(er)};return p.createElement(st.T3,{themeId:"home"},p.createElement(st.h4,{pageTitleOverride:`Task ${er}`,title:"Task Activity",subtitle:`Activity for task: ${er}`}),p.createElement(st.VY,null,ie?p.createElement(st.mf,{status:"404",statusMessage:"Task not found",additionalInfo:"No task found with this ID"}):p.createElement("div",null,p.createElement(y.Z,{container:!0},p.createElement(y.Z,{item:!0,xs:3},p.createElement(T.Z,null,p.createElement(Un,{steps:D,currentStepId:I,onUserStepChange:Dt}),Ie&&zn(Ie)&&p.createElement(Mt,{output:Ie}),p.createElement(C.Z,{className:Ne.button,onClick:qe,disabled:!jn,variant:"contained",color:"primary"},"Start Over"),p.createElement(C.Z,{className:Ne.button,onClick:B,disabled:jn||tr||en,variant:"outlined",color:"secondary"},(tr||en)&&!jn?"Cancelling...":"Cancel"))),p.createElement(y.Z,{item:!0,xs:9},!I&&p.createElement(st.Ex,null),p.createElement("div",{style:{height:"80vh"}},p.createElement(Qe,{error:Zn.error}),p.createElement(st.nU,{text:G})))))))}},15170:function(Rt,d,e){e.d(d,{T:function(){return x}});var n=e(2784),l=e(82108),u=e.n(l),m=e(80236),a=e(95544),c=e(90436),_=e(5806),b=e(21324),t=e(86619),E=e(19996),h=e(25505),$=e(38016),L=e(88013),k=e(73495),z=e(30705);const y=n.createElement(h.Z,{fontSize:"small"}),S=n.createElement(E.Z,{fontSize:"small"}),x=()=>{const f=(0,z.h_)(z.$v),{error:T,loading:C,availableTypes:P,selectedTypes:p,setSelectedTypes:Z}=(0,k.Uh)();return C?n.createElement(m.Ex,null):P?T?(f.post({message:"Failed to load entity types",severity:"error"}),null):n.createElement(a.Z,{pb:1,pt:1},n.createElement(c.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),n.createElement(L.ZP,{id:"categories-picker",multiple:!0,options:P,value:p,onChange:(F,Me)=>Z(Me),renderOption:(F,{selected:Me})=>n.createElement(_.Z,{control:n.createElement(b.Z,{icon:y,checkedIcon:S,checked:Me}),label:u()(F)}),size:"small",popupIcon:n.createElement($.Z,{"data-testid":"categories-picker-expand"}),renderInput:F=>n.createElement(t.Z,{...F,variant:"outlined"})})):null}},78990:function(Rt,d,e){e.d(d,{Ho:function(){return n.s},sG:function(){return n.d}});var n=e(23054),l=e(15170),u=e(12053),m=e(49462),a=e(34520),c=e(32272),_=e(19126),b=e.n(_),t=e(82394),E=e.n(t),h=e(88285),$=e(30705),L=e(73495),k=e(2784),z=e(68111),y=e(80236),S=e(72779),x=e.n(S),f=e(26228),T=e(82108),C=e.n(T);const P=null,p=null,Z=null,F=null,Me=null,Ee=null,Xe=null},92573:function(Rt,d,e){e.d(d,{E1:function(){return At},E5:function(){return wt},FA:function(){return ee},GQ:function(){return we},Nd:function(){return oe},Rx:function(){return Ge},US:function(){return ct},ay:function(){return ln},gK:function(){return ce},lt:function(){return pt},qO:function(){return Pt},wy:function(){return ue}});var n=e(30705),l=e(2784),u=e(79692),m=e(50581),a=e(61837),c=e(86619),_=e(4614),b=e(7089),t=e(42494),E=e(84899),h=e(5806),$=e(21324),L=e(56939),k=e(73698),z=e(12231),y=e(90436),S=e(28899),x=e(86136),f=e(49378),T=e(95544),C=e(77277),P=e(38402),p=e(11776),Z=e(21853),F=e(48760),Me=e(76635),Ee=e.n(Me),Xe=e(64279),Bt=e(25557),st=e(18473),jt=e(88013),Zt=e(69294),J=e(80236),an=e(19126),Re=e.n(an),xe=e(27742),O=e(35352),Ze=e(48834).Buffer;const ce=(0,n.T0)({id:"plugin.search.queryservice"});class R{constructor($e){this.mockedResults=$e}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const N=(0,u.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),ee=Le=>{const{text:$e,preTag:be,postTag:Qe}=Le,lt=N(),kt=(0,l.useMemo)(()=>$e.split(new RegExp(`(${be}.+?${Qe})`)),[Qe,be,$e]);return l.createElement(l.Fragment,null,kt.map((Mt,nn)=>Mt.includes(be)?l.createElement("mark",{className:lt.highlight,key:nn},Mt.replace(new RegExp(`${be}|${Qe}`,"g"),"")):Mt))},Pe=(0,st.CT)("search-context"),Ge=()=>{const Le=(0,l.useContext)(Pe);if(!Le)throw new Error("useSearch must be used within a SearchContextProvider");const $e=Le.atVersion(1);if(!$e)throw new Error("No SearchContext v1 found");return $e},Ct=()=>(0,l.useContext)(Pe)!==void 0,ht={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},It=(Le=ht)=>{var $e,be,Qe,lt;const kt=(0,n.h_)(ce),[Mt,nn]=(0,l.useState)(Le.term),[gn,An]=(0,l.useState)(Le.types),[Pn,Bn]=(0,l.useState)(Le.filters),[Un,zn]=(0,l.useState)(Le.pageLimit),[Nn,Ve]=(0,l.useState)(Le.pageCursor),_e=(0,Bt.Z)(Mt),Ne=(0,Bt.Z)(Pn),Te=(0,Xe.default)(()=>kt.query({term:Mt,types:gn,filters:Pn,pageLimit:Un,pageCursor:Nn}),[Mt,gn,Pn,Un,Nn]),ut=!Te.loading&&!Te.error&&(($e=Te.value)==null?void 0:$e.nextPageCursor),gt=!Te.loading&&!Te.error&&((be=Te.value)==null?void 0:be.previousPageCursor),Et=(0,l.useCallback)(()=>{var en;Ve((en=Te.value)==null?void 0:en.nextPageCursor)},[(Qe=Te.value)==null?void 0:Qe.nextPageCursor]),at=(0,l.useCallback)(()=>{var en;Ve((en=Te.value)==null?void 0:en.previousPageCursor)},[(lt=Te.value)==null?void 0:lt.previousPageCursor]);return(0,l.useEffect)(()=>{_e!==void 0&&Mt!==_e&&Ve(void 0)},[Mt,_e,Ve]),(0,l.useEffect)(()=>{Ne!==void 0&&!(0,Me.isEqual)(Pn,Ne)&&Ve(void 0)},[Pn,Ne,Ve]),{result:Te,term:Mt,setTerm:nn,types:gn,setTypes:An,filters:Pn,setFilters:Bn,pageLimit:Un,setPageLimit:zn,pageCursor:Nn,setPageCursor:Ve,fetchNextPage:ut?Et:void 0,fetchPreviousPage:gt?at:void 0}},q=Le=>{const{initialState:$e,children:be}=Le,Qe=It($e);return l.createElement(n.fC,{attributes:{searchTypes:Qe.types.sort().join(",")}},l.createElement(Pe.Provider,{value:(0,st.EI)({1:Qe})},be))},oe=Le=>{const{initialState:$e,inheritParentContextIfAvailable:be,children:Qe}=Le;return Ct()&&be?l.createElement(l.Fragment,null,Qe):l.createElement(q,{initialState:$e},Qe)},Ae=({children:Le})=>{var $e,be;const Qe=Pn=>(0,Bt.Z)(Pn)!==Pn,lt=(0,n.z$)(),{term:kt,result:Mt}=Ge(),nn=(be=($e=Mt.value)==null?void 0:$e.numberOfResults)!=null?be:void 0,An=Qe(Mt.loading)&&!Mt.loading;return(0,l.useEffect)(()=>{kt&&An&&lt.captureEvent("search",kt,{value:nn})},[lt,kt,nn,An]),l.createElement(l.Fragment,null,Le)};function Je(Le){return(0,l.forwardRef)(($e,be)=>l.createElement(oe,{inheritParentContextIfAvailable:!0},l.createElement(Le,{...$e,ref:be})))}const ct=Je((0,l.forwardRef)((Le,$e)=>{const{onChange:be,onKeyDown:Qe=()=>{},onClear:lt=()=>{},onSubmit:kt=()=>{},debounceTime:Mt=200,clearButton:nn=!0,fullWidth:gn=!0,value:An,label:Pn,placeholder:Bn,inputProps:Un={},InputProps:zn={},endAdornment:Nn,...Ve}=Le,_e=(0,n.h_)(n.Ds),[Ne,Te]=(0,l.useState)("");(0,l.useEffect)(()=>{Te(Cn=>Cn!==An?String(An):Cn)},[An]),(0,F.Z)(()=>be(Ne),Mt,[Ne]);const ut=(0,l.useCallback)(Cn=>{Te(Cn.target.value)},[Te]),gt=(0,l.useCallback)(Cn=>{Qe&&Qe(Cn),kt&&Cn.key==="Enter"&&kt()},[Qe,kt]),Et=(0,l.useCallback)(()=>{be(""),lt&&lt()},[be,lt]),at=Pn?void 0:"Search",Dt=Bn!=null?Bn:`Search in ${_e.getOptionalString("app.title")||"Backstage"}`,en=l.createElement(m.Z,{position:"start"},l.createElement(a.Z,{"aria-label":"Query",size:"small",disabled:!0},l.createElement(Z.Z,null))),fn=l.createElement(m.Z,{position:"end"},l.createElement(C.Z,{"aria-label":"Clear",size:"small",onClick:Et,onKeyDown:Cn=>{Cn.key==="Enter"&&Cn.stopPropagation()}},"Clear"));return l.createElement(Ae,null,l.createElement(c.Z,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:$e,value:Ne,label:Pn,placeholder:Dt,InputProps:{startAdornment:en,endAdornment:nn?fn:Nn,...zn},inputProps:{"aria-label":at,...Un},fullWidth:gn,onChange:ut,onKeyDown:gt,...Ve}))})),At=Je((0,l.forwardRef)((Le,$e)=>{const{value:be="",onChange:Qe,...lt}=Le,{term:kt,setTerm:Mt}=Ge();(0,l.useEffect)(()=>{be&&Mt(String(be))},[be,Mt]);const nn=(0,l.useCallback)(gn=>{Qe?Qe(gn):Mt(gn)},[Qe,Mt]);return l.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},l.createElement(ct,{...lt,ref:$e,value:kt,onChange:nn}))})),qt=(0,u.Z)(Le=>({loading:{right:Le.spacing(1),position:"absolute"}})),zt=Le=>$e=>l.createElement(oe,{inheritParentContextIfAvailable:!0},l.createElement(Le,{...$e})),Be=()=>{const Le=qt();return l.createElement(_.Z,{className:Le.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},Pt=zt(function($e){const{loading:be,value:Qe,onChange:lt=()=>{},options:kt=[],getOptionLabel:Mt=ut=>String(ut),inputPlaceholder:nn,inputDebounceTime:gn,freeSolo:An=!0,fullWidth:Pn=!0,clearOnBlur:Bn=!1,"data-testid":Un="search-autocomplete",...zn}=$e,{setTerm:Nn}=Ge(),Ve=(0,l.useCallback)(ut=>ut?typeof ut=="string"?ut:Mt(ut):"",[Mt]),_e=(0,l.useMemo)(()=>Ve(Qe),[Qe,Ve]),Ne=(0,l.useCallback)((ut,gt,Et,at)=>{Nn(Ve(gt)),lt(ut,gt,Et,at)},[Ve,Nn,lt]),Te=(0,l.useCallback)(({InputProps:{ref:ut,className:gt,endAdornment:Et},InputLabelProps:at,...Dt})=>l.createElement(At,{...Dt,ref:ut,clearButton:!1,value:_e,placeholder:nn,debounceTime:gn,endAdornment:be?l.createElement(Be,null):Et,InputProps:{className:gt}}),[be,_e,nn,gn]);return l.createElement(jt.ZP,{...zn,"data-testid":Un,value:Qe,onChange:Ne,options:kt,getOptionLabel:Mt,renderInput:Te,freeSolo:An,fullWidth:Pn,clearOnBlur:Bn})}),dt=Le=>{const{icon:$e,primaryText:be,primaryTextTypographyProps:Qe,secondaryText:lt,secondaryTextTypographyProps:kt,disableTextTypography:Mt}=Le;return React.createElement(React.Fragment,null,$e?React.createElement(ListItemIcon,null,$e):null,React.createElement(ListItemText,{primary:be,primaryTypographyProps:Qe,secondary:lt,secondaryTypographyProps:kt,disableTypography:Mt}))},hn=(Le,$e,be=[],Qe=250)=>{const lt=(0,l.useRef)({}),kt=Le||(()=>Promise.resolve([])),[Mt,nn]=(0,Zt.default)(kt,[$e],{loading:!0});if((0,F.Z)(()=>{lt.current[$e]===void 0&&(lt.current[$e]=nn($e).then(An=>(lt.current[$e]=An,An)))},Qe,[nn,$e]),be.length)return{loading:!1,value:be};const gn=lt.current[$e];return Array.isArray(gn)?{loading:!1,value:gn}:Mt},dn=(Le,$e)=>{const{setFilters:be}=Ge();(0,l.useEffect)(()=>{$e&&[$e].flat().length>0&&be(Qe=>({...Qe,[Le]:$e}))},[])},bn=Le=>{const{className:$e,defaultValue:be,name:Qe,values:lt,valuesDebounceMs:kt,label:Mt,filterSelectedOptions:nn,limitTags:gn,multiple:An}=Le,[Pn,Bn]=(0,l.useState)("");dn(Qe,be);const Un=typeof lt=="function"?lt:void 0,zn=typeof lt=="function"?void 0:lt,{value:Nn,loading:Ve}=hn(Un,Pn,zn,kt),{filters:_e,setFilters:Ne}=Ge(),Te=_e[Qe]||(An?[]:null),ut=(at,Dt)=>{Ne(en=>{const{[Qe]:fn,...Cn}=en;return Dt?{...Cn,[Qe]:Dt}:{...Cn}})},gt=at=>l.createElement(c.Z,{...at,name:"search",variant:"outlined",label:Mt,fullWidth:!0}),Et=(at,Dt)=>at.map((en,fn)=>l.createElement(b.Z,{label:en,color:"primary",...Dt({index:fn})}));return l.createElement(jt.ZP,{filterSelectedOptions:nn,limitTags:gn,multiple:An,className:$e,id:`${An?"multi-":""}select-filter-${Qe}--select`,options:Nn||[],loading:Ve,value:Te,onChange:ut,onInputChange:(at,Dt)=>Bn(Dt),renderInput:gt,renderTags:Et})},it=(0,u.Z)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),St=Le=>{const{className:$e,defaultValue:be,label:Qe,name:lt,values:kt=[],valuesDebounceMs:Mt}=Le,nn=it(),{filters:gn,setFilters:An}=Ge();dn(lt,be);const Pn=typeof kt=="function"?kt:void 0,Bn=typeof kt=="function"?void 0:kt,{value:Un=[],loading:zn}=hn(Pn,"",Bn,Mt),Nn=Ve=>{const{target:{value:_e,checked:Ne}}=Ve;An(Te=>{const{[lt]:ut,...gt}=Te,Et=(ut||[]).filter(Dt=>Dt!==_e),at=Ne?[...Et,_e]:Et;return at.length?{...gt,[lt]:at}:gt})};return l.createElement(t.Z,{className:$e,disabled:zn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},Qe?l.createElement(E.Z,{className:nn.label},Qe):null,Un.map(Ve=>{var _e;return l.createElement(h.Z,{key:Ve,classes:{root:nn.checkboxWrapper,label:nn.textWrapper},label:Ve,control:l.createElement($.Z,{color:"primary",tabIndex:-1,inputProps:{"aria-labelledby":Ve},value:Ve,name:Ve,onChange:Nn,checked:((_e=gn[lt])!=null?_e:[]).includes(Ve)})})}))},En=Le=>{const{className:$e,defaultValue:be,label:Qe,name:lt,values:kt,valuesDebounceMs:Mt}=Le,nn=it();dn(lt,be);const gn=typeof kt=="function"?kt:void 0,An=typeof kt=="function"?void 0:kt,{value:Pn=[],loading:Bn}=hn(gn,"",An,Mt),{filters:Un,setFilters:zn}=Ge(),Nn=Ve=>{const{target:{value:_e}}=Ve;zn(Ne=>{const{[lt]:Te,...ut}=Ne;return _e?{...ut,[lt]:_e}:ut})};return l.createElement(t.Z,{disabled:Bn,className:$e,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},Qe?l.createElement(L.Z,{className:nn.label,margin:"dense"},Qe):null,l.createElement(k.Z,{variant:"outlined",value:Un[lt]||"",onChange:Nn},l.createElement(z.Z,{value:""},l.createElement("em",null,"All")),Pn.map(Ve=>l.createElement(z.Z,{key:Ve,value:Ve},l.createElement(y.Z,{variant:"inherit",noWrap:!0},Ve)))))},ln=Le=>{const{component:$e,...be}=Le;return l.createElement($e,{...be})};ln.Checkbox=Le=>l.createElement(ln,{...Le,component:St}),ln.Select=Le=>l.createElement(ln,{...Le,component:En}),ln.Autocomplete=Le=>l.createElement(ln,{...Le,component:bn});const fe=Le=>Ze.from(Le.toString(),"utf-8").toString("base64"),V=Le=>Le?Number(Ze.from(Le,"base64").toString("utf-8")):0,X=Le=>{const{total:$e=-1,cursor:be,hasNextPage:Qe,onCursorChange:lt,limit:kt=25,limitLabel:Mt="Results per page:",limitText:nn=({from:Nn,to:Ve})=>$e>0?`of ${$e}`:`${Nn}-${Ve}`,limitOptions:gn,onLimitChange:An,...Pn}=Le,Bn=(0,l.useMemo)(()=>V(be),[be]),Un=(0,l.useCallback)((Nn,Ve)=>{lt==null||lt(fe(Ve))},[lt]),zn=(0,l.useCallback)(Nn=>{const Ve=Nn.target.value;An==null||An(parseInt(Ve,10))},[An]);return l.createElement(S.Z,{...Pn,component:"div",count:$e,page:Bn,nextIconButtonProps:{...Qe!==void 0&&{disabled:!Qe}},onPageChange:Un,rowsPerPage:kt,labelRowsPerPage:Mt,labelDisplayedRows:nn,rowsPerPageOptions:gn,onRowsPerPageChange:zn})},ue=Le=>{const{pageLimit:$e,setPageLimit:be,pageCursor:Qe,setPageCursor:lt,fetchNextPage:kt}=Ge(),Mt=(0,l.useCallback)(nn=>{be(nn),lt(void 0)},[be,lt]);return l.createElement(X,{...Le,hasNextPage:!!kt,limit:$e,onLimitChange:Mt,cursor:Qe,onCursorChange:lt})},ge=Le=>{const{children:$e}=Le,be=Ge(),{result:Qe,...lt}=be;return $e(Qe,lt)},Se=Le=>{const{query:$e,children:be}=Le,Qe=(0,n.h_)(ce),lt=(0,Xe.default)(()=>{const{term:kt="",types:Mt=[],filters:nn={},...gn}=$e;return Qe.query({...gn,term:kt,types:Mt,filters:nn})},[$e]);return be(lt,$e)},ot=Le=>{const{query:$e,children:be}=Le;return $e?l.createElement(Se,{query:$e},be):l.createElement(ge,null,be)},tt=Le=>{const{query:$e,children:be,noResultsComponent:Qe=l.createElement(J.ub,{missing:"data",title:"Sorry, no results were found"}),...lt}=Le;return l.createElement(ot,{query:$e},({loading:kt,error:Mt,value:nn})=>kt?l.createElement(J.Ex,null):Mt?l.createElement(J.Gk,{title:"Error encountered while fetching search results",error:Mt}):nn!=null&&nn.results.length?(0,Me.isFunction)(be)?be(nn):l.createElement(vn,{...lt,results:nn.results},be):Qe)},pt=Le=>l.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},l.createElement(tt,{...Le})),Lt=({result:Le,highlight:$e,icon:be,secondaryAction:Qe,lineClamp:lt=5})=>Le?l.createElement(l.Fragment,null,be&&l.createElement(x.Z,null,be),l.createElement(f.Z,{primaryTypographyProps:{variant:"h6"},primary:l.createElement(J.rU,{noTrack:!0,to:Le.location},$e!=null&&$e.fields.title?l.createElement(ee,{text:($e==null?void 0:$e.fields.title)||"",preTag:($e==null?void 0:$e.preTag)||"",postTag:($e==null?void 0:$e.postTag)||""}):Le.title),secondary:l.createElement(y.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:lt,overflow:"hidden"},color:"textSecondary",variant:"body2"},$e!=null&&$e.fields.text?l.createElement(ee,{text:$e.fields.text,preTag:$e.preTag,postTag:$e.postTag}):Le.text)}),Qe&&l.createElement(T.Z,{alignItems:"flex-end"},Qe)):null,de=Le=>l.createElement(n.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},l.createElement(Lt,{...Le})),re=Le=>{const{error:$e,loading:be,resultItems:Qe,renderResultItem:lt=gn=>React.createElement(de,{key:gn.document.location,result:gn.document}),disableRenderingWithNoResults:kt,noResultsComponent:Mt=kt?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...nn}=Le;return be?React.createElement(Progress,null):$e?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:$e}):Qe!=null&&Qe.length?React.createElement(List,{...nn},Qe.map(lt)):React.createElement(React.Fragment,null,Mt)},A=Le=>{const{query:$e,renderResultItem:be,children:Qe,...lt}=Le,kt=sn(Qe);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(ot,{query:$e},({loading:Mt,error:nn,value:gn})=>React.createElement(re,{...lt,error:nn,loading:Mt,resultItems:gn==null?void 0:gn.results,renderResultItem:be!=null?be:kt})))},j=(0,u.Z)(Le=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Le.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Le.palette.text.secondary,margin:Le.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Le.palette.text.secondary,margin:Le.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Le.spacing(.5)}})),Q=Le=>{const $e=j(),{label:be,children:Qe,...lt}=Le;return React.createElement(Chip,{...lt,className:$e.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,be,": ",Qe)})},me=()=>null,We=(0,u.Z)(Le=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Le.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Le.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),Ke=Le=>{const $e=We(),{label:be,value:Qe="None",onChange:lt,onDelete:kt}=Le,Mt=useCallback(nn=>{lt(nn.target.value)},[lt]);return React.createElement(Q,{label:be,onDelete:kt},React.createElement(Typography,{role:"textbox",component:"span",className:$e.root,onChange:Mt,contentEditable:!0,suppressContentEditableWarning:!0},Qe))},He=(0,u.Z)(Le=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Le.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),mt=Le=>{const $e=He(),{label:be,value:Qe="none",onChange:lt,onDelete:kt,children:Mt}=Le,nn=useCallback(gn=>{lt(gn.target.value)},[lt]);return React.createElement(Q,{label:be,onDelete:kt},React.createElement(Select,{className:$e.root,value:Qe,onChange:nn,input:React.createElement(InputBase,null),IconComponent:me},React.createElement(MenuItem,{value:"none"},"None"),Mt))};function se(Le){const $e=j(),[be,Qe]=useState(null),{error:lt,loading:kt,icon:Mt,title:nn,titleProps:gn={},link:An=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:$e.listSubheaderLinkIcon})),linkProps:Pn={},filterOptions:Bn,renderFilterOption:Un=at=>React.createElement(MenuItem,{key:String(at),value:String(at)},at),filterFields:zn,renderFilterField:Nn,resultItems:Ve,renderResultItem:_e=at=>React.createElement(de,{key:at.document.location,result:at.document}),disableRenderingWithNoResults:Ne,noResultsComponent:Te=Ne?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...ut}=Le,gt=useCallback(at=>{Qe(at.currentTarget)},[]),Et=useCallback(()=>{Qe(null)},[]);return kt?React.createElement(Progress,null):lt?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:lt}):Ve!=null&&Ve.length?React.createElement(List,{...ut},React.createElement(ListSubheader,{className:$e.listSubheader},Mt,React.createElement(Typography,{className:$e.listSubheaderName,component:"strong",...gn},nn),Bn?React.createElement(Chip,{className:$e.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:gt}):null,Bn?React.createElement(Menu,{id:"filters-menu",anchorEl:be,open:Boolean(be),onClose:Et,onClick:Et,keepMounted:!0},Bn.map(Un)):null,zn==null?void 0:zn.map(at=>{var Dt;return(Dt=Nn==null?void 0:Nn(at))!=null?Dt:null}),React.createElement(Link,{className:$e.listSubheaderLink,to:"/search",...Pn},An)),Ve.map(_e)):React.createElement(React.Fragment,null,Te)}function pe(Le){const{query:$e,children:be,renderResultItem:Qe,linkProps:lt={},...kt}=Le,Mt=sn(be);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(ot,{query:$e},({loading:nn,error:gn,value:An},{term:Pn,types:Bn,pageCursor:Un,filters:zn={}})=>{const Nn=`/search?${qs.stringify({term:Pn,types:Bn,filters:zn,pageCursor:Un,query:Pn},{arrayFormat:"brackets"})}`;return React.createElement(se,{...kt,error:gn,loading:nn,linkProps:{to:Nn,...lt},filterFields:Object.keys(zn),resultItems:An==null?void 0:An.results,renderResultItem:Qe!=null?Qe:Mt})}))}const ye=(0,u.Z)(Le=>({root:{display:"flex",justifyContent:"space-between",gap:Le.spacing(2),margin:Le.spacing(2,0)}})),we=()=>{const{fetchNextPage:Le,fetchPreviousPage:$e}=Ge(),be=ye();return!Le&&!$e?l.createElement(l.Fragment,null):l.createElement("nav",{"aria-label":"pagination navigation",className:be.root},l.createElement(C.Z,{"aria-label":"previous page",disabled:!$e,onClick:$e,startIcon:l.createElement(O.Z,null)},"Previous"),l.createElement(C.Z,{"aria-label":"next page",disabled:!Le,onClick:Le,endIcon:l.createElement(xe.Z,null)},"Next"))},nt="search.results.list.items.extensions.v1",$t=(Le,$e)=>{for(const be of Le){if(!(0,l.isValidElement)(be))continue;const Qe=(0,n.IY)(be,nt);if(Qe!=null&&Qe($e))return(0,l.cloneElement)(be,{rank:$e.rank,highlight:$e.highlight,result:$e.document,...be.props})}return null},Ut=Le=>{const{rank:$e,result:be,noTrack:Qe,children:lt,alignItems:kt="flex-start",...Mt}=Le,nn=(0,n.z$)(),gn=(0,l.useCallback)(()=>{Qe||be&&nn.captureEvent("discover",be.title,{attributes:{to:be.location},value:$e})},[$e,be,Qe,nn]);return l.createElement(P.Z,{divider:!0,alignItems:kt,onClickCapture:gn,...Mt},lt)},wt=Le=>{const{name:$e,component:be,predicate:Qe=()=>!0}=Le;return(0,n.YO)({name:$e,component:{lazy:()=>be().then(lt=>kt=>l.createElement(Ut,{rank:kt.rank,result:kt.result,noTrack:kt.noTrack},(0,l.createElement)(lt,kt)))},data:{[nt]:Qe}})},sn=Le=>{const $e=(0,n.vJ)(Le,be=>be.selectByComponentData({key:nt}).getElements(),[Le]);return(0,l.useCallback)((be,Qe)=>{const lt=$t($e,be);return l.createElement(l.Fragment,{key:Qe},lt!=null?lt:l.createElement(Ut,{rank:be.rank,result:be.document},l.createElement(de,{rank:be.rank,highlight:be.highlight,result:be.document})))},[$e])},vn=Le=>{const{results:$e,children:be,...Qe}=Le,lt=sn(be);return l.createElement(p.Z,{...Qe},$e.map(lt))}},83969:function(Rt,d,e){e.d(d,{S:function(){return dn},a:function(){return Pt},b:function(){return zt},c:function(){return fe},e:function(){return Ae},f:function(){return Je},r:function(){return q},u:function(){return dt}});var n=e(80236),l=e(30705),u=e(92573),m=e(60364),a=e(79249),c=e(38724),_=e(60905),b=e(85256),t=e(49429),E=e(8629),h=e(79692),$=e(94339),L=e(32552),k=e(24579),z=e(27616),y=e(8284),S=e(70660),x=e(11776),f=e(38402),T=e(86136),C=e(49378),P=e(99152),p=e(6487),Z=e(42494),F=e(56939),Me=e(73698),Ee=e(7089),Xe=e(12231),Bt=e(21324),st=e(95544),jt=e(77277),Zt=e(61837),J=e(27597),an=e(87685),Re=e(2784),xe=e(73557),O=e(32272),Ze=e(19126),ce=e.n(Ze),R=e(18473),N=e(55649),ee=e(25557),Pe=e(62155),Ge=e(38016),Ct=e(56881),ht=e(64279);class It{constructor(ue){this.discoveryApi=ue.discoveryApi,this.identityApi=ue.identityApi}async query(ue){const{token:ge}=await this.identityApi.getCredentials(),Se=ce().stringify(ue),ot=`${await this.discoveryApi.getBaseUrl("search")}/query?${Se}`,tt=await fetch(ot,{headers:ge?{Authorization:`Bearer ${ge}`}:{}});if(!tt.ok)throw await O.VL.fromResponse(tt);return tt.json()}}const q=(0,l.NT)({id:"search"}),oe=(0,l.rx)({id:"search",apis:[(0,l.ni)({api:u.gK,deps:{discoveryApi:l.NW,identityApi:l.$4},factory:({discoveryApi:X,identityApi:ue})=>new It({discoveryApi:X,identityApi:ue})})],routes:{root:q}}),Ae=oe.provide((0,l.P4)({name:"SearchPage",component:()=>e.e(2783).then(e.bind(e,72783)).then(X=>X.SearchPage),mountPoint:q})),Je=oe.provide((0,l.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(8582).then(e.bind(e,38582)).then(X=>X.SidebarSearchModal)}})),ct=oe.provide((0,l.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(5695).then(e.bind(e,95695)).then(X=>X.HomePageSearchBar)}})),At=(0,h.Z)(X=>({dialogTitle:{gap:X.spacing(1),display:"grid",alignItems:"center",gridTemplateColumns:"1fr auto","&> button":{marginTop:X.spacing(1)}},input:{flex:1},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:X.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),qt=({toggleModal:X})=>{const ue=At(),ge=(0,xe.s0)(),{transitions:Se}=(0,m.Z)(),{focusContent:ot}=(0,n.r0)(),{term:tt}=(0,u.Rx)(),pt=(0,Re.useRef)(null),Lt=`${(0,l.tg)(q)()}?query=${tt}`;(0,Re.useEffect)(()=>{var A;(A=pt==null?void 0:pt.current)==null||A.focus()});const de=(0,Re.useCallback)(()=>{setTimeout(ot,Se.duration.leavingScreen)},[ot,Se]),re=(0,Re.useCallback)(A=>{A.key==="Enter"&&(ge(Lt),de())},[ge,de,Lt]);return Re.createElement(Re.Fragment,null,Re.createElement(a.Z,null,Re.createElement(st.Z,{className:ue.dialogTitle},Re.createElement(u.E1,{className:ue.input,inputProps:{ref:pt},onKeyDown:re}),Re.createElement(Zt.Z,{"aria-label":"close",onClick:X},Re.createElement(an.Z,null)))),Re.createElement(c.Z,null,Re.createElement(_.Z,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center"},Re.createElement(_.Z,{item:!0},Re.createElement(jt.Z,{to:Lt,onClick:de,endIcon:Re.createElement(J.Z,null),component:n.rU,color:"primary"},"View Full Results"))),Re.createElement(b.Z,null),Re.createElement(u.lt,{onClick:de,onKeyDown:de})),Re.createElement(t.Z,{className:ue.dialogActionsContainer},Re.createElement(_.Z,{container:!0,direction:"row"},Re.createElement(_.Z,{item:!0,xs:12},Re.createElement(u.GQ,null)))))},zt=X=>{var ue;const{open:ge=!0,hidden:Se,toggleModal:ot,children:tt}=X,pt=At();return Re.createElement(E.Z,{classes:{paperFullWidth:pt.paperFullWidth},onClose:ot,"aria-labelledby":"search-modal-title",fullWidth:!0,maxWidth:"lg",open:ge,hidden:Se},ge&&Re.createElement(u.Nd,{inheritParentContextIfAvailable:!0},(ue=tt&&tt({toggleModal:ot}))!=null?ue:Re.createElement(qt,{toggleModal:ot})))},Be=(0,R.CT)("search-modal-context"),Pt=X=>{const ue=dt(X.showInitially),ge=(0,R.EI)({1:ue});return Re.createElement(Be.Provider,{value:ge},X.children)};function dt(X=!1){const[ue,ge]=(0,Re.useState)({hidden:!X,open:X}),Se=(0,Re.useCallback)(()=>ge(A=>({open:!0,hidden:!A.hidden})),[]),ot=(0,Re.useCallback)(A=>ge(j=>({open:j.open||A,hidden:!A})),[]),tt=(0,Re.useContext)(Be),pt=tt==null?void 0:tt.atVersion(1),Lt=!!(pt!=null&&pt.state),de=(0,xe.TH)(),re=`${de.pathname}${de.search}${de.hash}`;return(0,N.Z)(()=>{ge(A=>({open:A.open,hidden:!0}))},[re]),Lt?pt:{state:ue,toggleModal:Se,setOpen:ot}}const hn=()=>{const X=(0,xe.TH)(),{term:ue,setTerm:ge,types:Se,setTypes:ot,pageCursor:tt,setPageCursor:pt,filters:Lt,setFilters:de}=(0,u.Rx)(),re=(0,ee.Z)(X.search);return(0,Re.useEffect)(()=>{if(X.search===re)return;const A=ce().parse(X.search.substring(1),{arrayLimit:0})||{};A.filters&&de(A.filters),A.query&&ge(A.query),A.pageCursor&&pt(A.pageCursor),A.types&&ot(A.types)},[re,X,ge,ot,pt,de]),(0,Re.useEffect)(()=>{const A=ce().stringify({query:ue,types:Se,pageCursor:tt,filters:Lt},{arrayFormat:"brackets"}),j=`${window.location.pathname}?${A}`;window.history.replaceState(null,document.title,j)},[ue,Se,tt,Lt]),null},dn=()=>{const X=(0,xe.pC)();return Re.createElement(u.Nd,null,Re.createElement(hn,null),X)},bn=(0,h.Z)(X=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:X.spacing(1)},icon:{color:X.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:X.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:X.spacing(2,0),"&.Mui-expanded":{margin:X.spacing(2,0)}},accordionDetails:{padding:X.spacing(0,0,1)}})),it=X=>{const ue=bn(),{filters:ge,setPageCursor:Se,setTypes:ot,term:tt,types:pt}=(0,u.Rx)(),Lt=(0,l.h_)(u.gK),[de,re]=(0,Re.useState)(!0),{defaultValue:A,name:j,showCounts:Q,types:me}=X,We=()=>re(pe=>!pe),Ke=pe=>()=>{ot(pe!==""?[pe]:[]),Se(void 0),re(!1)};(0,Re.useEffect)(()=>{A&&ot([A])},[]);const He=[{value:"",name:"All",icon:Re.createElement(Ct.Z,null)},...me],mt=pt[0]||"",{value:se}=(0,ht.default)(async()=>{if(!Q)return{};const pe=await Promise.all(He.map(ye=>ye.value).map(async ye=>{const{numberOfResults:we}=await Lt.query({term:tt,types:ye?[ye]:[],filters:pt.includes(ye)||!pt.length&&!ye?ge:{},pageLimit:0});return[ye,we!==void 0?`${we>=1e4?">10000":we} results`:" -- "]}));return Object.fromEntries(pe)},[ge,Q,tt,pt]);return Re.createElement($.Z,{className:ue.card},Re.createElement(L.Z,{title:j,titleTypographyProps:{variant:"overline"}}),Re.createElement(k.Z,{className:ue.cardContent},Re.createElement(z.Z,{className:ue.accordion,expanded:de,onChange:We},Re.createElement(y.Z,{classes:{root:ue.accordionSummary,content:ue.accordionSummaryContent},expandIcon:Re.createElement(Ge.Z,{className:ue.icon}),IconButtonProps:{size:"small"}},de?"Collapse":He.filter(pe=>pe.value===mt)[0].name),Re.createElement(S.Z,{classes:{root:ue.accordionDetails}},Re.createElement(x.Z,{className:ue.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},He.map(pe=>Re.createElement(Re.Fragment,{key:pe.value},Re.createElement(b.Z,null),Re.createElement(f.Z,{selected:pt[0]===pe.value||pt.length===0&&pe.value==="",onClick:Ke(pe.value),button:!0},Re.createElement(T.Z,null,(0,Re.cloneElement)(pe.icon,{className:ue.listItemIcon})),Re.createElement(C.Z,{primary:pe.name,secondary:se&&se[pe.value]})))))))))},St=(0,h.Z)(X=>({tabs:{borderBottom:`1px solid ${X.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:X.typography.fontWeightBold,fontSize:X.typography.pxToRem(13),color:X.palette.text.primary,minWidth:"130px"}})),En=X=>{const ue=St(),{setPageCursor:ge,setTypes:Se,types:ot}=(0,u.Rx)(),{defaultValue:tt,types:pt}=X,Lt=(re,A)=>{Se(A!==""?[A]:[]),ge(void 0)};(0,Re.useEffect)(()=>{tt&&Se([tt])},[]);const de=[{value:"",name:"All"},...pt];return Re.createElement(P.Z,{"aria-label":"List of search types tabs",className:ue.tabs,indicatorColor:"primary",value:ot.length===0?"":ot[0],onChange:Lt},de.map((re,A)=>Re.createElement(p.Z,{key:A,className:ue.tab,label:re.name,value:re.value})))},ln=(0,h.Z)(X=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:X.spacing(1)},chip:{margin:2}})),fe=X=>{const{className:ue,defaultValue:ge,name:Se,values:ot=[]}=X,tt=ln(),{types:pt,setTypes:Lt}=(0,u.Rx)();(0,Pe.Z)(()=>{pt.length||(ge&&Array.isArray(ge)?Lt(ge):ge&&Lt([ge]))});const de=re=>{const A=re.target.value;Lt(A)};return Re.createElement(Z.Z,{className:ue,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},Re.createElement(F.Z,{className:tt.label,margin:"dense"},Se),Re.createElement(Me.Z,{multiple:!0,variant:"outlined",value:pt,onChange:de,placeholder:"All Results",renderValue:re=>Re.createElement("div",{className:tt.chips},re.map(A=>Re.createElement(Ee.Z,{key:A,label:A,className:tt.chip,size:"small"})))},ot.map(re=>Re.createElement(Xe.Z,{key:re,value:re},Re.createElement(Bt.Z,{checked:pt.indexOf(re)>-1}),Re.createElement(C.Z,{primary:re})))))};fe.Accordion=X=>Re.createElement(it,{...X}),fe.Tabs=X=>Re.createElement(En,{...X});const V=X=>{const ue=useRouteRef(q),{focusContent:ge}=useContent(),Se=useNavigate(),ot=useCallback(tt=>{const pt=qs.stringify({query:tt},{addQueryPrefix:!0});ge(),Se(`${ue()}${pt}`)},[ge,Se,ue]);return React.createElement(SidebarSearchField,{icon:X.icon,onSearch:ot,to:"/search"})}},23778:function(Rt,d,e){e.d(d,{Sc:function(){return n.c},YC:function(){return n.f},Z9:function(){return n.e}});var n=e(83969),l=e(80236),u=e(30705),m=e(92573),a=e(2784),c=e(32272),_=e(19126),b=e.n(_),t=e(18473)},44741:function(Rt,d,e){e.d(d,{Wf:function(){return de}});var n=e(80236),l=e(30705),u=e(2784),m=e(64279),a=e(79692),c=e(38724),_=e(49429),b=e(77277),t=e(29611),E=e(60905),h=e(8629),$=e(79249),L=e(35292),k=e(37390),z=e(97485),y=e(15584),S=e(91256),x=e(58987),f=e(89571),T=e(27556),C=e(90436),P=e(90324),p=e(70595),Z=e(43181),F=e(58238),Me=e(71346),Ee=e.n(Me),Xe=e(62432),Bt=e(26506);const st=(0,l.T0)({id:"plugin.techradar.service"});var jt=(A=>(A[A.Down=-1]="Down",A[A.NoChange=0]="NoChange",A[A.Up=1]="Up",A))(jt||{});const Zt=(0,a.Z)(A=>({ring:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},axis:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},text:{pointerEvents:"none",userSelect:"none",fill:A.palette.text.primary,fontSize:"25px",fontWeight:800,opacity:.7}}),{name:"PluginTechRadarGrid"}),J=A=>{const{radius:j,rings:Q}=A,me=Zt(A),We=(mt,se)=>[u.createElement("circle",{key:`c${mt}`,cx:0,cy:0,r:se,className:me.ring}),u.createElement("text",{key:`t${mt}`,y:se!==void 0?-se+42:void 0,textAnchor:"middle",className:me.text,style:{fill:Q[mt].color},"data-testid":"radar-ring-heading"},Q[mt].name)],Ke=[u.createElement("line",{key:"x",x1:0,y1:-j,x2:0,y2:j,className:me.axis,"data-testid":"radar-grid-x-line"}),u.createElement("line",{key:"y",x1:-j,y1:0,x2:j,y2:0,className:me.axis,"data-testid":"radar-grid-y-line"})],He=Q.map(mt=>mt.outerRadius).map((mt,se)=>We(se,mt));return u.createElement(u.Fragment,null,Ke.concat(...He))};function an(A){return Boolean(A&&A!=="#"&&A.length>0)}const Re=({url:A,className:j,children:Q})=>an(A)?u.createElement(n.rU,{className:j,to:A},Q):u.createElement(u.Fragment,null,Q),xe=A=>{const{timeline:j}=A;return u.createElement(u.Fragment,null,u.createElement(C.Z,{variant:"h6",gutterBottom:!0},"History"),u.createElement(S.Z,{component:T.Z},u.createElement(k.Z,{"aria-label":"simple table"},u.createElement(x.Z,null,u.createElement(f.Z,null,u.createElement(y.Z,{align:"left"},"Moved in direction"),u.createElement(y.Z,{align:"left"},"Moved to ring"),u.createElement(y.Z,{align:"left"},"Moved on date"),u.createElement(y.Z,{align:"left"},"Description"))),u.createElement(z.Z,null,(j==null?void 0:j.length)===0&&u.createElement(f.Z,{key:"no-timeline"},u.createElement(y.Z,{component:"th",scope:"row"},"No Timeline")),j==null?void 0:j.map(Q=>u.createElement(f.Z,{key:Q.description},u.createElement(y.Z,{component:"th",scope:"row"},Q.moved===jt.Up?u.createElement(P.Z,null):"",Q.moved===jt.Down?u.createElement(p.Z,null):"",Q.moved===jt.NoChange?u.createElement(Z.Z,null):""),u.createElement(y.Z,{align:"left"},Q.ring.name?Q.ring.name:""),u.createElement(y.Z,{align:"left"},Q.date.toLocaleDateString()?Q.date.toLocaleDateString():""),u.createElement(y.Z,{align:"left"},Q.description?Q.description:"")))))))},O=A=>{function j(pe,ye){return an(pe)||Boolean(ye&&ye.length>0)}const{open:Q,onClose:me,title:We,description:Ke,timeline:He,url:mt,links:se}=A;return u.createElement(h.Z,{"data-testid":"radar-description",open:Q,onClose:me},u.createElement($.Z,{"data-testid":"radar-description-dialog-title"},We),u.createElement(c.Z,{dividers:!0},u.createElement(n.SA,{content:Ke}),u.createElement(xe,{timeline:He})),j(mt,se)&&u.createElement(_.Z,null,se==null?void 0:se.map(pe=>u.createElement(b.Z,{component:n.rU,to:pe.url,onClick:me,color:"primary",startIcon:u.createElement(L.Z,null),key:pe.url},pe.title)),an(mt)&&u.createElement(b.Z,{component:n.rU,to:mt,onClick:me,color:"primary",startIcon:u.createElement(L.Z,null),key:mt},"LEARN MORE")))},Ze=(0,a.Z)(A=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"9px",fill:A.palette.common.white,textAnchor:"middle"},link:{cursor:"pointer"}})),ce=(A,j)=>{const Q={fill:A};let me=u.createElement("circle",{r:9,style:Q});return j&&j>0?me=u.createElement("path",{d:"M -11,5 11,5 0,-13 z",style:Q}):j&&j<0&&(me=u.createElement("path",{d:"M -11,-5 11,-5 0,13 z",style:Q})),me},R=A=>{const j=Ze(A),[Q,me]=u.useState(!1),{moved:We,description:Ke,timeline:He,title:mt,color:se,url:pe,links:ye,value:we,x:nt,y:$t,onMouseEnter:Ut,onMouseLeave:wt,onClick:sn}=A,vn=ce(se,We),Le=()=>{me(!0)},$e=()=>{me(!1)},be=()=>{me(!Q)};return u.createElement("g",{transform:`translate(${nt}, ${$t})`,onMouseEnter:Ut,onMouseLeave:wt,onClick:sn,"data-testid":"radar-entry"}," ",Q&&u.createElement(O,{open:Q,onClose:$e,title:mt||"no title",description:Ke||"no description",timeline:He||[],url:pe,links:ye}),Ke?u.createElement("a",{className:j.link,onClick:Le,role:"button",href:"#",tabIndex:0,onKeyPress:be},vn):u.createElement(Re,{url:pe,className:j.link},vn),u.createElement("text",{y:3,className:j.text},we))},N=(0,a.Z)(A=>({bubble:{pointerEvents:"none",userSelect:"none",opacity:0},visibleBubble:{pointerEvents:"none",userSelect:"none",opacity:.8},background:{fill:"#333"},text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:A.palette.common.white}})),ee=A=>{const j=N(A),{visible:Q,text:me}=A,We=(0,u.useRef)(null),Ke=(0,u.useRef)(null),He=(0,u.useRef)(null),mt=(0,u.useRef)(null),se=()=>{if(We.current){const{x:pe,y:ye}=A,we=We.current.getBBox(),nt=5,$t=4;Ke.current&&Ke.current.setAttribute("transform",`translate(${pe-we.width/2}, ${ye-we.height-$t})`),He.current&&(He.current.setAttribute("x",String(-nt)),He.current.setAttribute("y",String(-we.height)),He.current.setAttribute("width",String(we.width+2*nt)),He.current.setAttribute("height",String(we.height+$t))),mt.current&&mt.current.setAttribute("transform",`translate(${we.width/2-nt}, ${$t-1})`)}};return(0,u.useLayoutEffect)(()=>{se()}),u.createElement("g",{ref:Ke,x:0,y:0,className:Q?j.visibleBubble:j.bubble,"data-testid":"radar-bubble"},u.createElement("rect",{ref:He,rx:4,ry:4,className:j.background}),u.createElement("text",{ref:We,className:j.text},me),u.createElement("path",{ref:mt,d:"M 0,0 10,0 5,8 z",className:j.background}))},Pe=(0,a.Z)(A=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:A.palette.text.secondary}})),Ge=A=>{const{x:j,y:Q}=A,me=Pe(A);return u.createElement("text",{"data-testid":"radar-footer",transform:`translate(${j}, ${Q})`,className:me.text},"\u25B2 moved up\xA0\xA0\xA0\xA0\xA0\u25BC moved down")},Ct=({url:A,description:j,title:Q,classes:me,active:We,links:Ke,timeline:He})=>{const[mt,se]=u.useState(!1),pe=()=>{se(!0)},ye=()=>{se(!1)},we=()=>{se(!mt)};return j?u.createElement(u.Fragment,null,u.createElement(C.Z,{component:"span",className:me.entryLink,onClick:pe,role:"button",tabIndex:0,onKeyPress:we},u.createElement(C.Z,{component:"span",className:We?me.activeEntry:me.entry},Q)),mt&&u.createElement(O,{open:mt,onClose:ye,title:Q||"no title",url:A,description:j,timeline:He||[],links:Ke})):u.createElement(Re,{url:A,className:me.entryLink},u.createElement(C.Z,{component:"span",className:We?me.activeEntry:me.entry},Q))},ht=({ring:A,entries:j,classes:Q,onEntryMouseEnter:me,onEntryMouseLeave:We})=>u.createElement("div",{"data-testid":"radar-ring",key:A.id,className:Q.ring},u.createElement("h3",{className:Q.ringHeading,style:{color:A.color},"data-testid":"radar-legend-heading"},A.name),j.length===0?u.createElement(F.ZP,{paragraph:!0,className:Q.ringEmpty},"(empty)"):u.createElement("ol",{className:Q.ringList},j.map(Ke=>{var He,mt;return u.createElement("li",{key:Ke.id,value:(Ke.index||0)+1,onMouseEnter:me&&(()=>me(Ke)),onMouseLeave:We&&(()=>We(Ke))},u.createElement(Ct,{classes:Q,url:Ke.url,title:Ke.title,description:Ke.description,active:Ke.active,links:(He=Ke.links)!=null?He:[],timeline:(mt=Ke.timeline)!=null?mt:[]}))}))),It=A=>{const j={};for(const Q of A){const me=Q.quadrant.index,We=Q.ring.index;let Ke={};me!==void 0&&(j[me]===void 0&&(j[me]={}),Ke=j[me]);let He=[];We!==void 0&&(Ke[We]===void 0&&(Ke[We]=[]),He=Ke[We]),He.push(Q)}return j},q=(A,j,Q,me=0)=>{const We=j.index,Ke=Q.index,He=We===void 0?{}:A[We]||{};return Ke===void 0?[]:He[Ke+me]||[]},oe=({segments:A,quadrant:j,rings:Q,classes:me,onEntryMouseEnter:We,onEntryMouseLeave:Ke})=>u.createElement("foreignObject",{key:j.id,x:j.legendX,y:j.legendY,width:j.legendWidth,height:j.legendHeight,"data-testid":"radar-quadrant"},u.createElement("div",{className:me.quadrant},u.createElement("h2",{className:me.quadrantHeading},j.name),u.createElement("div",{className:me.rings},Q.map(He=>u.createElement(ht,{key:He.id,ring:He,classes:me,entries:q(A,j,He),onEntryMouseEnter:We,onEntryMouseLeave:Ke}))))),Ae=(0,a.Z)(A=>({quadrant:{height:"100%",width:"100%",overflowY:"auto",scrollbarWidth:"thin"},quadrantHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:A.spacing(2),fontSize:"18px"},rings:{columns:3},ring:{breakInside:"avoid-column",pageBreakInside:"avoid","-webkit-column-break-inside":"avoid",fontSize:"12px",marginBottom:A.spacing(2)},ringEmpty:{color:A.palette.text.secondary,fontSize:"12px"},ringHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:A.spacing(1),fontSize:"12px",fontWeight:800},ringList:{listStylePosition:"inside",marginTop:0,paddingLeft:0,fontVariantNumeric:"proportional-nums","-moz-font-feature-settings":"pnum","-webkit-font-feature-settings":"pnum","font-feature-settings":"pnum"},entry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px"},activeEntry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px",background:"#6f6f6f",color:A.palette.common.white},entryLink:{pointerEvents:"visiblePainted",cursor:"pointer"}})),Je=({quadrants:A,rings:j,entries:Q,onEntryMouseEnter:me,onEntryMouseLeave:We,...Ke})=>{const He=Ae(Ke);return u.createElement("g",{"data-testid":"radar-legend"},A.map(mt=>u.createElement(oe,{key:mt.id,segments:It(Q),quadrant:mt,rings:j,classes:He,onEntryMouseEnter:me,onEntryMouseLeave:We})))},ct=A=>{const{width:j,height:Q,radius:me,quadrants:We,rings:Ke,entries:He,activeEntry:mt,onEntryMouseEnter:se,onEntryMouseLeave:pe}=A;return u.createElement("g",{"data-testid":"radar-plot"},u.createElement(Je,{quadrants:We,rings:Ke,entries:He,onEntryMouseEnter:se&&(ye=>se(ye)),onEntryMouseLeave:pe&&(ye=>pe(ye))}),u.createElement("g",{transform:`translate(${j/2}, ${Q/2})`},u.createElement(J,{radius:me,rings:Ke}),u.createElement(Ge,{x:-.5*j,y:.5*Q}),He.map(ye=>u.createElement(R,{key:ye.id,x:ye.x||0,y:ye.y||0,color:ye.color||"",value:((ye==null?void 0:ye.index)||0)+1,url:ye.url,links:ye.links,description:ye.description,moved:ye.moved,title:ye.title,timeline:ye.timeline,onMouseEnter:se&&(()=>se(ye)),onMouseLeave:pe&&(()=>pe(ye))})),u.createElement(ee,{visible:!!mt,text:(mt==null?void 0:mt.title)||"",x:(mt==null?void 0:mt.x)||0,y:(mt==null?void 0:mt.y)||0})))};class At{constructor(j,Q,me,We){this.nextSeed=We,this.polarMin={t:j.radialMin,r:Q.innerRadius},this.polarMax={t:j.radialMax,r:Q.outerRadius},this.cartesianMin={x:15*j.offsetX,y:15*j.offsetY},this.cartesianMax={x:me*j.offsetX,y:me*j.offsetY}}clipx(j){const Q=dt(j,this.cartesianMin,this.cartesianMax),me=Pt(qt(Q),this.polarMin.r+15,this.polarMax.r-15);return j.x=zt(me).x,j.x}clipy(j){const Q=dt(j,this.cartesianMin,this.cartesianMax),me=Pt(qt(Q),this.polarMin.r+15,this.polarMax.r-15);return j.y=zt(me).y,j.y}random(){return zt({t:this._randomBetween(this.polarMin.t,this.polarMax.t),r:this._normalBetween(this.polarMin.r,this.polarMax.r)})}_random(){const j=Math.sin(this.nextSeed())*1e4;return j-Math.floor(j)}_randomBetween(j,Q){return j+this._random()*(Q-j)}_normalBetween(j,Q){return j+(this._random()+this._random())*.5*(Q-j)}}function qt({x:A,y:j}){return{t:Math.atan2(j,A),r:Math.sqrt(A*A+j*j)}}function zt({r:A,t:j}){return{x:A*Math.cos(j),y:A*Math.sin(j)}}function Be(A,j,Q){const me=Math.min(j,Q),We=Math.max(j,Q);return Math.min(Math.max(A,me),We)}function Pt(A,j,Q){return{t:A.t,r:Be(A.r,j,Q)}}function dt(A,j,Q){return{x:Be(A.x,j.x,Q.x),y:Be(A.y,j.y,Q.y)}}const hn=(A,j,Q,me)=>{const Ke=[16,Q/2-j-16,Q/2+j+16,Q-16],He=[16,me/2-16,me/2,me-16],mt=[{x:Ke[2],y:He[2],width:Ke[3]-Ke[2],height:He[3]-He[2]},{x:Ke[0],y:He[2],width:Ke[1]-Ke[0],height:He[3]-He[2]},{x:Ke[0],y:He[0],width:Ke[1]-Ke[0],height:He[1]-He[0]},{x:Ke[2],y:He[0],width:Ke[3]-Ke[2],height:He[1]-He[0]}];return A.map((se,pe)=>{const ye=mt[pe%4];return{...se,index:pe,radialMin:pe*Math.PI/2,radialMax:(pe+1)*Math.PI/2,offsetX:pe%4===0||pe%4===3?1:-1,offsetY:pe%4===0||pe%4===1?1:-1,legendX:ye.x,legendY:ye.y,legendWidth:ye.width,legendHeight:ye.height}})},dn=(A,j,Q,me,We)=>{let Ke=42;const He=A.map((se,pe)=>{const ye=j.find(Ut=>{const wt=typeof se.quadrant=="object"?se.quadrant.id:se.quadrant;return Ut.id===wt}),we=Q.find(Ut=>{const wt=typeof se.ring=="object"?se.ring.id:se.ring;return Ut.id===wt});if(!ye)throw new Error(`Unknown quadrant ${se.quadrant} for entry ${se.id}!`);if(!we)throw new Error(`Unknown ring ${se.ring} for entry ${se.id}!`);const nt=new At(ye,we,me,()=>Ke++),$t=nt==null?void 0:nt.random();return{...se,index:pe,quadrant:ye,ring:we,segment:nt,x:$t.x,y:$t.y,color:We&&se.id===(We==null?void 0:We.id)?se.ring.color:Ee()(se.ring.color).desaturate(.5).lighten(.1).string(),active:!!(We&&se.id===(We==null?void 0:We.id))}}),mt=(0,Xe.Z)().nodes(He).velocityDecay(.19).force("collision",(0,Bt.Z)().radius(12).strength(.85)).stop();for(let se=0,pe=Math.ceil(Math.log(mt.alphaMin())/Math.log(1-mt.alphaDecay()));se<pe;++se){mt.tick();for(const ye of He)ye.segment&&(ye.x=ye.segment.clipx(ye),ye.y=ye.segment.clipy(ye))}return He},bn=(A,j)=>A.map((Q,me)=>({...Q,index:me,outerRadius:(me+2)/(A.length+1)*j,innerRadius:(me===0?0:me+1)/(A.length+1)*j})),it=({width:A,height:j,quadrants:Q,rings:me,entries:We,...Ke})=>{const He=Math.min(A,j)/2,[mt,se]=(0,u.useState)(),pe=(0,u.useRef)(null),ye=(0,u.useMemo)(()=>hn(Q,He,A,j),[Q,He,A,j]),we=(0,u.useMemo)(()=>bn(me,He),[He,me]),nt=(0,u.useMemo)(()=>dn(We,ye,we,He,mt),[We,ye,we,He,mt]);return u.createElement("svg",{ref:pe,width:A,height:j,...Ke.svgProps},u.createElement(ct,{width:A,height:j,radius:He,entries:nt,quadrants:ye,rings:we,activeEntry:mt,onEntryMouseEnter:$t=>se($t),onEntryMouseLeave:()=>se(void 0)}))},St=A=>{const j=(0,l.h_)(l.VE),Q=(0,l.h_)(st),{error:me,value:We,loading:Ke}=(0,m.default)(async()=>Q.load(A),[Q,A]);return(0,u.useEffect)(()=>{me&&j.post(me)},[me,j]),{loading:Ke,value:We,error:me}};function En(A){const j=A==null?void 0:A.toLocaleLowerCase("en-US").split(/\s/).map(Q=>Q.trim()).filter(Boolean);return j!=null&&j.length?Q=>{var me;const We=`${Q.title} ${((me=Q.timeline[0])==null?void 0:me.description)||""}`.toLocaleLowerCase("en-US");return j.every(Ke=>We.includes(Ke))}:()=>!0}function ln(A){const{loading:j,error:Q,value:me}=St(A.id),We=Ke=>Ke.entries.filter(En(A.searchText)).map(He=>({id:He.key,quadrant:Ke.quadrants.find(mt=>mt.id===He.quadrant),title:He.title,ring:Ke.rings.find(mt=>mt.id===He.timeline[0].ringId),timeline:He.timeline.map(mt=>({date:mt.date,ring:Ke.rings.find(se=>se.id===mt.ringId),description:mt.description,moved:mt.moved})),moved:He.timeline[0].moved,description:He.description||He.timeline[0].description,url:He.url,links:He.links}));return u.createElement(u.Fragment,null,j&&u.createElement(n.Ex,null),!j&&!Q&&me&&u.createElement(it,{...A,rings:me.rings,quadrants:me.quadrants,entries:We(me)}))}const fe=(0,a.Z)(()=>({overflowXScroll:{overflowX:"scroll"}}));function V(A){const{title:j="Tech Radar",subtitle:Q="Pick the recommended technologies for your projects",pageTitle:me="Company Radar",...We}=A,Ke=fe(),[He,mt]=u.useState("");return u.createElement(n.T3,{themeId:"tool"},u.createElement(n.h4,{title:j,subtitle:Q}),u.createElement(n.VY,{className:Ke.overflowXScroll},u.createElement(n.yW,{title:me},u.createElement(t.Z,{id:"tech-radar-filter",type:"search",placeholder:"Filter",onChange:se=>mt(se.target.value)}),u.createElement(n.qt,null,u.createElement(C.Z,{paragraph:!0},"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at"," ",u.createElement(n.rU,{to:"https://opensource.zalando.com/tech-radar/"},"Zalando Tech Radar"),"."))),u.createElement(E.Z,{container:!0,spacing:3,direction:"row"},u.createElement(E.Z,{item:!0,xs:12,sm:6,md:4},u.createElement(ln,{searchText:He,...We})))))}var X=Object.freeze({__proto__:null,RadarPage:V});const ue=new Array;ue.push({id:"adopt",name:"ADOPT",color:"#5BA300"}),ue.push({id:"trial",name:"TRIAL",color:"#009EB0"}),ue.push({id:"assess",name:"ASSESS",color:"#C7BA00"}),ue.push({id:"hold",name:"HOLD",color:"#E09B96"});const ge=new Array;ge.push({id:"infrastructure",name:"Infrastructure"}),ge.push({id:"frameworks",name:"Frameworks"}),ge.push({id:"languages",name:"Languages"}),ge.push({id:"process",name:"Process"});const Se=new Array;Se.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),Se.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),Se.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),Se.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),Se.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),Se.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),Se.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),Se.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),Se.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const ot={entries:Se,quadrants:ge,rings:ue};class tt{async load(){return ot}}const pt=(0,l.NT)({id:"tech-radar"}),de=(0,l.rx)({id:"tech-radar",routes:{root:pt},apis:[(0,l.ni)(st,new tt)]}).provide((0,l.P4)({name:"TechRadarPage",component:()=>Promise.resolve().then(function(){return X}).then(A=>A.RadarPage),mountPoint:pt})),re=null},65609:function(Rt,d,e){e.d(d,{EU:function(){return St}});var n=e(30705),l=e(66565),u=e(2784),m=e(87370),a=e(15459),c=e(77277),_=e(79692),b=e(8560),t=e(27556),E=e(11433),h=e(60364),$=e(12231),L=e(49378),k=e(90436),z=e(95544),y=e(61837),S=e(51209),x=e(38016),f=e(82717),T=e.n(f),C=e(1854),P=e(49462),p=e(31654),Z=e(80236),F=e(65549),Me=e(17373),Ee=e(85224),Xe=e(96103);const Bt=".md-nav__item--nested .md-toggle",st="@backstage/techdocs-addons/nav-expanded",jt=(0,a.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(c.Z),Zt=(0,a.Z)({root:{height:"20px",width:"20px"}})(S.Z),J=(0,a.Z)({root:{height:"20px",width:"20px"}})(x.Z),an=()=>{const fe={expandAllNestedNavs:!1},{value:V,set:X}=(0,m.Z)(st,{defaultValue:fe}),[ue,ge]=(0,u.useState)(!1),[...Se]=(0,l.pV)([Bt]),ot=(0,u.useCallback)(pt=>{const Lt=pt.checked,de=V==null?void 0:V.expandAllNestedNavs;return!!(de&&!Lt||!de&&Lt)},[V]);(0,u.useEffect)(()=>{Se!=null&&Se.length&&(ge(!0),Se.forEach(pt=>{ot(pt)&&pt.click()}))},[V,ot,Se]);const tt=()=>{X(pt=>({expandAllNestedNavs:!(pt!=null&&pt.expandAllNestedNavs)}))};return u.createElement(u.Fragment,null,ue?u.createElement(jt,{size:"small",onClick:tt,"aria-label":V!=null&&V.expandAllNestedNavs?"collapse-nav":"expand-nav"},V!=null&&V.expandAllNestedNavs?u.createElement(J,null):u.createElement(Zt,null)):null)},Re="techdocs-report-issue",xe=`#${Re}`,O='[title^="Edit this page"]',Ze='[title^="Leave feedback for"]',ce='[data-md-component="main"] .md-content',R=(fe,V)=>V==="github"?(0,C.BT)(fe,"blob"):V==="gitlab"?(0,C.ah)(fe,"blob"):(console.error(`Invalid SCM type ${V} found in ReportIssue addon for URL ${fe}!`),fe),N=fe=>{const V=fe.toString().substring(0,70),X=V.length===70?"...":"";return`Documentation feedback: ${V}${X}`},ee=(fe,V,X)=>{const ue="## Documentation Feedback \u{1F4DD}",ge="#### The highlighted text:",Se="#### The comment on the text:",ot="_>replace this line with your comment<_",tt=fe.toString().trim().split(`
`).map(Lt=>`> ${Lt.trim()}`).join(`
`),pt=[`${X} URL: <${window.location.href}> 
Markdown URL: <${V}>`];return`${ue}

 ${ge} 

 ${tt}

 ${Se} 
 ${ot}

 ___
${pt}`},Pe=fe=>{var V,X;const ue={title:"",body:""},ge=(0,l.oi)(fe),[Se]=(0,l.pV)([O]),ot=(V=Se==null?void 0:Se.href)!=null?V:"",tt=(0,n.h_)(P.q3),Lt=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage";if(!ge||!ot)return ue;const de=(X=tt.byUrl(ot))==null?void 0:X.type;return de?{title:N(ge),body:ee(ge,R(ot,de),Lt)}:ue},Ge=()=>{var fe,V;const X=(0,n.h_)(P.q3),[ue]=(0,l.pV)([O]),ge=(fe=ue==null?void 0:ue.href)!=null?fe:"";if(!ge)return null;const Se=(V=X.byUrl(ge))==null?void 0:V.type;return Se?{...T()(R(ge,Se)),type:Se}:null},Ct=(0,_.Z)(fe=>({root:{display:"grid",gridGap:fe.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:fe.palette.common.black,fontSize:fe.typography.button.fontSize}})),ht=({type:fe})=>fe==="github"?Z.fy:p.Z,It=({type:fe})=>fe==="github"?"Github":"Gitlab",q=(fe,V)=>{const{title:X,body:ue}=V,ge=encodeURIComponent(X),Se=encodeURIComponent(ue),{protocol:ot,resource:tt,owner:pt,name:Lt,type:de}=fe,re=`${ot}://${tt}/${pt}/${Lt}`,A=encodeURI(re);return de==="github"?`${A}/issues/new?title=${ge}&body=${Se}`:`${A}/issues/new?issue[title]=${ge}&issue[description]=${Se}`},oe=({template:fe,repository:V})=>{const X=Ct(),ue=ht(V),ge=q(V,fe);return u.createElement(Z.rU,{className:X.root,to:ge,target:"_blank"},u.createElement(ue,null)," Open new ",It(V)," issue")},Ae=(0,_.Z)(fe=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:fe.spacing(1),zIndex:fe.zIndex.tooltip,background:fe.palette.common.white}})),Je=({debounceTime:fe=500,templateBuilder:V})=>{const X=Ae(),[ue,ge]=(0,u.useState)(),Se=Ge(),ot=Pe(fe),tt=(0,l.oi)(fe),[pt,Lt]=(0,l.pV)([ce,Ze]);let[de]=(0,l.pV)([xe]);return Lt&&(Lt.style.display="none"),(0,u.useEffect)(()=>{if(!Se||!tt||!tt.containsNode(pt,!0)||tt!=null&&tt.containsNode(de,!0))return;const re=pt.getBoundingClientRect(),A=tt.getRangeAt(0).getBoundingClientRect();ge({top:`${A.top-re.top-16}px`,left:`${A.left+A.width/2}px`})},[tt,pt,de]),!tt||!Se||!["github","gitlab"].includes(Se.type)?null:(de||(de=document.createElement("div"),de.setAttribute("id",Re),pt.prepend(de)),u.createElement(b.Z,{container:de},u.createElement(t.Z,{"data-testid":"report-issue-addon",className:X.root,style:ue},u.createElement(oe,{repository:Se,template:V?V({selection:tt}):ot}))))},ct="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",At=(0,a.Z)(fe=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:fe.palette.common.white,boxShadow:ct,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:ct}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:fe.palette.common.black,fontSize:fe.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(E.Z),qt={key:"techdocs.addons.settings.textsize",defaultValue:100},zt=[{value:90},{value:100},{value:115},{value:130},{value:150}],Be=(0,_.Z)(fe=>({container:{color:fe.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:fe.spacing(1)},increaseButton:{marginLeft:fe.spacing(1)}})),Pt=()=>{const fe=Be(),V=(0,h.Z)(),[X]=(0,l.pV)(["body"]),[ue,ge]=(0,u.useState)(()=>{const j=localStorage==null?void 0:localStorage.getItem(qt.key);return j?parseInt(j,10):qt.defaultValue}),Se=(0,u.useMemo)(()=>zt.map(j=>j.value),[]),ot=(0,u.useMemo)(()=>Se.indexOf(ue),[Se,ue]),tt=(0,u.useMemo)(()=>Se[0],[Se]),pt=(0,u.useMemo)(()=>Se[Se.length-1],[Se]),Lt=(0,u.useCallback)(()=>`${ue}%`,[ue]),de=(0,u.useCallback)((j,Q)=>{Array.isArray(Q)||(ge(Q),localStorage==null||localStorage.setItem(qt.key,String(Q)))},[ge]),re=(0,u.useCallback)(j=>{de(j,Se[ot-1])},[ot,Se,de]),A=(0,u.useCallback)(j=>{de(j,Se[ot+1])},[ot,Se,de]);return(0,u.useEffect)(()=>{var j,Q;if(!X)return;const me=(Q=(j=V.typography)==null?void 0:j.htmlFontSize)!=null?Q:16;X.style.setProperty("--md-typeset-font-size",`${me*(ue/100)}px`)},[X,ue,V]),u.createElement($.Z,{className:fe.menuItem,button:!0,disableRipple:!0},u.createElement(L.Z,{primary:u.createElement(k.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:u.createElement(z.Z,{className:fe.container},u.createElement(y.Z,{className:fe.decreaseButton,size:"small",edge:"start",disabled:ue===tt,onClick:re,"aria-label":"Decrease text size"},u.createElement(Me.Z,null)),u.createElement(At,{value:ue,"aria-labelledby":"text-size-slider",getAriaValueText:Lt,valueLabelDisplay:"on",valueLabelFormat:Lt,marks:zt,step:null,min:tt,max:pt,onChangeCommitted:de}),u.createElement(y.Z,{className:fe.increaseButton,size:"small",edge:"end",disabled:ue===pt,onClick:A,"aria-label":"Increase text size"},u.createElement(F.Z,null))),disableTypography:!0}))};function dt(fe,V){V===void 0&&(V={});var X=V.insertAt;if(!(!fe||typeof document=="undefined")){var ue=document.head||document.getElementsByTagName("head")[0],ge=document.createElement("style");ge.type="text/css",X==="top"&&ue.firstChild?ue.insertBefore(ge,ue.firstChild):ue.appendChild(ge),ge.styleSheet?ge.styleSheet.cssText=fe:ge.appendChild(document.createTextNode(fe))}}var hn=`.pswp {
  --pswp-bg: #f8f8f8;
}
.pswp__counter {
  color: rgba(0, 0, 0, 0.87);
  text-shadow: none;
}

.pswp__img {
  cursor: pointer !important;
}
`;dt(hn);const dn=()=>{const fe=(0,l.pV)(["img"]);return(0,u.useEffect)(()=>{let V=null,X=new Ee.Z({pswpModule:Xe.Z,wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon" aria-label="fontSize large"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></svg>'});return fe.forEach((ue,ge)=>{ue.onclick=()=>(V===null&&(V=fe.map(Se=>({element:Se,src:Se.src,msrc:Se.src,alt:Se.alt,width:Se.clientWidth,height:Se.clientHeight}))),X.loadAndOpen(ge,V),!1)}),X.init(),()=>{X.destroy(),X=null}},[fe]),null},bn=(0,n.rx)({id:"techdocsModuleAddonsContrib"}),it=bn.provide((0,l.KY)({name:"ExpandableNavigation",location:l.oZ.PrimarySidebar,component:an})),St=bn.provide((0,l.KY)({name:"ReportIssue",location:l.oZ.Content,component:Je})),En=bn.provide((0,l.KY)({name:"TextSize",location:l.oZ.Settings,component:Pt})),ln=bn.provide((0,l.KY)({name:"LightBox",location:l.oZ.Content,component:dn}))},66565:function(Rt,d,e){e.d(d,{$L:function(){return P},DR:function(){return y},Dl:function(){return Z},KY:function(){return x},Ox:function(){return Zt},VA:function(){return Re},ZS:function(){return Bt},Zz:function(){return z},gT:function(){return p},jM:function(){return k},oZ:function(){return jt},oi:function(){return ce},pV:function(){return O},ux:function(){return an},x1:function(){return st}});var n=e(2784),l=e(73557),u=e(30705),m=e(64279),a=e(77446),c=e(34520),_=e(18473),b=e(70882),t=e(50236),E=e(19219),h=e(80236),$=e(54073),L=e.n($);const k="techdocs.addons.addon.v1",z="techdocs.addons.wrapper.v1",y=()=>null;(0,u.R5)(y,z,!0);const S=R=>`${k}.${R.toLocaleLowerCase("en-US")}`;function x(R){const{name:N,component:ee}=R;return(0,u.YO)({name:N,component:{sync:Pe=>n.createElement(ee,{...Pe})},data:{[k]:R,[S(N)]:!0}})}const f=(R,N)=>R.selectByComponentData({key:N}).getElements()[0],T=R=>R.selectByComponentData({key:z}).selectByComponentData({key:k}),C=R=>R.selectByComponentData({key:z}).findComponentData({key:k}),P=()=>{const R=(0,l.pC)(),N=(0,u.vJ)(R,T),ee=(0,u.vJ)(R,C),Pe=(0,n.useCallback)(ht=>{var It;if(!N||!ht)return null;const q=S(ht.name);return(It=f(N,q))!=null?It:null},[N]),Ge=(0,n.useCallback)(ht=>{const It=ee.find(q=>q.name===ht);return It?Pe(It):null},[ee,Pe]),Ct=(0,n.useCallback)(ht=>{const It=ee.filter(q=>q.location===ht);return It.length?It.map(Pe):null},[ee,Pe]);return{renderComponentByName:Ge,renderComponentsByLocation:Ct}},p=(0,u.T0)({id:"plugin.techdocs.service"}),Z=(0,u.T0)({id:"plugin.techdocs.storageservice"});function F(R,N){return N.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(R.kind=R.kind.toLocaleLowerCase(),R.name=R.name.toLocaleLowerCase(),R.namespace=R.namespace.toLocaleLowerCase()),R}const Me=(R,N)=>(0,c.eE)(R)===(0,c.eE)(N),Ee={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},Xe=(0,_.CT)("techdocs-reader-page-context"),Bt=(0,n.memo)(R=>{const{entityRef:N,children:ee}=R,Pe=(0,u.h_)(p),Ge=(0,u.h_)(u.Ds),Ct=(0,m.default)(async()=>Pe.getEntityMetadata(N),[N]),ht=(0,a.Z)(async()=>Pe.getTechDocsMetadata(N),[N]),[It,q]=(0,n.useState)(Ee.title),[oe,Ae]=(0,n.useState)(Ee.subtitle),[Je,ct]=(0,n.useState)(Ee.shadowRoot);(0,n.useEffect)(()=>{Je&&!ht.value&&!ht.loading&&ht.retry()},[ht.value,ht.loading,Je,ht.retry,ht]);const At={metadata:ht,entityRef:F(N,Ge),entityMetadata:Ct,shadowRoot:Je,setShadowRoot:ct,title:It,setTitle:q,subtitle:oe,setSubtitle:Ae},qt=(0,_.EI)({1:At});return n.createElement(u.fC,{attributes:{entityRef:(0,c.eE)(N)}},n.createElement(Xe.Provider,{value:qt},ee instanceof Function?ee(At):ee))},(R,N)=>Me(R.entityRef,N.entityRef)),st=()=>{const R=(0,n.useContext)(Xe);if(R===void 0)return Ee;const N=R.atVersion(1);if(N===void 0)throw new Error("No context found for version 1.");return N},jt=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Zt="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",J=R=>{(0,n.useEffect)(()=>{var N;if(!R)return()=>{};const ee=R.querySelectorAll('head > link[rel="stylesheet"]');let Pe=(N=ee==null?void 0:ee.length)!=null?N:0;const Ge=new CustomEvent(Zt);if(!Pe)return R.dispatchEvent(Ge),()=>{};const Ct=()=>{--Pe===0&&R.dispatchEvent(Ge)};return ee==null||ee.forEach(ht=>{ht.addEventListener("load",Ct)}),()=>{ee==null||ee.forEach(ht=>{ht.removeEventListener("load",Ct)})}},[R])},an=R=>{const[N,ee]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!R)return()=>{};ee(!0);const Pe=R.style;Pe.setProperty("opacity","0");const Ge=()=>{ee(!1),Pe.setProperty("opacity","1")};return R.addEventListener(Zt,Ge),()=>{R.removeEventListener(Zt,Ge)}},[R]),N},Re=R=>{const{element:N,onAppend:ee,children:Pe}=R,[Ge,Ct]=(0,n.useState)((0,b.Ue)({...(0,t.Z)(),insertionPoint:void 0}));J(N);const ht=an(N),It=(0,n.useCallback)(q=>{if(!N||!q)return;Ct((0,b.Ue)({...(0,t.Z)(),insertionPoint:N.querySelector("head")||void 0}));let oe=q.shadowRoot;oe||(oe=q.attachShadow({mode:"open"})),oe.replaceChildren(N),typeof ee=="function"&&ee(oe)},[N,ee]);return n.createElement(n.Fragment,null,ht&&n.createElement(h.Ex,null),n.createElement(E.ZP,{jss:Ge,sheetsManager:new Map},n.createElement("div",{ref:It,"data-testid":"techdocs-native-shadowroot"}),Pe))},xe=()=>{const{shadowRoot:R}=st();return R},O=R=>{const N=xe();return N?R.map(ee=>N==null?void 0:N.querySelectorAll(ee)).filter(ee=>ee.length).map(ee=>Array.from(ee)).flat():[]},Ze=R=>R.toString()&&R.rangeCount&&R.getRangeAt(0).getBoundingClientRect().top,ce=(R=0)=>{const N=xe(),[ee,Pe]=(0,n.useState)(null),Ge=(0,n.useMemo)(()=>L()(()=>{const Ct=N,ht=Ct.getSelection?Ct.getSelection():document.getSelection();ht&&Ze(ht)?Pe(ht):Pe(null)},R),[N,Pe,R]);return(0,n.useEffect)(()=>(window.document.addEventListener("selectionchange",Ge),()=>{Ge.cancel(),window.document.removeEventListener("selectionchange",Ge)}),[Ge]),ee}},20931:function(Rt,d,e){e.d(d,{D:function(){return ur},E:function(){return g},T:function(){return dr},a:function(){return Rn},b:function(){return Vt},c:function(){return Kt},e:function(){return ve},g:function(){return Fe},h:function(){return rt},t:function(){return o}});var n=e(30705),l=e(32272),u=e(76372),m=e.n(u),a=e(2784),c=e(73557),_=e(66565),b=e(64279),t=e(77446),E=e(80236),h=e(79692),$=e(49378),L=e(86136),k=e(12420),z=e(60905),y=e(90436),S=e(61837),x=e(77277),f=e(4190),T=e(4614),C=e(41128),P=e(60364),p=e(15459),Z=e(80030),F=e(72379),Me=e(41547),Ee=e(41156),Xe=e(8560),Bt=e(15223),st=e(95544),jt=e(48348),Zt=e(94339),J=e(16111),an=e(24579),Re=e(14503),xe=e(92573),O=e(99688),Ze=e(98069),ce=e(87685),R=e(49462),N=e(35368),ee=e.n(N),Pe=e(1854),Ge=e(67097),Ct=e(28316),ht=e(82717),It=e.n(ht),q=e(44882),oe=e(95074),Ae=e(18671),Je=e(73250),ct=e(73495),At=e(34520),qt=e(76635),zt=e.n(qt),Be=e(47603),Pt=e(39981),dt=e(2337),hn=e(11640),dn=e(28347);const bn=(0,n.T0)({id:"plugin.techdocs.storageservice"}),it=(0,n.T0)({id:"plugin.techdocs.service"});class St{constructor(ne){this.configApi=ne.configApi,this.discoveryApi=ne.discoveryApi,this.fetchApi=ne.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(ne){const{kind:he,namespace:Ye,name:Ot}=ne,Qt=`${await this.getApiOrigin()}/metadata/techdocs/${Ye}/${he}/${Ot}`,tn=await this.fetchApi.fetch(`${Qt}`);if(!tn.ok)throw await l.VL.fromResponse(tn);return await tn.json()}async getEntityMetadata(ne){const{kind:he,namespace:Ye,name:Ot}=ne,Qt=`${await this.getApiOrigin()}/metadata/entity/${Ye}/${he}/${Ot}`,tn=await this.fetchApi.fetch(`${Qt}`);if(!tn.ok)throw await l.VL.fromResponse(tn);return await tn.json()}}class En{constructor(ne){this.configApi=ne.configApi,this.discoveryApi=ne.discoveryApi,this.identityApi=ne.identityApi,this.fetchApi=ne.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var ne;return(ne=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?ne:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(ne,he){const{kind:Ye,namespace:Ot,name:Nt}=ne,tn=`${await this.getStorageUrl()}/${Ot}/${Ye}/${Nt}/${he}`,In=await this.fetchApi.fetch(`${tn.endsWith("/")?tn:`${tn}/`}index.html`);let Mn="";switch(In.status){case 404:throw Mn="Page not found. ",he||(Mn+="This could be because there is no index.md file in the root of the docs directory of this repository."),new l.dR(Mn);case 500:throw Mn="Could not generate documentation or an error in the TechDocs backend. ",new Error(Mn)}return In.text()}async syncEntityDocs(ne,he=()=>{}){const{kind:Ye,namespace:Ot,name:Nt}=ne,tn=`${await this.getApiOrigin()}/sync/${Ot}/${Ye}/${Nt}`,{token:In}=await this.identityApi.getCredentials();return new Promise((Mn,wn)=>{const Wn=new u.EventSourcePolyfill(tn,{withCredentials:!0,headers:In?{Authorization:`Bearer ${In}`}:{}});Wn.addEventListener("log",on=>{on.data&&he(JSON.parse(on.data))}),Wn.addEventListener("finish",on=>{let rr=!1;on.data&&({updated:rr}=JSON.parse(on.data)),Mn(rr?"updated":"cached")}),Wn.onerror=on=>{switch(Wn.close(),on.status){case 404:wn(new l.dR(on.message));return;default:wn(new Error(on.data));return}}})}async getBaseUrl(ne,he,Ye){const{kind:Ot,namespace:Nt,name:Qt}=he,In=`${await this.getApiOrigin()}/static/docs/${Nt}/${Ot}/${Qt}/${Ye}`;return new URL(ne,In.endsWith("/")?In:`${In}/`).toString()}}function ln({contentLoading:K,content:ne,activeSyncState:he}){return K||he==="BUILD_READY_RELOAD"||!ne&&he==="CHECKING"?"CHECKING":!ne&&he==="BUILDING"?"INITIAL_BUILD":ne?he==="BUILDING"?"CONTENT_STALE_REFRESHING":he==="BUILD_READY"?"CONTENT_STALE_READY":he==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function fe(K,ne){const he={...K};switch(ne.type){case"sync":ne.state==="CHECKING"&&(he.buildLog=[]),he.activeSyncState=ne.state,he.syncError=ne.syncError;break;case"contentLoading":he.contentLoading=!0,he.contentError=void 0;break;case"content":typeof ne.path=="string"&&(he.path=ne.path),he.contentLoading=!1,he.content=ne.content,he.contentError=ne.contentError;break;case"buildLog":he.buildLog=he.buildLog.concat(ne.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(he.activeSyncState)&&["contentLoading","content"].includes(ne.type)&&(he.activeSyncState="UP_TO_DATE",he.buildLog=[]),he}function V(K,ne,he,Ye){var Ot,Nt;const[Qt,tn]=(0,a.useReducer)(fe,{activeSyncState:"CHECKING",path:Ye,contentLoading:!0,buildLog:[]}),In=(0,n.h_)(_.Dl),{retry:Mn}=(0,t.Z)(async()=>{tn({type:"contentLoading"});try{const on=await In.getEntityDocs({kind:K,namespace:ne,name:he},Ye);return tn({type:"content",content:on,path:Ye}),on}catch(on){tn({type:"content",contentError:on,path:Ye})}},[In,K,ne,he,Ye]),wn=(0,a.useRef)({content:void 0,reload:()=>{}});return wn.current={content:Qt.content,reload:Mn},(0,b.default)(async()=>{tn({type:"sync",state:"CHECKING"});const on=setTimeout(()=>{tn({type:"sync",state:"BUILDING"})},1e3);try{switch(await In.syncEntityDocs({kind:K,namespace:ne,name:he},Er=>{tn({type:"buildLog",log:Er})})){case"updated":wn.current.content?tn({type:"sync",state:"BUILD_READY"}):(wn.current.reload(),tn({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":tn({type:"sync",state:"UP_TO_DATE"});break;default:tn({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(rr){tn({type:"sync",state:"ERROR",syncError:rr})}finally{clearTimeout(on)}},[K,he,ne,In,tn,wn]),{state:(0,a.useMemo)(()=>ln({activeSyncState:Qt.activeSyncState,contentLoading:Qt.contentLoading,content:Qt.content}),[Qt.activeSyncState,Qt.content,Qt.contentLoading]),contentReload:Mn,path:Qt.path,content:Qt.content,contentErrorMessage:(Ot=Qt.contentError)==null?void 0:Ot.toString(),syncErrorMessage:(Nt=Qt.syncError)==null?void 0:Nt.toString(),buildLog:Qt.buildLog}}const X=(0,a.createContext)({}),ue=()=>(0,a.useContext)(X),ge=K=>{const{children:ne}=K,{"*":he=""}=(0,c.UO)(),{entityRef:Ye}=(0,_.x1)(),{kind:Ot,namespace:Nt,name:Qt}=Ye,tn=V(Ot,Nt,Qt,he);return a.createElement(X.Provider,{value:tn},ne instanceof Function?ne(tn):ne)},Se=K=>ne=>a.createElement(ge,null,a.createElement(K,{...ne})),ot=(0,h.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),tt=K=>{const{result:ne,highlight:he,lineClamp:Ye=5,asListItem:Ot=!0,asLink:Nt=!0,title:Qt,icon:tn}=K,In=ot(),Mn=({children:on})=>Nt?a.createElement(E.rU,{noTrack:!0,to:ne.location},on):a.createElement(a.Fragment,null,on),wn=()=>{const on=he!=null&&he.fields.title?a.createElement(xe.FA,{text:he.fields.title,preTag:he.preTag,postTag:he.postTag}):ne.title,rr=he!=null&&he.fields.entityTitle?a.createElement(xe.FA,{text:he.fields.entityTitle,preTag:he.preTag,postTag:he.postTag}):ne.entityTitle,Er=he!=null&&he.fields.name?a.createElement(xe.FA,{text:he.fields.name,preTag:he.preTag,postTag:he.postTag}):ne.name;return ne?a.createElement($.Z,{className:In.itemText,primaryTypographyProps:{variant:"h6"},primary:a.createElement(Mn,null,Qt||a.createElement(a.Fragment,null,on," | ",rr!=null?rr:Er," docs")),secondary:a.createElement(y.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:Ye,overflow:"hidden"},color:"textSecondary",variant:"body2"},he!=null&&he.fields.text?a.createElement(xe.FA,{text:he.fields.text,preTag:he.preTag,postTag:he.postTag}):ne.text)}):null},Wn=({children:on})=>Ot?a.createElement(a.Fragment,null,tn&&a.createElement(L.Z,null,typeof tn=="function"?tn(ne):tn),a.createElement("div",{className:In.flexContainer},on)):a.createElement(a.Fragment,null,on);return a.createElement(Wn,null,a.createElement(wn,null))};var pt=Object.freeze({__proto__:null,TechDocsSearchResultListItem:tt});const Lt=K=>K==null?void 0:K.document,de=K=>{const{entityId:ne,entityTitle:he,debounceTime:Ye=150}=K,[Ot,Nt]=(0,a.useState)(!1),Qt=(0,c.s0)(),{setFilters:tn,result:{loading:In,value:Mn}}=(0,xe.Rx)(),[wn,Wn]=(0,a.useState)([]);(0,a.useEffect)(()=>{let ar=!0;if(ar&&Mn){const Ar=Mn.results.slice(0,10);Wn(Ar)}return()=>{ar=!1}},[In,Mn]);const{kind:on,name:rr,namespace:Er}=ne;(0,a.useEffect)(()=>{tn(ar=>({...ar,kind:on,namespace:Er,name:rr}))},[on,Er,rr,tn]);const Or=(ar,Ar)=>{if(Lt(Ar)){const{location:xr}=Ar.document;Qt(xr)}};return a.createElement(xe.qO,{"data-testid":"techdocs-search-bar",size:"small",open:Ot,getOptionLabel:()=>"",filterOptions:ar=>ar,onClose:()=>{Nt(!1)},onFocus:()=>{Nt(!0)},onChange:Or,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:wn,renderOption:({document:ar,highlight:Ar})=>a.createElement(tt,{result:ar,lineClamp:3,asListItem:!1,asLink:!1,title:ar.title,highlight:Ar}),loading:In,inputDebounceTime:Ye,inputPlaceholder:`Search ${he||ne.name} docs`,freeSolo:!1})},re=K=>{const ne={term:"",types:["techdocs"],pageCursor:"",filters:K.entityId};return a.createElement(xe.Nd,{initialState:ne},a.createElement(de,{...K}))},A=(0,h.Z)(K=>(0,k.Z)({paper:{width:"100%",[K.breakpoints.up("sm")]:{width:"75%"},[K.breakpoints.up("md")]:{width:"50%"},padding:K.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:K.palette.background.default}})),j=({buildLog:K,onClose:ne})=>{const he=A(),Ye=K.length===0?"Waiting for logs...":K.join(`
`);return a.createElement(z.Z,{container:!0,direction:"column",className:he.root,spacing:0,wrap:"nowrap"},a.createElement(z.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},a.createElement(y.Z,{variant:"h5"},"Build Details"),a.createElement(S.Z,{key:"dismiss",title:"Close the drawer",onClick:ne,color:"inherit"},a.createElement(ce.Z,null))),a.createElement(z.Z,{item:!0,xs:!0},a.createElement(E.nU,{text:Ye,classes:{root:he.logs}})))},Q=({buildLog:K})=>{const ne=A(),[he,Ye]=(0,a.useState)(!1);return a.createElement(a.Fragment,null,a.createElement(x.Z,{color:"inherit",onClick:()=>Ye(!0)},"Show Build Logs"),a.createElement(f.ZP,{classes:{paper:ne.paper},anchor:"right",open:he,onClose:()=>Ye(!1)},a.createElement(j,{buildLog:K,onClose:()=>Ye(!1)})))},me=({errorMessage:K})=>{const ne=(0,n.h_)(n.Ds).getOptionalString("techdocs.builder");let he="";return ne!=="local"&&(he="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),a.createElement(E.mf,{status:"404",statusMessage:K||"Documentation not found",additionalInfo:he})},We=(0,h.Z)(K=>({root:{marginBottom:K.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),Ke=()=>{let K=null;const ne=We(),{state:he,contentReload:Ye,contentErrorMessage:Ot,syncErrorMessage:Nt,buildLog:Qt}=ue();return he==="INITIAL_BUILD"&&(K=a.createElement(O.Z,{classes:{root:ne.root},variant:"outlined",severity:"info",icon:a.createElement(T.Z,{size:"24px"}),action:a.createElement(Q,{buildLog:Qt})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),he==="CONTENT_STALE_REFRESHING"&&(K=a.createElement(O.Z,{variant:"outlined",severity:"info",icon:a.createElement(T.Z,{size:"24px"}),action:a.createElement(Q,{buildLog:Qt}),classes:{root:ne.root}},"A newer version of this documentation is being prepared and will be available shortly.")),he==="CONTENT_STALE_READY"&&(K=a.createElement(O.Z,{variant:"outlined",severity:"success",action:a.createElement(x.Z,{color:"inherit",onClick:()=>Ye()},"Refresh"),classes:{root:ne.root}},"A newer version of this documentation is now available, please refresh to view.")),he==="CONTENT_STALE_ERROR"&&(K=a.createElement(O.Z,{variant:"outlined",severity:"error",action:a.createElement(Q,{buildLog:Qt}),classes:{root:ne.root,message:ne.message}},"Building a newer version of this documentation failed."," ",Nt)),he==="CONTENT_NOT_FOUND"&&(K=a.createElement(a.Fragment,null,Nt&&a.createElement(O.Z,{variant:"outlined",severity:"error",action:a.createElement(Q,{buildLog:Qt}),classes:{root:ne.root,message:ne.message}},"Building a newer version of this documentation failed."," ",Nt),a.createElement(me,{errorMessage:Ot}))),K},He=/main\.[A-Fa-f0-9]{8}\.min\.css$/,mt=/^https:\/\/fonts\.googleapis\.com/,se=/^https:\/\/fonts\.gstatic\.com/,pe=K=>K.nodeName==="LINK",ye=K=>{const ne=(K==null?void 0:K.getAttribute("href"))||"",he=ne.match(He),Ye=ne.match(mt),Ot=ne.match(se);return he||Ye||Ot},we=K=>(pe(K)&&!ye(K)&&K.remove(),K),nt=K=>K.nodeName==="IFRAME",$t=(K,ne)=>{const he=K.getAttribute("src")||"";try{const{host:Ye}=new URL(he);return ne.includes(Ye)}catch{return!1}},Ut=K=>ne=>(nt(ne)&&!$t(ne,K)&&ne.remove(),ne),wt=()=>{const K=(0,n.h_)(n.Ds);return(0,a.useMemo)(()=>K.getOptionalConfig("techdocs.sanitizer"),[K])},sn=()=>{const K=wt();return(0,a.useCallback)(async ne=>{const he=K==null?void 0:K.getOptionalStringArray("allowedIframeHosts");ee().addHook("beforeSanitizeElements",we);const Ye=["link"];return he&&(Ye.push("iframe"),ee().addHook("beforeSanitizeElements",Ut(he))),ee().sanitize(ne.outerHTML,{ADD_TAGS:Ye,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[K])};var vn=({theme:K})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${K.palette.text.primary};
  --md-default-fg-color--light: ${K.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,C.$n)(K.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,C.$n)(K.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${K.palette.background.default};
  --md-default-bg-color--light: ${K.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,C.$n)(K.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,C.$n)(K.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${K.palette.primary.main};
  --md-primary-fg-color--light: ${K.palette.primary.light};
  --md-primary-fg-color--dark: ${K.palette.primary.dark};
  --md-primary-bg-color: ${K.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,C.$n)(K.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${K.shadows[1]};
  --md-shadow-z2: ${K.shadows[2]};
  --md-shadow-z3: ${K.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${K.palette.text.primary};
  --md-code-bg-color: ${K.palette.background.paper};
  --md-code-hl-color: ${(0,C.Fq)(K.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${K.palette.type==="dark"?K.palette.primary.light:K.palette.primary.dark};
  --md-code-hl-function-color: ${K.palette.type==="dark"?K.palette.secondary.light:K.palette.secondary.dark};
  --md-code-hl-string-color: ${K.palette.type==="dark"?K.palette.success.light:K.palette.success.dark};
  --md-code-hl-number-color: ${K.palette.type==="dark"?K.palette.error.light:K.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${K.palette.link};
  --md-typeset-table-color: ${K.palette.text.primary};
  --md-typeset-del-color: ${K.palette.type==="dark"?(0,C.Fq)(K.palette.error.dark,.5):(0,C.Fq)(K.palette.error.light,.5)};
  --md-typeset-ins-color: ${K.palette.type==="dark"?(0,C.Fq)(K.palette.success.dark,.5):(0,C.Fq)(K.palette.success.light,.5)};
  --md-typeset-mark-color: ${K.palette.type==="dark"?(0,C.Fq)(K.palette.warning.dark,.5):(0,C.Fq)(K.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,Le=({theme:K})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${K.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const $e="224px";var be=({theme:K,sidebar:ne})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${K.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${K.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${ne.isPinned?`calc(-12.1rem + ${$e})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}
`;const Qe=["h1","h2","h3","h4","h5","h6"];var lt=({theme:K})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Qe.reduce((ne,he)=>{var Ye;const Ot=(Ye=K.typography.htmlFontSize)!=null?Ye:16,Nt=K.typography[he],{lineHeight:Qt,fontFamily:tn,fontWeight:In,fontSize:Mn}=Nt,wn=Wn=>{let on=1;return typeof Wn=="number"&&(on=Wn/Ot*.6),typeof Wn=="string"&&(on=Wn.replace("rem","")),`calc(${on} * var(--md-typeset-font-size))`};return ne.concat(`
    .md-typeset ${he} {
      color: var(--md-default-fg-color);
      line-height: ${Qt};
      font-family: ${tn};
      font-weight: ${In};
      font-size: ${wn(Mn)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${K.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,kt=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,Mt=({theme:K})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${K.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${K.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${K.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${K.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${K.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const nn=[vn,Le,be,lt,kt,Mt],gn=()=>(0,E.Pf)(),An=()=>{const K=gn(),ne=(0,P.Z)();return(0,a.useMemo)(()=>{const he={theme:ne,sidebar:K};return nn.reduce((Ye,Ot)=>Ye+Ot(he),"")},[ne,K])},Pn=()=>{const K=An();return(0,a.useCallback)(ne=>(ne.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${K}</style>`),ne),[K])},Bn=(K,ne,he)=>{const Ye=K==="src"&&ne.endsWith(".svg"),Ot=!ne.match(/^([a-z]*:)?\/\//i),Nt=ne.startsWith(he);return Ye&&(Ot||Nt)},Un=({techdocsStorageApi:K,entityId:ne,path:he})=>async Ye=>{const Ot=await K.getApiOrigin(),Nt=async(Qt,tn)=>{for(const In of Qt)if(In.hasAttribute(tn)){const Mn=In.getAttribute(tn);if(!Mn)return;const wn=await K.getBaseUrl(Mn,ne,he);if(Bn(tn,Mn,Ot))try{const on=await(await fetch(wn,{credentials:"include"})).text();In.setAttribute(tn,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(on)))}`)}catch{In.setAttribute("alt",`Error: ${Mn}`)}else In.setAttribute(tn,wn)}};return await Promise.all([Nt(Ye.querySelectorAll("img"),"src"),Nt(Ye.querySelectorAll("script"),"src"),Nt(Ye.querySelectorAll("source"),"src"),Nt(Ye.querySelectorAll("link"),"href"),Nt(Ye.querySelectorAll("a[download]"),"href")]),Ye},zn=K=>ne=>{var he;const Ye=ne.querySelector('[title="Edit this page"]');if(!Ye||!Ye.href)return ne;const Ot=new URL(Ye.href),Nt=K.byUrl(Ot);if((Nt==null?void 0:Nt.type)!=="github"&&(Nt==null?void 0:Nt.type)!=="gitlab")return ne;const Qt=((he=ne.querySelector("article>h1"))==null?void 0:he.childNodes[0].textContent)||"",tn=encodeURIComponent(`Documentation Feedback: ${Qt}`),In=encodeURIComponent(`Page source:
${Ye.href}

Feedback:`),Mn=(Nt==null?void 0:Nt.type)==="github"?(0,Pe.BT)(Ot.href,"blob"):Ot.href,wn=It()(Mn),Wn=`/${wn.organization}/${wn.name}`,on=Ye.cloneNode();switch(Nt==null?void 0:Nt.type){case"gitlab":on.href=`${Ot.origin}${Wn}/issues/new?issue[title]=${tn}&issue[description]=${In}`;break;case"github":on.href=`${Ot.origin}${Wn}/issues/new?title=${tn}&body=${In}`;break;default:return ne}return Ct.render(a.createElement(Ge.Z),on),on.style.paddingLeft="5px",on.title="Leave feedback for this page",on.id="git-feedback-link",Ye==null||Ye.insertAdjacentElement("beforebegin",on),ne},Nn=()=>K=>{const ne=K.querySelector('.md-header label[for="__drawer"]'),he=K.querySelector("article");if(!ne||!he)return K;const Ye=ne.cloneNode();return Ct.render(a.createElement(q.Z),Ye),Ye.id="toggle-sidebar",Ye.title="Toggle Sidebar",Ye.classList.add("md-content__button"),Ye.style.setProperty("padding","0 0 0 5px"),Ye.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),he==null||he.prepend(Ye),K},Ve=()=>K=>(((he,Ye)=>{Array.from(he).filter(Ot=>Ot.hasAttribute(Ye)).forEach(Ot=>{const Nt=Ot.getAttribute(Ye);if(Nt){Nt.match(/^https?:\/\//i)&&Ot.setAttribute("target","_blank");try{const Qt=_e(window.location.href);Ot.setAttribute(Ye,new URL(Nt,Qt).toString())}catch{Ot.replaceWith(Ot.textContent||Nt)}}})})(Array.from(K.getElementsByTagName("a")),"href"),K);function _e(K){const ne=new URL(K);return!ne.pathname.endsWith("/")&&!ne.pathname.endsWith(".html")&&(ne.pathname+="/"),ne.toString()}const Ne=({baseUrl:K,onClick:ne})=>he=>(Array.from(he.getElementsByTagName("a")).forEach(Ye=>{Ye.addEventListener("click",Ot=>{const Qt=Ye.getAttribute("href");Qt&&Qt.startsWith(K)&&!Ye.hasAttribute("download")&&(Ot.preventDefault(),ne(Ot,Qt))})}),he),Te=(0,p.Z)(K=>({tooltip:{fontSize:"inherit",color:K.palette.text.primary,margin:0,padding:K.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(Z.ZP),ut=()=>a.createElement(F.Z,null,a.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),gt=({text:K})=>{const[ne,he]=(0,a.useState)(!1),[,Ye]=(0,oe.Z)(),Ot=(0,a.useCallback)(()=>{Ye(K),he(!0)},[K,Ye]),Nt=(0,a.useCallback)(()=>{he(!1)},[he]);return a.createElement(Te,{title:"Copied to clipboard",placement:"left",open:ne,onClose:Nt,leaveDelay:1e3},a.createElement(S.Z,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:Ot},a.createElement(ut,null)))},Et=K=>ne=>{var he;const Ye=ne.querySelectorAll("pre > code");for(const Ot of Ye){const Nt=Ot.textContent||"",Qt=document.createElement("div");(he=Ot==null?void 0:Ot.parentElement)==null||he.prepend(Qt),Ct.render(a.createElement(Me.Z,{theme:K},a.createElement(gt,{text:Nt})),Qt)}return ne},at=()=>K=>{var ne;return(ne=K.querySelector(".md-header"))==null||ne.remove(),K},Dt=()=>K=>{var ne,he;return(ne=K.querySelector(".md-footer .md-copyright"))==null||ne.remove(),(he=K.querySelector(".md-footer-copyright"))==null||he.remove(),K},en=({onLoading:K,onLoaded:ne})=>he=>(K(),he.addEventListener(_.Ox,function Ye(){ne(),he.removeEventListener(_.Ox,Ye)}),he),fn=()=>K=>(K.addEventListener(_.Ox,function ne(){var he;if(window.location.hash){const Ye=window.location.hash.slice(1);(he=K==null?void 0:K.querySelector(`[id="${Ye}"]`))==null||he.scrollIntoView()}K.removeEventListener(_.Ox,ne)}),K),Cn=()=>K=>(setTimeout(()=>{const ne=K==null?void 0:K.querySelectorAll("li.md-nav__item--active");ne.length!==0&&(ne.forEach(Ye=>{const Ot=Ye==null?void 0:Ye.querySelector("input");Ot!=null&&Ot.checked||Ot==null||Ot.click()}),ne[ne.length-1].scrollIntoView())},200),K),Qn=async(K,ne)=>{let he;if(typeof K=="string")he=new DOMParser().parseFromString(K,"text/html").documentElement;else if(K instanceof Element)he=K;else throw new Error("dom is not a recognized type");for(const Ye of ne)he=await Ye(he);return he};function er(K,ne){const he=new URL(ne),Ye=`${he.origin}${he.pathname.replace(/\/$/,"")}`,Ot=K.replace(Ye,"").replace(/^\/+/,""),Nt=new URL(`http://localhost/${Ot}`);return`${Nt.pathname}${Nt.search}${Nt.hash}`}function Zn(){const K=(0,c.s0)(),he=(0,n.h_)(n.Ds).getOptionalString("app.baseUrl");return(0,a.useCallback)(Ot=>{let Nt=Ot;if(he)try{Nt=er(Ot,he)}catch{}K(Nt)},[K,he])}const jn="screen and (max-width: 76.1875em)",tr=K=>{const ne=Zn(),he=(0,P.Z)(),Ye=(0,Ee.Z)(jn),Ot=sn(),Nt=Pn(),Qt=(0,n.z$)(),tn=(0,n.h_)(_.Dl),In=(0,n.h_)(R.q3),{state:Mn,path:wn,content:Wn}=ue(),[on,rr]=(0,a.useState)(null),Er=(0,_.ux)(on),Or=(0,a.useCallback)(()=>{if(!on)return;on.querySelectorAll(".md-sidebar").forEach(pr=>{var Pr,Lr,kr;if(Ye)pr.style.top="0px";else{const Ir=document==null?void 0:document.querySelector(".techdocs-reader-page"),Gr=(Pr=Ir==null?void 0:Ir.getBoundingClientRect().top)!=null?Pr:0;let Xr=(Lr=on.getBoundingClientRect().top)!=null?Lr:0;const Y=on.querySelector(".md-container > .md-tabs"),le=(kr=Y==null?void 0:Y.getBoundingClientRect().height)!=null?kr:0;Xr<Gr&&(Xr=Gr),pr.style.top=`${Math.max(Xr,0)+le}px`}pr.style.setProperty("opacity","1")})},[on,Ye]);(0,a.useEffect)(()=>(window.addEventListener("resize",Or),window.addEventListener("scroll",Or,!0),()=>{window.removeEventListener("resize",Or),window.removeEventListener("scroll",Or,!0)}),[on,Or]);const ar=(0,a.useCallback)(()=>{if(!on)return;const vr=on.querySelector(".md-footer");vr&&(vr.style.width=`${on.getBoundingClientRect().width}px`)},[on]);(0,a.useEffect)(()=>(window.addEventListener("resize",ar),()=>{window.removeEventListener("resize",ar)}),[on,ar]),(0,a.useEffect)(()=>{Er||(ar(),Or())},[Mn,Er,ar,Or]);const Ar=(0,a.useCallback)((vr,pr)=>Qn(vr,[Ot,Un({techdocsStorageApi:tn,entityId:K,path:pr}),Ve(),Nn(),at(),Dt(),zn(In),Nt]),[K,In,tn,Ot,Nt]),xr=(0,a.useCallback)(async vr=>Qn(vr,[fn(),Cn(),Et(he),Ne({baseUrl:window.location.origin,onClick:(pr,Pr)=>{var Lr,kr;const Ir=pr.ctrlKey||pr.metaKey,Gr=new URL(Pr),Xr=((Lr=pr.target)==null?void 0:Lr.innerText)||Pr,Y=Pr.replace(window.location.origin,"");Qt.captureEvent("click",Xr,{attributes:{to:Y}}),Gr.hash?Ir?window.open(Pr,"_blank"):(ne(Pr),(kr=vr==null?void 0:vr.querySelector(`[id="${Gr.hash.slice(1)}"]`))==null||kr.scrollIntoView()):Ir?window.open(Pr,"_blank"):ne(Pr)}}),en({onLoading:()=>{},onLoaded:()=>{var pr;(pr=vr.querySelector(".md-nav__title"))==null||pr.removeAttribute("for")}}),en({onLoading:()=>{Array.from(vr.querySelectorAll(".md-sidebar")).forEach(Pr=>{Pr.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[he,ne,Qt]);return(0,a.useEffect)(()=>{if(!Wn)return()=>{};let vr=!0;return Ar(Wn,wn).then(async pr=>{if(!(pr!=null&&pr.innerHTML)||!vr)return;window.scroll({top:0});const Pr=await xr(pr);rr(Pr)}),()=>{vr=!1}},[Wn,wn,Ar,xr]),on},D=()=>{const K=(0,_.$L)(),{shadowRoot:ne}=(0,_.x1)(),he=ne==null?void 0:ne.querySelector('[data-md-component="content"]'),Ye=ne==null?void 0:ne.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let Ot=Ye==null?void 0:Ye.querySelector('[data-techdocs-addons-location="primary sidebar"]');Ot||(Ot=document.createElement("div"),Ot.setAttribute("data-techdocs-addons-location","primary sidebar"),Ye==null||Ye.prepend(Ot));const Nt=ne==null?void 0:ne.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let Qt=Nt==null?void 0:Nt.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return Qt||(Qt=document.createElement("div"),Qt.setAttribute("data-techdocs-addons-location","secondary sidebar"),Nt==null||Nt.prepend(Qt)),a.createElement(a.Fragment,null,a.createElement(Xe.Z,{container:Ot},K.renderComponentsByLocation(_.oZ.PrimarySidebar)),a.createElement(Xe.Z,{container:he},K.renderComponentsByLocation(_.oZ.Content)),a.createElement(Xe.Z,{container:Qt},K.renderComponentsByLocation(_.oZ.SecondarySidebar)))},I=(0,h.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"}}}),G=Se(K=>{var ne;const{withSearch:he=!0,onReady:Ye}=K,Ot=I(),{entityMetadata:{value:Nt,loading:Qt},entityRef:tn,setShadowRoot:In}=(0,_.x1)(),Mn=tr(tn),wn=(0,a.useCallback)(Wn=>{In(Wn),Ye instanceof Function&&Ye()},[In,Ye]);return Qt===!1&&!Nt?a.createElement(E.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):Mn?a.createElement(E.VY,null,a.createElement(z.Z,{container:!0},a.createElement(z.Z,{xs:12,item:!0},a.createElement(Ke,null)),he&&a.createElement(z.Z,{className:Ot.search,xs:"auto",item:!0},a.createElement(re,{entityId:tn,entityTitle:(ne=Nt==null?void 0:Nt.metadata)==null?void 0:ne.title})),a.createElement(z.Z,{xs:12,item:!0},a.createElement(_.VA,{element:Mn,onAppend:wn},a.createElement(D,null))))):a.createElement(E.VY,null,a.createElement(z.Z,{container:!0},a.createElement(z.Z,{xs:12,item:!0},a.createElement(Ke,null))))}),ie=null,Ie=(0,n.NT)({id:"techdocs:index-page"}),qe=(0,n.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),B=(0,n.NT)({id:"techdocs:catalog-reader-view"}),H=a.createElement(Ze.Z,{animation:"wave",variant:"text",height:40}),Ce=K=>{const{palette:{common:{white:ne}}}=(0,P.Z)(),{children:he}=K,Ye=(0,_.$L)(),Ot=(0,n.h_)(n.Ds),{title:Nt,setTitle:Qt,subtitle:tn,setSubtitle:In,entityRef:Mn,metadata:{value:wn,loading:Wn},entityMetadata:{value:on,loading:rr}}=(0,_.x1)();(0,a.useEffect)(()=>{wn&&(Qt(wn.site_name),In(()=>{let{site_description:Ir}=wn;return(!Ir||Ir==="None")&&(Ir=""),Ir}))},[wn,Qt,In]);const Er=Ot.getOptional("app.title")||"Backstage",Or=[Nt,tn,Er].filter(Boolean).join(" | "),{locationMetadata:ar,spec:Ar}=on||{},xr=Ar==null?void 0:Ar.lifecycle,vr=on?(0,ct.hF)(on,At.S4):[],pr=(0,n.tg)(Ie)(),Pr=a.createElement(a.Fragment,null,a.createElement(E.i9,{label:(0,qt.capitalize)((on==null?void 0:on.kind)||"entity"),value:a.createElement(ct.dx,{color:"inherit",entityRef:Mn,title:on==null?void 0:on.metadata.title,defaultKind:"Component"})}),vr.length>0&&a.createElement(E.i9,{label:"Owner",value:a.createElement(ct.rI,{color:"inherit",entityRefs:vr,defaultKind:"group"})}),xr?a.createElement(E.i9,{label:"Lifecycle",value:xr}):null,ar&&ar.type!=="dir"&&ar.type!=="file"?a.createElement(E.i9,{label:"",value:a.createElement(z.Z,{container:!0,direction:"column",alignItems:"center",style:{color:ne}},a.createElement(z.Z,{style:{padding:0},item:!0},a.createElement(Je.Z,{style:{marginTop:"-25px"}})),a.createElement(z.Z,{style:{padding:0},item:!0},"Source")),url:ar.target}):null);return!rr&&on===void 0||!Wn&&wn===void 0?null:a.createElement(E.h4,{type:"Documentation",typeLink:pr,title:Nt||H,subtitle:tn===""?void 0:tn||H},a.createElement(Ae.Z,{titleTemplate:"%s"},a.createElement("title",null,Or)),Pr,he,Ye.renderComponentsByLocation(_.oZ.Header))},je=(0,h.Z)(K=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:K.spacing(3,3,0)}})),Tt=K=>{const ne=je(),[he,Ye]=(0,a.useState)(null),Ot=(0,a.useCallback)(Wn=>{Ye(Wn.currentTarget)},[]),Nt=(0,a.useCallback)(()=>{Ye(null)},[]),{entityMetadata:{value:Qt,loading:tn}}=(0,_.x1)(),In=(0,_.$L)(),Mn=In.renderComponentsByLocation(_.oZ.Subheader),wn=In.renderComponentsByLocation(_.oZ.Settings);return!Mn&&!wn||tn===!1&&!Qt?null:a.createElement(Bt.Z,{classes:ne,...K.toolbarProps},a.createElement(st.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},Mn,wn?a.createElement(a.Fragment,null,a.createElement(Z.ZP,{title:"Settings"},a.createElement(S.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:Ot},a.createElement(Be.Z,null))),a.createElement(jt.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:he,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(he),onClose:Nt,keepMounted:!0},a.createElement("div",null,wn))):null))},Kt=K=>{const{withSearch:ne,withHeader:he=!0}=K;return a.createElement(E.T3,{themeId:"documentation"},he&&a.createElement(Ce,null),a.createElement(Tt,null),a.createElement(G,{withSearch:ne}))},Vt=K=>{const{kind:ne,name:he,namespace:Ye}=(0,n.Oi)(qe),{children:Ot,entityRef:Nt={kind:ne,name:he,namespace:Ye}}=K,Qt=(0,c.pC)();if(!Ot){const Mn=(Qt?a.Children.toArray(Qt.props.children):[]).flatMap(wn=>{var Wn,on;return(on=(Wn=wn==null?void 0:wn.props)==null?void 0:Wn.children)!=null?on:[]}).find(wn=>!(0,n.IY)(wn,_.Zz)&&!(0,n.IY)(wn,_.jM));return a.createElement(_.ZS,{entityRef:Nt},Mn||a.createElement(Kt,null))}return a.createElement(_.ZS,{entityRef:Nt},({metadata:tn,entityMetadata:In,onReady:Mn})=>a.createElement("div",{className:"techdocs-reader-page"},a.createElement(E.T3,{themeId:"documentation"},Ot instanceof Function?Ot({entityRef:Nt,techdocsMetadataValue:tn.value,entityMetadataValue:In.value,onReady:Mn}):Ot)))};function yn(K,ne){return ne.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?K:K.toLocaleLowerCase("en-US")}const Rn=K=>{const{entities:ne}=K,he=(0,n.tg)(qe),Ye=(0,n.h_)(n.Ds);return ne?a.createElement(E.Oh,{"data-testid":"docs-explore"},ne!=null&&ne.length?ne.map((Ot,Nt)=>{var Qt,tn;return a.createElement(Zt.Z,{key:Nt},a.createElement(J.Z,null,a.createElement(E.hu,{title:(Qt=Ot.metadata.title)!=null?Qt:Ot.metadata.name})),a.createElement(an.Z,null,Ot.metadata.description),a.createElement(Re.Z,null,a.createElement(E.Qj,{to:he({namespace:yn((tn=Ot.metadata.namespace)!=null?tn:"default",Ye),kind:yn(Ot.kind,Ye),name:yn(Ot.metadata.name,Ye)}),color:"primary","data-testid":"read_docs"},"Read Docs")))}):null):null},un={title:"All Documentation",filterPredicate:()=>!0},Vn=K=>{const{entities:ne,group:he}=K,{loading:Ye,isOwnedEntity:Ot}=useEntityOwnership(),Nt=ne.filter(tn=>he.filterPredicate==="ownedByUser"?Ye?!1:Ot(tn):typeof he.filterPredicate=="function"&&he.filterPredicate(tn)),Qt=(()=>typeof he.title=="string"?React.createElement(ContentHeader,{title:he.title}):he.title)();return Nt.length===0?null:React.createElement(Content,null,Qt,React.createElement(Rn,{entities:Nt}))},xn=K=>{const{loading:ne,error:he,entities:Ye}=useEntityList();return he?React.createElement(WarningPanel,{severity:"error",title:"Could not load available documentation."},React.createElement(CodeSnippet,{language:"text",text:he.toString()})):ne?React.createElement(Progress,null):Ye.length===0?React.createElement("div",{"data-testid":"doc-not-found"},React.createElement(Typography$1,{variant:"body2"},"No documentation found that match your filter. Learn more about"," ",React.createElement(Link,{to:"https://backstage.io/docs/features/techdocs/creating-and-publishing"},"publishing documentation"),".")):(Ye.sort((Ot,Nt)=>{var Qt,tn;return((Qt=Ot.metadata.title)!=null?Qt:Ot.metadata.name).localeCompare((tn=Nt.metadata.title)!=null?tn:Nt.metadata.name)}),React.createElement(Content,null,(K.groups||[un]).map((Ot,Nt)=>React.createElement(Vn,{entities:Ye,group:Ot,key:`${Ot.title}-${Nt}`}))))},Yn=(0,dt.Z)({root:{color:"#f3ba37"}})(hn.Z),Fn={createCopyDocsUrlAction(K){return ne=>({icon:()=>a.createElement(Pt.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>K(`${window.location.origin}${ne.resolved.docsUrl}`)})},createStarEntityAction(K,ne){return he=>{const Ye=he.entity,Ot=K(Ye);return{cellStyle:{paddingLeft:"1em"},icon:()=>Ot?a.createElement(Yn,null):a.createElement(dn.Z,null),tooltip:Ot?"Remove from favorites":"Add to favorites",onClick:()=>ne(Ye)}}}};function Xn(K){return K.metadata.title||K.metadata.name}const Jn={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:K=>a.createElement(E.uw,{value:a.createElement(E.rU,{to:K.resolved.docsUrl},Xn(K.entity)),subvalue:K.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:K})=>a.createElement(ct.rI,{entityRefs:K.ownedByRelations,defaultKind:"group"})}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},ur=K=>{const{entities:ne,title:he,loading:Ye,columns:Ot,actions:Nt,options:Qt}=K,[,tn]=(0,oe.Z)(),In=(0,n.tg)(qe),Mn=(0,n.h_)(n.Ds);if(!ne)return null;const wn=ne.map(rr=>{var Er;const Or=(0,ct.hF)(rr,At.S4);return{entity:rr,resolved:{docsUrl:In({namespace:yn((Er=rr.metadata.namespace)!=null?Er:"default",Mn),kind:yn(rr.kind,Mn),name:yn(rr.metadata.name,Mn)}),ownedByRelations:Or,ownedByRelationsTitle:Or.map(ar=>(0,ct.$3)(ar,{defaultKind:"group"})).join(", ")}}}),Wn=[Jn.createNameColumn(),Jn.createOwnerColumn(),Jn.createTypeColumn()],on=[Fn.createCopyDocsUrlAction(tn)];return a.createElement(a.Fragment,null,Ye||wn&&wn.length>0?a.createElement(E.iA,{isLoading:Ye,options:{paging:!0,pageSize:20,search:!0,actionsColumnIndex:-1,...Qt},data:wn,columns:Ot||Wn,actions:Nt||on,title:he?`${he} (${wn.length})`:`All (${wn.length})`}):a.createElement(E.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:a.createElement(E.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};ur.columns=Jn,ur.actions=Fn;const gr=K=>{var ne,he;const{columns:Ye,actions:Ot,options:Nt}=K,{loading:Qt,error:tn,entities:In,filters:Mn}=(0,ct.wp)(),{isStarredEntity:wn,toggleStarredEntity:Wn}=(0,ct.CR)(),[,on]=(0,oe.Z)(),rr=(0,qt.capitalize)((he=(ne=Mn.user)==null?void 0:ne.value)!=null?he:"all"),Er=[Fn.createCopyDocsUrlAction(on),Fn.createStarEntityAction(wn,Wn)];return tn?a.createElement(E.GB,{severity:"error",title:"Could not load available documentation."},a.createElement(E.Oi,{language:"text",text:tn.toString()})):a.createElement(ur,{title:rr,entities:In,loading:Qt,actions:Ot||Er,columns:Ye,options:Nt})};gr.columns=Jn,gr.actions=Fn;const dr=K=>{var ne;const{children:he}=K,Ot=`Documentation available in ${(ne=(0,n.h_)(n.Ds).getOptionalString("organization.name"))!=null?ne:"Backstage"}`;return a.createElement(E.g9,{title:"Documentation",subtitle:Ot,themeId:"documentation"},he)};class ir{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":ct.n3}}}const nr=()=>{const{updateFilters:K}=(0,ct.wp)();return(0,a.useEffect)(()=>{K({techdocs:new ir})},[K]),null},W=K=>{const{initialFilter:ne="owned",columns:he,actions:Ye}=K;return a.createElement(dr,null,a.createElement(E.VY,null,a.createElement(E.yW,{title:""},a.createElement(E.qt,null,"Discover documentation in your ecosystem.")),a.createElement(ct.UO,null,a.createElement(ct._i,null,a.createElement(ct._i.Filters,null,a.createElement(nr,null),a.createElement(ct.EW,{initialFilter:ne}),a.createElement(ct.dq,null),a.createElement(ct.xE,null)),a.createElement(ct._i.Content,null,a.createElement(gr,{actions:Ye,columns:he}))))))},o=(0,n.rx)({id:"techdocs",apis:[(0,n.ni)({api:_.Dl,deps:{configApi:n.Ds,discoveryApi:n.NW,identityApi:n.$4,fetchApi:n.gP},factory:({configApi:K,discoveryApi:ne,identityApi:he,fetchApi:Ye})=>new En({configApi:K,discoveryApi:ne,identityApi:he,fetchApi:Ye})}),(0,n.ni)({api:_.gT,deps:{configApi:n.Ds,discoveryApi:n.NW,fetchApi:n.gP},factory:({configApi:K,discoveryApi:ne,fetchApi:he})=>new St({configApi:K,discoveryApi:ne,fetchApi:he})})],routes:{root:Ie,docRoot:qe,entityContent:B}}),i=o.provide((0,n.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return Gn}).then(K=>K.Router),mountPoint:Ie})),g=o.provide((0,n.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return Gn}).then(K=>K.EmbeddedDocsRouter),mountPoint:B})),M=o.provide((0,n.P4)({name:"TechDocsCustomHome",component:()=>e.e(1144).then(e.bind(e,11144)).then(K=>K.TechDocsCustomHome),mountPoint:Ie})),ve=o.provide((0,n.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(function(){return cn}).then(K=>K.TechDocsIndexPage),mountPoint:Ie})),Fe=o.provide((0,n.P4)({name:"TechDocsReaderPage",component:()=>e.e(1310).then(e.bind(e,21310)).then(K=>K.TechDocsReaderPage),mountPoint:qe})),rt=o.provide((0,xe.E5)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(function(){return pt}).then(K=>K.TechDocsSearchResultListItem),predicate:K=>K.type==="techdocs"})),xt=({entity:K})=>{const ne=(0,At.iB)(K);return a.createElement(Fe,{entityRef:ne},a.createElement(Tt,null),a.createElement(G,{withSearch:!1}))},Wt=K=>(0,c.pC)()||a.createElement(W,{...K});var cn=Object.freeze({__proto__:null,TechDocsIndexPage:Wt});const mn="backstage.io/techdocs-ref";var Gn=Object.freeze({__proto__:null,isTechDocsAvailable:K=>{var ne,he;return Boolean((he=(ne=K==null?void 0:K.metadata)==null?void 0:ne.annotations)==null?void 0:he[mn])},Router:()=>a.createElement(c.Z5,null,a.createElement(c.AW,{path:"/",element:a.createElement(Wt,null)}),a.createElement(c.AW,{path:"/:namespace/:kind/:name/*",element:a.createElement(Vt,null)})),EmbeddedDocsRouter:K=>{var ne;const{children:he}=K,{entity:Ye}=(0,ct.X2)(),Ot=(0,c.V$)([{path:"/*",element:a.createElement(xt,{entity:Ye}),children:[{path:"*",element:he}]}]);return((ne=Ye.metadata.annotations)==null?void 0:ne[mn])?Ot:a.createElement(E.sk,{annotation:mn})}})},70557:function(Rt,d,e){e.d(d,{$d:function(){return n.E},I6:function(){return n.g},Jl:function(){return n.e},bf:function(){return n.h},s4:function(){return n.t}});var n=e(20931),l=e(30705),u=e(32272),m=e(76372),a=e.n(m),c=e(2784),_=e(66565),b=e(80236),t=e(92573),E=e(49462),h=e(35368),$=e.n(h),L=e(1854),k=e(28316),z=e(82717),y=e.n(z),S=e(18671),x=e(73495),f=e(34520),T=e(76635),C=e.n(T)},43229:function(Rt,d,e){e.d(d,{F0:function(){return pt},H2:function(){return N},Zr:function(){return ee},kG:function(){return Pt}});var n=e(53907),l=e(32272),u=e(82394),m=e.n(u),a=e(30705),c=e(2784),_=e(47603),b=e(80236),t=e(73557),E=e(90436),h=e(77277),$=e(79692),L=e(43434),k=e(38402),z=e(86136),y=e(49378),S=e(80030),x=e(60905),f=e(9520),T=e(11776),C=e(82938),P=e(86619),p=e(61837),Z=e(48348),F=e(12231),Me=e(11640),Ee=e(33375),Xe=e(64279),Bt=e(71554),st=e(43054),jt=e(72164),Zt=e(59324),J=e(13737),an=e(31168),Re=e(73495);const xe={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},O=new Map;class Ze{constructor(A,j,Q,me,We,Ke){this.namespace=A,this.fetchApi=j,this.discoveryApi=Q,this.errorApi=me,this.identityApi=We,this.fallback=Ke,this.subscribers=new Set,this.observables=new Map}static create(A){var j;return new Ze((j=A.namespace)!=null?j:"default",A.fetchApi,A.discoveryApi,A.errorApi,A.identityApi,WebStorage.create({namespace:A.namespace,errorApi:A.errorApi}))}forBucket(A){const j=`${this.namespace}.${A}`;return O.has(j)||O.set(j,new Ze(j,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),O.get(j)}async remove(A){const j=await this.getFetchUrl(A),Q=await this.fetchApi.fetch(j,{method:"DELETE"});if(!Q.ok&&Q.status!==404)throw await ResponseError.fromResponse(Q);this.notifyChanges({key:A,presence:"absent"})}async set(A,j){if(!await this.isSignedIn()){await this.fallback.set(A,j),this.notifyChanges({key:A,presence:"present",value:j});return}const Q=await this.getFetchUrl(A),me=await this.fetchApi.fetch(Q,{method:"PUT",headers:xe,body:JSON.stringify({value:j})});if(!me.ok)throw await ResponseError.fromResponse(me);const{value:We}=await me.json();this.notifyChanges({key:A,value:We,presence:"present"})}observe$(A){return this.observables.has(A)||this.observables.set(A,new ObservableImpl(j=>(this.subscribers.add(j),Promise.resolve().then(()=>this.get(A)).then(Q=>j.next(Q)).catch(Q=>this.errorApi.post(Q)),()=>{this.subscribers.delete(j)})).filter(({key:j})=>j===A)),this.observables.get(A)}snapshot(A){return{key:A,presence:"unknown"}}async get(A){if(!await this.isSignedIn())return this.fallback.snapshot(A);const j=await this.getFetchUrl(A),Q=await this.fetchApi.fetch(j);if(Q.status===404)return{key:A,presence:"absent"};if(!Q.ok)throw await ResponseError.fromResponse(Q);try{const{value:me}=await Q.json(),We=JSON.parse(JSON.stringify(me),(Ke,He)=>(typeof He=="object"&&He!==null&&Object.freeze(He),He));return{key:A,presence:"present",value:We}}catch{return{key:A,presence:"absent"}}}async getFetchUrl(A){const j=await this.discoveryApi.getBaseUrl("user-settings"),Q=encodeURIComponent(this.namespace),me=encodeURIComponent(A);return`${j}/buckets/${Q}/keys/${me}`}async notifyChanges(A){for(const j of this.subscribers)try{j.next(A)}catch{}}async isSignedIn(){try{const A=await this.identityApi.getCredentials();return!!(A!=null&&A.token)}catch{return!1}}}const ce=(0,a.NT)({id:"user-settings"}),N=(0,a.rx)({id:"user-settings",routes:{settingsPage:ce}}).provide((0,a.P4)({name:"UserSettingsPage",component:()=>e.e(8278).then(e.bind(e,38278)).then(re=>re.SettingsPage),mountPoint:ce})),ee=re=>{const A=(0,a.tg)(ce),j=re.icon?re.icon:_.Z;return c.createElement(b.R6,{text:"Settings",to:A(),icon:j})},Pe=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,Ge=()=>c.createElement(b.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:c.createElement(c.Fragment,null,c.createElement(E.Z,{variant:"body1"},"Open ",c.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),c.createElement(b.Oi,{text:Pe,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),c.createElement(h.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),Ct=(0,$.Z)(re=>({avatar:{width:({size:A})=>A,height:({size:A})=>A,fontSize:({size:A})=>A*.7,border:`1px solid ${re.palette.textSubtle}`}})),ht=({size:re,picture:A})=>{const{iconSize:j}=b.sidebarConfig,Q=Ct(re?{size:re}:{size:j});return c.createElement(L.Z,{src:A,className:Q.avatar})},It=re=>{const{title:A,description:j,icon:Q,apiRef:me}=re,We=(0,a.h_)(me),Ke=(0,a.h_)(a.VE),[He,mt]=(0,c.useState)(!1),se={},[pe,ye]=(0,c.useState)(se);return(0,c.useEffect)(()=>{let we=!1;const nt=We.sessionState$().subscribe($t=>{we||We.getProfile({optional:!0}).then(Ut=>{we||($t===a.sM.SignedIn&&mt(!0),Ut&&ye(Ut))})});return()=>{we=!0,nt.unsubscribe()}},[We]),c.createElement(k.Z,null,c.createElement(z.Z,null,c.createElement(Q,null)),c.createElement(y.Z,{primary:A,secondary:c.createElement(S.ZP,{placement:"top",arrow:!0,title:j},c.createElement(x.Z,{container:!0,spacing:6},c.createElement(x.Z,{item:!0},c.createElement(ht,{size:48,picture:pe.picture})),c.createElement(x.Z,{item:!0,xs:12,sm:!0,container:!0},c.createElement(x.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},c.createElement(x.Z,{item:!0,xs:!0},c.createElement(E.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},pe.displayName),c.createElement(E.Z,{variant:"body2",color:"textSecondary"},pe.email),c.createElement(E.Z,{variant:"body2",color:"textSecondary"},j)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),c.createElement(f.Z,null,c.createElement(S.ZP,{placement:"top",arrow:!0,title:He?`Sign out from ${A}`:`Sign in to ${A}`},c.createElement(h.Z,{variant:"outlined",color:"primary",onClick:()=>{(He?We.signOut():We.signIn()).catch(nt=>Ke.post(nt))}},He?"Sign out":"Sign in"))))},q=re=>{const{configuredProviders:A}=re;return c.createElement(c.Fragment,null,A.includes("google")&&c.createElement(It,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:a.Kp,icon:Me.Z}),A.includes("microsoft")&&c.createElement(It,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:a.p_,icon:Me.Z}),A.includes("github")&&c.createElement(It,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:a.F4,icon:Me.Z}),A.includes("gitlab")&&c.createElement(It,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:a.ux,icon:Me.Z}),A.includes("okta")&&c.createElement(It,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:a.D,icon:Me.Z}),A.includes("bitbucket")&&c.createElement(It,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:a.bq,icon:Me.Z}),A.includes("onelogin")&&c.createElement(It,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:a.gW,icon:Me.Z}),A.includes("atlassian")&&c.createElement(It,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:a.uB,icon:Me.Z}),A.includes("bitbucketServer")&&c.createElement(It,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:a.Km,icon:Me.Z}))},oe=re=>{const{providerSettings:A}=re,Q=(0,a.h_)(a.Ds).getOptionalConfig("auth.providers"),me=(Q==null?void 0:Q.keys())||[],We=A!=null?A:c.createElement(q,{configuredProviders:me});return!A&&!(me!=null&&me.length)?c.createElement(Ge,null):c.createElement(b.rJ,{title:"Available Providers"},c.createElement(T.Z,{dense:!0},We))},Ae=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,Je=()=>c.createElement(b.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:c.createElement(c.Fragment,null,c.createElement(E.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),c.createElement(b.Oi,{text:Ae,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),c.createElement(h.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),ct=re=>re.description?re.description:re.pluginId?`Registered in ${re.pluginId} plugin`:"Registered in the application",At=({flag:re,enabled:A,toggleHandler:j})=>c.createElement(k.Z,{divider:!0,button:!0,onClick:()=>j(re.name)},c.createElement(z.Z,null,c.createElement(S.ZP,{placement:"top",arrow:!0,title:A?"Disable":"Enable"},c.createElement(C.Z,{color:"primary",checked:A,name:re.name}))),c.createElement(y.Z,{primary:re.name,secondary:ct(re)})),qt=()=>{const re=(0,a.h_)(a.W0),A=re.getRegisteredFlags(),j=Object.fromEntries(A.map(({name:we})=>[we,re.isActive(we)])),[Q,me]=(0,c.useState)(j),[We,Ke]=(0,c.useState)(""),He=c.useRef(),mt=(0,c.useCallback)(we=>{const nt=re.isActive(we)?a.CL.None:a.CL.Active;re.save({states:{[we]:nt},merge:!0}),me($t=>({...$t,[we]:nt===a.CL.Active}))},[re]);if(!A.length)return c.createElement(Je,null);const se=()=>{var we;Ke(""),(we=He==null?void 0:He.current)==null||we.focus()},pe=A.filter(we=>we.name.toLocaleLowerCase("en-US").includes(We.toLocaleLowerCase("en-US"))),ye=()=>c.createElement(x.Z,{container:!0,style:{justifyContent:"space-between"}},c.createElement(x.Z,{item:!0,xs:6,md:8},c.createElement(E.Z,{variant:"h5"},"Feature Flags"),c.createElement(E.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),A.length>=10&&c.createElement(x.Z,{item:!0,xs:6,md:4},c.createElement(P.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:we=>we&&we.focus(),InputProps:{...We.length&&{endAdornment:c.createElement(p.Z,{"aria-label":"Clear filter",onClick:se,edge:"end"},c.createElement(Ee.Z,null))}},onChange:we=>Ke(we.target.value),value:We})));return c.createElement(b.rJ,{title:c.createElement(ye,null)},c.createElement(T.Z,{dense:!0},pe.map(we=>{const nt=Boolean(Q[we.name]);return c.createElement(At,{key:we.name,flag:we,enabled:nt,toggleHandler:mt})})))},zt=()=>{var re;const A=(0,a.h_)(a.$4),j=(0,a.h_)(a.$v),{value:Q,loading:me,error:We}=(0,Xe.default)(async()=>({profile:await A.getProfileInfo(),identity:await A.getBackstageIdentity()}),[]);return(0,c.useEffect)(()=>{We&&j.post({message:`Failed to load user identity: ${We}`,severity:"error"})},[We,j]),me||We?{profile:{},displayName:"",loading:me}:{profile:Q.profile,backstageIdentity:Q.identity,displayName:(re=Q.profile.displayName)!=null?re:Q.identity.userEntityRef,loading:me}},Be=(0,$.Z)(re=>({avatar:{width:({size:A})=>A,height:({size:A})=>A,fontSize:({size:A})=>A*.7,border:`1px solid ${re.palette.textSubtle}`}})),Pt=re=>{const{size:A}=re,{iconSize:j}=b.sidebarConfig,Q=Be(A?{size:A}:{size:j}),{profile:me}=zt();return c.createElement(L.Z,{src:me.picture,className:Q.avatar,alt:"Profile picture"})},dt=()=>{const re=(0,a.h_)(a.VE),A=(0,a.h_)(a.$4),[j,Q]=c.useState(!1),[me,We]=c.useState(void 0),Ke=mt=>{We(mt.currentTarget),Q(!0)},He=()=>{We(void 0),Q(!1)};return c.createElement(c.Fragment,null,c.createElement(p.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:Ke},c.createElement(st.Z,null)),c.createElement(Z.Z,{anchorEl:me,open:j,onClose:He},c.createElement(F.Z,{"data-testid":"sign-out",onClick:()=>A.signOut().catch(mt=>re.post(mt))},c.createElement(z.Z,null,c.createElement(Bt.Z,null)),"Sign Out")))},hn=()=>{const{profile:re,displayName:A}=zt();return c.createElement(b.rJ,{title:"Profile",variant:"gridItem"},c.createElement(x.Z,{container:!0,spacing:6},c.createElement(x.Z,{item:!0},c.createElement(Pt,{size:96})),c.createElement(x.Z,{item:!0,xs:12,sm:!0,container:!0},c.createElement(x.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},c.createElement(x.Z,{item:!0,xs:!0},c.createElement(E.Z,{variant:"subtitle1",gutterBottom:!0},A),c.createElement(E.Z,{variant:"body2",color:"textSecondary"},re.email))),c.createElement(x.Z,{item:!0},c.createElement(dt,null)))))},dn=()=>{const{isPinned:re,toggleSidebarPinState:A}=(0,b.Pf)();return c.createElement(k.Z,null,c.createElement(y.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),c.createElement(f.Z,null,c.createElement(S.ZP,{placement:"top",arrow:!0,title:`${re?"Unpin":"Pin"} Sidebar`},c.createElement(C.Z,{color:"primary",checked:re,onChange:()=>A(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},bn=({id:re,activeId:A,icon:j})=>j?(0,c.cloneElement)(j,{color:A===re?"primary":void 0}):c.createElement(Zt.Z,{color:A===re?"primary":void 0}),it=(0,$.Z)(re=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[re.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[re.breakpoints.down("xs")]:{paddingLeft:0}}})),St=({children:re,title:A,value:j,...Q})=>c.createElement(S.ZP,{placement:"top",arrow:!0,title:A},c.createElement(J.Z,{value:j,...Q},re)),En=()=>{const re=it(),A=(0,a.h_)(a.hg),j=(0,jt.Z)(A.activeThemeId$(),A.getActiveThemeId()),Q=A.getInstalledThemes(),me=(We,Ke)=>{Q.some(He=>He.id===Ke)?A.setActiveThemeId(Ke):A.setActiveThemeId(void 0)};return c.createElement(k.Z,{className:re.list,classes:{container:re.container}},c.createElement(y.Z,{className:re.listItemText,primary:"Theme",secondary:"Change the theme mode"}),c.createElement(f.Z,{className:re.listItemSecondaryAction},c.createElement(an.Z,{exclusive:!0,size:"small",value:j!=null?j:"auto",onChange:me},Q.map(We=>{var Ke;const He=(Ke=Q.find(mt=>mt.id===We.id))==null?void 0:Ke.icon;return c.createElement(St,{key:We.id,title:`Select ${We.title}`,value:We.id},c.createElement(c.Fragment,null,We.title,"\xA0",c.createElement(bn,{id:We.id,icon:He,activeId:j})))}),c.createElement(S.ZP,{placement:"top",arrow:!0,title:"Select auto theme"},c.createElement(J.Z,{value:"auto",selected:j===void 0},"Auto\xA0",c.createElement(Zt.Z,{color:j===void 0?"primary":void 0}))))))},ln=()=>{const{isMobile:re}=(0,b.Pf)();return c.createElement(b.rJ,{title:"Appearance",variant:"gridItem"},c.createElement(T.Z,{dense:!0},c.createElement(En,null),!re&&c.createElement(dn,null)))},fe=()=>{const{backstageIdentity:re}=zt();return re?c.createElement(x.Z,{container:!0,spacing:1},c.createElement(x.Z,{item:!0,xs:12},c.createElement(E.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",c.createElement(Re.rI,{entityRefs:[re.userEntityRef],getTitle:A=>A}))),c.createElement(x.Z,{item:!0,xs:12},c.createElement(E.Z,{variant:"subtitle1"},"Ownership Entities:"," ",c.createElement(Re.rI,{entityRefs:re.ownershipEntityRefs,getTitle:A=>A})))):c.createElement(E.Z,null,"No Backstage Identity")},V=()=>c.createElement(b.rJ,{title:"Backstage Identity"},c.createElement(fe,null)),X=()=>c.createElement(x.Z,{container:!0,direction:"row",spacing:3},c.createElement(x.Z,{item:!0,xs:12,md:6},c.createElement(hn,null)),c.createElement(x.Z,{item:!0,xs:12,md:6},c.createElement(ln,null)),c.createElement(x.Z,{item:!0,xs:12,md:6},c.createElement(V,null))),ue="plugin.user-settings.settingsLayout",ge="plugin.user-settings.settingsLayoutRoute",Se=()=>null;(0,a.R5)(Se,ge,!0),(0,a.R5)(Se,"core.gatherMountPoints",!0);const ot=re=>{const{title:A,children:j}=re,{isMobile:Q}=(0,b.Pf)(),me=(0,a.vJ)(j,We=>We.selectByComponentData({key:ge,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(Ke=>Ke.props));return c.createElement(b.T3,{themeId:"home"},!Q&&c.createElement(b.h4,{title:A!=null?A:"Settings"}),c.createElement(b.tn,{routes:me}))};(0,a.R5)(ot,ue,!0),ot.Route=Se;const tt=re=>{const{providerSettings:A,tabs:j}=re;return c.createElement(ot,null,c.createElement(ot.Route,{path:"general",title:"General"},c.createElement(X,null)),c.createElement(ot.Route,{path:"auth-providers",title:"Authentication Providers"},c.createElement(oe,{providerSettings:A})),c.createElement(ot.Route,{path:"feature-flags",title:"Feature Flags"},c.createElement(qt,null)),j)},pt=re=>{const{providerSettings:A}=re,j=(0,t.pC)(),Q=(0,a.vJ)(j,We=>We.selectByComponentData({key:ue}).getElements()),me=(0,a.vJ)(j,We=>We.selectByComponentData({key:ge}).getElements());return c.createElement(c.Fragment,null,Q.length!==0&&Q||c.createElement(tt,{tabs:me,providerSettings:A}))},Lt=ge,de=re=>c.createElement(ot.Route,{path:re.path,title:re.title},c.createElement(c.Fragment,null,"props.children"));(0,a.R5)(de,Lt,"UserSettingsTab")},18473:function(Rt,d,e){e.d(d,{CT:function(){return _},EI:function(){return c},Vt:function(){return b},uW:function(){return a}});var n=e(2784);function l(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const u=l(),m=E=>`__@backstage/${E}__`;function a(E,h){const $=m(E);let L=u[$];return L||(L=h(),u[$]=L,L)}function c(E){Object.freeze(E);const h={atVersion($){return E[$]}};return Object.defineProperty(h,"$map",{configurable:!0,enumerable:!0,get(){return E}}),h}function _(E){return a(E,()=>(0,n.createContext)(void 0))}function b(E){return(0,n.useContext)(_(E))}function t(E){return{set(h){globalThis[`__@backstage/${E}__`]=createContext(c(h))},reset(){delete globalThis[`__@backstage/${E}__`]}}}},52059:function(Rt,d,e){Rt.exports=e.p+"static/createComponent.975d1e1e..svg"},79265:function(Rt,d,e){Rt.exports=e.p+"static/missingAnnotation.67f79e98..svg"},38225:function(Rt,d,e){Rt.exports=e.p+"static/noBuild.1715fa71..svg"},85910:function(Rt,d,e){Rt.exports=e.p+"static/noInformation.4b426325..svg"},53305:function(Rt,d,e){Rt.exports=e.p+"static/mic-drop.fe3ef4d0..svg"},85310:function(Rt){Rt.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},51020:function(Rt){Rt.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);})();

//# sourceMappingURL=module-backstage.86ce9d77.js.map